var uI=Object.defineProperty,cI=Object.defineProperties,dI=Object.getOwnPropertyDescriptors,BE=Object.getOwnPropertySymbols,hI=Object.prototype.hasOwnProperty,fI=Object.prototype.propertyIsEnumerable,VE=(dn,ft,L)=>ft in dn?uI(dn,ft,{enumerable:!0,configurable:!0,writable:!0,value:L}):dn[ft]=L,UE=(dn,ft)=>{for(var L in ft||(ft={}))hI.call(ft,L)&&VE(dn,L,ft[L]);if(BE)for(var L of BE(ft))fI.call(ft,L)&&VE(dn,L,ft[L]);return dn},$E=(dn,ft)=>cI(dn,dI(ft));(self.webpackChunkapp=self.webpackChunkapp||[]).push([[179],{440:(dn,ft,L)=>{"use strict";L.d(ft,{nm:()=>ee});var a=L(6351);L(5e3),L(5867);var dt=L(5861),St=L(9681),Pt=L(4859),Xe=L(2090),Tt=L(1877);const me=new Map,Oe={activated:!1,tokenObservers:[]},Se={initialized:!1,enabled:!1};function fe(ot){return me.get(ot)||Oe}function ye(ot,nt){me.set(ot,nt)}function je(){return Se}class q{constructor(nt,It,Zt,yn,Pn){if(this.operation=nt,this.retryPolicy=It,this.getWaitDuration=Zt,this.lowerBound=yn,this.upperBound=Pn,this.pending=null,this.nextErrorWaitInterval=yn,yn>Pn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(nt){var It=this;return(0,dt.Z)(function*(){It.stop();try{It.pending=new Xe.BH,yield function bt(ot){return new Promise(nt=>{setTimeout(nt,ot)})}(It.getNextRun(nt)),It.pending.resolve(),yield It.pending.promise,It.pending=new Xe.BH,yield It.operation(),It.pending.resolve(),yield It.pending.promise,It.process(!0).catch(()=>{})}catch(Zt){It.retryPolicy(Zt)?It.process(!1).catch(()=>{}):It.stop()}})()}getNextRun(nt){if(nt)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const It=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),It}}}const tt=new Xe.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Ct(ot){if(!fe(ot).activated)throw tt.create("use-before-activation",{appName:ot.name})}function _n(ot,nt){return gn.apply(this,arguments)}function gn(){return(gn=(0,dt.Z)(function*({url:ot,body:nt},It){const Zt={"Content-Type":"application/json"},yn=It.getImmediate({optional:!0});if(yn){const Ni=yield yn.getHeartbeatsHeader();Ni&&(Zt["X-Firebase-Client"]=Ni)}const Pn={method:"POST",body:JSON.stringify(nt),headers:Zt};let Qr,ui;try{Qr=yield fetch(ot,Pn)}catch(Ni){throw tt.create("fetch-network-error",{originalErrorMessage:Ni.message})}if(200!==Qr.status)throw tt.create("fetch-status-error",{httpStatus:Qr.status});try{ui=yield Qr.json()}catch(Ni){throw tt.create("fetch-parse-error",{originalErrorMessage:Ni.message})}const Ur=ui.ttl.match(/^([\d.]+)(s)$/);if(!Ur||!Ur[2]||isNaN(Number(Ur[1])))throw tt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${ui.ttl}`});const ys=1e3*Number(Ur[1]),cs=Date.now();return{token:ui.token,expireTimeMillis:cs+ys,issuedAtTimeMillis:cs}})).apply(this,arguments)}function Qn(ot,nt){const{projectId:It,appId:Zt,apiKey:yn}=ot.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${It}/apps/${Zt}:exchangeDebugToken?key=${yn}`,body:{debug_token:nt}}}const Rr="firebase-app-check-store";let Bn=null;function nr(){return Bn||(Bn=new Promise((ot,nt)=>{try{const It=indexedDB.open("firebase-app-check-database",1);It.onsuccess=Zt=>{ot(Zt.target.result)},It.onerror=Zt=>{var yn;nt(tt.create("storage-open",{originalErrorMessage:null===(yn=Zt.target.error)||void 0===yn?void 0:yn.message}))},It.onupgradeneeded=Zt=>{0===Zt.oldVersion&&Zt.target.result.createObjectStore(Rr,{keyPath:"compositeKey"})}}catch(It){nt(tt.create("storage-open",{originalErrorMessage:It.message}))}}),Bn)}function kt(){return(kt=(0,dt.Z)(function*(ot,nt){const Zt=(yield nr()).transaction(Rr,"readwrite"),Pn=Zt.objectStore(Rr).put({compositeKey:ot,value:nt});return new Promise((Qr,ui)=>{Pn.onsuccess=Ur=>{Qr()},Zt.onerror=Ur=>{var ys;ui(tt.create("storage-set",{originalErrorMessage:null===(ys=Ur.target.error)||void 0===ys?void 0:ys.message}))}})})).apply(this,arguments)}const Jn=new Tt.Yd("@firebase/app-check");function vr(ot,nt){return(0,Xe.hl)()?function _t(ot,nt){return function en(ot,nt){return kt.apply(this,arguments)}(function Zn(ot){return`${ot.options.appId}-${ot.name}`}(ot),nt)}(ot,nt).catch(It=>{Jn.warn(`Failed to write token to IndexedDB. Error: ${It}`)}):Promise.resolve()}function qe(){return je().enabled}function rt(){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,dt.Z)(function*(){const ot=je();if(ot.enabled&&ot.token)return ot.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const ht={error:"UNKNOWN_ERROR"};function tn(ot){return Xe.US.encodeString(JSON.stringify(ot),!1)}function un(ot){return vn.apply(this,arguments)}function vn(){return(vn=(0,dt.Z)(function*(ot,nt=!1){const It=ot.app;Ct(It);const Zt=fe(It);let Pn,yn=Zt.token;if(!yn){const Ur=yield Zt.cachedTokenPromise;Ur&&zr(Ur)&&(yn=Ur)}if(!nt&&yn&&zr(yn))return{token:yn.token};let ui,Qr=!1;if(qe()){Zt.exchangeTokenPromise||(Zt.exchangeTokenPromise=_n(Qn(It,yield rt()),ot.heartbeatServiceProvider).then(ys=>(Zt.exchangeTokenPromise=void 0,ys)),Qr=!0);const Ur=yield Zt.exchangeTokenPromise;return yield vr(It,Ur),ye(It,Object.assign(Object.assign({},Zt),{token:Ur})),{token:Ur.token}}try{Zt.exchangeTokenPromise||(Zt.exchangeTokenPromise=Zt.provider.getToken().then(Ur=>(Zt.exchangeTokenPromise=void 0,Ur)),Qr=!0),yn=yield Zt.exchangeTokenPromise}catch(Ur){"appCheck/throttled"===Ur.code?Jn.warn(Ur.message):Jn.error(Ur),Pn=Ur}return yn?(ui={token:yn.token},ye(It,Object.assign(Object.assign({},Zt),{token:yn})),yield vr(It,yn)):ui=Dt(Pn),Qr&&Gr(It,ui),ui})).apply(this,arguments)}function Gn(ot,nt){const It=fe(ot),Zt=It.tokenObservers.filter(yn=>yn.next!==nt);0===Zt.length&&It.tokenRefresher&&It.tokenRefresher.isRunning()&&It.tokenRefresher.stop(),ye(ot,Object.assign(Object.assign({},It),{tokenObservers:Zt}))}function An(ot){const{app:nt}=ot,It=fe(nt);let Zt=It.tokenRefresher;Zt||(Zt=function Sr(ot){const{app:nt}=ot;return new q((0,dt.Z)(function*(){let Zt;if(Zt=fe(nt).token?yield un(ot,!0):yield un(ot),Zt.error)throw Zt.error}),()=>!0,()=>{const It=fe(nt);if(It.token){let Zt=It.token.issuedAtTimeMillis+.5*(It.token.expireTimeMillis-It.token.issuedAtTimeMillis)+3e5;return Zt=Math.min(Zt,It.token.expireTimeMillis-3e5),Math.max(0,Zt-Date.now())}return 0},3e4,96e4)}(ot),ye(nt,Object.assign(Object.assign({},It),{tokenRefresher:Zt}))),!Zt.isRunning()&&It.isTokenAutoRefreshEnabled&&Zt.start()}function Gr(ot,nt){const It=fe(ot).tokenObservers;for(const Zt of It)try{"EXTERNAL"===Zt.type&&null!=nt.error?Zt.error(nt.error):Zt.next(nt)}catch(yn){}}function zr(ot){return ot.expireTimeMillis-Date.now()>0}function Dt(ot){return{token:tn(ht),error:ot}}class st{constructor(nt,It){this.app=nt,this.heartbeatServiceProvider=It}_delete(){const{tokenObservers:nt}=fe(this.app);for(const It of nt)Gn(this.app,It.next);return Promise.resolve()}}const wi="app-check-internal";!function oi(){(0,St._registerComponent)(new Pt.wA("app-check",ot=>function Re(ot,nt){return new st(ot,nt)}(ot.getProvider("app").getImmediate(),ot.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((ot,nt,It)=>{ot.getProvider(wi).initialize()})),(0,St._registerComponent)(new Pt.wA(wi,ot=>function gt(ot){return{getToken:nt=>un(ot,nt),addTokenListener:nt=>function Vn(ot,nt,It,Zt){const{app:yn}=ot,Pn=fe(yn),Qr={next:It,error:Zt,type:nt};if(ye(yn,Object.assign(Object.assign({},Pn),{tokenObservers:[...Pn.tokenObservers,Qr]})),Pn.token&&zr(Pn.token)){const ui=Pn.token;Promise.resolve().then(()=>{It({token:ui.token}),An(ot)}).catch(()=>{})}Pn.cachedTokenPromise.then(()=>An(ot))}(ot,"INTERNAL",nt),removeTokenListener:nt=>Gn(ot.app,nt)}}(ot.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,St.registerVersion)("@firebase/app-check","0.5.8")}();class ee{constructor(){return(0,a.vb)("app-check")}}"undefined"!=typeof window&&window},4941:(dn,ft,L)=>{"use strict";L.d(ft,{zQ:()=>mt,ww:()=>wt,rT:()=>je,f7:()=>Mt,L6:()=>fe,_Q:()=>ye,lh:()=>Ze,Qv:()=>Se,nw:()=>Jt});var a=L(5e3),J=L(8929),Z=L(1086),We=L(2916),Ne=L(5254),ae=L(6787),Ae=L(341),De=L(2654),Ie=L(2102),oe=L(5279),ve=L(5283);class ne extends J.xQ{constructor(q=Number.POSITIVE_INFINITY,bt=Number.POSITIVE_INFINITY,Ce){super(),this.scheduler=Ce,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=q<1?1:q,this._windowTime=bt<1?1:bt,bt===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(q){if(!this.isStopped){const bt=this._events;bt.push(q),bt.length>this._bufferSize&&bt.shift()}super.next(q)}nextTimeWindow(q){this.isStopped||(this._events.push(new ce(this._getNow(),q)),this._trimBufferThenGetEvents()),super.next(q)}_subscribe(q){const bt=this._infiniteTimeWindow,Ce=bt?this._events:this._trimBufferThenGetEvents(),tt=this.scheduler,Gt=Ce.length;let Ct;if(this.closed)throw new oe.N;if(this.isStopped||this.hasError?Ct=De.w.EMPTY:(this.observers.push(q),Ct=new ve.W(this,q)),tt&&q.add(q=new Ie.ht(q,tt)),bt)for(let sn=0;sn<Gt&&!q.closed;sn++)q.next(Ce[sn]);else for(let sn=0;sn<Gt&&!q.closed;sn++)q.next(Ce[sn].value);return this.hasError?q.error(this.thrownError):this.isStopped&&q.complete(),Ct}_getNow(){return(this.scheduler||Ae.c).now()}_trimBufferThenGetEvents(){const q=this._getNow(),bt=this._bufferSize,Ce=this._windowTime,tt=this._events,Gt=tt.length;let Ct=0;for(;Ct<Gt&&!(q-tt[Ct].time<Ce);)Ct++;return Gt>bt&&(Ct=Math.max(Ct,Gt-bt)),Ct>0&&tt.splice(0,Ct),tt}}class ce{constructor(q,bt){this.time=q,this.value=bt}}function Ke(Ye,q,bt){let Ce;return Ce=Ye&&"object"==typeof Ye?Ye:{bufferSize:Ye,windowTime:q,refCount:!1,scheduler:bt},tt=>tt.lift(function Ve({bufferSize:Ye=Number.POSITIVE_INFINITY,windowTime:q=Number.POSITIVE_INFINITY,refCount:bt,scheduler:Ce}){let tt,Ct,Gt=0,sn=!1,bn=!1;return function(_n){let gn;Gt++,!tt||sn?(sn=!1,tt=new ne(Ye,q,Ce),gn=tt.subscribe(this),Ct=_n.subscribe({next(qn){tt.next(qn)},error(qn){sn=!0,tt.error(qn)},complete(){bn=!0,Ct=void 0,tt.complete()}}),bn&&(Ct=void 0)):gn=tt.subscribe(this),this.add(()=>{Gt--,gn.unsubscribe(),gn=void 0,Ct&&!bn&&bt&&0===Gt&&(Ct.unsubscribe(),Ct=void 0,tt=void 0)})}}(Ce))}var Ee=L(7545);function Fe(Ye,q){return q?(0,Ee.w)(()=>Ye,q):(0,Ee.w)(()=>Ye)}var Be=L(4850),Et=L(7224),we=L(8915),dt=L(2198),St=L(6351),Pt=L(2011),Xe=L(9808),Tt=L(440),me=L(127);const Se=new a.OlP("angularfire2.auth.use-emulator"),fe=new a.OlP("angularfire2.auth.settings"),ye=new a.OlP("angularfire2.auth.tenant-id"),je=new a.OlP("angularfire2.auth.langugage-code"),Ze=new a.OlP("angularfire2.auth.use-device-language"),Mt=new a.OlP("angularfire.auth.persistence"),Jt=(Ye,q,bt,Ce,tt,Gt,Ct,sn)=>(0,Pt.cc)(`${Ye.name}.auth`,"AngularFireAuth",Ye.name,()=>{const bn=q.runOutsideAngular(()=>Ye.auth());if(bt&&bn.useEmulator(...bt),Ce&&(bn.tenantId=Ce),bn.languageCode=tt,Gt&&bn.useDeviceLanguage(),Ct)for(const[kn,_n]of Object.entries(Ct))bn.settings[kn]=_n;return sn&&bn.setPersistence(sn),bn},[bt,Ce,tt,Gt,Ct,sn]);let mt=(()=>{class Ye{constructor(bt,Ce,tt,Gt,Ct,sn,bn,kn,_n,gn,qn,Zr){const Qn=new J.xQ,Yn=(0,Z.of)(void 0).pipe((0,Ie.QV)(Ct.outsideAngular),(0,Ee.w)(()=>Gt.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,8775)))),(0,Be.U)(()=>(0,Pt.on)(bt,Gt,Ce)),(0,Be.U)(on=>Jt(on,Gt,sn,kn,_n,gn,bn,qn)),Ke({bufferSize:1,refCount:!1}));if((0,Xe.PM)(tt))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Z.of)(null);else{Yn.pipe((0,Et.P)()).subscribe();const Rr=Yn.pipe((0,Ee.w)(nr=>nr.getRedirectResult().then(_r=>_r,()=>null)),St.iC,Ke({bufferSize:1,refCount:!1})),cr=Yn.pipe((0,Ee.w)(nr=>new We.y(_r=>({unsubscribe:Gt.runOutsideAngular(()=>nr.onAuthStateChanged(_t=>_r.next(_t),_t=>_r.error(_t),()=>_r.complete()))})))),Bn=Yn.pipe((0,Ee.w)(nr=>new We.y(_r=>({unsubscribe:Gt.runOutsideAngular(()=>nr.onIdTokenChanged(_t=>_r.next(_t),_t=>_r.error(_t),()=>_r.complete()))}))));this.authState=Rr.pipe(Fe(cr),(0,we.R)(Ct.outsideAngular),(0,Ie.QV)(Ct.insideAngular)),this.user=Rr.pipe(Fe(Bn),(0,we.R)(Ct.outsideAngular),(0,Ie.QV)(Ct.insideAngular)),this.idToken=this.user.pipe((0,Ee.w)(nr=>nr?(0,Ne.D)(nr.getIdToken()):(0,Z.of)(null))),this.idTokenResult=this.user.pipe((0,Ee.w)(nr=>nr?(0,Ne.D)(nr.getIdTokenResult()):(0,Z.of)(null))),this.credential=(0,ae.T)(Rr,Qn,this.authState.pipe((0,dt.h)(nr=>!nr))).pipe((0,Be.U)(nr=>(null==nr?void 0:nr.user)?nr:null),(0,we.R)(Ct.outsideAngular),(0,Ie.QV)(Ct.insideAngular))}return(0,Pt.pX)(this,Yn,Gt,{spy:{apply:(on,Rr,cr)=>{(on.startsWith("signIn")||on.startsWith("createUser"))&&cr.then(Bn=>Qn.next(Bn))}}})}}return Ye.\u0275fac=function(bt){return new(bt||Ye)(a.LFG(Pt.Dh),a.LFG(Pt.xv,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(St.HU),a.LFG(Se,8),a.LFG(fe,8),a.LFG(ye,8),a.LFG(je,8),a.LFG(Ze,8),a.LFG(Mt,8),a.LFG(Tt.nm,8))},Ye.\u0275prov=a.Yz7({token:Ye,factory:Ye.\u0275fac,providedIn:"any"}),Ye})(),wt=(()=>{class Ye{constructor(){me.Z.registerVersion("angularfire",St.q4.full,"auth-compat")}}return Ye.\u0275fac=function(bt){return new(bt||Ye)},Ye.\u0275mod=a.oAB({type:Ye}),Ye.\u0275inj=a.cJS({providers:[mt]}),Ye})()},2796:(dn,ft,L)=>{"use strict";L.d(ft,{ST:()=>Eh,yb:()=>mf});var a=L(5e3),J=L(353),Z=L(2916),We=L(5254),Ne=L(1086),ae=L(6351),Ae=L(3489);function De(){return i=>i.lift(new Ie)}class Ie{call(e,t){return t.subscribe(new oe(e))}}class oe extends Ae.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}var Oe,ve=L(1059),ne=L(4850),ce=L(2014),Ke=L(5778),Ve=L(2198),Ee=L(2011),Fe=L(9808),Et=(L(8775),L(3942)),we=L(5861),dt=L(9681),St=L(4859),Pt=L(1877),Xe=L(2090),Tt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},me={},Se=Se||{},fe=Tt||self;function ye(){}function je(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Ze(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var Jt="closure_uid_"+(1e9*Math.random()>>>0),mt=0;function wt(i,e,t){return i.call.apply(i.bind,arguments)}function Ye(i,e,t){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(d,o),i.apply(e,d)}}return function(){return i.apply(e,arguments)}}function q(i,e,t){return(q=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?wt:Ye).apply(null,arguments)}function bt(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function Ce(i,e){function t(){}t.prototype=e.prototype,i.Z=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Vb=function(o,d,m){for(var I=Array(arguments.length-2),O=2;O<arguments.length;O++)I[O-2]=arguments[O];return e.prototype[d].apply(o,I)}}function tt(){this.s=this.s,this.o=this.o}var Ct={};tt.prototype.s=!1,tt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function Mt(i){return Object.prototype.hasOwnProperty.call(i,Jt)&&i[Jt]||(i[Jt]=++mt)}(this);delete Ct[i]}},tt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const sn=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1},bn=Array.prototype.forEach?function(i,e,t){Array.prototype.forEach.call(i,e,t)}:function(i,e,t){const o=i.length,d="string"==typeof i?i.split(""):i;for(let m=0;m<o;m++)m in d&&e.call(t,d[m],m,i)};function _n(i){return Array.prototype.concat.apply([],arguments)}function gn(i){const e=i.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=i[o];return t}return[]}function qn(i){return/^[\s\xa0]*$/.test(i)}var on,Zr=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Qn(i,e){return-1!=i.indexOf(e)}function Yn(i,e){return i<e?-1:i>e?1:0}e:{var Rr=fe.navigator;if(Rr){var cr=Rr.userAgent;if(cr){on=cr;break e}}on=""}function Bn(i,e,t){for(const o in i)e.call(t,i[o],o,i)}function nr(i){const e={};for(const t in i)e[t]=i[t];return e}var _r="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _t(i,e){let t,o;for(let d=1;d<arguments.length;d++){for(t in o=arguments[d],o)i[t]=o[t];for(let m=0;m<_r.length;m++)t=_r[m],Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])}}function He(i){return He[" "](i),i}He[" "]=ye;var Fn,i,en=Qn(on,"Opera"),kt=Qn(on,"Trident")||Qn(on,"MSIE"),qt=Qn(on,"Edge"),cn=qt||kt,Zn=Qn(on,"Gecko")&&!(Qn(on.toLowerCase(),"webkit")&&!Qn(on,"Edge"))&&!(Qn(on,"Trident")||Qn(on,"MSIE"))&&!Qn(on,"Edge"),Jn=Qn(on.toLowerCase(),"webkit")&&!Qn(on,"Edge");function Mn(){var i=fe.document;return i?i.documentMode:void 0}e:{var vr="",Hn=(i=on,Zn?/rv:([^\);]+)(\)|;)/.exec(i):qt?/Edge\/([\d\.]+)/.exec(i):kt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Jn?/WebKit\/(\S+)/.exec(i):en?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Hn&&(vr=Hn?Hn[1]:""),kt){var xe=Mn();if(null!=xe&&xe>parseFloat(vr)){Fn=String(xe);break e}}Fn=vr}var qe={};var ht=fe.document&&kt&&(Mn()||parseInt(Fn,10))||void 0,tn=function(){if(!fe.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{fe.addEventListener("test",ye,e),fe.removeEventListener("test",ye,e)}catch(t){}return i}();function un(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}function vn(i,e){if(un.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Zn){e:{try{He(e.nodeName);var d=!0;break e}catch(m){}d=!1}d||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Vn[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&vn.Z.h.call(this)}}un.prototype.h=function(){this.defaultPrevented=!0},Ce(vn,un);var Vn={2:"touch",3:"pen",4:"mouse"};vn.prototype.h=function(){vn.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Gn="closure_listenable_"+(1e6*Math.random()|0),An=0;function Sr(i,e,t,o,d){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ia=d,this.key=++An,this.ca=this.fa=!1}function Gr(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function zr(i){this.src=i,this.g={},this.h=0}function Dt(i,e){var t=e.type;if(t in i.g){var m,o=i.g[t],d=sn(o,e);(m=0<=d)&&Array.prototype.splice.call(o,d,1),m&&(Gr(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function st(i,e,t,o){for(var d=0;d<i.length;++d){var m=i[d];if(!m.ca&&m.listener==e&&m.capture==!!t&&m.ia==o)return d}return-1}zr.prototype.add=function(i,e,t,o,d){var m=i.toString();(i=this.g[m])||(i=this.g[m]=[],this.h++);var I=st(i,e,o,d);return-1<I?(e=i[I],t||(e.fa=!1)):((e=new Sr(e,this.src,m,!!o,d)).fa=t,i.push(e)),e};var Re="closure_lm_"+(1e6*Math.random()|0),gt={};function Kt(i,e,t,o,d){if(o&&o.once)return Er(i,e,t,o,d);if(Array.isArray(e)){for(var m=0;m<e.length;m++)Kt(i,e[m],t,o,d);return null}return t=Kr(t),i&&i[Gn]?i.N(e,t,Ze(o)?!!o.capture:!!o,d):Ln(i,e,t,!1,o,d)}function Ln(i,e,t,o,d,m){if(!e)throw Error("Invalid event type");var I=Ze(d)?!!d.capture:!!d,O=Br(i);if(O||(i[Re]=O=new zr(i)),(t=O.add(e,t,o,I,m)).proxy)return t;if(o=function zn(){var e=Ei;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=o,o.src=i,o.listener=t,i.addEventListener)tn||(d=I),void 0===d&&(d=!1),i.addEventListener(e.toString(),o,d);else if(i.attachEvent)i.attachEvent(Ki(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return t}function Er(i,e,t,o,d){if(Array.isArray(e)){for(var m=0;m<e.length;m++)Er(i,e[m],t,o,d);return null}return t=Kr(t),i&&i[Gn]?i.O(e,t,Ze(o)?!!o.capture:!!o,d):Ln(i,e,t,!0,o,d)}function Wn(i,e,t,o,d){if(Array.isArray(e))for(var m=0;m<e.length;m++)Wn(i,e[m],t,o,d);else o=Ze(o)?!!o.capture:!!o,t=Kr(t),i&&i[Gn]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=st(m=i.g[e],t,o,d))&&(Gr(m[t]),Array.prototype.splice.call(m,t,1),0==m.length&&(delete i.g[e],i.h--))):i&&(i=Br(i))&&(e=i.g[e.toString()],i=-1,e&&(i=st(e,t,o,d)),(t=-1<i?e[i]:null)&&di(t))}function di(i){if("number"!=typeof i&&i&&!i.ca){var e=i.src;if(e&&e[Gn])Dt(e.i,i);else{var t=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(t,o,i.capture):e.detachEvent?e.detachEvent(Ki(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=Br(e))?(Dt(t,i),0==t.h&&(t.src=null,e[Re]=null)):Gr(i)}}}function Ki(i){return i in gt?gt[i]:gt[i]="on"+i}function Ei(i,e){if(i.ca)i=!0;else{e=new vn(e,this);var t=i.listener,o=i.ia||i.src;i.fa&&di(i),i=t.call(o,e)}return i}function Br(i){return(i=i[Re])instanceof zr?i:null}var Yr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kr(i){return"function"==typeof i?i:(i[Yr]||(i[Yr]=function(e){return i.handleEvent(e)}),i[Yr])}function nn(){tt.call(this),this.i=new zr(this),this.P=this,this.I=null}function wn(i,e){var t,o=i.I;if(o)for(t=[];o;o=o.I)t.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new un(e,i);else if(e instanceof un)e.target=e.target||i;else{var d=e;_t(e=new un(o,i),d)}if(d=!0,t)for(var m=t.length-1;0<=m;m--){var I=e.g=t[m];d=ir(I,o,!0,e)&&d}if(d=ir(I=e.g=i,o,!0,e)&&d,d=ir(I,o,!1,e)&&d,t)for(m=0;m<t.length;m++)d=ir(I=e.g=t[m],o,!1,e)&&d}function ir(i,e,t,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var d=!0,m=0;m<e.length;++m){var I=e[m];if(I&&!I.ca&&I.capture==t){var O=I.listener,Q=I.ia||I.src;I.fa&&Dt(i.i,I),d=!1!==O.call(Q,o)&&d}}return d&&!o.defaultPrevented}Ce(nn,tt),nn.prototype[Gn]=!0,nn.prototype.removeEventListener=function(i,e,t,o){Wn(this,i,e,t,o)},nn.prototype.M=function(){if(nn.Z.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],o=0;o<t.length;o++)Gr(t[o]);delete i.g[e],i.h--}}this.I=null},nn.prototype.N=function(i,e,t,o){return this.i.add(String(i),e,!1,t,o)},nn.prototype.O=function(i,e,t,o){return this.i.add(String(i),e,!0,t,o)};var ii=fe.JSON.stringify;function ni(){var i=Mi;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var sr,yi=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new Wr,i=>i.reset());class Wr{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function bi(i){fe.setTimeout(()=>{throw i},0)}function Xr(i,e){sr||function Zi(){var i=fe.Promise.resolve(void 0);sr=function(){i.then(wi)}}(),Oi||(sr(),Oi=!0),Mi.add(i,e)}var Oi=!1,Mi=new class Vr{constructor(){this.h=this.g=null}add(e,t){const o=yi.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function wi(){for(var i;i=ni();){try{i.h.call(i.g)}catch(t){bi(t)}var e=yi;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Oi=!1}function oi(i,e){nn.call(this),this.h=i||1,this.g=e||fe,this.j=q(this.kb,this),this.l=Date.now()}function ki(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function Si(i,e,t){if("function"==typeof i)t&&(i=q(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=q(i.handleEvent,i)}return 2147483647<Number(e)?-1:fe.setTimeout(i,e||0)}function ee(i){i.g=Si(()=>{i.g=null,i.i&&(i.i=!1,ee(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}Ce(oi,nn),(Oe=oi.prototype).da=!1,Oe.S=null,Oe.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),wn(this,"tick"),this.da&&(ki(this),this.start()))}},Oe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Oe.M=function(){oi.Z.M.call(this),ki(this),delete this.g};class _e extends tt{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ee(this)}M(){super.M(),this.g&&(fe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Je(i){tt.call(this),this.h=i,this.g={}}Ce(Je,tt);var pt=[];function be(i,e,t,o){Array.isArray(t)||(t&&(pt[0]=t.toString()),t=pt);for(var d=0;d<t.length;d++){var m=Kt(e,t[d],o||i.handleEvent,!1,i.h||i);if(!m)break;i.g[m.key]=m}}function ke(i){Bn(i.g,function(e,t){this.g.hasOwnProperty(t)&&di(e)},i),i.g={}}function yt(){this.g=!0}function Ot(i,e,t,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function er(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var o=t[i];if(!(2>o.length)){var d=o[1];if(Array.isArray(d)&&!(1>d.length)){var m=d[0];if("noop"!=m&&"stop"!=m&&"close"!=m)for(var I=1;I<d.length;I++)d[I]=""}}}return ii(t)}catch(O){return e}}(i,t)+(o?" "+o:"")})}Je.prototype.M=function(){Je.Z.M.call(this),ke(this)},Je.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},yt.prototype.Aa=function(){this.g=!1},yt.prototype.info=function(){};var rr={},Tr=null;function si(){return Tr=Tr||new nn}function _i(i){un.call(this,rr.Ma,i)}function ot(i){const e=si();wn(e,new _i(e,i))}function nt(i,e){un.call(this,rr.STAT_EVENT,i),this.stat=e}function It(i){const e=si();wn(e,new nt(e,i))}function Zt(i,e){un.call(this,rr.Na,i),this.size=e}function yn(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return fe.setTimeout(function(){i()},e)}rr.Ma="serverreachability",Ce(_i,un),rr.STAT_EVENT="statevent",Ce(nt,un),rr.Na="timingevent",Ce(Zt,un);var Pn={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Qr={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ui(){}function ys(){}ui.prototype.h=null;var Ts,cs={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ni(){un.call(this,"d")}function no(){un.call(this,"c")}function Pr(){}function $r(i,e,t,o){this.l=i,this.j=e,this.m=t,this.X=o||1,this.V=new Je(this),this.P=hi,this.W=new oi(i=cn?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ar}function Ar(){this.i=null,this.g="",this.h=!1}Ce(Ni,un),Ce(no,un),Ce(Pr,ui),Pr.prototype.g=function(){return new XMLHttpRequest},Pr.prototype.i=function(){return{}},Ts=new Pr;var hi=45e3,Or={},Xi={};function _s(i,e,t){i.K=1,i.v=zt(j(e)),i.s=t,i.U=!0,Ss(i,null)}function Ss(i,e){i.F=Date.now(),Ii(i),i.A=j(i.v);var t=i.A,o=i.X;Array.isArray(o)||(o=[String(o)]),N(t.h,"t",o),i.C=0,t=i.l.H,i.h=new Ar,i.g=ws(i.l,t?e:null,!i.s),0<i.O&&(i.L=new _e(q(i.Ia,i,i.g),i.O)),be(i.V,i.g,"readystatechange",i.gb),e=i.H?nr(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,e)):(i.u="GET",i.g.ea(i.A,i.u,null,e)),ot(1),function jt(i,e,t,o,d,m){i.info(function(){if(i.g)if(m)for(var I="",O=m.split("&"),Q=0;Q<O.length;Q++){var te=O[Q].split("=");if(1<te.length){var Ue=te[0];te=te[1];var ut=Ue.split("_");I=2<=ut.length&&"type"==ut[1]?I+(Ue+"=")+te+"&":I+(Ue+"=redacted&")}}else I=null;else I=m;return"XMLHTTP REQ ("+o+") [attempt "+d+"]: "+e+"\n"+t+"\n"+I})}(i.j,i.u,i.A,i.m,i.X,i.s)}function ro(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function ai(i,e,t){let d,o=!0;for(;!i.I&&i.C<t.length;){if(d=pr(i,t),d==Xi){4==e&&(i.o=4,It(14),o=!1),Ot(i.j,i.m,null,"[Incomplete Response]");break}if(d==Or){i.o=4,It(15),Ot(i.j,i.m,t,"[Invalid Chunk]"),o=!1;break}Ot(i.j,i.m,d,null),Ri(i,d)}ro(i)&&d!=Xi&&d!=Or&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,It(16),o=!1),i.i=i.i&&o,o?0<t.length&&!i.aa&&(i.aa=!0,(e=i.l).g==i&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Ho(e),e.L=!0,It(11))):(Ot(i.j,i.m,t,"[Invalid Chunked Response]"),vs(i),kr(i))}function pr(i,e){var t=i.C,o=e.indexOf("\n",t);return-1==o?Xi:(t=Number(e.substring(t,o)),isNaN(t)?Or:(o+=1)+t>e.length?Xi:(e=e.substr(o,t),i.C=o+t,e))}function Ii(i){i.Y=Date.now()+i.P,ds(i,i.P)}function ds(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=yn(q(i.eb,i),e)}function Qi(i){i.B&&(fe.clearTimeout(i.B),i.B=null)}function kr(i){0==i.l.G||i.I||Ko(i.l,i)}function vs(i){Qi(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,ki(i.W),ke(i.V),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function Ri(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||W(t.i,i)))if(t.I=i.N,!i.J&&W(t.i,i)&&3==t.G){try{var o=t.Ca.g.parse(e)}catch(te){o=null}if(Array.isArray(o)&&3==o.length){var d=o;if(0==d[0])e:if(t.u)t.ta=d[1],0<t.ta-t.U&&37500>d[2]&&t.N&&0==t.A&&!t.v&&(t.v=yn(q(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<i.F))break e;Xa(t),ss(t)}Ns(t),It(18)}if(1>=C(t.i)&&t.ka){try{t.ka()}catch(te){}t.ka=void 0}}else Zo(t,11)}else if((i.J||t.g==i)&&Xa(t),!qn(e))for(d=t.Ca.g.parse(e),e=0;e<d.length;e++){let te=d[e];if(t.U=te[0],te=te[1],2==t.G)if("c"==te[0]){t.J=te[1],t.la=te[2];const Ue=te[3];null!=Ue&&(t.ma=Ue,t.h.info("VER="+t.ma));const ut=te[4];null!=ut&&(t.za=ut,t.h.info("SVER="+t.za));const $t=te[5];null!=$t&&"number"==typeof $t&&0<$t&&(t.K=o=1.5*$t,t.h.info("backChannelRequestTimeoutMs_="+o)),o=t;const fn=i.g;if(fn){const mn=fn.g?fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(mn){var m=o.i;!m.g&&(Qn(mn,"spdy")||Qn(mn,"quic")||Qn(mn,"h2"))&&(m.j=m.l,m.g=new Set,m.h&&(pe(m,m.h),m.h=null))}if(o.D){const tr=fn.g?fn.g.getResponseHeader("X-HTTP-Session-Id"):null;tr&&(o.sa=tr,ct(o.F,o.D,tr))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-i.F,t.h.info("Handshake RTT: "+t.O+"ms"));var I=i;if((o=t).oa=As(o,o.H?o.la:null,o.W),I.J){Le(o.i,I);var O=I,Q=o.K;Q&&O.setTimeout(Q),O.B&&(Qi(O),Ii(O)),o.g=I}else Do(o);0<t.l.length&&Za(t)}else"stop"!=te[0]&&"close"!=te[0]||Zo(t,7);else 3==t.G&&("stop"==te[0]||"close"==te[0]?"stop"==te[0]?Zo(t,7):Co(t):"noop"!=te[0]&&t.j&&t.j.wa(te),t.A=0)}ot(4)}catch(te){}}function es(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(je(i)||"string"==typeof i)bn(i,e,void 0);else{if(i.T&&"function"==typeof i.T)var t=i.T();else if(i.R&&"function"==typeof i.R)t=void 0;else if(je(i)||"string"==typeof i){t=[];for(var o=i.length,d=0;d<o;d++)t.push(d)}else for(d in t=[],o=0,i)t[o++]=d;o=function uo(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(je(i)){for(var e=[],t=i.length,o=0;o<t;o++)e.push(i[o]);return e}for(o in e=[],t=0,i)e[t++]=i[o];return e}(i),d=o.length;for(var m=0;m<d;m++)e.call(void 0,o[m],t&&t[m],i)}}function as(i,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var o=0;o<t;o+=2)this.set(arguments[o],arguments[o+1])}else if(i)if(i instanceof as)for(t=i.T(),o=0;o<t.length;o++)this.set(t[o],i.get(t[o]));else for(o in i)this.set(o,i[o])}function Es(i){if(i.i!=i.g.length){for(var e=0,t=0;e<i.g.length;){var o=i.g[e];ji(i.h,o)&&(i.g[t++]=o),e++}i.g.length=t}if(i.i!=i.g.length){var d={};for(t=e=0;e<i.g.length;)ji(d,o=i.g[e])||(i.g[t++]=o,d[o]=1),e++;i.g.length=t}}function ji(i,e){return Object.prototype.hasOwnProperty.call(i,e)}(Oe=$r.prototype).setTimeout=function(i){this.P=i},Oe.gb=function(i){i=i.target;const e=this.L;e&&3==Os(i)?e.l():this.Ia(i)},Oe.Ia=function(i){try{if(i==this.g)e:{const Ue=Os(this.g);var e=this.g.Da();const ut=this.g.ba();if(!(3>Ue)&&(3!=Ue||cn||this.g&&(this.h.h||this.g.ga()||Ya(this.g)))){this.I||4!=Ue||7==e||ot(8==e||0>=ut?3:2),Qi(this);var t=this.g.ba();this.N=t;t:if(ro(this)){var o=Ya(this.g);i="";var d=o.length,m=4==Os(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){vs(this),kr(this);var I="";break t}this.h.i=new fe.TextDecoder}for(e=0;e<d;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:m&&e==d-1});o.splice(0,d),this.h.g+=i,this.C=0,I=this.h.g}else I=this.g.ga();if(this.i=200==t,function Nt(i,e,t,o,d,m,I){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+d+"]: "+e+"\n"+t+"\n"+m+" "+I})}(this.j,this.u,this.A,this.m,this.X,Ue,t),this.i){if(this.$&&!this.J){t:{if(this.g){var O,Q=this.g;if((O=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!qn(O)){var te=O;break t}}te=null}if(!(t=te)){this.i=!1,this.o=3,It(12),vs(this),kr(this);break e}Ot(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ri(this,t)}this.U?(ai(this,Ue,I),cn&&this.i&&3==Ue&&(be(this.V,this.W,"tick",this.fb),this.W.start())):(Ot(this.j,this.m,I,null),Ri(this,I)),4==Ue&&vs(this),this.i&&!this.I&&(4==Ue?Ko(this.l,this):(this.i=!1,Ii(this)))}else 400==t&&0<I.indexOf("Unknown SID")?(this.o=3,It(12)):(this.o=0,It(13)),vs(this),kr(this)}}}catch(Ue){}},Oe.fb=function(){if(this.g){var i=Os(this.g),e=this.g.ga();this.C<e.length&&(Qi(this),ai(this,i,e),this.i&&4!=i&&Ii(this))}},Oe.cancel=function(){this.I=!0,vs(this)},Oe.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function Tn(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(ot(3),It(17)),vs(this),this.o=2,kr(this)):ds(this,this.Y-i)},(Oe=as.prototype).R=function(){Es(this);for(var i=[],e=0;e<this.g.length;e++)i.push(this.h[this.g[e]]);return i},Oe.T=function(){return Es(this),this.g.concat()},Oe.get=function(i,e){return ji(this.h,i)?this.h[i]:e},Oe.set=function(i,e){ji(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=e},Oe.forEach=function(i,e){for(var t=this.T(),o=0;o<t.length;o++){var d=t[o],m=this.get(d);i.call(e,m,d,this)}};var ts=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function jr(i,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof jr){this.g=void 0!==e?e:i.g,se(this,i.j),this.s=i.s,$(this,i.i),de(this,i.m),this.l=i.l,e=i.h;var t=new Xn;t.i=e.i,e.g&&(t.g=new as(e.g),t.h=e.h),et(this,t),this.o=i.o}else i&&(t=String(i).match(ts))?(this.g=!!e,se(this,t[1]||"",!0),this.s=br(t[2]||""),$(this,t[3]||"",!0),de(this,t[4]),this.l=br(t[5]||"",!0),et(this,t[6]||"",!0),this.o=br(t[7]||"")):(this.g=!!e,this.h=new Xn(null,this.g))}function j(i){return new jr(i)}function se(i,e,t){i.j=t?br(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function $(i,e,t){i.i=t?br(e,!0):e}function de(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function et(i,e,t){e instanceof Xn?(i.h=e,function Ut(i,e){e&&!i.j&&(Bi(i),i.i=null,i.g.forEach(function(t,o){var d=o.toLowerCase();o!=d&&(H(this,o),N(this,d,t))},i)),i.j=e}(i.h,i.g)):(t||(e=dr(e,bs)),i.h=new Xn(e,i.g))}function ct(i,e,t){i.h.set(e,t)}function zt(i){return ct(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function br(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function dr(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,wr),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function wr(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}jr.prototype.toString=function(){var i=[],e=this.j;e&&i.push(dr(e,Fi,!0),":");var t=this.i;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(dr(e,Fi,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&i.push("/"),i.push(dr(t,"/"==t.charAt(0)?vi:Nr,!0))),(t=this.h.toString())&&i.push("?",t),(t=this.o)&&i.push("#",dr(t,ns)),i.join("")};var Fi=/[#\/\?@]/g,Nr=/[#\?:]/g,vi=/[#\?]/g,bs=/[#\?@]/g,ns=/#/g;function Xn(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Bi(i){i.g||(i.g=new as,i.h=0,i.i&&function $o(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var o=i[t].indexOf("="),d=null;if(0<=o){var m=i[t].substring(0,o);d=i[t].substring(o+1)}else m=i[t];e(m,d?decodeURIComponent(d.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function H(i,e){Bi(i),e=re(i,e),ji(i.g.h,e)&&(i.i=null,i.h-=i.g.get(e).length,ji((i=i.g).h,e)&&(delete i.h[e],i.i--,i.g.length>2*i.i&&Es(i)))}function B(i,e){return Bi(i),e=re(i,e),ji(i.g.h,e)}function N(i,e,t){H(i,e),0<t.length&&(i.i=null,i.g.set(re(i,e),gn(t)),i.h+=t.length)}function re(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function k(i){this.l=i||b,i=fe.PerformanceNavigationTiming?0<(i=fe.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(fe.g&&fe.g.Ea&&fe.g.Ea()&&fe.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Oe=Xn.prototype).add=function(i,e){Bi(this),this.i=null,i=re(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},Oe.forEach=function(i,e){Bi(this),this.g.forEach(function(t,o){bn(t,function(d){i.call(e,d,o,this)},this)},this)},Oe.T=function(){Bi(this);for(var i=this.g.R(),e=this.g.T(),t=[],o=0;o<e.length;o++)for(var d=i[o],m=0;m<d.length;m++)t.push(e[o]);return t},Oe.R=function(i){Bi(this);var e=[];if("string"==typeof i)B(this,i)&&(e=_n(e,this.g.get(re(this,i))));else{i=this.g.R();for(var t=0;t<i.length;t++)e=_n(e,i[t])}return e},Oe.set=function(i,e){return Bi(this),this.i=null,B(this,i=re(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},Oe.get=function(i,e){return i&&0<(i=this.R(i)).length?String(i[0]):e},Oe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],e=this.g.T(),t=0;t<e.length;t++){var o=e[t],d=encodeURIComponent(String(o));o=this.R(o);for(var m=0;m<o.length;m++){var I=d;""!==o[m]&&(I+="="+encodeURIComponent(String(o[m]))),i.push(I)}}return this.i=i.join("&")};var b=10;function v(i){return!!i.h||!!i.g&&i.g.size>=i.j}function C(i){return i.h?1:i.g?i.g.size:0}function W(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function pe(i,e){i.g?i.g.add(e):i.h=e}function Le(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function vt(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return gn(i.i)}function Ht(){}function In(){this.g=new Ht}function Wt(i,e,t){const o=t||"";try{es(i,function(d,m){let I=d;Ze(d)&&(I=ii(d)),e.push(o+m+"="+encodeURIComponent(I))})}catch(d){throw e.push(o+"type="+encodeURIComponent("_badmap")),d}}function mr(i,e,t,o,d){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,d(o)}catch(m){}}function Dr(i){this.l=i.$b||null,this.j=i.ib||!1}function Un(i,e){nn.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=Ci,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}k.prototype.cancel=function(){if(this.i=vt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},Ht.prototype.stringify=function(i){return fe.JSON.stringify(i,void 0)},Ht.prototype.parse=function(i){return fe.JSON.parse(i,void 0)},Ce(Dr,ui),Dr.prototype.g=function(){return new Un(this.l,this.j)},Dr.prototype.i=function(i){return function(){return i}}({}),Ce(Un,nn);var Ci=0;function Di(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function Ai(i){i.readyState=4,i.l=null,i.j=null,i.A=null,fi(i)}function fi(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(Oe=Un.prototype).open=function(i,e){if(this.readyState!=Ci)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,fi(this)},Oe.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||fe).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Oe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ai(this)),this.readyState=Ci},Oe.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,fi(this)),this.g&&(this.readyState=3,fi(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==fe.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Di(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},Oe.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Ai(this):fi(this),3==this.readyState&&Di(this)}},Oe.Ua=function(i){this.g&&(this.response=this.responseText=i,Ai(this))},Oe.Ta=function(i){this.g&&(this.response=i,Ai(this))},Oe.ha=function(){this.g&&Ai(this)},Oe.setRequestHeader=function(i,e){this.v.append(i,e)},Oe.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},Oe.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(Un.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Ws=fe.JSON.parse;function pi(i){nn.call(this),this.headers=new as,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=rs,this.K=this.L=!1}Ce(pi,nn);var rs="",is=/^https?$/i,co=["POST","PUT"];function jo(i){return"content-type"==i.toLowerCase()}function fo(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,po(i),ua(i)}function po(i){i.D||(i.D=!0,wn(i,"complete"),wn(i,"error"))}function No(i){if(i.h&&void 0!==Se&&(!i.C[1]||4!=Os(i)||2!=i.ba()))if(i.v&&4==Os(i))Si(i.Fa,0,i);else if(wn(i,"readystatechange"),4==Os(i)){i.h=!1;try{const O=i.ba();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===O){var d=String(i.H).match(ts)[1]||null;if(!d&&fe.self&&fe.self.location){var m=fe.self.location.protocol;d=m.substr(0,m.length-1)}o=!is.test(d?d.toLowerCase():"")}t=o}if(t)wn(i,"complete"),wn(i,"success");else{i.m=6;try{var I=2<Os(i)?i.g.statusText:""}catch(Q){I=""}i.j=I+" ["+i.ba()+"]",po(i)}}finally{ua(i)}}}function ua(i,e){if(i.g){Ma(i);const t=i.g,o=i.C[0]?ye:null;i.g=null,i.C=null,e||wn(i,"ready");try{t.onreadystatechange=o}catch(d){}}}function Ma(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(fe.clearTimeout(i.A),i.A=null)}function Os(i){return i.g?i.g.readyState:0}function Ya(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case rs:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Ra(i,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=function Yo(i){let e="";return Bn(i,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):ct(i,e,t))}function Pa(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function ks(i){this.za=0,this.l=[],this.h=new yt,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Pa("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Pa("baseRetryDelayMs",5e3,i),this.$a=Pa("retryDelaySeedMs",1e4,i),this.Ya=Pa("forwardChannelMaxRetries",2,i),this.ra=Pa("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new k(i&&i.concurrentRequestLimit),this.Ca=new In,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function Co(i){if(ou(i),3==i.G){var e=i.V++,t=j(i.F);ct(t,"SID",i.J),ct(t,"RID",e),ct(t,"TYPE","terminate"),wa(i,t),(e=new $r(i,i.h,e,void 0)).K=2,e.v=zt(j(t)),t=!1,fe.navigator&&fe.navigator.sendBeacon&&(t=fe.navigator.sendBeacon(e.v.toString(),"")),!t&&fe.Image&&((new Image).src=e.v,t=!0),t||(e.g=ws(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Ii(e)}ka(i)}function ss(i){i.g&&(Ho(i),i.g.cancel(),i.g=null)}function ou(i){ss(i),i.u&&(fe.clearTimeout(i.u),i.u=null),Xa(i),i.i.cancel(),i.m&&("number"==typeof i.m&&fe.clearTimeout(i.m),i.m=null)}function Ka(i,e){i.l.push(new class{constructor(i,e){this.h=i,this.g=e}}(i.Za++,e)),3==i.G&&Za(i)}function Za(i){v(i.i)||i.m||(i.m=!0,Xr(i.Ha,i),i.C=0)}function Oa(i,e){var t;t=e?e.m:i.V++;const o=j(i.F);ct(o,"SID",i.J),ct(o,"RID",t),ct(o,"AID",i.U),wa(i,o),i.o&&i.s&&Ra(o,i.o,i.s),t=new $r(i,i.h,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.l=e.D.concat(i.l)),e=cl(i,t,1e3),t.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),pe(i.i,t),_s(t,o,e)}function wa(i,e){i.j&&es({},function(t,o){ct(e,o,t)})}function cl(i,e,t){t=Math.min(i.l.length,t);var o=i.j?q(i.j.Oa,i.j,i):null;e:{var d=i.l;let m=-1;for(;;){const I=["count="+t];-1==m?0<t?(m=d[0].h,I.push("ofs="+m)):m=0:I.push("ofs="+m);let O=!0;for(let Q=0;Q<t;Q++){let te=d[Q].h;const Ue=d[Q].g;if(te-=m,0>te)m=Math.max(0,d[Q].h-100),O=!1;else try{Wt(Ue,I,"req"+te+"_")}catch(ut){o&&o(Ue)}}if(O){o=I.join("&");break e}}}return i=i.l.splice(0,t),e.D=i,o}function Do(i){i.g||i.u||(i.Y=1,Xr(i.Ga,i),i.A=0)}function Ns(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=yn(q(i.Ga,i),ca(i,i.A)),i.A++,0))}function Ho(i){null!=i.B&&(fe.clearTimeout(i.B),i.B=null)}function hs(i){i.g=new $r(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var e=j(i.oa);ct(e,"RID","rpc"),ct(e,"SID",i.J),ct(e,"CI",i.N?"0":"1"),ct(e,"AID",i.U),wa(i,e),ct(e,"TYPE","xmlhttp"),i.o&&i.s&&Ra(e,i.o,i.s),i.K&&i.g.setTimeout(i.K);var t=i.g;i=i.la,t.K=1,t.v=zt(j(e)),t.s=null,t.U=!0,Ss(t,i)}function Xa(i){null!=i.v&&(fe.clearTimeout(i.v),i.v=null)}function Ko(i,e){var t=null;if(i.g==e){Xa(i),Ho(i),i.g=null;var o=2}else{if(!W(i.i,e))return;t=e.D,Le(i.i,e),o=1}if(i.I=e.N,0!=i.G)if(e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var d=i.C;wn(o=si(),new Zt(o,t,e,d)),Za(i)}else Do(i);else if(3==(d=e.o)||0==d&&0<i.I||!(1==o&&function au(i,e){return!(C(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=e.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=yn(q(i.Ha,i,e),ca(i,i.C)),i.C++,0)))}(i,e)||2==o&&Ns(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),d){case 1:Zo(i,5);break;case 4:Zo(i,10);break;case 3:Zo(i,6);break;default:Zo(i,2)}}function ca(i,e){let t=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(t*=2),t*e}function Zo(i,e){if(i.h.info("Error code "+e),2==e){var t=null;i.j&&(t=null);var o=q(i.jb,i);t||(t=new jr("//www.google.com/images/cleardot.gif"),fe.location&&"http"==fe.location.protocol||se(t,"https"),zt(t)),function or(i,e){const t=new yt;if(fe.Image){const o=new Image;o.onload=bt(mr,t,o,"TestLoadImage: loaded",!0,e),o.onerror=bt(mr,t,o,"TestLoadImage: error",!1,e),o.onabort=bt(mr,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=bt(mr,t,o,"TestLoadImage: timeout",!1,e),fe.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(t.toString(),o)}else It(2);i.G=0,i.j&&i.j.va(e),ka(i),ou(i)}function ka(i){i.G=0,i.I=-1,i.j&&((0!=vt(i.i).length||0!=i.l.length)&&(i.i.i.length=0,gn(i.l),i.l.length=0),i.j.ua())}function As(i,e,t){let o=function Dn(i){return i instanceof jr?j(i):new jr(i,void 0)}(t);if(""!=o.i)e&&$(o,e+"."+o.i),de(o,o.m);else{const d=fe.location;o=function gr(i,e,t,o){var d=new jr(null,void 0);return i&&se(d,i),e&&$(d,e),t&&de(d,t),o&&(d.l=o),d}(d.protocol,e?e+"."+d.hostname:d.hostname,+d.port,t)}return i.aa&&Bn(i.aa,function(d,m){ct(o,m,d)}),t=i.sa,(e=i.D)&&t&&ct(o,e,t),ct(o,"VER",i.ma),wa(i,o),o}function ws(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new pi(t&&i.Ba&&!i.qa?new Dr({ib:!0}):i.qa)).L=i.H,e}function Na(){}function Xo(){if(kt&&!(10<=Number(ht)))throw Error("Environmental error: no available transport.")}function Bs(i,e){nn.call(this),this.g=new ks(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.P=i,(i=e&&e.httpHeadersOverwriteParam)&&!qn(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!qn(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new qs(this)}function Qo(i){Ni.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Is(){no.call(this),this.status=1}function qs(i){this.g=i}(Oe=pi.prototype).ea=function(i,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ts.g(),this.C=function Ur(i){return i.h||(i.h=i.i())}(this.u?this.u:Ts),this.g.onreadystatechange=q(this.Fa,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(m){return void fo(this,m)}i=t||"";const d=new as(this.headers);o&&es(o,function(m,I){d.set(I,m)}),o=function kn(i){e:{var e=jo;const t=i.length,o="string"==typeof i?i.split(""):i;for(let d=0;d<t;d++)if(d in o&&e.call(void 0,o[d],d,i)){e=d;break e}e=-1}return 0>e?null:"string"==typeof i?i.charAt(e):i[e]}(d.T()),t=fe.FormData&&i instanceof fe.FormData,!(0<=sn(co,e))||o||t||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),d.forEach(function(m,I){this.g.setRequestHeader(I,m)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ma(this),0<this.B&&((this.K=function ho(i){return kt&&function rt(){return function Te(i){var e=qe;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=Zr(String(Fn)).split("."),t=Zr("9").split("."),o=Math.max(e.length,t.length);for(let I=0;0==i&&I<o;I++){var d=e[I]||"",m=t[I]||"";do{if(d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],m=/(\d*)(\D*)(.*)/.exec(m)||["","","",""],0==d[0].length&&0==m[0].length)break;i=Yn(0==d[1].length?0:parseInt(d[1],10),0==m[1].length?0:parseInt(m[1],10))||Yn(0==d[2].length,0==m[2].length)||Yn(d[2],m[2]),d=d[3],m=m[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=q(this.pa,this)):this.A=Si(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(m){fo(this,m)}},Oe.pa=function(){void 0!==Se&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,wn(this,"timeout"),this.abort(8))},Oe.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,wn(this,"complete"),wn(this,"abort"),ua(this))},Oe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ua(this,!0)),pi.Z.M.call(this)},Oe.Fa=function(){this.s||(this.F||this.v||this.l?No(this):this.cb())},Oe.cb=function(){No(this)},Oe.ba=function(){try{return 2<Os(this)?this.g.status:-1}catch(i){return-1}},Oe.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},Oe.Qa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Ws(e)}},Oe.Da=function(){return this.m},Oe.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Oe=ks.prototype).ma=8,Oe.G=1,Oe.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(e){}},Oe.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const d=new $r(this,this.h,i,void 0);let m=this.s;if(this.P&&(m?(m=nr(m),_t(m,this.P)):m=this.P),null===this.o&&(d.H=m),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var o=this.l[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=cl(this,d,e),ct(t=j(this.F),"RID",i),ct(t,"CVER",22),this.D&&ct(t,"X-HTTP-Session-Id",this.D),wa(this,t),this.o&&m&&Ra(t,this.o,m),pe(this.i,d),this.Ra&&ct(t,"TYPE","init"),this.ja?(ct(t,"$req",e),ct(t,"SID","null"),d.$=!0,_s(d,t,null)):_s(d,t,e),this.G=2}}else 3==this.G&&(i?Oa(this,i):0==this.l.length||v(this.i)||Oa(this))},Oe.Ga=function(){if(this.u=null,hs(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=yn(q(this.bb,this),i)}},Oe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,It(10),ss(this),hs(this))},Oe.ab=function(){null!=this.v&&(this.v=null,ss(this),Ns(this),It(19))},Oe.jb=function(i){i?(this.h.info("Successfully pinged google.com"),It(2)):(this.h.info("Failed to ping google.com"),It(1))},(Oe=Na.prototype).xa=function(){},Oe.wa=function(){},Oe.va=function(){},Oe.ua=function(){},Oe.Oa=function(){},Xo.prototype.g=function(i,e){return new Bs(i,e)},Ce(Bs,nn),Bs.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),Xr(q(i.hb,i,e))),It(0),i.W=e,i.aa=t||{},i.N=i.X,i.F=As(i,null,i.W),Za(i)},Bs.prototype.close=function(){Co(this.g)},Bs.prototype.u=function(i){if("string"==typeof i){var e={};e.__data__=i,Ka(this.g,e)}else this.v?((e={}).__data__=ii(i),Ka(this.g,e)):Ka(this.g,i)},Bs.prototype.M=function(){this.g.j=null,delete this.j,Co(this.g),delete this.g,Bs.Z.M.call(this)},Ce(Qo,Ni),Ce(Is,no),Ce(qs,Na),qs.prototype.xa=function(){wn(this.g,"a")},qs.prototype.wa=function(i){wn(this.g,new Qo(i))},qs.prototype.va=function(i){wn(this.g,new Is(i))},qs.prototype.ua=function(){wn(this.g,"b")},Xo.prototype.createWebChannel=Xo.prototype.g,Bs.prototype.send=Bs.prototype.u,Bs.prototype.open=Bs.prototype.m,Bs.prototype.close=Bs.prototype.close,Pn.NO_ERROR=0,Pn.TIMEOUT=8,Pn.HTTP_ERROR=6,Qr.COMPLETE="complete",ys.EventType=cs,cs.OPEN="a",cs.CLOSE="b",cs.ERROR="c",cs.MESSAGE="d",nn.prototype.listen=nn.prototype.N,pi.prototype.listenOnce=pi.prototype.O,pi.prototype.getLastError=pi.prototype.La,pi.prototype.getLastErrorCode=pi.prototype.Da,pi.prototype.getStatus=pi.prototype.ba,pi.prototype.getResponseJson=pi.prototype.Qa,pi.prototype.getResponseText=pi.prototype.ga,pi.prototype.send=pi.prototype.ea;var da=me.createWebChannelTransport=function(){return new Xo},xs=me.getStatEventTarget=function(){return si()},Fa=me.ErrorCode=Pn,jl=me.EventType=Qr,Ys=me.Event=rr,Hl=me.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},xi=me.FetchXmlHttpFactory=Dr,To=me.WebChannel=ys,Fo=me.XhrIo=pi;const dl="@firebase/firestore";class os{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}os.UNAUTHENTICATED=new os(null),os.GOOGLE_CREDENTIALS=new os("google-credentials-uid"),os.FIRST_PARTY=new os("first-party-uid"),os.MOCK_USER=new os("mock-user");let go="9.8.0";const Go=new Pt.Yd("@firebase/firestore");function hl(){return Go.logLevel}function ln(i,...e){if(Go.logLevel<=Pt.in.DEBUG){const t=e.map(Cs);Go.debug(`Firestore (${go}): ${i}`,...t)}}function Pi(i,...e){if(Go.logLevel<=Pt.in.ERROR){const t=e.map(Cs);Go.error(`Firestore (${go}): ${i}`,...t)}}function io(i,...e){if(Go.logLevel<=Pt.in.WARN){const t=e.map(Cs);Go.warn(`Firestore (${go}): ${i}`,...t)}}function Cs(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function Kn(i="Unexpected state"){const e=`FIRESTORE (${go}) INTERNAL ASSERTION FAILED: `+i;throw Pi(e),new Error(e)}function ur(i,e){i||Kn()}function Sn(i,e){return i}const Vt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class M extends Xe.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class x{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class S{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class U{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(os.UNAUTHENTICATED))}shutdown(){}}class Y{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ue{constructor(e){this.t=e,this.currentUser=os.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let d=this.i;const m=te=>this.i!==d?(d=this.i,t(te)):Promise.resolve();let I=new x;this.o=()=>{this.i++,this.currentUser=this.u(),I.resolve(),I=new x,e.enqueueRetryable(()=>m(this.currentUser))};const O=()=>{const te=I;e.enqueueRetryable((0,we.Z)(function*(){yield te.promise,yield m(o.currentUser)}))},Q=te=>{ln("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=te,this.auth.addAuthTokenListener(this.o),O()};this.t.onInit(te=>Q(te)),setTimeout(()=>{if(!this.auth){const te=this.t.getImmediate({optional:!0});te?Q(te):(ln("FirebaseAuthCredentialsProvider","Auth not yet detected"),I.resolve(),I=new x)}},0),O()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(ln("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(ur("string"==typeof o.accessToken),new S(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ur(null===e||"string"==typeof e),new os(e)}}class $e{constructor(e,t,o){this.type="FirstParty",this.user=os.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const d=e.auth.getAuthHeaderValueForFirstParty([]);d&&this.headers.set("Authorization",d),o&&this.headers.set("X-Goog-Iam-Authorization-Token",o)}}class it{constructor(e,t,o){this.h=e,this.l=t,this.m=o}getToken(){return Promise.resolve(new $e(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(os.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Qt{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $n{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const o=m=>{null!=m.error&&ln("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${m.error.message}`);const I=m.token!==this.p;return this.p=m.token,ln("FirebaseAppCheckTokenProvider",`Received ${I?"new":"existing"} token.`),I?t(m.token):Promise.resolve()};this.o=m=>{e.enqueueRetryable(()=>o(m))};const d=m=>{ln("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=m,this.appCheck.addTokenListener(this.o)};this.g.onInit(m=>d(m)),setTimeout(()=>{if(!this.appCheck){const m=this.g.getImmediate({optional:!0});m?d(m):ln("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ur("string"==typeof t.token),this.p=t.token,new Qt(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Nn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.I(o),this.T=o=>t.writeSequenceNumber(o))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function li(i){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}Nn.A=-1;class ci{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const d=li(40);for(let m=0;m<d.length;++m)o.length<20&&d[m]<t&&(o+=e.charAt(d[m]%e.length))}return o}}function Ir(i,e){return i<e?-1:i>e?1:0}function Ks(i,e,t){return i.length===e.length&&i.every((o,d)=>t(o,e[d]))}function Jo(i){return i+"\0"}class fs{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new M(Vt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new M(Vt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new M(Vt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new M(Vt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return fs.fromMillis(Date.now())}static fromDate(e){return fs.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new fs(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ir(this.nanoseconds,e.nanoseconds):Ir(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class lr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new lr(e)}static min(){return new lr(new fs(0,0))}static max(){return new lr(new fs(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function zi(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Qa(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Pu(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Ou{constructor(e,t,o){void 0===t?t=0:t>e.length&&Kn(),void 0===o?o=e.length-t:o>e.length-t&&Kn(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===Ou.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ou?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let d=0;d<o;d++){const m=e.get(d),I=t.get(d);if(m<I)return-1;if(m>I)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class mi extends Ou{construct(e,t,o){return new mi(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new M(Vt.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(d=>d.length>0))}return new mi(t)}static emptyPath(){return new mi([])}}const uc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ms extends Ou{construct(e,t,o){return new Ms(e,t,o)}static isValidIdentifier(e){return uc.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ms.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ms(["__name__"])}static fromServerFormat(e){const t=[];let o="",d=0;const m=()=>{if(0===o.length)throw new M(Vt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let I=!1;for(;d<e.length;){const O=e[d];if("\\"===O){if(d+1===e.length)throw new M(Vt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const Q=e[d+1];if("\\"!==Q&&"."!==Q&&"`"!==Q)throw new M(Vt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=Q,d+=2}else"`"===O?(I=!I,d++):"."!==O||I?(o+=O,d++):(m(),d++)}if(m(),I)throw new M(Vt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ms(t)}static emptyPath(){return new Ms([])}}class Gl{constructor(e){this.fields=e,e.sort(Ms.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ks(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class Vs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Vs(t)}static fromUint8Array(e){const t=function(o){let d="";for(let m=0;m<o.length;++m)d+=String.fromCharCode(o[m]);return d}(e);return new Vs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ir(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vs.EMPTY_BYTE_STRING=new Vs("");const ps=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ea(i){if(ur(!!i),"string"==typeof i){let e=0;const t=ps.exec(i);if(ur(!!t),t[1]){let d=t[1];d=(d+"000000000").substr(0,9),e=Number(d)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Hi(i.seconds),nanos:Hi(i.nanos)}}function Hi(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function fl(i){return"string"==typeof i?Vs.fromBase64String(i):Vs.fromUint8Array(i)}function Ja(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function so(i){const e=i.mapValue.fields.__previous_value__;return Ja(e)?so(e):e}function Rs(i){const e=ea(i.mapValue.fields.__local_write_time__.timestampValue);return new fs(e.seconds,e.nanos)}class Ia{constructor(e,t,o,d,m,I,O,Q){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=d,this.ssl=m,this.forceLongPolling=I,this.autoDetectLongPolling=O,this.useFetchStreams=Q}}class Xs{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Xs("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Xs&&e.projectId===this.projectId&&e.database===this.database}}function ta(i){return null==i}function na(i){return 0===i&&1/i==-1/0}function el(i){return"number"==typeof i&&Number.isInteger(i)&&!na(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class xn{constructor(e){this.path=e}static fromPath(e){return new xn(mi.fromString(e))}static fromName(e){return new xn(mi.fromString(e).popFirst(5))}static empty(){return new xn(mi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===mi.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return mi.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xn(new mi(e.slice()))}}const La={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ku={nullValue:"NULL_VALUE"};function Ba(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Ja(i)?4:V(i)?9007199254740991:10:Kn()}function Wi(i,e){if(i===e)return!0;const t=Ba(i);if(t!==Ba(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Rs(i).isEqual(Rs(e));case 3:return function(o,d){if("string"==typeof o.timestampValue&&"string"==typeof d.timestampValue&&o.timestampValue.length===d.timestampValue.length)return o.timestampValue===d.timestampValue;const m=ea(o.timestampValue),I=ea(d.timestampValue);return m.seconds===I.seconds&&m.nanos===I.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return d=e,fl(i.bytesValue).isEqual(fl(d.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,d){return Hi(o.geoPointValue.latitude)===Hi(d.geoPointValue.latitude)&&Hi(o.geoPointValue.longitude)===Hi(d.geoPointValue.longitude)}(i,e);case 2:return function(o,d){if("integerValue"in o&&"integerValue"in d)return Hi(o.integerValue)===Hi(d.integerValue);if("doubleValue"in o&&"doubleValue"in d){const m=Hi(o.doubleValue),I=Hi(d.doubleValue);return m===I?na(m)===na(I):isNaN(m)&&isNaN(I)}return!1}(i,e);case 9:return Ks(i.arrayValue.values||[],e.arrayValue.values||[],Wi);case 10:return function(o,d){const m=o.mapValue.fields||{},I=d.mapValue.fields||{};if(zi(m)!==zi(I))return!1;for(const O in m)if(m.hasOwnProperty(O)&&(void 0===I[O]||!Wi(m[O],I[O])))return!1;return!0}(i,e);default:return Kn()}var d}function fa(i,e){return void 0!==(i.values||[]).find(t=>Wi(t,e))}function So(i,e){if(i===e)return 0;const t=Ba(i),o=Ba(e);if(t!==o)return Ir(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ir(i.booleanValue,e.booleanValue);case 2:return function(d,m){const I=Hi(d.integerValue||d.doubleValue),O=Hi(m.integerValue||m.doubleValue);return I<O?-1:I>O?1:I===O?0:isNaN(I)?isNaN(O)?0:-1:1}(i,e);case 3:return cc(i.timestampValue,e.timestampValue);case 4:return cc(Rs(i),Rs(e));case 5:return Ir(i.stringValue,e.stringValue);case 6:return function(d,m){const I=fl(d),O=fl(m);return I.compareTo(O)}(i.bytesValue,e.bytesValue);case 7:return function(d,m){const I=d.split("/"),O=m.split("/");for(let Q=0;Q<I.length&&Q<O.length;Q++){const te=Ir(I[Q],O[Q]);if(0!==te)return te}return Ir(I.length,O.length)}(i.referenceValue,e.referenceValue);case 8:return function(d,m){const I=Ir(Hi(d.latitude),Hi(m.latitude));return 0!==I?I:Ir(Hi(d.longitude),Hi(m.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(d,m){const I=d.values||[],O=m.values||[];for(let Q=0;Q<I.length&&Q<O.length;++Q){const te=So(I[Q],O[Q]);if(te)return te}return Ir(I.length,O.length)}(i.arrayValue,e.arrayValue);case 10:return function(d,m){if(d===La.mapValue&&m===La.mapValue)return 0;if(d===La.mapValue)return 1;if(m===La.mapValue)return-1;const I=d.fields||{},O=Object.keys(I),Q=m.fields||{},te=Object.keys(Q);O.sort(),te.sort();for(let Ue=0;Ue<O.length&&Ue<te.length;++Ue){const ut=Ir(O[Ue],te[Ue]);if(0!==ut)return ut;const $t=So(I[O[Ue]],Q[te[Ue]]);if(0!==$t)return $t}return Ir(O.length,te.length)}(i.mapValue,e.mapValue);default:throw Kn()}}function cc(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Ir(i,e);const t=ea(i),o=ea(e),d=Ir(t.seconds,o.seconds);return 0!==d?d:Ir(t.nanos,o.nanos)}function Lo(i){return pl(i)}function pl(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const d=ea(o);return`time(${d.seconds},${d.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?fl(i.bytesValue).toBase64():"referenceValue"in i?xn.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let d="[",m=!0;for(const I of o.values||[])m?m=!1:d+=",",d+=pl(I);return d+"]"}(i.arrayValue):"mapValue"in i?function(o){const d=Object.keys(o.fields||{}).sort();let m="{",I=!0;for(const O of d)I?I=!1:m+=",",m+=`${O}:${pl(o.fields[O])}`;return m+"}"}(i.mapValue):Kn();var e}function Ao(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Wl(i){return!!i&&"integerValue"in i}function ql(i){return!!i&&"arrayValue"in i}function Va(i){return!!i&&"nullValue"in i}function gl(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function ml(i){return!!i&&"mapValue"in i}function ra(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Qa(i.mapValue.fields,(t,o)=>e.mapValue.fields[t]=ra(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ra(i.arrayValue.values[t]);return e}return Object.assign({},i)}function V(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function z(i){return"nullValue"in i?ku:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Ao(Xs.empty(),xn.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:Kn()}function he(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Ao(Xs.empty(),xn.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?La:Kn()}function ze(i,e){const t=So(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function At(i,e){const t=So(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class Rt{constructor(e){this.value=e}static empty(){return new Rt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!ml(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ra(t)}setAll(e){let t=Ms.emptyPath(),o={},d=[];e.forEach((I,O)=>{if(!t.isImmediateParentOf(O)){const Q=this.getFieldsMap(t);this.applyChanges(Q,o,d),o={},d=[],t=O.popLast()}I?o[O.lastSegment()]=ra(I):d.push(O.lastSegment())});const m=this.getFieldsMap(t);this.applyChanges(m,o,d)}delete(e){const t=this.field(e.popLast());ml(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let d=t.mapValue.fields[e.get(o)];ml(d)&&d.mapValue.fields||(d={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=d),t=d}return t.mapValue.fields}applyChanges(e,t,o){Qa(t,(d,m)=>e[d]=m);for(const d of o)delete e[d]}clone(){return new Rt(ra(this.value))}}function hn(i){const e=[];return Qa(i.fields,(t,o)=>{const d=new Ms([t]);if(ml(o)){const m=hn(o.mapValue).fields;if(0===m.length)e.push(d);else for(const I of m)e.push(d.child(I))}else e.push(d)}),new Gl(e)}class Cn{constructor(e,t,o,d,m,I){this.key=e,this.documentType=t,this.version=o,this.readTime=d,this.data=m,this.documentState=I}static newInvalidDocument(e){return new Cn(e,0,lr.min(),lr.min(),Rt.empty(),0)}static newFoundDocument(e,t,o){return new Cn(e,1,t,lr.min(),o,0)}static newNoDocument(e,t){return new Cn(e,2,t,lr.min(),Rt.empty(),0)}static newUnknownDocument(e,t){return new Cn(e,3,t,lr.min(),Rt.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Fr{constructor(e,t,o,d){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=d}}function hr(i){return i.fields.find(e=>2===e.kind)}function ei(i){return i.fields.filter(e=>2!==e.kind)}Fr.UNKNOWN_ID=-1;class Lr{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ti{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ti(0,oo.min())}}function Us(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,d=lr.fromTimestamp(1e9===o?new fs(t+1,0):new fs(t,o));return new oo(d,xn.empty(),e)}function yl(i){return new oo(i.readTime,i.key,-1)}class oo{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new oo(lr.min(),xn.empty(),-1)}static max(){return new oo(lr.max(),xn.empty(),-1)}}function zo(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=xn.comparator(i.documentKey,e.documentKey),0!==t?t:Ir(i.largestBatchId,e.largestBatchId))}class Vi{constructor(e,t){this.comparator=e,this.root=t||ls.EMPTY}insert(e,t){return new Vi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ls.BLACK,null,null))}remove(e){return new Vi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ls.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const d=this.comparator(e,o.key);if(0===d)return t+o.left.size;d<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ao(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ao(this.root,e,this.comparator,!1)}getReverseIterator(){return new ao(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ao(this.root,e,this.comparator,!0)}}class ao{constructor(e,t,o,d){this.isReverse=d,this.nodeStack=[];let m=1;for(;!e.isEmpty();)if(m=t?o(e.key,t):1,t&&d&&(m*=-1),m<0)e=this.isReverse?e.left:e.right;else{if(0===m){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ls{constructor(e,t,o,d,m){this.key=e,this.value=t,this.color=null!=o?o:ls.RED,this.left=null!=d?d:ls.EMPTY,this.right=null!=m?m:ls.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,d,m){return new ls(null!=e?e:this.key,null!=t?t:this.value,null!=o?o:this.color,null!=d?d:this.left,null!=m?m:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let d=this;const m=o(e,d.key);return d=m<0?d.copy(null,null,null,d.left.insert(e,t,o),null):0===m?d.copy(null,t,null,null,null):d.copy(null,null,null,null,d.right.insert(e,t,o)),d.fixUp()}removeMin(){if(this.left.isEmpty())return ls.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,d=this;if(t(e,d.key)<0)d.left.isEmpty()||d.left.isRed()||d.left.left.isRed()||(d=d.moveRedLeft()),d=d.copy(null,null,null,d.left.remove(e,t),null);else{if(d.left.isRed()&&(d=d.rotateRight()),d.right.isEmpty()||d.right.isRed()||d.right.left.isRed()||(d=d.moveRedRight()),0===t(e,d.key)){if(d.right.isEmpty())return ls.EMPTY;o=d.right.min(),d=d.copy(o.key,o.value,null,null,d.right.removeMin())}d=d.copy(null,null,null,null,d.right.remove(e,t))}return d.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ls.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ls.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Kn();const e=this.left.check();if(e!==this.right.check())throw Kn();return e+(this.isRed()?0:1)}}ls.EMPTY=null,ls.RED=!0,ls.BLACK=!1,ls.EMPTY=new class{constructor(){this.size=0}get key(){throw Kn()}get value(){throw Kn()}get color(){throw Kn()}get left(){throw Kn()}get right(){throw Kn()}copy(i,e,t,o,d){return this}insert(i,e,t){return new ls(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Li{constructor(e){this.comparator=e,this.data=new Vi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const d=o.getNext();if(this.comparator(d.key,e[1])>=0)return;t(d.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _l(this.data.getIterator())}getIteratorFrom(e){return new _l(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof Li)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const d=t.getNext().key,m=o.getNext().key;if(0!==this.comparator(d,m))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Li(this.comparator);return t.data=e,t}}class _l{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function vl(i){return i.hasNext()?i.getNext():void 0}class tl{constructor(e,t=null,o=[],d=[],m=null,I=null,O=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=d,this.limit=m,this.startAt=I,this.endAt=O,this.P=null}}function Pd(i,e=null,t=[],o=[],d=null,m=null,I=null){return new tl(i,e,t,o,d,m,I)}function nl(i){const e=Sn(i);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>{return(d=o).field.canonicalString()+d.op.toString()+Lo(d.value);var d}).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(d=o).field.canonicalString()+d.dir;var d}).join(","),ta(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>Lo(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>Lo(o)).join(",")),e.P=t}return e.P}function pa(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let d=0;d<i.orderBy.length;d++)if(!Il(i.orderBy[d],e.orderBy[d]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let d=0;d<i.filters.length;d++)if((t=i.filters[d]).op!==(o=e.filters[d]).op||!t.field.isEqual(o.field)||!Wi(t.value,o.value))return!1;var t,o;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Od(i.startAt,e.startAt)&&Od(i.endAt,e.endAt)}function Fu(i){return xn.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Ua(i,e){return i.filters.filter(t=>t instanceof Fs&&t.field.isEqual(e))}function Lu(i,e,t){let o=ku,d=!0;for(const m of Ua(i,e)){let I=ku,O=!0;switch(m.op){case"<":case"<=":I=z(m.value);break;case"==":case"in":case">=":I=m.value;break;case">":I=m.value,O=!1;break;case"!=":case"not-in":I=ku}ze({value:o,inclusive:d},{value:I,inclusive:O})<0&&(o=I,d=O)}if(null!==t)for(let m=0;m<i.orderBy.length;++m)if(i.orderBy[m].field.isEqual(e)){const I=t.position[m];ze({value:o,inclusive:d},{value:I,inclusive:t.inclusive})<0&&(o=I,d=t.inclusive);break}return{value:o,inclusive:d}}function El(i,e,t){let o=La,d=!0;for(const m of Ua(i,e)){let I=La,O=!0;switch(m.op){case">=":case">":I=he(m.value),O=!1;break;case"==":case"in":case"<=":I=m.value;break;case"<":I=m.value,O=!1;break;case"!=":case"not-in":I=La}At({value:o,inclusive:d},{value:I,inclusive:O})>0&&(o=I,d=O)}if(null!==t)for(let m=0;m<i.orderBy.length;++m)if(i.orderBy[m].field.isEqual(e)){const I=t.position[m];At({value:o,inclusive:d},{value:I,inclusive:t.inclusive})>0&&(o=I,d=t.inclusive);break}return{value:o,inclusive:d}}class Fs extends class{}{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,o):new dc(e,t,o):"array-contains"===t?new Xc(e,o):"in"===t?new bh(e,o):"not-in"===t?new bl(e,o):"array-contains-any"===t?new wh(e,o):new Fs(e,t,o)}static V(e,t,o){return"in"===t?new Bu(e,o):new hc(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(So(t,this.value)):null!==t&&Ba(this.value)===Ba(t)&&this.v(So(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Kn()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class dc extends Fs{constructor(e,t,o){super(e,t,o),this.key=xn.fromName(o.referenceValue)}matches(e){const t=xn.comparator(e.key,this.key);return this.v(t)}}class Bu extends Fs{constructor(e,t){super(e,"in",t),this.keys=fc(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class hc extends Fs{constructor(e,t){super(e,"not-in",t),this.keys=fc(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function fc(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>xn.fromName(o.referenceValue))}class Xc extends Fs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ql(t)&&fa(t.arrayValue,this.value)}}class bh extends Fs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&fa(this.value.arrayValue,t)}}class bl extends Fs{constructor(e,t){super(e,"not-in",t)}matches(e){if(fa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!fa(this.value.arrayValue,t)}}class wh extends Fs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ql(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>fa(this.value.arrayValue,o))}}class Ca{constructor(e,t){this.position=e,this.inclusive=t}}class wl{constructor(e,t="asc"){this.field=e,this.dir=t}}function Il(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function pc(i,e,t){let o=0;for(let d=0;d<i.position.length;d++){const m=e[d],I=i.position[d];if(o=m.field.isKeyField()?xn.comparator(xn.fromName(I.referenceValue),t.key):So(I,t.data.field(m.field)),"desc"===m.dir&&(o*=-1),0!==o)break}return o}function Od(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Wi(i.position[t],e.position[t]))return!1;return!0}class rl{constructor(e,t=null,o=[],d=[],m=null,I="F",O=null,Q=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=d,this.limit=m,this.limitType=I,this.startAt=O,this.endAt=Q,this.D=null,this.C=null}}function Vu(i,e,t,o,d,m,I,O){return new rl(i,e,t,o,d,m,I,O)}function $a(i){return new rl(i)}function lu(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function uu(i){for(const e of i.filters)if(e.S())return e.field;return null}function Da(i){return null!==i.collectionGroup}function il(i){const e=Sn(i);if(null===e.D){e.D=[];const t=uu(e),o=lu(e);if(null!==t&&null===o)t.isKeyField()||e.D.push(new wl(t)),e.D.push(new wl(Ms.keyField(),"asc"));else{let d=!1;for(const m of e.explicitOrderBy)e.D.push(m),m.field.isKeyField()&&(d=!0);if(!d){const m=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new wl(Ms.keyField(),m))}}}return e.D}function Qs(i){const e=Sn(i);if(!e.C)if("F"===e.limitType)e.C=Pd(e.path,e.collectionGroup,il(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const m of il(e))t.push(new wl(m.field,"desc"===m.dir?"asc":"desc"));const o=e.endAt?new Ca(e.endAt.position,e.endAt.inclusive):null,d=e.startAt?new Ca(e.startAt.position,e.startAt.inclusive):null;e.C=Pd(e.path,e.collectionGroup,t,e.filters,e.limit,o,d)}return e.C}function gc(i,e,t){return new rl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function cu(i,e){return pa(Qs(i),Qs(e))&&i.limitType===e.limitType}function kd(i){return`${nl(Qs(i))}|lt:${i.limitType}`}function Wo(i){return`Query(target=${function Nu(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(o=t).field.canonicalString()} ${o.op} ${Lo(o.value)}`;var o}).join(", ")}]`),ta(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(o=t).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>Lo(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>Lo(t)).join(",")),`Target(${e})`}(Qs(i))}; limitType=${i.limitType})`}function Ta(i,e){return e.isFoundDocument()&&function(t,o){const d=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(d):xn.isDocumentKey(t.path)?t.path.isEqual(d):t.path.isImmediateParentOf(d)}(i,e)&&function(t,o){for(const d of t.explicitOrderBy)if(!d.field.isKeyField()&&null===o.data.field(d.field))return!1;return!0}(i,e)&&function(t,o){for(const d of t.filters)if(!d.matches(o))return!1;return!0}(i,e)&&(o=e,!((t=i).startAt&&!function(d,m,I){const O=pc(d,m,I);return d.inclusive?O<=0:O<0}(t.startAt,il(t),o)||t.endAt&&!function(d,m,I){const O=pc(d,m,I);return d.inclusive?O>=0:O>0}(t.endAt,il(t),o)));var t,o}function Jc(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Cl(i){return(e,t)=>{let o=!1;for(const d of il(i)){const m=ed(d,e,t);if(0!==m)return m;o=o||d.field.isKeyField()}return 0}}function ed(i,e,t){const o=i.field.isKeyField()?xn.comparator(e.key,t.key):function(d,m,I){const O=m.data.field(d),Q=I.data.field(d);return null!==O&&null!==Q?So(O,Q):Kn()}(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return Kn()}}function td(i,e){if(i.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:na(e)?"-0":e}}function Nd(i){return{integerValue:""+i}}function mc(i,e){return el(e)?Nd(e):td(i,e)}class Yl{constructor(){this._=void 0}}function Uu(i,e,t){return i instanceof ja?function(o,d){const m={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return d&&(m.fields.__previous_value__=d),{mapValue:m}}(t,e):i instanceof Bo?$u(i,e):i instanceof mo?yc(i,e):function(o,d){const m=Fd(o,d),I=ga(m)+ga(o.k);return Wl(m)&&Wl(o.k)?Nd(I):td(o.M,I)}(i,e)}function nd(i,e,t){return i instanceof Bo?$u(i,e):i instanceof mo?yc(i,e):t}function Fd(i,e){return i instanceof yo?Wl(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class ja extends Yl{}class Bo extends Yl{constructor(e){super(),this.elements=e}}function $u(i,e){const t=Kl(e);for(const o of i.elements)t.some(d=>Wi(d,o))||t.push(o);return{arrayValue:{values:t}}}class mo extends Yl{constructor(e){super(),this.elements=e}}function yc(i,e){let t=Kl(e);for(const o of i.elements)t=t.filter(d=>!Wi(d,o));return{arrayValue:{values:t}}}class yo extends Yl{constructor(e,t){super(),this.M=e,this.k=t}}function ga(i){return Hi(i.integerValue||i.doubleValue)}function Kl(i){return ql(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Dl{constructor(e,t){this.field=e,this.transform=t}}class Ih{constructor(e,t){this.version=e,this.transformResults=t}}class $s{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new $s}static exists(e){return new $s(void 0,e)}static updateTime(e){return new $s(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function du(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class Tl{}function xo(i,e,t){i instanceof ju?function(o,d,m){const I=o.value.clone(),O=fu(o.fieldTransforms,d,m.transformResults);I.setAll(O),d.convertToFoundDocument(m.version,I).setHasCommittedMutations()}(i,e,t):i instanceof Sl?function(o,d,m){if(!du(o.precondition,d))return void d.convertToUnknownDocument(m.version);const I=fu(o.fieldTransforms,d,m.transformResults),O=d.data;O.setAll(Hu(o)),O.setAll(I),d.convertToFoundDocument(m.version,O).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function hu(i,e,t){var d;i instanceof ju?function(o,d,m){if(!du(o.precondition,d))return;const I=o.value.clone(),O=_c(o.fieldTransforms,m,d);I.setAll(O),d.convertToFoundDocument(rd(d),I).setHasLocalMutations()}(i,e,t):i instanceof Sl?function(o,d,m){if(!du(o.precondition,d))return;const I=_c(o.fieldTransforms,m,d),O=d.data;O.setAll(Hu(o)),O.setAll(I),d.convertToFoundDocument(rd(d),O).setHasLocalMutations()}(i,e,t):du(i.precondition,d=e)&&d.convertToNoDocument(lr.min())}function Ef(i,e){let t=null;for(const o of i.fieldTransforms){const d=e.data.field(o.field),m=Fd(o.transform,d||null);null!=m&&(null==t&&(t=Rt.empty()),t.set(o.field,m))}return t||null}function Ld(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===o||t&&o&&Ks(t,o,(d,m)=>function ia(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(t=i.transform)instanceof Bo&&o instanceof Bo||t instanceof mo&&o instanceof mo?Ks(t.elements,o.elements,Wi):t instanceof yo&&o instanceof yo?Wi(t.k,o.k):t instanceof ja&&o instanceof ja);var t,o}(d,m))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,o}function rd(i){return i.isFoundDocument()?i.version:lr.min()}class ju extends Tl{constructor(e,t,o,d=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=d,this.type=0}}class Sl extends Tl{constructor(e,t,o,d,m=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=d,this.fieldTransforms=m,this.type=1}}function Hu(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}}),e}function fu(i,e,t){const o=new Map;ur(i.length===t.length);for(let d=0;d<t.length;d++){const m=i[d],I=m.transform,O=e.data.field(m.field);o.set(m.field,nd(I,O,t[d]))}return o}function _c(i,e,t){const o=new Map;for(const d of i){const m=d.transform,I=t.data.field(d.field);o.set(d.field,Uu(m,I,e))}return o}class Sa extends Tl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class pu extends Tl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Gu{constructor(e){this.count=e}}var Ps,Cr;function vc(i){switch(i){default:return Kn();case Vt.CANCELLED:case Vt.UNKNOWN:case Vt.DEADLINE_EXCEEDED:case Vt.RESOURCE_EXHAUSTED:case Vt.INTERNAL:case Vt.UNAVAILABLE:case Vt.UNAUTHENTICATED:return!1;case Vt.INVALID_ARGUMENT:case Vt.NOT_FOUND:case Vt.ALREADY_EXISTS:case Vt.PERMISSION_DENIED:case Vt.FAILED_PRECONDITION:case Vt.ABORTED:case Vt.OUT_OF_RANGE:case Vt.UNIMPLEMENTED:case Vt.DATA_LOSS:return!0}}function Bd(i){if(void 0===i)return Pi("GRPC error has no .code"),Vt.UNKNOWN;switch(i){case Ps.OK:return Vt.OK;case Ps.CANCELLED:return Vt.CANCELLED;case Ps.UNKNOWN:return Vt.UNKNOWN;case Ps.DEADLINE_EXCEEDED:return Vt.DEADLINE_EXCEEDED;case Ps.RESOURCE_EXHAUSTED:return Vt.RESOURCE_EXHAUSTED;case Ps.INTERNAL:return Vt.INTERNAL;case Ps.UNAVAILABLE:return Vt.UNAVAILABLE;case Ps.UNAUTHENTICATED:return Vt.UNAUTHENTICATED;case Ps.INVALID_ARGUMENT:return Vt.INVALID_ARGUMENT;case Ps.NOT_FOUND:return Vt.NOT_FOUND;case Ps.ALREADY_EXISTS:return Vt.ALREADY_EXISTS;case Ps.PERMISSION_DENIED:return Vt.PERMISSION_DENIED;case Ps.FAILED_PRECONDITION:return Vt.FAILED_PRECONDITION;case Ps.ABORTED:return Vt.ABORTED;case Ps.OUT_OF_RANGE:return Vt.OUT_OF_RANGE;case Ps.UNIMPLEMENTED:return Vt.UNIMPLEMENTED;case Ps.DATA_LOSS:return Vt.DATA_LOSS;default:return Kn()}}(Cr=Ps||(Ps={}))[Cr.OK=0]="OK",Cr[Cr.CANCELLED=1]="CANCELLED",Cr[Cr.UNKNOWN=2]="UNKNOWN",Cr[Cr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Cr[Cr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Cr[Cr.NOT_FOUND=5]="NOT_FOUND",Cr[Cr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Cr[Cr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Cr[Cr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Cr[Cr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Cr[Cr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Cr[Cr.ABORTED=10]="ABORTED",Cr[Cr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Cr[Cr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Cr[Cr.INTERNAL=13]="INTERNAL",Cr[Cr.UNAVAILABLE=14]="UNAVAILABLE",Cr[Cr.DATA_LOSS=15]="DATA_LOSS";class Ha{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[d,m]of o)if(this.equalsFn(d,e))return m}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),d=this.inner[o];if(void 0===d)return this.inner[o]=[[e,t]],void this.innerSize++;for(let m=0;m<d.length;m++)if(this.equalsFn(d[m][0],e))return void(d[m]=[e,t]);d.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let d=0;d<o.length;d++)if(this.equalsFn(o[d][0],e))return 1===o.length?delete this.inner[t]:o.splice(d,1),this.innerSize--,!0;return!1}forEach(e){Qa(this.inner,(t,o)=>{for(const[d,m]of o)e(d,m)})}isEmpty(){return Pu(this.inner)}size(){return this.innerSize}}const id=new Vi(xn.comparator);function sa(){return id}const Ch=new Vi(xn.comparator);function sd(...i){let e=Ch;for(const t of i)e=e.insert(t.key,t);return e}function zu(){return new Ha(i=>i.toString(),(i,e)=>i.isEqual(e))}const Zl=new Vi(xn.comparator),Dh=new Li(xn.comparator);function Gi(...i){let e=Dh;for(const t of i)e=e.add(t);return e}const Ga=new Li(Ir);function gs(){return Ga}class Xl{constructor(e,t,o,d,m){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=d,this.resolvedLimboDocuments=m}static createSynthesizedRemoteEventForCurrentChange(e,t){const o=new Map;return o.set(e,Al.createSynthesizedTargetChangeForCurrentChange(e,t)),new Xl(lr.min(),o,gs(),sa(),Gi())}}class Al{constructor(e,t,o,d,m){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=d,this.removedDocuments=m}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Al(Vs.EMPTY_BYTE_STRING,t,Gi(),Gi(),Gi())}}class sl{constructor(e,t,o,d){this.O=e,this.removedTargetIds=t,this.key=o,this.F=d}}class Js{constructor(e,t){this.targetId=e,this.$=t}}class oa{constructor(e,t,o=Vs.EMPTY_BYTE_STRING,d=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=d}}class Wu{constructor(){this.B=0,this.L=Ec(),this.U=Vs.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Gi(),t=Gi(),o=Gi();return this.L.forEach((d,m)=>{switch(m){case 0:e=e.add(d);break;case 2:t=t.add(d);break;case 1:o=o.add(d);break;default:Kn()}}),new Al(this.U,this.q,e,t,o)}J(){this.K=!1,this.L=Ec()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class Vd{constructor(e){this.nt=e,this.st=new Map,this.it=sa(),this.rt=qu(),this.ot=new Li(Ir)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const o=this.lt(t);switch(e.state){case 0:this.ft(t)&&o.W(e.resumeToken);break;case 1:o.tt(),o.G||o.J(),o.W(e.resumeToken);break;case 2:o.tt(),o.G||this.removeTarget(t);break;case 3:this.ft(t)&&(o.et(),o.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),o.W(e.resumeToken));break;default:Kn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((o,d)=>{this.ft(d)&&t(d)})}_t(e){const t=e.targetId,o=e.$.count,d=this.wt(t);if(d){const m=d.target;if(Fu(m))if(0===o){const I=new xn(m.path);this.ct(t,I,Cn.newNoDocument(I,lr.min()))}else ur(1===o);else this.gt(t)!==o&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((m,I)=>{const O=this.wt(I);if(O){if(m.current&&Fu(O.target)){const Q=new xn(O.target.path);null!==this.it.get(Q)||this.It(I,Q)||this.ct(I,Q,Cn.newNoDocument(Q,e))}m.j&&(t.set(I,m.H()),m.J())}});let o=Gi();this.rt.forEach((m,I)=>{let O=!0;I.forEachWhile(Q=>{const te=this.wt(Q);return!te||2===te.purpose||(O=!1,!1)}),O&&(o=o.add(m))}),this.it.forEach((m,I)=>I.setReadTime(e));const d=new Xl(e,t,this.ot,this.it,o);return this.it=sa(),this.rt=qu(),this.ot=new Li(Ir),d}at(e,t){if(!this.ft(e))return;const o=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,o),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,o){if(!this.ft(e))return;const d=this.lt(e);this.It(e,t)?d.Y(t,1):d.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),o&&(this.it=this.it.insert(t,o))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Wu,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Li(Ir),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||ln("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new Wu),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function qu(){return new Vi(xn.comparator)}function Ec(){return new Vi(xn.comparator)}const Mo={asc:"ASCENDING",desc:"DESCENDING"},xl={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class bc{constructor(e,t){this.databaseId=e,this.N=t}}function gu(i,e){return i.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wc(i,e){return i.N?e.toBase64():e.toUint8Array()}function Yu(i,e){return gu(i,e.toTimestamp())}function Zs(i){return ur(!!i),lr.fromTimestamp(function(e){const t=ea(e);return new fs(t.seconds,t.nanos)}(i))}function Ku(i,e){return(t=i,new mi(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function od(i){const e=mi.fromString(i);return ur(ge(e)),e}function Vo(i,e){return Ku(i.databaseId,e.path)}function ma(i,e){const t=od(e);if(t.get(1)!==i.databaseId.projectId)throw new M(Vt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new M(Vt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new xn(mu(t))}function Ro(i,e){return Ku(i.databaseId,e)}function Ml(i){const e=od(i);return 4===e.length?mi.emptyPath():mu(e)}function ya(i){return new mi(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function mu(i){return ur(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function us(i,e,t){return{name:Vo(i,e),fields:t.value.mapValue.fields}}function za(i,e,t){const o=ma(i,e.name),d=Zs(e.updateTime),m=new Rt({mapValue:{fields:e.fields}}),I=Cn.newFoundDocument(o,d,m);return t&&I.setHasCommittedMutations(),t?I.setHasCommittedMutations():I}function eo(i,e){let t;if(e instanceof ju)t={update:us(i,e.key,e.value)};else if(e instanceof Sa)t={delete:Vo(i,e.key)};else if(e instanceof Sl)t={update:us(i,e.key,e.data),updateMask:K(e.fieldMask)};else{if(!(e instanceof pu))return Kn();t={verify:Vo(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(d,m){const I=m.transform;if(I instanceof ja)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(I instanceof Bo)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:I.elements}};if(I instanceof mo)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:I.elements}};if(I instanceof yo)return{fieldPath:m.field.canonicalString(),increment:I.k};throw Kn()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(d=e.precondition).updateTime?{updateTime:Yu(i,d.updateTime)}:void 0!==d.exists?{exists:d.exists}:Kn()),t;var d}function yu(i,e){const t=e.currentDocument?void 0!==(d=e.currentDocument).updateTime?$s.updateTime(Zs(d.updateTime)):void 0!==d.exists?$s.exists(d.exists):$s.none():$s.none(),o=e.updateTransforms?e.updateTransforms.map(d=>function(m,I){let O=null;"setToServerValue"in I?(ur("REQUEST_TIME"===I.setToServerValue),O=new ja):"appendMissingElements"in I?O=new Bo(I.appendMissingElements.values||[]):"removeAllFromArray"in I?O=new mo(I.removeAllFromArray.values||[]):"increment"in I?O=new yo(m,I.increment):Kn();const Q=Ms.fromServerFormat(I.fieldPath);return new Dl(Q,O)}(i,d)):[];var d;if(e.update){const d=ma(i,e.update.name),m=new Rt({mapValue:{fields:e.update.fields}});if(e.updateMask){const I=new Gl((e.updateMask.fieldPaths||[]).map(te=>Ms.fromServerFormat(te)));return new Sl(d,m,I,t,o)}return new ju(d,m,t,o)}if(e.delete){const d=ma(i,e.delete);return new Sa(d,t)}if(e.verify){const d=ma(i,e.verify);return new pu(d,t)}return Kn()}function ld(i,e){return{documents:[Ro(i,e.path)]}}function Cc(i,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=Ro(i,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Ro(i,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const d=function(Q){if(0===Q.length)return;const te=Q.map(Ue=>function(ut){if("=="===ut.op){if(gl(ut.value))return{unaryFilter:{field:w(ut.field),op:"IS_NAN"}};if(Va(ut.value))return{unaryFilter:{field:w(ut.field),op:"IS_NULL"}}}else if("!="===ut.op){if(gl(ut.value))return{unaryFilter:{field:w(ut.field),op:"IS_NOT_NAN"}};if(Va(ut.value))return{unaryFilter:{field:w(ut.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:w(ut.field),op:aa(ut.op),value:ut.value}}}(Ue));return 1===te.length?te[0]:{compositeFilter:{op:"AND",filters:te}}}(e.filters);d&&(t.structuredQuery.where=d);const m=function(Q){if(0!==Q.length)return Q.map(te=>{return{field:w((Ue=te).field),direction:_u(Ue.dir)};var Ue})}(e.orderBy);m&&(t.structuredQuery.orderBy=m);const I=(te=e.limit,i.N||ta(te)?te:{value:te});var te,O,Q;return null!==I&&(t.structuredQuery.limit=I),e.startAt&&(t.structuredQuery.startAt={before:(O=e.startAt).inclusive,values:O.position}),e.endAt&&(t.structuredQuery.endAt={before:!(Q=e.endAt).inclusive,values:Q.position}),t}function Dc(i){let e=Ml(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let d=null;if(o>0){ur(1===o);const Ue=t.from[0];Ue.allDescendants?d=Ue.collectionId:e=e.child(Ue.collectionId)}let m=[];t.where&&(m=$d(t.where));let I=[];t.orderBy&&(I=t.orderBy.map(Ue=>{return new wl(p((ut=Ue).field),function($t){switch($t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ut.direction));var ut}));let O=null;t.limit&&(O=function(Ue){let ut;return ut="object"==typeof Ue?Ue.value:Ue,ta(ut)?null:ut}(t.limit));let Q=null;var Ue;t.startAt&&(Q=new Ca((Ue=t.startAt).values||[],!!Ue.before));let te=null;return t.endAt&&(te=function(Ue){return new Ca(Ue.values||[],!Ue.before)}(t.endAt)),Vu(e,d,I,m,O,"F",Q,te)}function $d(i){return i?void 0!==i.unaryFilter?[A(i)]:void 0!==i.fieldFilter?[_(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>$d(e)).reduce((e,t)=>e.concat(t)):Kn():[]}function _u(i){return Mo[i]}function aa(i){return xl[i]}function w(i){return{fieldPath:i.canonicalString()}}function p(i){return Ms.fromServerFormat(i.fieldPath)}function _(i){return Fs.create(p(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Kn()}}(i.fieldFilter.op),i.fieldFilter.value)}function A(i){switch(i.unaryFilter.op){case"IS_NAN":const e=p(i.unaryFilter.field);return Fs.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=p(i.unaryFilter.field);return Fs.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=p(i.unaryFilter.field);return Fs.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=p(i.unaryFilter.field);return Fs.create(d,"!=",{nullValue:"NULL_VALUE"});default:return Kn()}}function K(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ge(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function lt(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=En(e)),e=Xt(i.get(t),e);return En(e)}function Xt(i,e){let t=e;const o=i.length;for(let d=0;d<o;d++){const m=i.charAt(d);switch(m){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=m}}return t}function En(i){return i+"\x01\x01"}function On(i){const e=i.length;if(ur(e>=2),2===e)return ur("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),mi.emptyPath();const t=e-2,o=[];let d="";for(let m=0;m<e;){const I=i.indexOf("\x01",m);switch((I<0||I>t)&&Kn(),i.charAt(I+1)){case"\x01":const O=i.substring(m,I);let Q;0===d.length?Q=O:(d+=O,Q=d,d=""),o.push(Q);break;case"\x10":d+=i.substring(m,I),d+="\0";break;case"\x11":d+=i.substring(m,I+1);break;default:Kn()}m=I+2}return new mi(o)}const xr=["userId","batchId"];function yr(i,e){return[i,lt(e)]}function Ls(i,e,t){return[i,lt(e),t]}const qo={},Zu=["prefixPath","collectionGroup","readTime","documentId"],Sh=["prefixPath","collectionGroup","documentId"],Rl=["collectionGroup","readTime","prefixPath","documentId"],Tc=["canonicalId","targetId"],ud=["targetId","path"],cd=["path","targetId"],Sc=["collectionId","parent"],jd=["indexId","uid"],dd=["uid","sequenceNumber"],Hd=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ah=["indexId","uid","orderedDocumentKey"],hd=["userId","collectionPath","documentId"],xh=["userId","collectionPath","largestBatchId"],bf=["userId","collectionGroup","largestBatchId"],Gd=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],wf=[...Gd,"documentOverlays"],zd=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ol=[...zd,"indexConfiguration","indexState","indexEntries"],If="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fd{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Yt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Kn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Yt((o,d)=>{this.nextCallback=m=>{this.wrapSuccess(e,m).next(o,d)},this.catchCallback=m=>{this.wrapFailure(t,m).next(o,d)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Yt?t:Yt.resolve(t)}catch(t){return Yt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Yt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Yt.reject(t)}static resolve(e){return new Yt((t,o)=>{t(e)})}static reject(e){return new Yt((t,o)=>{o(e)})}static waitFor(e){return new Yt((t,o)=>{let d=0,m=0,I=!1;e.forEach(O=>{++d,O.next(()=>{++m,I&&m===d&&t()},Q=>o(Q))}),I=!0,m===d&&t()})}static or(e){let t=Yt.resolve(!1);for(const o of e)t=t.next(d=>d?Yt.resolve(d):o());return t}static forEach(e,t){const o=[];return e.forEach((d,m)=>{o.push(t.call(this,d,m))}),this.waitFor(o)}}class Pl{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new x,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new pd(e,t.error)):this.At.resolve()},this.transaction.onerror=o=>{const d=Wd(o.target.error);this.At.reject(new pd(e,d))}}static open(e,t,o,d){try{return new Pl(t,e.transaction(d,o))}catch(m){throw new pd(t,m)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(ln("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new xp(t)}}class Aa{constructor(e,t,o){this.name=e,this.version=t,this.Pt=o,12.2===Aa.Vt((0,Xe.z$)())&&Pi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ln("SimpleDb","Removing database:",e),Ql(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Xe.hl)())return!1;if(Aa.St())return!0;const e=(0,Xe.z$)(),t=Aa.Vt(e),o=0<t&&t<10,d=Aa.Dt(e),m=0<d&&d<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||m)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}Nt(e){var t=this;return(0,we.Z)(function*(){return t.db||(ln("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,d)=>{const m=indexedDB.open(t.name,t.version);m.onsuccess=I=>{o(I.target.result)},m.onblocked=()=>{d(new pd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},m.onerror=I=>{const O=I.target.error;d("VersionError"===O.name?new M(Vt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===O.name?new M(Vt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+O):new pd(e,O))},m.onupgradeneeded=I=>{ln("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',I.oldVersion),t.Pt.kt(I.target.result,m.transaction,I.oldVersion,t.version).next(()=>{ln("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=o=>t.Mt(o)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,d){var m=this;return(0,we.Z)(function*(){const I="readonly"===t;let O=0;for(;;){++O;try{m.db=yield m.Nt(e);const Q=Pl.open(m.db,e,I?"readonly":"readwrite",o),te=d(Q).next(Ue=>(Q.bt(),Ue)).catch(Ue=>(Q.abort(Ue),Yt.reject(Ue))).toPromise();return te.catch(()=>{}),yield Q.Rt,te}catch(Q){const te="FirebaseError"!==Q.name&&O<3;if(ln("SimpleDb","Transaction failed with error:",Q.message,"Retrying:",te),m.close(),!te)return Promise.reject(Q)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Cf{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Ql(this.Ft.delete())}}class pd extends M{constructor(e,t){super(Vt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ol(i){return"IndexedDbTransactionError"===i.name}class xp{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(ln("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(ln("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),Ql(o)}add(e){return ln("SimpleDb","ADD",this.store.name,e,e),Ql(this.store.add(e))}get(e){return Ql(this.store.get(e)).next(t=>(void 0===t&&(t=null),ln("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ln("SimpleDb","DELETE",this.store.name,e),Ql(this.store.delete(e))}count(){return ln("SimpleDb","COUNT",this.store.name),Ql(this.store.count())}qt(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const d=this.cursor(o),m=[];return this.Kt(d,(I,O)=>{m.push(O)}).next(()=>m)}{const d=this.store.getAll(o.range);return new Yt((m,I)=>{d.onerror=O=>{I(O.target.error)},d.onsuccess=O=>{m(O.target.result)}})}}Gt(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new Yt((d,m)=>{o.onerror=I=>{m(I.target.error)},o.onsuccess=I=>{d(I.target.result)}})}Qt(e,t){ln("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.jt=!1;const d=this.cursor(o);return this.Kt(d,(m,I,O)=>O.delete())}Wt(e,t){let o;t?o=e:(o={},t=e);const d=this.cursor(o);return this.Kt(d,t)}zt(e){const t=this.cursor({});return new Yt((o,d)=>{t.onerror=m=>{const I=Wd(m.target.error);d(I)},t.onsuccess=m=>{const I=m.target.result;I?e(I.primaryKey,I.value).next(O=>{O?I.continue():o()}):o()}})}Kt(e,t){const o=[];return new Yt((d,m)=>{e.onerror=I=>{m(I.target.error)},e.onsuccess=I=>{const O=I.target.result;if(!O)return void d();const Q=new Cf(O),te=t(O.primaryKey,O.value,Q);if(te instanceof Yt){const Ue=te.catch(ut=>(Q.done(),Yt.reject(ut)));o.push(Ue)}Q.isDone?d():null===Q.Lt?O.continue():O.continue(Q.Lt)}}).next(()=>Yt.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.jt?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ql(i){return new Yt((e,t)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const d=Wd(o.target.error);t(d)}})}let Mh=!1;function Wd(i){const e=Aa.Vt((0,Xe.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const o=new M("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Mh||(Mh=!0,setTimeout(()=>{throw o},0)),o}}return i}class Rh extends fd{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function _o(i,e){const t=Sn(i);return Aa.xt(t.Ht,e)}class Ac{constructor(e,t,o,d){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=d}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let d=0;d<this.mutations.length;d++){const m=this.mutations[d];m.key.isEqual(e.key)&&xo(m,e,o[d])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&hu(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&hu(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const o=e.get(t.key),d=o;this.applyToLocalView(d),o.isValidDocument()||d.convertToNoDocument(lr.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Gi())}isEqual(e){return this.batchId===e.batchId&&Ks(this.mutations,e.mutations,(t,o)=>Ld(t,o))&&Ks(this.baseMutations,e.baseMutations,(t,o)=>Ld(t,o))}}class xc{constructor(e,t,o,d){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=d}static from(e,t,o){ur(e.mutations.length===o.length);let d=Zl;const m=e.mutations;for(let I=0;I<m.length;I++)d=d.insert(m[I].key,o[I].version);return new xc(e,t,o,d)}}class qd{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class kl{constructor(e,t,o,d,m=lr.min(),I=lr.min(),O=Vs.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=d,this.snapshotVersion=m,this.lastLimboFreeSnapshotVersion=I,this.resumeToken=O}withSequenceNumber(e){return new kl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new kl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new kl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Ph{constructor(e){this.Jt=e}}function Mc(i,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Yd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:Vo(d=i.Jt,(m=e).key),fields:m.data.value.mapValue.fields,updateTime:gu(d,m.version.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:vu(e.version)};else{if(!e.isUnknownDocument())return Kn();o.unknownDocument={path:t.path.toArray(),version:vu(e.version)}}var d,m;return o}function Yd(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function vu(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Rc(i){const e=new fs(i.seconds,i.nanoseconds);return lr.fromTimestamp(e)}function gd(i,e){const t=(e.baseMutations||[]).map(m=>yu(i.Jt,m));for(let m=0;m<e.mutations.length-1;++m){const I=e.mutations[m];m+1<e.mutations.length&&void 0!==e.mutations[m+1].transform&&(I.updateTransforms=e.mutations[m+1].transform.fieldTransforms,e.mutations.splice(m+1,1),++m)}const o=e.mutations.map(m=>yu(i.Jt,m)),d=fs.fromMillis(e.localWriteTimeMs);return new Ac(e.batchId,d,t,o)}function Pc(i){const e=Rc(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?Rc(i.lastLimboFreeSnapshotVersion):lr.min();let o;var d;return void 0!==i.query.documents?(ur(1===(d=i.query).documents.length),o=Qs($a(Ml(d.documents[0])))):o=Qs(Dc(i.query)),new kl(o,i.targetId,0,i.lastListenSequenceNumber,e,t,Vs.fromBase64String(i.resumeToken))}function Kd(i,e){const t=vu(e.snapshotVersion),o=vu(e.lastLimboFreeSnapshotVersion);let d;d=Fu(e.target)?ld(i.Jt,e.target):Cc(i.Jt,e.target);const m=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:nl(e.target),readTime:t,resumeToken:m,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:d}}function Zd(i){const e=Dc({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?gc(e,e.limit,"L"):e}function kh(i,e){return new qd(e.largestBatchId,yu(i.Jt,e.overlayMutation))}function Nh(i,e){const t=e.path.lastSegment();return[i,lt(e.path.popLast()),t]}class Mp{getBundleMetadata(e,t){return Fh(e).get(t).next(o=>{if(o)return{id:(d=o).bundleId,createTime:Rc(d.createTime),version:d.version};var d})}saveBundleMetadata(e,t){return Fh(e).put({bundleId:(o=t).id,createTime:vu(Zs(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return Df(e).get(t).next(o=>{if(o)return{name:(d=o).name,query:Zd(d.bundledQuery),readTime:Rc(d.readTime)};var d})}saveNamedQuery(e,t){return Df(e).put({name:(o=t).name,readTime:vu(Zs(o.readTime)),bundledQuery:o.bundledQuery});var o}}function Fh(i){return _o(i,"bundles")}function Df(i){return _o(i,"namedQueries")}class Nl{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new Nl(e,t.uid||"")}getOverlay(e,t){return qi(e).get(Nh(this.userId,t)).next(o=>o?kh(this.M,o):null)}saveOverlays(e,t,o){const d=[];return o.forEach((m,I)=>{const O=new qd(t,I);d.push(this.Xt(e,O))}),Yt.waitFor(d)}removeOverlaysForBatchId(e,t,o){const d=new Set;t.forEach(I=>d.add(lt(I.getCollectionPath())));const m=[];return d.forEach(I=>{const O=IDBKeyRange.bound([this.userId,I,o],[this.userId,I,o+1],!1,!0);m.push(qi(e).Qt("collectionPathOverlayIndex",O))}),Yt.waitFor(m)}getOverlaysForCollection(e,t,o){const d=zu(),m=lt(t),I=IDBKeyRange.bound([this.userId,m,o],[this.userId,m,Number.POSITIVE_INFINITY],!0);return qi(e).qt("collectionPathOverlayIndex",I).next(O=>{for(const Q of O){const te=kh(this.M,Q);d.set(te.getKey(),te)}return d})}getOverlaysForCollectionGroup(e,t,o,d){const m=zu();let I;const O=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return qi(e).Wt({index:"collectionGroupOverlayIndex",range:O},(Q,te,Ue)=>{const ut=kh(this.M,te);m.size()<d||ut.largestBatchId===I?(m.set(ut.getKey(),ut),I=ut.largestBatchId):Ue.done()}).next(()=>m)}Xt(e,t){return qi(e).put(function(o,d,m){const[I,O,Q]=Nh(d,m.mutation.key);return{userId:d,collectionPath:O,documentId:Q,collectionGroup:m.mutation.key.getCollectionGroup(),largestBatchId:m.largestBatchId,overlayMutation:eo(o.Jt,m.mutation)}}(this.M,this.userId,t))}}function qi(i){return _o(i,"documentOverlays")}class vo{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Hi(e.integerValue));else if("doubleValue"in e){const o=Hi(e.doubleValue);isNaN(o)?this.ne(t,13):(this.ne(t,15),na(o)?t.se(0):t.se(o))}else if("timestampValue"in e){const o=e.timestampValue;this.ne(t,20),"string"==typeof o?t.ie(o):(t.ie(`${o.seconds||""}`),t.se(o.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(fl(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.ne(t,45),t.se(o.latitude||0),t.se(o.longitude||0)}else"mapValue"in e?V(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):Kn()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const o=e.fields||{};this.ne(t,55);for(const d of Object.keys(o))this.re(d,t),this.te(o[d],t)}he(e,t){const o=e.values||[];this.ne(t,50);for(const d of o)this.te(d,t)}ae(e,t){this.ne(t,37),xn.fromName(e).path.forEach(o=>{this.ne(t,60),this.le(o,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function Oc(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Tf(i){const e=64-function(t){let o=0;for(let d=0;d<8;++d){const m=Oc(255&t[d]);if(o+=m,8!==m)break}return o}(i);return Math.ceil(e/8)}vo.fe=new vo;class Rp{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this._e(o.value),o=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.ge(o.value),o=t.next();this.ye()}pe(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this._e(o);else if(o<2048)this._e(960|o>>>6),this._e(128|63&o);else if(t<"\ud800"||"\udbff"<t)this._e(480|o>>>12),this._e(128|63&o>>>6),this._e(128|63&o);else{const d=t.codePointAt(0);this._e(240|d>>>18),this._e(128|63&d>>>12),this._e(128|63&d>>>6),this._e(128|63&d)}}this.we()}Ie(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.ge(o);else if(o<2048)this.ge(960|o>>>6),this.ge(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.ge(480|o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o);else{const d=t.codePointAt(0);this.ge(240|d>>>18),this.ge(128|63&d>>>12),this.ge(128|63&d>>>6),this.ge(128|63&d)}}this.ye()}Te(e){const t=this.Ee(e),o=Tf(t);this.Ae(1+o),this.buffer[this.position++]=255&o;for(let d=t.length-o;d<t.length;++d)this.buffer[this.position++]=255&t[d]}Re(e){const t=this.Ee(e),o=Tf(t);this.Ae(1+o),this.buffer[this.position++]=~(255&o);for(let d=t.length-o;d<t.length;++d)this.buffer[this.position++]=~(255&t[d])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(d){const m=new DataView(new ArrayBuffer(8));return m.setFloat64(0,d,!1),new Uint8Array(m.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let d=1;d<t.length;++d)t[d]^=o?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const d=new Uint8Array(o);d.set(this.buffer),this.buffer=d}}class Pp{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class Op{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class kc{constructor(){this.De=new Rp,this.Ce=new Pp(this.De),this.xe=new Op(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Xu{constructor(e,t,o,d){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=d}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new Xu(this.indexId,this.documentKey,this.arrayValue,o)}}function Qu(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=Sf(i.arrayValue,e.arrayValue),0!==t?t:(t=Sf(i.directionalValue,e.directionalValue),0!==t?t:xn.comparator(i.documentKey,e.documentKey)))}function Sf(i,e){for(let t=0;t<i.length&&t<e.length;++t){const o=i[t]-e[t];if(0!==o)return o}return i.length-e.length}class ri{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const o=t;o.S()?this.Fe=o:this.Oe.push(o)}}$e(e){const t=hr(e);if(void 0!==t&&!this.Be(t))return!1;const o=ei(e);let d=0,m=0;for(;d<o.length&&this.Be(o[d]);++d);if(d===o.length)return!0;if(void 0!==this.Fe){const I=o[d];if(!this.Le(this.Fe,I)||!this.Ue(this.Me[m++],I))return!1;++d}for(;d<o.length;++d){const I=o[d];if(m>=this.Me.length||!this.Ue(this.Me[m++],I))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Lh{constructor(){this.qe=new md}addToCollectionParentIndex(e,t){return this.qe.add(t),Yt.resolve()}getCollectionParents(e,t){return Yt.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return Yt.resolve()}deleteFieldIndex(e,t){return Yt.resolve()}getDocumentsMatchingTarget(e,t){return Yt.resolve(null)}getIndexType(e,t){return Yt.resolve(0)}getFieldIndexes(e,t){return Yt.resolve([])}getNextCollectionGroupToUpdate(e){return Yt.resolve(null)}getMinOffset(e,t){return Yt.resolve(oo.min())}updateCollectionGroup(e,t,o){return Yt.resolve()}updateIndexEntries(e,t){return Yt.resolve()}}class md{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),d=this.index[t]||new Li(mi.comparator),m=!d.has(o);return this.index[t]=d.add(o),m}has(e){const t=e.lastSegment(),o=e.popLast(),d=this.index[t];return d&&d.has(o)}getEntries(e){return(this.index[e]||new Li(mi.comparator)).toArray()}}const Nc=new Uint8Array(0);class Eu{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new md,this.Ge=new Ha(o=>nl(o),(o,d)=>pa(o,d)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const o=t.lastSegment(),d=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const m={collectionId:o,parent:lt(d)};return Wa(e).put(m)}return Yt.resolve()}getCollectionParents(e,t){const o=[],d=IDBKeyRange.bound([t,""],[Jo(t),""],!1,!0);return Wa(e).qt(d).next(m=>{for(const I of m){if(I.collectionId!==t)break;o.push(On(I.parent))}return o})}addFieldIndex(e,t){const o=Xd(e),d={indexId:(m=t).indexId,collectionGroup:m.collectionGroup,fields:m.fields.map(I=>[I.fieldPath.canonicalString(),I.kind])};var m;return delete d.indexId,o.add(d).next()}deleteFieldIndex(e,t){const o=Xd(e),d=Fc(e),m=Ju(e);return o.delete(t.indexId).next(()=>d.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>m.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=Ju(e);let d=!0;const m=new Map;return Yt.forEach(this.Qe(t),I=>this.je(e,I).next(O=>{d&&(d=!!O),m.set(I,O)})).next(()=>{if(d){let I=Gi();const O=[];return Yt.forEach(m,(Q,te)=>{var Ue;ln("IndexedDbIndexManager",`Using index ${Ue=Q,`id=${Ue.indexId}|cg=${Ue.collectionGroup}|f=${Ue.fields.map(Ji=>`${Ji.fieldPath}:${Ji.kind}`).join(",")}`} to execute ${nl(t)}`);const ut=function(Ji,ko){const zs=hr(ko);if(void 0===zs)return null;for(const to of Ua(Ji,zs.fieldPath))switch(to.op){case"array-contains-any":return to.value.arrayValue.values||[];case"array-contains":return[to.value]}return null}(te,Q),$t=function(Ji,ko){const zs=new Map;for(const to of ei(ko))for(const ba of Ua(Ji,to.fieldPath))switch(ba.op){case"==":case"in":zs.set(to.fieldPath.canonicalString(),ba.value);break;case"not-in":case"!=":return zs.set(to.fieldPath.canonicalString(),ba.value),Array.from(zs.values())}return null}(te,Q),fn=function(Ji,ko){const zs=[];let to=!0;for(const ba of ei(ko)){const yf=0===ba.kind?Lu(Ji,ba.fieldPath,Ji.startAt):El(Ji,ba.fieldPath,Ji.startAt);zs.push(yf.value),to&&(to=yf.inclusive)}return new Ca(zs,to)}(te,Q),mn=function(Ji,ko){const zs=[];let to=!0;for(const ba of ei(ko)){const yf=0===ba.kind?El(Ji,ba.fieldPath,Ji.endAt):Lu(Ji,ba.fieldPath,Ji.endAt);zs.push(yf.value),to&&(to=yf.inclusive)}return new Ca(zs,to)}(te,Q),tr=this.We(Q,te,fn),ti=this.We(Q,te,mn),Gs=this.ze(Q,te,$t),lo=this.He(Q.indexId,ut,tr,fn.inclusive,ti,mn.inclusive,Gs);return Yt.forEach(lo,Ji=>o.Gt(Ji,t.limit).next(ko=>{ko.forEach(zs=>{const to=xn.fromSegments(zs.documentKey);I.has(to)||(I=I.add(to),O.push(to))})}))}).next(()=>O)}return Yt.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,o,d,m,I,O){const Q=(null!=t?t.length:1)*Math.max(o.length,m.length),te=Q/(null!=t?t.length:1),Ue=[];for(let ut=0;ut<Q;++ut){const $t=t?this.Je(t[ut/te]):Nc,fn=this.Ye(e,$t,o[ut%te],d),mn=this.Xe(e,$t,m[ut%te],I),tr=O.map(ti=>this.Ye(e,$t,ti,!0));Ue.push(...this.createRange(fn,mn,tr))}return Ue}Ye(e,t,o,d){const m=new Xu(e,xn.empty(),t,o);return d?m:m.ke()}Xe(e,t,o,d){const m=new Xu(e,xn.empty(),t,o);return d?m.ke():m}je(e,t){const o=new ri(t),d=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,d).next(m=>{let I=null;for(const O of m)o.$e(O)&&(!I||O.fields.length>I.fields.length)&&(I=O);return I})}getIndexType(e,t){let o=2;return Yt.forEach(this.Qe(t),d=>this.je(e,d).next(m=>{m?0!==o&&m.fields.length<function(I){let O=new Li(Ms.comparator),Q=!1;for(const te of I.filters){const Ue=te;Ue.field.isKeyField()||("array-contains"===Ue.op||"array-contains-any"===Ue.op?Q=!0:O=O.add(Ue.field))}for(const te of I.orderBy)te.field.isKeyField()||(O=O.add(te.field));return O.size+(Q?1:0)}(d)&&(o=1):o=0})).next(()=>o)}Ze(e,t){const o=new kc;for(const d of ei(e)){const m=t.data.field(d.fieldPath);if(null==m)return null;const I=o.Ne(d.kind);vo.fe.Zt(m,I)}return o.Se()}Je(e){const t=new kc;return vo.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const o=new kc;return vo.fe.Zt(Ao(this.databaseId,t),o.Ne(function(d){const m=ei(d);return 0===m.length?0:m[m.length-1].kind}(e))),o.Se()}ze(e,t,o){if(null===o)return[];let d=[];d.push(new kc);let m=0;for(const I of ei(e)){const O=o[m++];for(const Q of d)if(this.en(t,I.fieldPath)&&ql(O))d=this.nn(d,I,O);else{const te=Q.Ne(I.kind);vo.fe.Zt(O,te)}}return this.sn(d)}We(e,t,o){return this.ze(e,t,o.position)}sn(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].Se();return t}nn(e,t,o){const d=[...e],m=[];for(const I of o.arrayValue.values||[])for(const O of d){const Q=new kc;Q.seed(O.Se()),vo.fe.Zt(I,Q.Ne(t.kind)),m.push(Q)}return m}en(e,t){return!!e.filters.find(o=>o instanceof Fs&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=Xd(e),d=Fc(e);return(t?o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.qt()).next(m=>{const I=[];return Yt.forEach(m,O=>d.get([O.indexId,this.uid]).next(Q=>{I.push(function(te,Ue){const ut=Ue?new Ti(Ue.sequenceNumber,new oo(Rc(Ue.readTime),new xn(On(Ue.documentKey)),Ue.largestBatchId)):Ti.empty(),$t=te.fields.map(([fn,mn])=>new Lr(Ms.fromServerFormat(fn),mn));return new Fr(te.indexId,te.collectionGroup,$t,ut)}(O,Q))})).next(()=>I)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,d)=>{const m=o.indexState.sequenceNumber-d.indexState.sequenceNumber;return 0!==m?m:Ir(o.collectionGroup,d.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const d=Xd(e),m=Fc(e);return this.rn(e).next(I=>d.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(O=>Yt.forEach(O,Q=>{return m.put({indexId:Q.indexId,uid:this.user.uid||"",sequenceNumber:I,readTime:vu(($t=o).readTime),documentKey:lt($t.documentKey.path),largestBatchId:$t.largestBatchId});var $t})))}updateIndexEntries(e,t){const o=new Map;return Yt.forEach(t,(d,m)=>{const I=o.get(d.collectionGroup);return(I?Yt.resolve(I):this.getFieldIndexes(e,d.collectionGroup)).next(O=>(o.set(d.collectionGroup,O),Yt.forEach(O,Q=>this.on(e,d,Q).next(te=>{const Ue=this.un(m,Q);return te.isEqual(Ue)?Yt.resolve():this.an(e,m,Q,te,Ue)}))))})}cn(e,t,o,d){return Ju(e).put({indexId:d.indexId,uid:this.uid,arrayValue:d.arrayValue,directionalValue:d.directionalValue,orderedDocumentKey:this.tn(o,t.key),documentKey:t.key.path.toArray()})}hn(e,t,o,d){return Ju(e).delete([d.indexId,this.uid,d.arrayValue,d.directionalValue,this.tn(o,t.key),t.key.path.toArray()])}on(e,t,o){const d=Ju(e);let m=new Li(Qu);return d.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.tn(o,t)])},(I,O)=>{m=m.add(new Xu(o.indexId,t,O.arrayValue,O.directionalValue))}).next(()=>m)}un(e,t){let o=new Li(Qu);const d=this.Ze(t,e);if(null==d)return o;const m=hr(t);if(null!=m){const I=e.data.field(m.fieldPath);if(ql(I))for(const O of I.arrayValue.values||[])o=o.add(new Xu(t.indexId,e.key,this.Je(O),d))}else o=o.add(new Xu(t.indexId,e.key,Nc,d));return o}an(e,t,o,d,m){ln("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const I=[];return function(O,Q,te,Ue,ut){const $t=O.getIterator(),fn=Q.getIterator();let mn=vl($t),tr=vl(fn);for(;mn||tr;){let ti=!1,Gs=!1;if(mn&&tr){const lo=te(mn,tr);lo<0?Gs=!0:lo>0&&(ti=!0)}else null!=mn?Gs=!0:ti=!0;ti?(Ue(tr),tr=vl(fn)):Gs?(ut(mn),mn=vl($t)):(mn=vl($t),tr=vl(fn))}}(d,m,Qu,O=>{I.push(this.cn(e,t,o,O))},O=>{I.push(this.hn(e,t,o,O))}),Yt.waitFor(I)}rn(e){let t=1;return Fc(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,d,m)=>{m.done(),t=d.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((I,O)=>Qu(I,O)).filter((I,O,Q)=>!O||0!==Qu(I,Q[O-1]));const d=[];d.push(e);for(const I of o){const O=Qu(I,e),Q=Qu(I,t);if(0===O)d[0]=e.ke();else if(O>0&&Q<0)d.push(I),d.push(I.ke());else if(Q>0)break}d.push(t);const m=[];for(let I=0;I<d.length;I+=2)m.push(IDBKeyRange.bound([d[I].indexId,this.uid,d[I].arrayValue,d[I].directionalValue,Nc,[]],[d[I+1].indexId,this.uid,d[I+1].arrayValue,d[I+1].directionalValue,Nc,[]]));return m}getMinOffset(e,t){let o;return Yt.forEach(this.Qe(t),d=>this.je(e,d).next(m=>{m?(!o||zo(m.indexState.offset,o)<0)&&(o=m.indexState.offset):o=oo.min()})).next(()=>o)}}function Wa(i){return _o(i,"collectionParents")}function Ju(i){return _o(i,"indexEntries")}function Xd(i){return _o(i,"indexConfiguration")}function Fc(i){return _o(i,"indexState")}const al={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Uo{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new Uo(e,Uo.DEFAULT_COLLECTION_PERCENTILE,Uo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Qd(i,e,t){const o=i.store("mutations"),d=i.store("documentMutations"),m=[],I=IDBKeyRange.only(t.batchId);let O=0;const Q=o.Wt({range:I},(Ue,ut,$t)=>(O++,$t.delete()));m.push(Q.next(()=>{ur(1===O)}));const te=[];for(const Ue of t.mutations){const ut=Ls(e,Ue.key.path,t.batchId);m.push(d.delete(ut)),te.push(Ue.key)}return Yt.waitFor(m).next(()=>te)}function Lc(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Kn();e=i.noDocument}return JSON.stringify(e).length}Uo.DEFAULT_COLLECTION_PERCENTILE=10,Uo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Uo.DEFAULT=new Uo(41943040,Uo.DEFAULT_COLLECTION_PERCENTILE,Uo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Uo.DISABLED=new Uo(-1,0,0);class Af{constructor(e,t,o,d){this.userId=e,this.M=t,this.indexManager=o,this.referenceDelegate=d,this.ln={}}static Yt(e,t,o,d){ur(""!==e.uid);const m=e.isAuthenticated()?e.uid:"";return new Af(m,t,o,d)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return bu(e).Wt({index:"userMutationsIndex",range:o},(d,m,I)=>{t=!1,I.done()}).next(()=>t)}addMutationBatch(e,t,o,d){const m=Jl(e),I=bu(e);return I.add({}).next(O=>{ur("number"==typeof O);const Q=new Ac(O,t,o,d),te=function($t,fn,mn){const tr=mn.baseMutations.map(Gs=>eo($t.Jt,Gs)),ti=mn.mutations.map(Gs=>eo($t.Jt,Gs));return{userId:fn,batchId:mn.batchId,localWriteTimeMs:mn.localWriteTime.toMillis(),baseMutations:tr,mutations:ti}}(this.M,this.userId,Q),Ue=[];let ut=new Li(($t,fn)=>Ir($t.canonicalString(),fn.canonicalString()));for(const $t of d){const fn=Ls(this.userId,$t.key.path,O);ut=ut.add($t.key.path.popLast()),Ue.push(I.put(te)),Ue.push(m.put(fn,qo))}return ut.forEach($t=>{Ue.push(this.indexManager.addToCollectionParentIndex(e,$t))}),e.addOnCommittedListener(()=>{this.ln[O]=Q.keys()}),Yt.waitFor(Ue).next(()=>Q)})}lookupMutationBatch(e,t){return bu(e).get(t).next(o=>o?(ur(o.userId===this.userId),gd(this.M,o)):null)}fn(e,t){return this.ln[t]?Yt.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const d=o.keys();return this.ln[t]=d,d}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,d=IDBKeyRange.lowerBound([this.userId,o]);let m=null;return bu(e).Wt({index:"userMutationsIndex",range:d},(I,O,Q)=>{O.userId===this.userId&&(ur(O.batchId>=o),m=gd(this.M,O)),Q.done()}).next(()=>m)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return bu(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(d,m,I)=>{o=m.batchId,I.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return bu(e).qt("userMutationsIndex",t).next(o=>o.map(d=>gd(this.M,d)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=yr(this.userId,t.path),d=IDBKeyRange.lowerBound(o),m=[];return Jl(e).Wt({range:d},(I,O,Q)=>{const[te,Ue,ut]=I,$t=On(Ue);if(te===this.userId&&t.path.isEqual($t))return bu(e).get(ut).next(fn=>{if(!fn)throw Kn();ur(fn.userId===this.userId),m.push(gd(this.M,fn))});Q.done()}).next(()=>m)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Li(Ir);const d=[];return t.forEach(m=>{const I=yr(this.userId,m.path),O=IDBKeyRange.lowerBound(I),Q=Jl(e).Wt({range:O},(te,Ue,ut)=>{const[$t,fn,mn]=te,tr=On(fn);$t===this.userId&&m.path.isEqual(tr)?o=o.add(mn):ut.done()});d.push(Q)}),Yt.waitFor(d).next(()=>this.dn(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,d=o.length+1,m=yr(this.userId,o),I=IDBKeyRange.lowerBound(m);let O=new Li(Ir);return Jl(e).Wt({range:I},(Q,te,Ue)=>{const[ut,$t,fn]=Q,mn=On($t);ut===this.userId&&o.isPrefixOf(mn)?mn.length===d&&(O=O.add(fn)):Ue.done()}).next(()=>this.dn(e,O))}dn(e,t){const o=[],d=[];return t.forEach(m=>{d.push(bu(e).get(m).next(I=>{if(null===I)throw Kn();ur(I.userId===this.userId),o.push(gd(this.M,I))}))}),Yt.waitFor(d).next(()=>o)}removeMutationBatch(e,t){return Qd(e.Ht,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),Yt.forEach(o,d=>this.referenceDelegate.markPotentiallyOrphaned(e,d))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Yt.resolve();const o=IDBKeyRange.lowerBound([this.userId]),d=[];return Jl(e).Wt({range:o},(m,I,O)=>{if(m[0]===this.userId){const Q=On(m[1]);d.push(Q)}else O.done()}).next(()=>{ur(0===d.length)})})}containsKey(e,t){return Bh(e,this.userId,t)}wn(e){return yd(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Bh(i,e,t){const o=yr(e,t.path),d=o[1],m=IDBKeyRange.lowerBound(o);let I=!1;return Jl(i).Wt({range:m,jt:!0},(O,Q,te)=>{const[Ue,ut,$t]=O;Ue===e&&ut===d&&(I=!0),te.done()}).next(()=>I)}function bu(i){return _o(i,"mutations")}function Jl(i){return _o(i,"documentMutations")}function yd(i){return _o(i,"mutationQueues")}class Fl{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Fl(0)}static yn(){return new Fl(-1)}}class Vh{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const o=new Fl(t.highestTargetId);return t.highestTargetId=o.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>lr.fromTimestamp(new fs(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.pn(e).next(d=>(d.highestListenSequenceNumber=t,o&&(d.lastRemoteSnapshotVersion=o.toTimestamp()),t>d.highestListenSequenceNumber&&(d.highestListenSequenceNumber=t),this.In(e,d)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(o=>(o.targetCount+=1,this.En(t,o),this.In(e,o))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>wu(e).delete(t.targetId)).next(()=>this.pn(e)).next(o=>(ur(o.targetCount>0),o.targetCount-=1,this.In(e,o)))}removeTargets(e,t,o){let d=0;const m=[];return wu(e).Wt((I,O)=>{const Q=Pc(O);Q.sequenceNumber<=t&&null===o.get(Q.targetId)&&(d++,m.push(this.removeTargetData(e,Q)))}).next(()=>Yt.waitFor(m)).next(()=>d)}forEachTarget(e,t){return wu(e).Wt((o,d)=>{const m=Pc(d);t(m)})}pn(e){return kp(e).get("targetGlobalKey").next(t=>(ur(null!==t),t))}In(e,t){return kp(e).put("targetGlobalKey",t)}Tn(e,t){return wu(e).put(Kd(this.M,t))}En(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=nl(t),d=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let m=null;return wu(e).Wt({range:d,index:"queryTargetsIndex"},(I,O,Q)=>{const te=Pc(O);pa(t,te.target)&&(m=te,Q.done())}).next(()=>m)}addMatchingKeys(e,t,o){const d=[],m=Iu(e);return t.forEach(I=>{const O=lt(I.path);d.push(m.put({targetId:o,path:O})),d.push(this.referenceDelegate.addReference(e,o,I))}),Yt.waitFor(d)}removeMatchingKeys(e,t,o){const d=Iu(e);return Yt.forEach(t,m=>{const I=lt(m.path);return Yt.waitFor([d.delete([o,I]),this.referenceDelegate.removeReference(e,o,m)])})}removeMatchingKeysForTargetId(e,t){const o=Iu(e),d=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(d)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),d=Iu(e);let m=Gi();return d.Wt({range:o,jt:!0},(I,O,Q)=>{const te=On(I[1]),Ue=new xn(te);m=m.add(Ue)}).next(()=>m)}containsKey(e,t){const o=lt(t.path),d=IDBKeyRange.bound([o],[Jo(o)],!1,!0);let m=0;return Iu(e).Wt({index:"documentTargetsIndex",jt:!0,range:d},([I,O],Q,te)=>{0!==I&&(m++,te.done())}).next(()=>m>0)}Et(e,t){return wu(e).get(t).next(o=>o?Pc(o):null)}}function wu(i){return _o(i,"targets")}function kp(i){return _o(i,"targetGlobal")}function Iu(i){return _o(i,"targetDocuments")}function ec(i){return Uh.apply(this,arguments)}function Uh(){return Uh=(0,we.Z)(function*(i){if(i.code!==Vt.FAILED_PRECONDITION||i.message!==If)throw i;ln("LocalStore","Unexpectedly lost primary lease")}),Uh.apply(this,arguments)}function xf([i,e],[t,o]){const d=Ir(i,t);return 0===d?Ir(e,o):d}class h{constructor(e){this.An=e,this.buffer=new Li(xf),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();xf(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class u{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const o=this.Vn?3e5:6e4;ln("LruGarbageCollector",`Garbage collection scheduled in ${o}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",o,(0,we.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(d){Ol(d)?ln("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",d):yield ec(d)}yield t.Sn(e)}))}}class c{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return Yt.resolve(Nn.A);const o=new h(t);return this.Dn.forEachTarget(e,d=>o.Pn(d.sequenceNumber)).next(()=>this.Dn.xn(e,d=>o.Pn(d))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.Dn.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ln("LruGarbageCollector","Garbage collection skipped; disabled"),Yt.resolve(al)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(ln("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),al):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let o,d,m,I,O,Q,te;const Ue=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(ut=>(ut>this.params.maximumSequenceNumbersToCollect?(ln("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ut}`),d=this.params.maximumSequenceNumbersToCollect):d=ut,I=Date.now(),this.nthSequenceNumber(e,d))).next(ut=>(o=ut,O=Date.now(),this.removeTargets(e,o,t))).next(ut=>(m=ut,Q=Date.now(),this.removeOrphanedDocuments(e,o))).next(ut=>(te=Date.now(),hl()<=Pt.in.DEBUG&&ln("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${I-Ue}ms\n\tDetermined least recently used ${d} in `+(O-I)+`ms\n\tRemoved ${m} targets in `+(Q-O)+`ms\n\tRemoved ${ut} documents in `+(te-Q)+`ms\nTotal Duration: ${te-Ue}ms`),Yt.resolve({didRun:!0,sequenceNumbersCollected:d,targetsRemoved:m,documentsRemoved:ut})))}}class g{constructor(e,t){this.db=e,this.garbageCollector=new c(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(d=>o+d))}kn(e){let t=0;return this.xn(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(o,d)=>t(d))}addReference(e,t,o){return D(e,o)}removeReference(e,t,o){return D(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return D(e,t)}On(e,t){return function(o,d){let m=!1;return yd(o).zt(I=>Bh(o,I,d).next(O=>(O&&(m=!0),Yt.resolve(!O)))).next(()=>m)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),d=[];let m=0;return this.Mn(e,(I,O)=>{if(O<=t){const Q=this.On(e,I).next(te=>{if(!te)return m++,o.getEntry(e,I).next(()=>(o.removeEntry(I,lr.min()),Iu(e).delete([0,lt(I.path)])))});d.push(Q)}}).next(()=>Yt.waitFor(d)).next(()=>o.apply(e)).next(()=>m)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return D(e,t)}Mn(e,t){const o=Iu(e);let d,m=Nn.A;return o.Wt({index:"documentTargetsIndex"},([I,O],{path:Q,sequenceNumber:te})=>{0===I?(m!==Nn.A&&t(new xn(On(d)),m),m=te,d=Q):m=Nn.A}).next(()=>{m!==Nn.A&&t(new xn(On(d)),m)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function D(i,e){return Iu(i).put((o=i.currentSequenceNumber,{targetId:0,path:lt(e.path),sequenceNumber:o}));var o}class P{constructor(){this.changes=new Ha(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Cn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?Yt.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class G{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return Qe(e).put(o)}removeEntry(e,t,o){return Qe(e).delete(function(d,m){const I=d.path.toArray();return[I.slice(0,I.length-2),I[I.length-2],Yd(m),I[I.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.Fn(e,o)))}getEntry(e,t){let o=Cn.newInvalidDocument(t);return Qe(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Bt(t))},(d,m)=>{o=this.$n(t,m)}).next(()=>o)}Bn(e,t){let o={size:0,document:Cn.newInvalidDocument(t)};return Qe(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Bt(t))},(d,m)=>{o={document:this.$n(t,m),size:Lc(m)}}).next(()=>o)}getEntries(e,t){let o=sa();return this.Ln(e,t,(d,m)=>{const I=this.$n(d,m);o=o.insert(d,I)}).next(()=>o)}Un(e,t){let o=sa(),d=new Vi(xn.comparator);return this.Ln(e,t,(m,I)=>{const O=this.$n(m,I);o=o.insert(m,O),d=d.insert(m,Lc(I))}).next(()=>({documents:o,qn:d}))}Ln(e,t,o){if(t.isEmpty())return Yt.resolve();let d=new Li(an);t.forEach(Q=>d=d.add(Q));const m=IDBKeyRange.bound(Bt(d.first()),Bt(d.last())),I=d.getIterator();let O=I.getNext();return Qe(e).Wt({index:"documentKeyIndex",range:m},(Q,te,Ue)=>{const ut=xn.fromSegments([...te.prefixPath,te.collectionGroup,te.documentId]);for(;O&&an(O,ut)<0;)o(O,null),O=I.getNext();O&&O.isEqual(ut)&&(o(O,te),O=I.hasNext()?I.getNext():null),O?Ue.Ut(Bt(O)):Ue.done()}).next(()=>{for(;O;)o(O,null),O=I.hasNext()?I.getNext():null})}getAllFromCollection(e,t,o){const d=[t.popLast().toArray(),t.lastSegment(),Yd(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],m=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Qe(e).qt(IDBKeyRange.bound(d,m,!0)).next(I=>{let O=sa();for(const Q of I){const te=this.$n(xn.fromSegments(Q.prefixPath.concat(Q.collectionGroup,Q.documentId)),Q);O=O.insert(te.key,te)}return O})}getAllFromCollectionGroup(e,t,o,d){let m=sa();const I=Ft(t,o),O=Ft(t,oo.max());return Qe(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(I,O,!0)},(Q,te,Ue)=>{const ut=this.$n(xn.fromSegments(te.prefixPath.concat(te.collectionGroup,te.documentId)),te);m=m.insert(ut.key,ut),m.size===d&&Ue.done()}).next(()=>m)}newChangeBuffer(e){return new le(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Me(e).get("remoteDocumentGlobalKey").next(t=>(ur(!!t),t))}Fn(e,t){return Me(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const o=function Oh(i,e){let t;if(e.document)t=za(i.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=xn.fromSegments(e.noDocument.path),d=Rc(e.noDocument.readTime);t=Cn.newNoDocument(o,d),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Kn();{const o=xn.fromSegments(e.unknownDocument.path),d=Rc(e.unknownDocument.version);t=Cn.newUnknownDocument(o,d)}}return e.readTime&&t.setReadTime(function(o){const d=new fs(o[0],o[1]);return lr.fromTimestamp(d)}(e.readTime)),t}(this.M,t);if(!o.isNoDocument()||!o.version.isEqual(lr.min()))return o}return Cn.newInvalidDocument(e)}}class le extends P{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Ha(o=>o.toString(),(o,d)=>o.isEqual(d))}applyChanges(e){const t=[];let o=0,d=new Li((m,I)=>Ir(m.canonicalString(),I.canonicalString()));return this.changes.forEach((m,I)=>{const O=this.Gn.get(m);if(t.push(this.Kn.removeEntry(e,m,O.readTime)),I.isValidDocument()){const Q=Mc(this.Kn.M,I);d=d.add(m.path.popLast()),o+=Lc(Q)-O.size,t.push(this.Kn.addEntry(e,m,Q))}else if(o-=O.size,this.trackRemovals){const Q=Mc(this.Kn.M,I.convertToNoDocument(lr.min()));t.push(this.Kn.addEntry(e,m,Q))}}),d.forEach(m=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,m))}),t.push(this.Kn.updateMetadata(e,o)),Yt.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(o=>(this.Gn.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:o,qn:d})=>(d.forEach((m,I)=>{this.Gn.set(m,{size:I,readTime:o.get(m).readTime})}),o))}}function Me(i){return _o(i,"remoteDocumentGlobal")}function Qe(i){return _o(i,"remoteDocumentsV14")}function Bt(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Ft(i,e){const t=e.documentKey.path.toArray();return[i,Yd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function an(i,e){const t=i.path.toArray(),o=e.path.toArray();let d=0;for(let m=0;m<t.length-2&&m<o.length-2;++m)if(d=Ir(t[m],o[m]),d)return d;return d=Ir(t.length,o.length),d||(d=Ir(t[t.length-2],o[o.length-2]),d||Ir(t[t.length-1],o[o.length-1]))}class ar{constructor(e){this.M=e}kt(e,t,o,d){const m=new Pl("createOrUpgrade",t);var O;o<1&&d>=1&&(e.createObjectStore("owner"),(O=e).createObjectStore("mutationQueues",{keyPath:"userId"}),O.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",xr,{unique:!0}),O.createObjectStore("documentMutations"),Mr(e),function(O){O.createObjectStore("remoteDocuments")}(e));let I=Yt.resolve();return o<3&&d>=3&&(0!==o&&(function(O){O.deleteObjectStore("targetDocuments"),O.deleteObjectStore("targets"),O.deleteObjectStore("targetGlobal")}(e),Mr(e)),I=I.next(()=>function(O){const Q=O.store("targetGlobal"),te={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:lr.min().toTimestamp(),targetCount:0};return Q.put("targetGlobalKey",te)}(m))),o<4&&d>=4&&(0!==o&&(I=I.next(()=>function(O,Q){return Q.store("mutations").qt().next(te=>{O.deleteObjectStore("mutations"),O.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",xr,{unique:!0});const Ue=Q.store("mutations"),ut=te.map($t=>Ue.put($t));return Yt.waitFor(ut)})}(e,m))),I=I.next(()=>{!function(O){O.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&d>=5&&(I=I.next(()=>this.Qn(m))),o<6&&d>=6&&(I=I.next(()=>(function(O){O.createObjectStore("remoteDocumentGlobal")}(e),this.jn(m)))),o<7&&d>=7&&(I=I.next(()=>this.Wn(m))),o<8&&d>=8&&(I=I.next(()=>this.zn(e,m))),o<9&&d>=9&&(I=I.next(()=>{!function(O){O.objectStoreNames.contains("remoteDocumentChanges")&&O.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&d>=10&&(I=I.next(()=>this.Hn(m))),o<11&&d>=11&&(I=I.next(()=>{(function(O){O.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(O){O.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&d>=12&&(I=I.next(()=>{!function(O){const Q=O.createObjectStore("documentOverlays",{keyPath:hd});Q.createIndex("collectionPathOverlayIndex",xh,{unique:!1}),Q.createIndex("collectionGroupOverlayIndex",bf,{unique:!1})}(e)})),o<13&&d>=13&&(I=I.next(()=>function(O){const Q=O.createObjectStore("remoteDocumentsV14",{keyPath:Zu});Q.createIndex("documentKeyIndex",Sh),Q.createIndex("collectionGroupIndex",Rl)}(e)).next(()=>this.Jn(e,m)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&d>=14&&(I=I.next(()=>{!function(O){O.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),O.createObjectStore("indexState",{keyPath:jd}).createIndex("sequenceNumberIndex",dd,{unique:!1}),O.createObjectStore("indexEntries",{keyPath:Hd}).createIndex("documentKeyIndex",Ah,{unique:!1})}(e)})),I}jn(e){let t=0;return e.store("remoteDocuments").Wt((o,d)=>{t+=Lc(d)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Qn(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.qt().next(d=>Yt.forEach(d,m=>{const I=IDBKeyRange.bound([m.userId,-1],[m.userId,m.lastAcknowledgedBatchId]);return o.qt("userMutationsIndex",I).next(O=>Yt.forEach(O,Q=>{ur(Q.userId===m.userId);const te=gd(this.M,Q);return Qd(e,m.userId,te).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(d=>{const m=[];return o.Wt((I,O)=>{const Q=new mi(I),te=[0,lt(Q)];m.push(t.get(te).next(Ue=>Ue?Yt.resolve():t.put({targetId:0,path:lt(Q),sequenceNumber:d.highestListenSequenceNumber})))}).next(()=>Yt.waitFor(m))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:Sc});const o=t.store("collectionParents"),d=new md,m=I=>{if(d.add(I)){const O=I.lastSegment(),Q=I.popLast();return o.put({collectionId:O,parent:lt(Q)})}};return t.store("remoteDocuments").Wt({jt:!0},(I,O)=>{const Q=new mi(I);return m(Q.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([I,O,Q],te)=>{const Ue=On(O);return m(Ue.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((o,d)=>{const m=Pc(d),I=Kd(this.M,m);return t.put(I)})}Jn(e,t){const o=t.store("remoteDocuments"),d=[];return o.Wt((m,I)=>{const O=t.store("remoteDocumentsV14"),Q=(te=I,te.document?new xn(mi.fromString(te.document.name).popFirst(5)):te.noDocument?xn.fromSegments(te.noDocument.path):te.unknownDocument?xn.fromSegments(te.unknownDocument.path):Kn()).path.toArray();var te;const Ue={prefixPath:Q.slice(0,Q.length-2),collectionGroup:Q[Q.length-2],documentId:Q[Q.length-1],readTime:I.readTime||[0,0],unknownDocument:I.unknownDocument,noDocument:I.noDocument,document:I.document,hasCommittedMutations:!!I.hasCommittedMutations};d.push(O.put(Ue))}).next(()=>Yt.waitFor(d))}}function Mr(i){i.createObjectStore("targetDocuments",{keyPath:ud}).createIndex("documentTargetsIndex",cd,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Tc,{unique:!0}),i.createObjectStore("targetGlobal")}const Yi="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Eo{constructor(e,t,o,d,m,I,O,Q,te,Ue,ut=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.Yn=m,this.window=I,this.document=O,this.Xn=te,this.Zn=Ue,this.ts=ut,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=$t=>Promise.resolve(),!Eo.vt())throw new M(Vt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new g(this,d),this.hs=t+"main",this.M=new Ph(Q),this.ls=new Aa(this.hs,this.ts,new ar(this.M)),this.fs=new Vh(this.referenceDelegate,this.M),this.ds=new G(this.M),this._s=new Mp,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===Ue&&Pi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new M(Vt.FAILED_PRECONDITION,Yi);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Nn(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var o=(0,we.Z)(function*(d){if(t.started)return e(d)});return function(d){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,we.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,we.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>bo(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(Ol(e))return ln("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ln("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return Ll(e).get("owner").next(t=>Yt.resolve(this.Ps(t)))}Vs(e){return bo(e).delete(this.clientId)}vs(){var e=this;return(0,we.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const d=_o(o,"clientMetadata");return d.qt().next(m=>{const I=e.Ds(m,18e5),O=m.filter(Q=>-1===I.indexOf(Q));return Yt.forEach(O,Q=>d.delete(Q.clientId)).next(()=>O)})}).catch(()=>[]);if(e.ws)for(const o of t)e.ws.removeItem(e.Cs(o.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?Yt.resolve(!0):Ll(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new M(Vt.FAILED_PRECONDITION,Yi);return!1}}return!(!this.networkEnabled||!this.inForeground)||bo(e).qt().next(o=>void 0===this.Ds(o,5e3).find(d=>{if(this.clientId!==d.clientId){const I=!this.inForeground&&d.inForeground,O=this.networkEnabled===d.networkEnabled;if(!this.networkEnabled&&d.networkEnabled||I&&O)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ln("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,we.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new Rh(t,Nn.A);return e.Rs(o).next(()=>e.Vs(o))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(o=>this.Ss(o.updateTimeMs,t)&&!this.xs(o.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>bo(e).qt().next(t=>this.Ds(t,18e5).map(o=>o.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return Af.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new Eu(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return Nl.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,o){ln("IndexedDbPersistence","Starting transaction:",e);const d="readonly"===t?"readonly":"readwrite",m=14===(I=this.ts)?ol:13===I?zd:12===I?wf:11===I?Gd:void Kn();var I;let O;return this.ls.runTransaction(e,d,m,Q=>(O=new Rh(Q,this.es?this.es.next():Nn.A),"readwrite-primary"===t?this.Es(O).next(te=>!!te||this.As(O)).next(te=>{if(!te)throw Pi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new M(Vt.FAILED_PRECONDITION,If);return o(O)}).next(te=>this.bs(O).next(()=>te)):this.$s(O).next(()=>o(O)))).then(Q=>(O.raiseOnCommittedEvent(),Q))}$s(e){return Ll(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new M(Vt.FAILED_PRECONDITION,Yi)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ll(e).put("owner",t)}static vt(){return Aa.vt()}Rs(e){const t=Ll(e);return t.get("owner").next(o=>this.Ps(o)?(ln("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Yt.resolve())}Ss(e,t){const o=Date.now();return!(e<o-t||e>o&&(Pi(`Detected an update time that is in the future: ${e} > ${o}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,Xe.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const o=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return ln("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return Pi("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){Pi("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ll(i){return _o(i,"owner")}function bo(i){return _o(i,"clientMetadata")}function Bl(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class Np{constructor(e,t,o){this.ds=e,this.Bs=t,this.indexManager=o}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(o=>this.Us(e,t,o))}Us(e,t,o){return this.ds.getEntry(e,t).next(d=>{for(const m of o)m.applyToLocalView(d);return d})}qs(e,t){e.forEach((o,d)=>{for(const m of t)m.applyToLocalView(d)})}Ks(e,t){return this.ds.getEntries(e,t).next(o=>this.Gs(e,o).next(()=>o))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>this.qs(t,o))}Qs(e,t,o){return xn.isDocumentKey((d=t).path)&&null===d.collectionGroup&&0===d.filters.length?this.js(e,t.path):Da(t)?this.Ws(e,t,o):this.zs(e,t,o);var d}js(e,t){return this.Ls(e,new xn(t)).next(o=>{let d=sd();return o.isFoundDocument()&&(d=d.insert(o.key,o)),d})}Ws(e,t,o){const d=t.collectionGroup;let m=sd();return this.indexManager.getCollectionParents(e,d).next(I=>Yt.forEach(I,O=>{const Q=(te=t,Ue=O.child(d),new rl(Ue,null,te.explicitOrderBy.slice(),te.filters.slice(),te.limit,te.limitType,te.startAt,te.endAt));var te,Ue;return this.zs(e,Q,o).next(te=>{te.forEach((Ue,ut)=>{m=m.insert(Ue,ut)})})}).next(()=>m))}zs(e,t,o){let d;return this.ds.getAllFromCollection(e,t.path,o).next(m=>(d=m,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(m=>{for(const I of m)for(const O of I.mutations){const Q=O.key;let te=d.get(Q);null==te&&(te=Cn.newInvalidDocument(Q),d=d.insert(Q,te)),hu(O,te,I.localWriteTime),te.isFoundDocument()||(d=d.remove(Q))}}).next(()=>(d.forEach((m,I)=>{Ta(t,I)||(d=d.remove(m))}),d))}}class Mf{constructor(e,t,o,d){this.targetId=e,this.fromCache=t,this.Hs=o,this.Js=d}static Ys(e,t){let o=Gi(),d=Gi();for(const m of t.docChanges)switch(m.type){case 0:o=o.add(m.doc.key);break;case 1:d=d.add(m.doc.key)}return new Mf(e,t.fromCache,o,d)}}class Rf{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,o,d){return this.ti(e,t).next(m=>m||this.ei(e,t,d,o)).next(m=>m||this.ni(e,t))}ti(e,t){return Yt.resolve(null)}ei(e,t,o,d){return function Qc(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}(t)||d.isEqual(lr.min())?this.ni(e,t):this.Zs.Ks(e,o).next(m=>{const I=this.si(t,m);return this.ii(t,I,o,d)?this.ni(e,t):(hl()<=Pt.in.DEBUG&&ln("QueryEngine","Re-using previous result from %s to execute query: %s",d.toString(),Wo(t)),this.ri(e,I,t,Us(d,-1)))})}si(e,t){let o=new Li(Cl(e));return t.forEach((d,m)=>{Ta(e,m)&&(o=o.add(m))}),o}ii(e,t,o,d){if(null===e.limit)return!1;if(o.size!==t.size)return!0;const m="F"===e.limitType?t.last():t.first();return!!m&&(m.hasPendingWrites||m.version.compareTo(d)>0)}ni(e,t){return hl()<=Pt.in.DEBUG&&ln("QueryEngine","Using full collection scan to execute query:",Wo(t)),this.Zs.Qs(e,t,oo.min())}ri(e,t,o,d){return this.Zs.Qs(e,o,d).next(m=>(t.forEach(I=>{m=m.insert(I.key,I)}),m))}}class lm{constructor(e,t,o,d){this.persistence=e,this.oi=t,this.M=d,this.ui=new Vi(Ir),this.ai=new Ha(m=>nl(m),pa),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(o)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new Np(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function Pf(i,e,t,o){return new lm(i,e,t,o)}function um(i,e){return Cu.apply(this,arguments)}function Cu(){return Cu=(0,we.Z)(function*(i,e){const t=Sn(i);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let d;return t.Bs.getAllMutationBatches(o).next(m=>(d=m,t.li(e),t.Bs.getAllMutationBatches(o))).next(m=>{const I=[],O=[];let Q=Gi();for(const te of d){I.push(te.batchId);for(const Ue of te.mutations)Q=Q.add(Ue.key)}for(const te of m){O.push(te.batchId);for(const Ue of te.mutations)Q=Q.add(Ue.key)}return t.fi.Ks(o,Q).next(te=>({di:te,removedBatchIds:I,addedBatchIds:O}))})})}),Cu.apply(this,arguments)}function cm(i,e){const t=Sn(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const d=e.batch.keys(),m=t.hi.newChangeBuffer({trackRemovals:!0});return function(I,O,Q,te){const Ue=Q.batch,ut=Ue.keys();let $t=Yt.resolve();return ut.forEach(fn=>{$t=$t.next(()=>te.getEntry(O,fn)).next(mn=>{const tr=Q.docVersions.get(fn);ur(null!==tr),mn.version.compareTo(tr)<0&&(Ue.applyToRemoteDocument(mn,Q),mn.isValidDocument()&&(mn.setReadTime(Q.commitVersion),te.addEntry(mn)))})}),$t.next(()=>I.Bs.removeMutationBatch(O,Ue))}(t,o,e,m).next(()=>m.apply(o)).next(()=>t.Bs.performConsistencyCheck(o)).next(()=>t.fi.Ks(o,d))})}function dm(i){const e=Sn(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function Fp(i,e){const t=Sn(i),o=e.snapshotVersion;let d=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",m=>{const I=t.hi.newChangeBuffer({trackRemovals:!0});d=t.ui;const O=[];e.targetChanges.forEach((te,Ue)=>{const ut=d.get(Ue);if(!ut)return;O.push(t.fs.removeMatchingKeys(m,te.removedDocuments,Ue).next(()=>t.fs.addMatchingKeys(m,te.addedDocuments,Ue)));let $t=ut.withSequenceNumber(m.currentSequenceNumber);var fn,mn,tr;e.targetMismatches.has(Ue)?$t=$t.withResumeToken(Vs.EMPTY_BYTE_STRING,lr.min()).withLastLimboFreeSnapshotVersion(lr.min()):te.resumeToken.approximateByteSize()>0&&($t=$t.withResumeToken(te.resumeToken,o)),d=d.insert(Ue,$t),mn=$t,tr=te,(0===(fn=ut).resumeToken.approximateByteSize()||mn.snapshotVersion.toMicroseconds()-fn.snapshotVersion.toMicroseconds()>=3e8||tr.addedDocuments.size+tr.modifiedDocuments.size+tr.removedDocuments.size>0)&&O.push(t.fs.updateTargetData(m,$t))});let Q=sa();if(e.documentUpdates.forEach(te=>{e.resolvedLimboDocuments.has(te)&&O.push(t.persistence.referenceDelegate.updateLimboDocument(m,te))}),O.push(hm(m,I,e.documentUpdates).next(te=>{Q=te})),!o.isEqual(lr.min())){const te=t.fs.getLastRemoteSnapshotVersion(m).next(Ue=>t.fs.setTargetsMetadata(m,m.currentSequenceNumber,o));O.push(te)}return Yt.waitFor(O).next(()=>I.apply(m)).next(()=>t.fi.Gs(m,Q)).next(()=>Q)}).then(m=>(t.ui=d,m))}function hm(i,e,t){let o=Gi();return t.forEach(d=>o=o.add(d)),e.getEntries(i,o).next(d=>{let m=sa();return t.forEach((I,O)=>{const Q=d.get(I);O.isNoDocument()&&O.version.isEqual(lr.min())?(e.removeEntry(I,O.readTime),m=m.insert(I,O)):!Q.isValidDocument()||O.version.compareTo(Q.version)>0||0===O.version.compareTo(Q.version)&&Q.hasPendingWrites?(e.addEntry(O),m=m.insert(I,O)):ln("LocalStore","Ignoring outdated watch update for ",I,". Current version:",Q.version," Watch version:",O.version)}),m})}function fm(i,e){const t=Sn(i);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(o,e)))}function Jd(i,e){const t=Sn(i);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let d;return t.fs.getTargetData(o,e).next(m=>m?(d=m,Yt.resolve(d)):t.fs.allocateTargetId(o).next(I=>(d=new kl(e,I,0,o.currentSequenceNumber),t.fs.addTargetData(o,d).next(()=>d))))}).then(o=>{const d=t.ui.get(o.targetId);return(null===d||o.snapshotVersion.compareTo(d.snapshotVersion)>0)&&(t.ui=t.ui.insert(o.targetId,o),t.ai.set(e,o.targetId)),o})}function eh(i,e,t){return _d.apply(this,arguments)}function _d(){return _d=(0,we.Z)(function*(i,e,t){const o=Sn(i),d=o.ui.get(e),m=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",m,I=>o.persistence.referenceDelegate.removeTarget(I,d)))}catch(I){if(!Ol(I))throw I;ln("LocalStore",`Failed to update sequence numbers for target ${e}: ${I}`)}o.ui=o.ui.remove(e),o.ai.delete(d.target)}),_d.apply(this,arguments)}function tc(i,e,t){const o=Sn(i);let d=lr.min(),m=Gi();return o.persistence.runTransaction("Execute query","readonly",I=>function(O,Q,te){const Ue=Sn(O),ut=Ue.ai.get(te);return void 0!==ut?Yt.resolve(Ue.ui.get(ut)):Ue.fs.getTargetData(Q,te)}(o,I,Qs(e)).next(O=>{if(O)return d=O.lastLimboFreeSnapshotVersion,o.fs.getMatchingKeysForTargetId(I,O.targetId).next(Q=>{m=Q})}).next(()=>o.oi.Qs(I,e,t?d:lr.min(),t?m:Gi())).next(O=>(th(o,Jc(e),O),{documents:O,_i:m})))}function Of(i,e){const t=Sn(i),o=Sn(t.fs),d=t.ui.get(e);return d?Promise.resolve(d.target):t.persistence.runTransaction("Get target data","readonly",m=>o.Et(m,e).next(I=>I?I.target:null))}function vd(i,e){const t=Sn(i),o=t.ci.get(e)||lr.min();return t.persistence.runTransaction("Get new document changes","readonly",d=>t.hi.getAllFromCollectionGroup(d,e,Us(o,-1),Number.MAX_SAFE_INTEGER)).then(d=>(th(t,e,d),d))}function th(i,e,t){let o=lr.min();t.forEach((d,m)=>{m.readTime.compareTo(o)>0&&(o=m.readTime)}),i.ci.set(e,o)}function Lp(){return Lp=(0,we.Z)(function*(i,e,t,o){const d=Sn(i);let m=Gi(),I=sa();for(const te of t){const Ue=e.wi(te.metadata.name);te.document&&(m=m.add(Ue));const ut=e.mi(te);ut.setReadTime(e.gi(te.metadata.readTime)),I=I.insert(Ue,ut)}const O=d.hi.newChangeBuffer({trackRemovals:!0}),Q=yield Jd(d,(te=o,Qs($a(mi.fromString(`__bundle__/docs/${te}`)))));var te;return d.persistence.runTransaction("Apply bundle documents","readwrite",te=>hm(te,O,I).next(Ue=>(O.apply(te),Ue)).next(Ue=>d.fs.removeMatchingKeysForTargetId(te,Q.targetId).next(()=>d.fs.addMatchingKeys(te,m,Q.targetId)).next(()=>d.fi.Gs(te,Ue)).next(()=>Ue)))}),Lp.apply(this,arguments)}function pm(i,e){return kf.apply(this,arguments)}function kf(){return kf=(0,we.Z)(function*(i,e,t=Gi()){const o=yield Jd(i,Qs(Zd(e.bundledQuery))),d=Sn(i);return d.persistence.runTransaction("Save named query","readwrite",m=>{const I=Zs(e.readTime);if(o.snapshotVersion.compareTo(I)>=0)return d._s.saveNamedQuery(m,e);const O=o.withResumeToken(Vs.EMPTY_BYTE_STRING,I);return d.ui=d.ui.insert(O.targetId,O),d.fs.updateTargetData(m,O).next(()=>d.fs.removeMatchingKeysForTargetId(m,o.targetId)).next(()=>d.fs.addMatchingKeys(m,t,o.targetId)).next(()=>d._s.saveNamedQuery(m,e))})}),kf.apply(this,arguments)}class Bp{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return Yt.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var o;return this.yi.set(t.id,{id:(o=t).id,version:o.version,createTime:Zs(o.createTime)}),Yt.resolve()}getNamedQuery(e,t){return Yt.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(o=t).name,query:Zd(o.bundledQuery),readTime:Zs(o.readTime)}),Yt.resolve();var o}}class Vp{constructor(){this.overlays=new Vi(xn.comparator),this.Ii=new Map}getOverlay(e,t){return Yt.resolve(this.overlays.get(t))}saveOverlays(e,t,o){return o.forEach((d,m)=>{this.Xt(e,t,m)}),Yt.resolve()}removeOverlaysForBatchId(e,t,o){const d=this.Ii.get(o);return void 0!==d&&(d.forEach(m=>this.overlays=this.overlays.remove(m)),this.Ii.delete(o)),Yt.resolve()}getOverlaysForCollection(e,t,o){const d=zu(),m=t.length+1,I=new xn(t.child("")),O=this.overlays.getIteratorFrom(I);for(;O.hasNext();){const Q=O.getNext().value,te=Q.getKey();if(!t.isPrefixOf(te.path))break;te.path.length===m&&Q.largestBatchId>o&&d.set(Q.getKey(),Q)}return Yt.resolve(d)}getOverlaysForCollectionGroup(e,t,o,d){let m=new Vi((te,Ue)=>te-Ue);const I=this.overlays.getIterator();for(;I.hasNext();){const te=I.getNext().value;if(te.getKey().getCollectionGroup()===t&&te.largestBatchId>o){let Ue=m.get(te.largestBatchId);null===Ue&&(Ue=zu(),m=m.insert(te.largestBatchId,Ue)),Ue.set(te.getKey(),te)}}const O=zu(),Q=m.getIterator();for(;Q.hasNext()&&(Q.getNext().value.forEach((te,Ue)=>O.set(te,Ue)),!(O.size()>=d)););return Yt.resolve(O)}Xt(e,t,o){if(null===o)return;const d=this.overlays.get(o.key);if(null!==d){const I=this.Ii.get(d.largestBatchId).delete(o.key);this.Ii.set(d.largestBatchId,I)}this.overlays=this.overlays.insert(o.key,new qd(t,o));let m=this.Ii.get(t);void 0===m&&(m=Gi(),this.Ii.set(t,m)),this.Ii.set(t,m.add(o.key))}}class Nf{constructor(){this.Ti=new Li(wo.Ei),this.Ai=new Li(wo.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const o=new wo(e,t);this.Ti=this.Ti.add(o),this.Ai=this.Ai.add(o)}bi(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.Pi(new wo(e,t))}Vi(e,t){e.forEach(o=>this.removeReference(o,t))}vi(e){const t=new xn(new mi([])),o=new wo(t,e),d=new wo(t,e+1),m=[];return this.Ai.forEachInRange([o,d],I=>{this.Pi(I),m.push(I.key)}),m}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new xn(new mi([])),o=new wo(t,e),d=new wo(t,e+1);let m=Gi();return this.Ai.forEachInRange([o,d],I=>{m=m.add(I.key)}),m}containsKey(e){const t=new wo(e,0),o=this.Ti.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class wo{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return xn.comparator(e.key,t.key)||Ir(e.Ci,t.Ci)}static Ri(e,t){return Ir(e.Ci,t.Ci)||xn.comparator(e.key,t.key)}}class t_{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new Li(wo.Ei)}checkEmpty(e){return Yt.resolve(0===this.Bs.length)}addMutationBatch(e,t,o,d){const m=this.xi;this.xi++;const I=new Ac(m,t,o,d);this.Bs.push(I);for(const O of d)this.Ni=this.Ni.add(new wo(O.key,m)),this.indexManager.addToCollectionParentIndex(e,O.key.path.popLast());return Yt.resolve(I)}lookupMutationBatch(e,t){return Yt.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const d=this.Mi(t+1),m=d<0?0:d;return Yt.resolve(this.Bs.length>m?this.Bs[m]:null)}getHighestUnacknowledgedBatchId(){return Yt.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return Yt.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new wo(t,0),d=new wo(t,Number.POSITIVE_INFINITY),m=[];return this.Ni.forEachInRange([o,d],I=>{const O=this.ki(I.Ci);m.push(O)}),Yt.resolve(m)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Li(Ir);return t.forEach(d=>{const m=new wo(d,0),I=new wo(d,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([m,I],O=>{o=o.add(O.Ci)})}),Yt.resolve(this.Oi(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,d=o.length+1;let m=o;xn.isDocumentKey(m)||(m=m.child(""));const I=new wo(new xn(m),0);let O=new Li(Ir);return this.Ni.forEachWhile(Q=>{const te=Q.key.path;return!!o.isPrefixOf(te)&&(te.length===d&&(O=O.add(Q.Ci)),!0)},I),Yt.resolve(this.Oi(O))}Oi(e){const t=[];return e.forEach(o=>{const d=this.ki(o);null!==d&&t.push(d)}),t}removeMutationBatch(e,t){ur(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let o=this.Ni;return Yt.forEach(t.mutations,d=>{const m=new wo(d.key,t.batchId);return o=o.delete(m),this.referenceDelegate.markPotentiallyOrphaned(e,d.key)}).next(()=>{this.Ni=o})}_n(e){}containsKey(e,t){const o=new wo(t,0),d=this.Ni.firstAfterOrEqual(o);return Yt.resolve(t.isEqual(d&&d.key))}performConsistencyCheck(e){return Yt.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class gm{constructor(e){this.$i=e,this.docs=new Vi(xn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,d=this.docs.get(o),m=d?d.size:0,I=this.$i(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:I}),this.size+=I-m,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return Yt.resolve(o?o.document.mutableCopy():Cn.newInvalidDocument(t))}getEntries(e,t){let o=sa();return t.forEach(d=>{const m=this.docs.get(d);o=o.insert(d,m?m.document.mutableCopy():Cn.newInvalidDocument(d))}),Yt.resolve(o)}getAllFromCollection(e,t,o){let d=sa();const m=new xn(t.child("")),I=this.docs.getIteratorFrom(m);for(;I.hasNext();){const{key:O,value:{document:Q}}=I.getNext();if(!t.isPrefixOf(O.path))break;O.path.length>t.length+1||zo(yl(Q),o)<=0||(d=d.insert(Q.key,Q.mutableCopy()))}return Yt.resolve(d)}getAllFromCollectionGroup(e,t,o,d){Kn()}Bi(e,t){return Yt.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new zv(this)}getSize(e){return Yt.resolve(this.size)}}class zv extends P{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((o,d)=>{d.isValidDocument()?t.push(this.Kn.addEntry(e,d)):this.Kn.removeEntry(o)}),Yt.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class mm{constructor(e){this.persistence=e,this.Li=new Ha(t=>nl(t),pa),this.lastRemoteSnapshotVersion=lr.min(),this.highestTargetId=0,this.Ui=0,this.qi=new Nf,this.targetCount=0,this.Ki=Fl.gn()}forEachTarget(e,t){return this.Li.forEach((o,d)=>t(d)),Yt.resolve()}getLastRemoteSnapshotVersion(e){return Yt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Yt.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),Yt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.Ui&&(this.Ui=t),Yt.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new Fl(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,Yt.resolve()}updateTargetData(e,t){return this.Tn(t),Yt.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,Yt.resolve()}removeTargets(e,t,o){let d=0;const m=[];return this.Li.forEach((I,O)=>{O.sequenceNumber<=t&&null===o.get(O.targetId)&&(this.Li.delete(I),m.push(this.removeMatchingKeysForTargetId(e,O.targetId)),d++)}),Yt.waitFor(m).next(()=>d)}getTargetCount(e){return Yt.resolve(this.targetCount)}getTargetData(e,t){const o=this.Li.get(t)||null;return Yt.resolve(o)}addMatchingKeys(e,t,o){return this.qi.bi(t,o),Yt.resolve()}removeMatchingKeys(e,t,o){this.qi.Vi(t,o);const d=this.persistence.referenceDelegate,m=[];return d&&t.forEach(I=>{m.push(d.markPotentiallyOrphaned(e,I))}),Yt.waitFor(m)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),Yt.resolve()}getMatchingKeysForTargetId(e,t){const o=this.qi.Di(t);return Yt.resolve(o)}containsKey(e,t){return Yt.resolve(this.qi.containsKey(t))}}class ym{constructor(e,t){this.Gi={},this.overlays={},this.es=new Nn(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new mm(this),this.indexManager=new Lh,this.ds=new gm(o=>this.referenceDelegate.Qi(o)),this.M=new Ph(t),this._s=new Bp(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Vp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.Gi[e.toKey()];return o||(o=new t_(t,this.referenceDelegate),this.Gi[e.toKey()]=o),o}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,o){ln("MemoryPersistence","Starting transaction:",e);const d=new n_(this.es.next());return this.referenceDelegate.ji(),o(d).next(m=>this.referenceDelegate.Wi(d).next(()=>m)).toPromise().then(m=>(d.raiseOnCommittedEvent(),m))}zi(e,t){return Yt.or(Object.values(this.Gi).map(o=>()=>o.containsKey(e,t)))}}class n_ extends fd{constructor(e){super(),this.currentSequenceNumber=e}}class Ff{constructor(e){this.persistence=e,this.Hi=new Nf,this.Ji=null}static Yi(e){return new Ff(e)}get Xi(){if(this.Ji)return this.Ji;throw Kn()}addReference(e,t,o){return this.Hi.addReference(o,t),this.Xi.delete(o.toString()),Yt.resolve()}removeReference(e,t,o){return this.Hi.removeReference(o,t),this.Xi.add(o.toString()),Yt.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),Yt.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(d=>this.Xi.add(d.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(d=>{d.forEach(m=>this.Xi.add(m.toString()))}).next(()=>o.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Yt.forEach(this.Xi,o=>{const d=xn.fromPath(o);return this.Zi(e,d).next(m=>{m||t.removeEntry(d,lr.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(o=>{o?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return Yt.or([()=>Yt.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function _m(i,e){return`firestore_clients_${i}_${e}`}function vm(i,e,t){let o=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function xa(i,e){return`firestore_targets_${i}_${e}`}class Lf{constructor(e,t,o,d){this.user=e,this.batchId=t,this.state=o,this.error=d}static tr(e,t,o){const d=JSON.parse(o);let m,I="object"==typeof d&&-1!==["pending","acknowledged","rejected"].indexOf(d.state)&&(void 0===d.error||"object"==typeof d.error);return I&&d.error&&(I="string"==typeof d.error.message&&"string"==typeof d.error.code,I&&(m=new M(d.error.code,d.error.message))),I?new Lf(e,t,d.state,m):(Pi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${o}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $h{constructor(e,t,o){this.targetId=e,this.state=t,this.error=o}static tr(e,t){const o=JSON.parse(t);let d,m="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return m&&o.error&&(m="string"==typeof o.error.message&&"string"==typeof o.error.code,m&&(d=new M(o.error.code,o.error.message))),m?new $h(e,o.state,d):(Pi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Up{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const o=JSON.parse(t);let d="object"==typeof o&&o.activeTargetIds instanceof Array,m=gs();for(let I=0;d&&I<o.activeTargetIds.length;++I)d=el(o.activeTargetIds[I]),m=m.add(o.activeTargetIds[I]);return d?new Up(e,m):(Pi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Em{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Em(t.clientId,t.onlineState):(Pi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Bf{constructor(){this.activeTargetIds=gs()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bm{constructor(e,t,o,d,m){this.window=e,this.Yn=t,this.persistenceKey=o,this.ir=d,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Vi(Ir),this.started=!1,this.cr=[];const I=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=m,this.hr=_m(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new Bf),this.dr=new RegExp(`^firestore_clients_${I}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${I}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${I}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(O){return`firestore_bundle_loaded_v2_${O}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,we.Z)(function*(){const t=yield e.syncEngine.Fs();for(const d of t){if(d===e.ir)continue;const m=e.getItem(_m(e.persistenceKey,d));if(m){const I=Up.tr(d,m);I&&(e.ar=e.ar.insert(I.clientId,I))}}e.yr();const o=e.storage.getItem(e.mr);if(o){const d=e.pr(o);d&&e.Ir(d)}for(const d of e.cr)e.ur(d);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((o,d)=>{d.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,o){this.Er(e,t,o),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(xa(this.persistenceKey,e));if(o){const d=$h.tr(e,o);d&&(t=d.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(xa(this.persistenceKey,e))}updateQueryState(e,t,o){this.br(e,t,o)}handleUserChange(e,t,o){t.forEach(d=>{this.Ar(d)}),this.currentUser=e,o.forEach(d=>{this.addPendingMutation(d)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ln("SharedClientState","READ",e,t),t}setItem(e,t){ln("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ln("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const o=e;if(o.storageArea===this.storage){if(ln("SharedClientState","EVENT",o.key,o.newValue),o.key===this.hr)return void Pi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,we.Z)(function*(){if(t.started){if(null!==o.key)if(t.dr.test(o.key)){if(null==o.newValue){const d=t.vr(o.key);return t.Sr(d,null)}{const d=t.Dr(o.key,o.newValue);if(d)return t.Sr(d.clientId,d)}}else if(t._r.test(o.key)){if(null!==o.newValue){const d=t.Cr(o.key,o.newValue);if(d)return t.Nr(d)}}else if(t.wr.test(o.key)){if(null!==o.newValue){const d=t.kr(o.key,o.newValue);if(d)return t.Mr(d)}}else if(o.key===t.mr){if(null!==o.newValue){const d=t.pr(o.newValue);if(d)return t.Ir(d)}}else if(o.key===t.lr){const d=function(m){let I=Nn.A;if(null!=m)try{const O=JSON.parse(m);ur("number"==typeof O),I=O}catch(O){Pi("SharedClientState","Failed to read sequence number from WebStorage",O)}return I}(o.newValue);d!==Nn.A&&t.sequenceNumberHandler(d)}else if(o.key===t.gr){const d=t.Or(o.newValue);yield Promise.all(d.map(m=>t.syncEngine.Fr(m)))}}else t.cr.push(o)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,o){const d=new Lf(this.currentUser,e,t,o),m=vm(this.persistenceKey,this.currentUser,e);this.setItem(m,d.er())}Ar(e){const t=vm(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,o){const d=xa(this.persistenceKey,e),m=new $h(e,t,o);this.setItem(d,m.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const o=this.vr(e);return Up.tr(o,t)}Cr(e,t){const o=this._r.exec(e),d=Number(o[1]);return Lf.tr(new os(void 0!==o[2]?o[2]:null),d,t)}kr(e,t){const o=this.wr.exec(e),d=Number(o[1]);return $h.tr(d,t)}pr(e){return Em.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,we.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);ln("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const o=t?this.ar.insert(e,t):this.ar.remove(e),d=this.Tr(this.ar),m=this.Tr(o),I=[],O=[];return m.forEach(Q=>{d.has(Q)||I.push(Q)}),d.forEach(Q=>{m.has(Q)||O.push(Q)}),this.syncEngine.Lr(I,O).then(()=>{this.ar=o})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=gs();return e.forEach((o,d)=>{t=t.unionWith(d.activeTargetIds)}),t}}class wm{constructor(){this.Ur=new Bf,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,o){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new Bf,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class $p{Kr(e){}shutdown(){}}class jp{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){ln("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){ln("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const r_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class i_{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class s_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,o,d,m){const I=this.ho(e,t);ln("RestConnection","Sending: ",I,o);const O={};return this.lo(O,d,m),this.fo(e,I,O,o).then(Q=>(ln("RestConnection","Received: ",Q),Q),Q=>{throw io("RestConnection",`${e} failed with error: `,Q,"url: ",I,"request:",o),Q})}_o(e,t,o,d,m){return this.co(e,t,o,d,m)}lo(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+go,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((d,m)=>e[m]=d),o&&o.headers.forEach((d,m)=>e[m]=d)}ho(e,t){return`${this.uo}/v1/${t}:${r_[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,o,d){return new Promise((m,I)=>{const O=new Fo;O.listenOnce(jl.COMPLETE,()=>{try{switch(O.getLastErrorCode()){case Fa.NO_ERROR:const te=O.getResponseJson();ln("Connection","XHR received:",JSON.stringify(te)),m(te);break;case Fa.TIMEOUT:ln("Connection",'RPC "'+e+'" timed out'),I(new M(Vt.DEADLINE_EXCEEDED,"Request time out"));break;case Fa.HTTP_ERROR:const Ue=O.getStatus();if(ln("Connection",'RPC "'+e+'" failed with status:',Ue,"response text:",O.getResponseText()),Ue>0){const ut=O.getResponseJson().error;if(ut&&ut.status&&ut.message){const $t=function(fn){const mn=fn.toLowerCase().replace(/_/g,"-");return Object.values(Vt).indexOf(mn)>=0?mn:Vt.UNKNOWN}(ut.status);I(new M($t,ut.message))}else I(new M(Vt.UNKNOWN,"Server responded with status "+O.getStatus()))}else I(new M(Vt.UNAVAILABLE,"Connection failed."));break;default:Kn()}}finally{ln("Connection",'RPC "'+e+'" completed.')}});const Q=JSON.stringify(d);O.send(t,"POST",Q,o,15)})}wo(e,t,o){const d=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],m=da(),I=xs(),O={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(O.xmlHttpFactory=new xi({})),this.lo(O.initMessageHeaders,t,o),(0,Xe.uI)()||(0,Xe.b$)()||(0,Xe.d)()||(0,Xe.w1)()||(0,Xe.Mn)()||(0,Xe.ru)()||(O.httpHeadersOverwriteParam="$httpHeaders");const Q=d.join("");ln("Connection","Creating WebChannel: "+Q,O);const te=m.createWebChannel(Q,O);let Ue=!1,ut=!1;const $t=new i_({Jr:mn=>{ut?ln("Connection","Not sending because WebChannel is closed:",mn):(Ue||(ln("Connection","Opening WebChannel transport."),te.open(),Ue=!0),ln("Connection","WebChannel sending:",mn),te.send(mn))},Yr:()=>te.close()}),fn=(mn,tr,ti)=>{mn.listen(tr,Gs=>{try{ti(Gs)}catch(lo){setTimeout(()=>{throw lo},0)}})};return fn(te,To.EventType.OPEN,()=>{ut||ln("Connection","WebChannel transport opened.")}),fn(te,To.EventType.CLOSE,()=>{ut||(ut=!0,ln("Connection","WebChannel transport closed"),$t.ro())}),fn(te,To.EventType.ERROR,mn=>{ut||(ut=!0,io("Connection","WebChannel transport errored:",mn),$t.ro(new M(Vt.UNAVAILABLE,"The operation could not be completed")))}),fn(te,To.EventType.MESSAGE,mn=>{var tr;if(!ut){const ti=mn.data[0];ur(!!ti);const Gs=ti,lo=Gs.error||(null===(tr=Gs[0])||void 0===tr?void 0:tr.error);if(lo){ln("Connection","WebChannel received error:",lo);const Ji=lo.status;let ko=function(to){const ba=Ps[to];if(void 0!==ba)return Bd(ba)}(Ji),zs=lo.message;void 0===ko&&(ko=Vt.INTERNAL,zs="Unknown error status: "+Ji+" with message "+lo.message),ut=!0,$t.ro(new M(ko,zs)),te.close()}else ln("Connection","WebChannel received:",ti),$t.oo(ti)}}),fn(I,Ys.STAT_EVENT,mn=>{mn.stat===Hl.PROXY?ln("Connection","Detected buffering proxy"):mn.stat===Hl.NOPROXY&&ln("Connection","Detected no buffering proxy")}),setTimeout(()=>{$t.io()},0),$t}}function Hp(){return"undefined"!=typeof window?window:null}function Vf(){return"undefined"!=typeof document?document:null}function rh(i){return new bc(i,!0)}class Gp{constructor(e,t,o=1e3,d=1.5,m=6e4){this.Yn=e,this.timerId=t,this.mo=o,this.yo=d,this.po=m,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),o=Math.max(0,Date.now()-this.Eo),d=Math.max(0,t-o);d>0&&ln("ExponentialBackoff",`Backing off for ${d} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,d,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Im{constructor(e,t,o,d,m,I,O,Q){this.Yn=e,this.Vo=o,this.vo=d,this.So=m,this.authCredentialsProvider=I,this.appCheckCredentialsProvider=O,this.listener=Q,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new Gp(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,we.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,we.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var o=this;return(0,we.Z)(function*(){o.Uo(),o.qo(),o.No.cancel(),o.Do++,4!==e?o.No.reset():t&&t.code===Vt.RESOURCE_EXHAUSTED?(Pi(t.toString()),Pi("Using maximum backoff delay to prevent overloading the backend."),o.No.Ao()):t&&t.code===Vt.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.Ko(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,d])=>{this.Do===t&&this.Qo(o,d)},o=>{e(()=>{const d=new M(Vt.UNKNOWN,"Fetching auth token failed: "+o.message);return this.jo(d)})})}Qo(e,t){const o=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{o(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(d=>{o(()=>this.jo(d))}),this.stream.onMessage(d=>{o(()=>this.onMessage(d))})}Oo(){var e=this;this.state=5,this.No.Ro((0,we.Z)(function*(){e.state=0,e.start()}))}jo(e){return ln("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(ln("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Cm extends Im{constructor(e,t,o,d,m,I){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,d,I),this.M=m}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function ad(i,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(Q=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===Q?1:"REMOVE"===Q?2:"CURRENT"===Q?3:"RESET"===Q?4:Kn(),d=e.targetChange.targetIds||[],m=function(Q,te){return Q.N?(ur(void 0===te||"string"==typeof te),Vs.fromBase64String(te||"")):(ur(void 0===te||te instanceof Uint8Array),Vs.fromUint8Array(te||new Uint8Array))}(i,e.targetChange.resumeToken),I=e.targetChange.cause,O=I&&function(Q){const te=void 0===Q.code?Vt.UNKNOWN:Bd(Q.code);return new M(te,Q.message||"")}(I);t=new oa(o,d,m,O||null)}else if("documentChange"in e){const o=e.documentChange,d=ma(i,o.document.name),m=Zs(o.document.updateTime),I=new Rt({mapValue:{fields:o.document.fields}}),O=Cn.newFoundDocument(d,m,I);t=new sl(o.targetIds||[],o.removedTargetIds||[],O.key,O)}else if("documentDelete"in e){const o=e.documentDelete,d=ma(i,o.document),m=o.readTime?Zs(o.readTime):lr.min(),I=Cn.newNoDocument(d,m);t=new sl([],o.removedTargetIds||[],I.key,I)}else if("documentRemove"in e){const o=e.documentRemove,d=ma(i,o.document);t=new sl([],o.removedTargetIds||[],d,null)}else{if(!("filter"in e))return Kn();{const o=e.filter,m=new Gu(o.count||0);t=new Js(o.targetId,m)}}var Q;return t}(this.M,e),o=function(d){if(!("targetChange"in d))return lr.min();const m=d.targetChange;return m.targetIds&&m.targetIds.length?lr.min():m.readTime?Zs(m.readTime):lr.min()}(e);return this.listener.zo(t,o)}Ho(e){const t={};t.database=ya(this.M),t.addTarget=function(d,m){let I;const O=m.target;return I=Fu(O)?{documents:ld(d,O)}:{query:Cc(d,O)},I.targetId=m.targetId,m.resumeToken.approximateByteSize()>0?I.resumeToken=wc(d,m.resumeToken):m.snapshotVersion.compareTo(lr.min())>0&&(I.readTime=gu(d,m.snapshotVersion.toTimestamp())),I}(this.M,e);const o=function Th(i,e){const t=function(o,d){switch(d){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Kn()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.Lo(t)}Jo(e){const t={};t.database=ya(this.M),t.removeTarget=e,this.Lo(t)}}class Dm extends Im{constructor(e,t,o,d,m,I){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,d,I),this.M=m,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(ur(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function Ud(i,e){return i&&i.length>0?(ur(void 0!==e),i.map(t=>function(o,d){let m=Zs(o.updateTime?o.updateTime:d);return m.isEqual(lr.min())&&(m=Zs(d)),new Ih(m,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=Zs(e.commitTime);return this.listener.tu(o,t)}return ur(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=ya(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>eo(this.M,o))};this.Lo(t)}}class o_ extends class{}{constructor(e,t,o,d){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=o,this.M=d,this.su=!1}iu(){if(this.su)throw new M(Vt.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,o){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.So.co(e,t,o,d,m)).catch(d=>{throw"FirebaseError"===d.name?(d.code===Vt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new M(Vt.UNKNOWN,d.toString())})}_o(e,t,o){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.So._o(e,t,o,d,m)).catch(d=>{throw"FirebaseError"===d.name?(d.code===Vt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new M(Vt.UNKNOWN,d.toString())})}terminate(){this.su=!0}}class Du{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(Pi(t),this.uu=!1):ln("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class zp{constructor(e,t,o,d,m){var I=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=m,this.gu.Kr(O=>{o.enqueueAndForget((0,we.Z)(function*(){var Q;eu(I)&&(ln("RemoteStore","Restarting streams for network reachability change."),yield(Q=(0,we.Z)(function*(te){const Ue=Sn(te);Ue.wu.add(4),yield Hh(Ue),Ue.yu.set("Unknown"),Ue.wu.delete(4),yield jh(Ue)}),function(te){return Q.apply(this,arguments)})(I))}))}),this.yu=new Du(o,d)}}function jh(i){return Wp.apply(this,arguments)}function Wp(){return Wp=(0,we.Z)(function*(i){if(eu(i))for(const e of i.mu)yield e(!0)}),Wp.apply(this,arguments)}function Hh(i){return Uf.apply(this,arguments)}function Uf(){return Uf=(0,we.Z)(function*(i){for(const e of i.mu)yield e(!1)}),Uf.apply(this,arguments)}function $f(i,e){const t=Sn(i);t._u.has(e.targetId)||(t._u.set(e.targetId,e),Kp(t)?Yp(t):wd(t).Mo()&&qp(t,e))}function Gh(i,e){const t=Sn(i),o=wd(t);t._u.delete(e),o.Mo()&&jf(t,e),0===t._u.size&&(o.Mo()?o.$o():eu(t)&&t.yu.set("Unknown"))}function qp(i,e){i.pu.Z(e.targetId),wd(i).Ho(e)}function jf(i,e){i.pu.Z(e),wd(i).Jo(e)}function Yp(i){i.pu=new Vd({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>i._u.get(e)||null}),wd(i).start(),i.yu.au()}function Kp(i){return eu(i)&&!wd(i).ko()&&i._u.size>0}function eu(i){return 0===Sn(i).wu.size}function Hf(i){i.pu=void 0}function a_(i){return zh.apply(this,arguments)}function zh(){return zh=(0,we.Z)(function*(i){i._u.forEach((e,t)=>{qp(i,e)})}),zh.apply(this,arguments)}function Zp(i,e){return Gf.apply(this,arguments)}function Gf(){return Gf=(0,we.Z)(function*(i,e){Hf(i),Kp(i)?(i.yu.lu(e),Yp(i)):i.yu.set("Unknown")}),Gf.apply(this,arguments)}function l_(i,e,t){return Xp.apply(this,arguments)}function Xp(){return Xp=(0,we.Z)(function*(i,e,t){if(i.yu.set("Online"),e instanceof oa&&2===e.state&&e.cause)try{yield(o=(0,we.Z)(function*(d,m){const I=m.cause;for(const O of m.targetIds)d._u.has(O)&&(yield d.remoteSyncer.rejectListen(O,I),d._u.delete(O),d.pu.removeTarget(O))}),function(d,m){return o.apply(this,arguments)})(i,e)}catch(o){ln("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield ih(i,o)}else if(e instanceof sl?i.pu.ut(e):e instanceof Js?i.pu._t(e):i.pu.ht(e),!t.isEqual(lr.min()))try{const o=yield dm(i.localStore);t.compareTo(o)>=0&&(yield function(d,m){const I=d.pu.yt(m);return I.targetChanges.forEach((O,Q)=>{if(O.resumeToken.approximateByteSize()>0){const te=d._u.get(Q);te&&d._u.set(Q,te.withResumeToken(O.resumeToken,m))}}),I.targetMismatches.forEach(O=>{const Q=d._u.get(O);if(!Q)return;d._u.set(O,Q.withResumeToken(Vs.EMPTY_BYTE_STRING,Q.snapshotVersion)),jf(d,O);const te=new kl(Q.target,O,1,Q.sequenceNumber);qp(d,te)}),d.remoteSyncer.applyRemoteEvent(I)}(i,t))}catch(o){ln("RemoteStore","Failed to raise snapshot:",o),yield ih(i,o)}var o}),Xp.apply(this,arguments)}function ih(i,e,t){return Tm.apply(this,arguments)}function Tm(){return Tm=(0,we.Z)(function*(i,e,t){if(!Ol(e))throw e;i.wu.add(1),yield Hh(i),i.yu.set("Offline"),t||(t=()=>dm(i.localStore)),i.asyncQueue.enqueueRetryable((0,we.Z)(function*(){ln("RemoteStore","Retrying IndexedDB access"),yield t(),i.wu.delete(1),yield jh(i)}))}),Tm.apply(this,arguments)}function Sm(i,e){return e().catch(t=>ih(i,t,e))}function Ed(i){return zf.apply(this,arguments)}function zf(){return zf=(0,we.Z)(function*(i){const e=Sn(i),t=Bc(e);let o=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;Am(e);)try{const d=yield fm(e.localStore,o);if(null===d){0===e.du.length&&t.$o();break}o=d.batchId,xm(e,d)}catch(d){yield ih(e,d)}Qp(e)&&Tu(e)}),zf.apply(this,arguments)}function Am(i){return eu(i)&&i.du.length<10}function xm(i,e){i.du.push(e);const t=Bc(i);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function Qp(i){return eu(i)&&!Bc(i).ko()&&i.du.length>0}function Tu(i){Bc(i).start()}function Wf(i){return Jp.apply(this,arguments)}function Jp(){return Jp=(0,we.Z)(function*(i){Bc(i).nu()}),Jp.apply(this,arguments)}function u_(i){return Mm.apply(this,arguments)}function Mm(){return Mm=(0,we.Z)(function*(i){const e=Bc(i);for(const t of i.du)e.Zo(t.mutations)}),Mm.apply(this,arguments)}function eg(i,e,t){return qf.apply(this,arguments)}function qf(){return qf=(0,we.Z)(function*(i,e,t){const o=i.du.shift(),d=xc.from(o,e,t);yield Sm(i,()=>i.remoteSyncer.applySuccessfulWrite(d)),yield Ed(i)}),qf.apply(this,arguments)}function tg(i,e){return bd.apply(this,arguments)}function bd(){return bd=(0,we.Z)(function*(i,e){var t;e&&Bc(i).Xo&&(yield(t=(0,we.Z)(function*(o,d){if(vc(m=d.code)&&m!==Vt.ABORTED){const I=o.du.shift();Bc(o).Fo(),yield Sm(o,()=>o.remoteSyncer.rejectFailedWrite(I.batchId,d)),yield Ed(o)}var m}),function(o,d){return t.apply(this,arguments)})(i,e)),Qp(i)&&Tu(i)}),bd.apply(this,arguments)}function Rm(i,e){return Wh.apply(this,arguments)}function Wh(){return Wh=(0,we.Z)(function*(i,e){const t=Sn(i);t.asyncQueue.verifyOperationInProgress(),ln("RemoteStore","RemoteStore received new credentials");const o=eu(t);t.wu.add(3),yield Hh(t),o&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield jh(t)}),Wh.apply(this,arguments)}function Yf(i,e){return Kf.apply(this,arguments)}function Kf(){return Kf=(0,we.Z)(function*(i,e){const t=Sn(i);e?(t.wu.delete(2),yield jh(t)):e||(t.wu.add(2),yield Hh(t),t.yu.set("Unknown"))}),Kf.apply(this,arguments)}function wd(i){return i.Iu||(i.Iu=function(e,t,o){const d=Sn(e);return d.iu(),new Cm(t,d.So,d.authCredentials,d.appCheckCredentials,d.M,o)}(i.datastore,i.asyncQueue,{Xr:a_.bind(null,i),eo:Zp.bind(null,i),zo:l_.bind(null,i)}),i.mu.push(function(){var e=(0,we.Z)(function*(t){t?(i.Iu.Fo(),Kp(i)?Yp(i):i.yu.set("Unknown")):(yield i.Iu.stop(),Hf(i))});return function(t){return e.apply(this,arguments)}}())),i.Iu}function Bc(i){return i.Tu||(i.Tu=function(e,t,o){const d=Sn(e);return d.iu(),new Dm(t,d.So,d.authCredentials,d.appCheckCredentials,d.M,o)}(i.datastore,i.asyncQueue,{Xr:Wf.bind(null,i),eo:tg.bind(null,i),eu:u_.bind(null,i),tu:eg.bind(null,i)}),i.mu.push(function(){var e=(0,we.Z)(function*(t){t?(i.Tu.Fo(),yield Ed(i)):(yield i.Tu.stop(),i.du.length>0&&(ln("RemoteStore",`Stopping write stream with ${i.du.length} pending writes`),i.du=[]))});return function(t){return e.apply(this,arguments)}}())),i.Tu}class qh{constructor(e,t,o,d,m){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=d,this.removalCallback=m,this.deferred=new x,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(I=>{})}static createAndSchedule(e,t,o,d,m){const I=Date.now()+o,O=new qh(e,t,I,d,m);return O.start(o),O}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new M(Vt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sh(i,e){if(Pi("AsyncQueue",`${e}: ${i}`),Ol(i))return new M(Vt.UNAVAILABLE,`${e}: ${i}`);throw i}class oh{constructor(e){this.comparator=e?(t,o)=>e(t,o)||xn.comparator(t.key,o.key):(t,o)=>xn.comparator(t.key,o.key),this.keyedMap=sd(),this.sortedSet=new Vi(this.comparator)}static emptySet(e){return new oh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof oh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const d=t.getNext().key,m=o.getNext().key;if(!d.isEqual(m))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new oh;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class ng{constructor(){this.Eu=new Vi(xn.comparator)}track(e){const t=e.doc.key,o=this.Eu.get(t);o?0!==e.type&&3===o.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==o.type?this.Eu=this.Eu.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.Eu=this.Eu.remove(t):1===e.type&&2===o.type?this.Eu=this.Eu.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):Kn():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,o)=>{e.push(o)}),e}}class tu{constructor(e,t,o,d,m,I,O,Q){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=d,this.mutatedKeys=m,this.fromCache=I,this.syncStateChanged=O,this.excludesMetadataChanges=Q}static fromInitialDocuments(e,t,o,d){const m=[];return t.forEach(I=>{m.push({type:0,doc:I})}),new tu(e,t,oh.emptySet(t),m,o,d,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let d=0;d<t.length;d++)if(t[d].type!==o[d].type||!t[d].doc.isEqual(o[d].doc))return!1;return!0}}class Pm{constructor(){this.Ru=void 0,this.listeners=[]}}class c_{constructor(){this.queries=new Ha(e=>kd(e),cu),this.onlineState="Unknown",this.bu=new Set}}function rg(i,e){return Vc.apply(this,arguments)}function Vc(){return Vc=(0,we.Z)(function*(i,e){const t=Sn(i),o=e.query;let d=!1,m=t.queries.get(o);if(m||(d=!0,m=new Pm),d)try{m.Ru=yield t.onListen(o)}catch(I){const O=sh(I,`Initialization of query '${Wo(e.query)}' failed`);return void e.onError(O)}t.queries.set(o,m),m.listeners.push(e),e.Pu(t.onlineState),m.Ru&&e.Vu(m.Ru)&&ll(t)}),Vc.apply(this,arguments)}function ig(i,e){return sg.apply(this,arguments)}function sg(){return sg=(0,we.Z)(function*(i,e){const t=Sn(i),o=e.query;let d=!1;const m=t.queries.get(o);if(m){const I=m.listeners.indexOf(e);I>=0&&(m.listeners.splice(I,1),d=0===m.listeners.length)}if(d)return t.queries.delete(o),t.onUnlisten(o)}),sg.apply(this,arguments)}function d_(i,e){const t=Sn(i);let o=!1;for(const d of e){const I=t.queries.get(d.query);if(I){for(const O of I.listeners)O.Vu(d)&&(o=!0);I.Ru=d}}o&&ll(t)}function h_(i,e,t){const o=Sn(i),d=o.queries.get(e);if(d)for(const m of d.listeners)m.onError(t);o.queries.delete(e)}function ll(i){i.bu.forEach(e=>{e.next()})}class Yh{constructor(e,t,o){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=o||{}}Vu(e){if(!this.options.includeMetadataChanges){const o=[];for(const d of e.docChanges)3!==d.type&&o.push(d);e=new tu(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=tu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class Om{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class og{constructor(e){this.M=e}wi(e){return ma(this.M,e)}mi(e){return e.metadata.exists?za(this.M,e.document,!1):Cn.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return Zs(e)}}class km{constructor(e,t,o){this.Ou=e,this.localStore=t,this.M=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=ag(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const o=mi.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,o=new og(this.M);for(const d of e)if(d.metadata.queries){const m=o.wi(d.metadata.name);for(const I of d.metadata.queries){const O=(t.get(I)||Gi()).add(m);t.set(I,O)}}return t}complete(){var e=this;return(0,we.Z)(function*(){const t=yield function nh(i,e,t,o){return Lp.apply(this,arguments)}(e.localStore,new og(e.M),e.documents,e.Ou.id),o=e.$u(e.documents);for(const d of e.queries)yield pm(e.localStore,d,o.get(d.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function ag(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Nm{constructor(e){this.key=e}}class Fm{constructor(e){this.key=e}}class Lm{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=Gi(),this.mutatedKeys=Gi(),this.Gu=Cl(e),this.Qu=new oh(this.Gu)}get ju(){return this.Uu}Wu(e,t){const o=t?t.zu:new ng,d=t?t.Qu:this.Qu;let m=t?t.mutatedKeys:this.mutatedKeys,I=d,O=!1;const Q="F"===this.query.limitType&&d.size===this.query.limit?d.last():null,te="L"===this.query.limitType&&d.size===this.query.limit?d.first():null;if(e.inorderTraversal((Ue,ut)=>{const $t=d.get(Ue),fn=Ta(this.query,ut)?ut:null,mn=!!$t&&this.mutatedKeys.has($t.key),tr=!!fn&&(fn.hasLocalMutations||this.mutatedKeys.has(fn.key)&&fn.hasCommittedMutations);let ti=!1;$t&&fn?$t.data.isEqual(fn.data)?mn!==tr&&(o.track({type:3,doc:fn}),ti=!0):this.Hu($t,fn)||(o.track({type:2,doc:fn}),ti=!0,(Q&&this.Gu(fn,Q)>0||te&&this.Gu(fn,te)<0)&&(O=!0)):!$t&&fn?(o.track({type:0,doc:fn}),ti=!0):$t&&!fn&&(o.track({type:1,doc:$t}),ti=!0,(Q||te)&&(O=!0)),ti&&(fn?(I=I.add(fn),m=tr?m.add(Ue):m.delete(Ue)):(I=I.delete(Ue),m=m.delete(Ue)))}),null!==this.query.limit)for(;I.size>this.query.limit;){const Ue="F"===this.query.limitType?I.last():I.first();I=I.delete(Ue.key),m=m.delete(Ue.key),o.track({type:1,doc:Ue})}return{Qu:I,zu:o,ii:O,mutatedKeys:m}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const d=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const m=e.zu.Au();m.sort((te,Ue)=>function(ut,$t){const fn=mn=>{switch(mn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Kn()}};return fn(ut)-fn($t)}(te.type,Ue.type)||this.Gu(te.doc,Ue.doc)),this.Ju(o);const I=t?this.Yu():[],O=0===this.Ku.size&&this.current?1:0,Q=O!==this.qu;return this.qu=O,0!==m.length||Q?{snapshot:new tu(this.query,e.Qu,d,m,e.mutatedKeys,0===O,Q,!1),Xu:I}:{Xu:I}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new ng,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Gi(),this.Qu.forEach(o=>{this.Zu(o.key)&&(this.Ku=this.Ku.add(o.key))});const t=[];return e.forEach(o=>{this.Ku.has(o)||t.push(new Fm(o))}),this.Ku.forEach(o=>{e.has(o)||t.push(new Nm(o))}),t}ta(e){this.Uu=e._i,this.Ku=Gi();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return tu.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class f_{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class Bm{constructor(e){this.key=e,this.na=!1}}class Wv{constructor(e,t,o,d,m,I){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=d,this.currentUser=m,this.maxConcurrentLimboResolutions=I,this.sa={},this.ia=new Ha(O=>kd(O),cu),this.ra=new Map,this.oa=new Set,this.ua=new Vi(xn.comparator),this.aa=new Map,this.ca=new Nf,this.ha={},this.la=new Map,this.fa=Fl.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function Vm(i,e){return lg.apply(this,arguments)}function lg(){return lg=(0,we.Z)(function*(i,e){const t=Gc(i);let o,d;const m=t.ia.get(e);if(m)o=m.targetId,t.sharedClientState.addLocalQueryTarget(o),d=m.view.ea();else{const I=yield Jd(t.localStore,Qs(e));t.isPrimaryClient&&$f(t.remoteStore,I);const O=t.sharedClientState.addLocalQueryTarget(I.targetId);o=I.targetId,d=yield ug(t,e,o,"current"===O)}return d}),lg.apply(this,arguments)}function ug(i,e,t,o){return Um.apply(this,arguments)}function Um(){return Um=(0,we.Z)(function*(i,e,t,o){i._a=(Ue,ut,$t)=>{return(fn=(0,we.Z)(function*(mn,tr,ti,Gs){let lo=tr.view.Wu(ti);lo.ii&&(lo=yield tc(mn.localStore,tr.query,!1).then(({documents:zs})=>tr.view.Wu(zs,lo)));const Ji=Gs&&Gs.targetChanges.get(tr.targetId),ko=tr.view.applyChanges(lo,mn.isPrimaryClient,Ji);return fg(mn,tr.targetId,ko.Xu),ko.snapshot}),function(mn,tr,ti,Gs){return fn.apply(this,arguments)})(i,Ue,ut,$t);var fn};const d=yield tc(i.localStore,e,!0),m=new Lm(e,d._i),I=m.Wu(d.documents),O=Al.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState),Q=m.applyChanges(I,i.isPrimaryClient,O);fg(i,t,Q.Xu);const te=new f_(e,t,m);return i.ia.set(e,te),i.ra.has(t)?i.ra.get(t).push(e):i.ra.set(t,[e]),Q.snapshot}),Um.apply(this,arguments)}function qv(i,e){return Kh.apply(this,arguments)}function Kh(){return Kh=(0,we.Z)(function*(i,e){const t=Sn(i),o=t.ia.get(e),d=t.ra.get(o.targetId);if(d.length>1)return t.ra.set(o.targetId,d.filter(m=>!cu(m,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield eh(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),Gh(t.remoteStore,o.targetId),Uc(t,o.targetId)}).catch(ec))):(Uc(t,o.targetId),yield eh(t.localStore,o.targetId,!0))}),Kh.apply(this,arguments)}function Zf(){return Zf=(0,we.Z)(function*(i,e,t){const o=zc(i);try{const d=yield function(m,I){const O=Sn(m),Q=fs.now(),te=I.reduce((ut,$t)=>ut.add($t.key),Gi());let Ue;return O.persistence.runTransaction("Locally write mutations","readwrite",ut=>O.fi.Ks(ut,te).next($t=>{Ue=$t;const fn=[];for(const mn of I){const tr=Ef(mn,Ue.get(mn.key));null!=tr&&fn.push(new Sl(mn.key,tr,hn(tr.value.mapValue),$s.exists(!0)))}return O.Bs.addMutationBatch(ut,Q,fn,I)})).then(ut=>(ut.applyToLocalDocumentSet(Ue),{batchId:ut.batchId,changes:Ue}))}(o.localStore,e);o.sharedClientState.addPendingMutation(d.batchId),function(m,I,O){let Q=m.ha[m.currentUser.toKey()];Q||(Q=new Vi(Ir)),Q=Q.insert(I,O),m.ha[m.currentUser.toKey()]=Q}(o,d.batchId,t),yield nc(o,d.changes),yield Ed(o.remoteStore)}catch(d){const m=sh(d,"Failed to persist write");t.reject(m)}}),Zf.apply(this,arguments)}function cg(i,e){return $m.apply(this,arguments)}function $m(){return $m=(0,we.Z)(function*(i,e){const t=Sn(i);try{const o=yield Fp(t.localStore,e);e.targetChanges.forEach((d,m)=>{const I=t.aa.get(m);I&&(ur(d.addedDocuments.size+d.modifiedDocuments.size+d.removedDocuments.size<=1),d.addedDocuments.size>0?I.na=!0:d.modifiedDocuments.size>0?ur(I.na):d.removedDocuments.size>0&&(ur(I.na),I.na=!1))}),yield nc(t,o,e)}catch(o){yield ec(o)}}),$m.apply(this,arguments)}function Vl(i,e,t){const o=Sn(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const d=[];o.ia.forEach((m,I)=>{const O=I.view.Pu(e);O.snapshot&&d.push(O.snapshot)}),function(m,I){const O=Sn(m);O.onlineState=I;let Q=!1;O.queries.forEach((te,Ue)=>{for(const ut of Ue.listeners)ut.Pu(I)&&(Q=!0)}),Q&&ll(O)}(o.eventManager,e),d.length&&o.sa.zo(d),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function Yv(i,e,t){return jm.apply(this,arguments)}function jm(){return jm=(0,we.Z)(function*(i,e,t){const o=Sn(i);o.sharedClientState.updateQueryState(e,"rejected",t);const d=o.aa.get(e),m=d&&d.key;if(m){let I=new Vi(xn.comparator);I=I.insert(m,Cn.newNoDocument(m,lr.min()));const O=Gi().add(m),Q=new Xl(lr.min(),new Map,new Li(Ir),I,O);yield cg(o,Q),o.ua=o.ua.remove(m),o.aa.delete(e),pg(o)}else yield eh(o.localStore,e,!1).then(()=>Uc(o,e,t)).catch(ec)}),jm.apply(this,arguments)}function Hm(i,e){return Xf.apply(this,arguments)}function Xf(){return Xf=(0,we.Z)(function*(i,e){const t=Sn(i),o=e.batch.batchId;try{const d=yield cm(t.localStore,e);hg(t,o,null),Zh(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield nc(t,d)}catch(d){yield ec(d)}}),Xf.apply(this,arguments)}function Gm(i,e,t){return dg.apply(this,arguments)}function dg(){return dg=(0,we.Z)(function*(i,e,t){const o=Sn(i);try{const d=yield function(m,I){const O=Sn(m);return O.persistence.runTransaction("Reject batch","readwrite-primary",Q=>{let te;return O.Bs.lookupMutationBatch(Q,I).next(Ue=>(ur(null!==Ue),te=Ue.keys(),O.Bs.removeMutationBatch(Q,Ue))).next(()=>O.Bs.performConsistencyCheck(Q)).next(()=>O.fi.Ks(Q,te))})}(o.localStore,e);hg(o,e,t),Zh(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield nc(o,d)}catch(d){yield ec(d)}}),dg.apply(this,arguments)}function Qf(){return Qf=(0,we.Z)(function*(i,e){const t=Sn(i);eu(t.remoteStore)||ln("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(m){const I=Sn(m);return I.persistence.runTransaction("Get highest unacknowledged batch id","readonly",O=>I.Bs.getHighestUnacknowledgedBatchId(O))}(t.localStore);if(-1===o)return void e.resolve();const d=t.la.get(o)||[];d.push(e),t.la.set(o,d)}catch(o){const d=sh(o,"Initialization of waitForPendingWrites() operation failed");e.reject(d)}}),Qf.apply(this,arguments)}function Zh(i,e){(i.la.get(e)||[]).forEach(t=>{t.resolve()}),i.la.delete(e)}function hg(i,e,t){const o=Sn(i);let d=o.ha[o.currentUser.toKey()];if(d){const m=d.get(e);m&&(t?m.reject(t):m.resolve(),d=d.remove(e)),o.ha[o.currentUser.toKey()]=d}}function Uc(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.ra.get(e))i.ia.delete(o),t&&i.sa.wa(o,t);i.ra.delete(e),i.isPrimaryClient&&i.ca.vi(e).forEach(o=>{i.ca.containsKey(o)||zm(i,o)})}function zm(i,e){i.oa.delete(e.path.canonicalString());const t=i.ua.get(e);null!==t&&(Gh(i.remoteStore,t),i.ua=i.ua.remove(e),i.aa.delete(t),pg(i))}function fg(i,e,t){for(const o of t)o instanceof Nm?(i.ca.addReference(o.key,e),g_(i,o)):o instanceof Fm?(ln("SyncEngine","Document no longer in limbo: "+o.key),i.ca.removeReference(o.key,e),i.ca.containsKey(o.key)||zm(i,o.key)):Kn()}function g_(i,e){const t=e.key,o=t.path.canonicalString();i.ua.get(t)||i.oa.has(o)||(ln("SyncEngine","New document in limbo: "+t),i.oa.add(o),pg(i))}function pg(i){for(;i.oa.size>0&&i.ua.size<i.maxConcurrentLimboResolutions;){const e=i.oa.values().next().value;i.oa.delete(e);const t=new xn(mi.fromString(e)),o=i.fa.next();i.aa.set(o,new Bm(t)),i.ua=i.ua.insert(t,o),$f(i.remoteStore,new kl(Qs($a(t.path)),o,2,Nn.A))}}function nc(i,e,t){return gg.apply(this,arguments)}function gg(){return gg=(0,we.Z)(function*(i,e,t){const o=Sn(i),d=[],m=[],I=[];var O;o.ia.isEmpty()||(o.ia.forEach((O,Q)=>{I.push(o._a(Q,e,t).then(te=>{if(te){o.isPrimaryClient&&o.sharedClientState.updateQueryState(Q.targetId,te.fromCache?"not-current":"current"),d.push(te);const Ue=Mf.Ys(Q.targetId,te);m.push(Ue)}}))}),yield Promise.all(I),o.sa.zo(d),yield(O=(0,we.Z)(function*(Q,te){const Ue=Sn(Q);try{yield Ue.persistence.runTransaction("notifyLocalViewChanges","readwrite",ut=>Yt.forEach(te,$t=>Yt.forEach($t.Hs,fn=>Ue.persistence.referenceDelegate.addReference(ut,$t.targetId,fn)).next(()=>Yt.forEach($t.Js,fn=>Ue.persistence.referenceDelegate.removeReference(ut,$t.targetId,fn)))))}catch(ut){if(!Ol(ut))throw ut;ln("LocalStore","Failed to update sequence numbers: "+ut)}for(const ut of te){const $t=ut.targetId;if(!ut.fromCache){const fn=Ue.ui.get($t),tr=fn.withLastLimboFreeSnapshotVersion(fn.snapshotVersion);Ue.ui=Ue.ui.insert($t,tr)}}}),function(Q,te){return O.apply(this,arguments)})(o.localStore,m))}),gg.apply(this,arguments)}function Jf(i,e){return $c.apply(this,arguments)}function $c(){return $c=(0,we.Z)(function*(i,e){const t=Sn(i);if(!t.currentUser.isEqual(e)){ln("SyncEngine","User change. New user:",e.toKey());const o=yield um(t.localStore,e);t.currentUser=e,(d=t).la.forEach(I=>{I.forEach(O=>{O.reject(new M(Vt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),d.la.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield nc(t,o.di)}var d}),$c.apply(this,arguments)}function m_(i,e){const t=Sn(i),o=t.aa.get(e);if(o&&o.na)return Gi().add(o.key);{let d=Gi();const m=t.ra.get(e);if(!m)return d;for(const I of m){const O=t.ia.get(I);d=d.unionWith(O.view.ju)}return d}}function Xh(i,e){return mg.apply(this,arguments)}function mg(){return mg=(0,we.Z)(function*(i,e){const t=Sn(i),o=yield tc(t.localStore,e.query,!0),d=e.view.ta(o);return t.isPrimaryClient&&fg(t,e.targetId,d.Xu),d}),mg.apply(this,arguments)}function y_(i,e){return Qh.apply(this,arguments)}function Qh(){return Qh=(0,we.Z)(function*(i,e){const t=Sn(i);return vd(t.localStore,e).then(o=>nc(t,o))}),Qh.apply(this,arguments)}function Su(i,e,t,o){return Id.apply(this,arguments)}function Id(){return Id=(0,we.Z)(function*(i,e,t,o){const d=Sn(i),m=yield function(I,O){const Q=Sn(I),te=Sn(Q.Bs);return Q.persistence.runTransaction("Lookup mutation documents","readonly",Ue=>te.fn(Ue,O).next(ut=>ut?Q.fi.Ks(Ue,ut):Yt.resolve(null)))}(d.localStore,e);var O;null!==m?("pending"===t?yield Ed(d.remoteStore):"acknowledged"===t||"rejected"===t?(hg(d,e,o||null),Zh(d,e),O=e,Sn(Sn(d.localStore).Bs)._n(O)):Kn(),yield nc(d,m)):ln("SyncEngine","Cannot apply mutation batch with id: "+e)}),Id.apply(this,arguments)}function rc(){return rc=(0,we.Z)(function*(i,e){const t=Sn(i);if(Gc(t),zc(t),!0===e&&!0!==t.da){const o=t.sharedClientState.getAllActiveQueryTargets(),d=yield Jh(t,o.toArray());t.da=!0,yield Yf(t.remoteStore,!0);for(const m of d)$f(t.remoteStore,m)}else if(!1===e&&!1!==t.da){const o=[];let d=Promise.resolve();t.ra.forEach((m,I)=>{t.sharedClientState.isLocalQueryTarget(I)?o.push(I):d=d.then(()=>(Uc(t,I),eh(t.localStore,I,!0))),Gh(t.remoteStore,I)}),yield d,yield Jh(t,o),function(m){const I=Sn(m);I.aa.forEach((O,Q)=>{Gh(I.remoteStore,Q)}),I.ca.Si(),I.aa=new Map,I.ua=new Vi(xn.comparator)}(t),t.da=!1,yield Yf(t.remoteStore,!1)}}),rc.apply(this,arguments)}function Jh(i,e,t){return qa.apply(this,arguments)}function qa(){return qa=(0,we.Z)(function*(i,e,t){const o=Sn(i),d=[],m=[];for(const I of e){let O;const Q=o.ra.get(I);if(Q&&0!==Q.length){O=yield Jd(o.localStore,Qs(Q[0]));for(const te of Q){const Ue=o.ia.get(te),ut=yield Xh(o,Ue);ut.snapshot&&m.push(ut.snapshot)}}else{const te=yield Of(o.localStore,I);O=yield Jd(o.localStore,te),yield ug(o,ep(te),I,!1)}d.push(O)}return o.sa.zo(m),d}),qa.apply(this,arguments)}function ep(i){return Vu(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function ah(i){const e=Sn(i);return Sn(Sn(e.localStore).persistence).Fs()}function lh(i,e,t,o){return jc.apply(this,arguments)}function jc(){return jc=(0,we.Z)(function*(i,e,t,o){const d=Sn(i);if(d.da)return void ln("SyncEngine","Ignoring unexpected query state notification.");const m=d.ra.get(e);if(m&&m.length>0)switch(t){case"current":case"not-current":{const I=yield vd(d.localStore,Jc(m[0])),O=Xl.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield nc(d,I,O);break}case"rejected":yield eh(d.localStore,e,!0),Uc(d,e,o);break;default:Kn()}}),jc.apply(this,arguments)}function uh(i,e,t){return Hc.apply(this,arguments)}function Hc(){return Hc=(0,we.Z)(function*(i,e,t){const o=Gc(i);if(o.da){for(const d of e){if(o.ra.has(d)){ln("SyncEngine","Adding an already active target "+d);continue}const m=yield Of(o.localStore,d),I=yield Jd(o.localStore,m);yield ug(o,ep(m),I.targetId,!1),$f(o.remoteStore,I)}for(const d of t)o.ra.has(d)&&(yield eh(o.localStore,d,!1).then(()=>{Gh(o.remoteStore,d),Uc(o,d)}).catch(ec))}}),Hc.apply(this,arguments)}function Gc(i){const e=Sn(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=cg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=m_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Yv.bind(null,e),e.sa.zo=d_.bind(null,e.eventManager),e.sa.wa=h_.bind(null,e.eventManager),e}function zc(i){const e=Sn(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Hm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Gm.bind(null,e),e}class Cd{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,we.Z)(function*(){t.M=rh(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return Pf(this.persistence,new Rf,e.initialUser,this.M)}ya(e){return new ym(Ff.Yi,this.M)}ga(e){return new wm}terminate(){var e=this;return(0,we.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class yg extends Cd{constructor(e,t,o){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,we.Z)(function*(){yield t().call(o,e),yield o.Ta.initialize(o,e),yield zc(o.Ta.syncEngine),yield Ed(o.Ta.remoteStore),yield o.persistence.Ts(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(o.localStore),Promise.resolve()))})()}Ia(e){return Pf(this.persistence,new Rf,e.initialUser,this.M)}pa(e){return new u(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=Bl(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Uo.withCacheSize(this.cacheSizeBytes):Uo.DEFAULT;return new Eo(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,Hp(),Vf(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new wm}}class Wm extends yg{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,o=this;return(0,we.Z)(function*(){yield t().call(o,e);const d=o.Ta.syncEngine;o.sharedClientState instanceof bm&&(o.sharedClientState.syncEngine={$r:Su.bind(null,d),Br:lh.bind(null,d),Lr:uh.bind(null,d),Fs:ah.bind(null,d),Fr:y_.bind(null,d)},yield o.sharedClientState.start()),yield o.persistence.Ts(function(){var m=(0,we.Z)(function*(I){yield function _a(i,e){return rc.apply(this,arguments)}(o.Ta.syncEngine,I),o.gcScheduler&&(I&&!o.gcScheduler.started?o.gcScheduler.start(o.localStore):I||o.gcScheduler.stop())});return function(I){return m.apply(this,arguments)}}())})()}ga(e){const t=Hp();if(!bm.vt(t))throw new M(Vt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=Bl(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new bm(t,e.asyncQueue,o,e.clientId,e.initialUser)}}class tp{initialize(e,t){var o=this;return(0,we.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=d=>Vl(o.syncEngine,d,1),o.remoteStore.remoteSyncer.handleCredentialChange=Jf.bind(null,o.syncEngine),yield Yf(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new c_}createDatastore(e){const t=rh(e.databaseInfo.databaseId),o=new s_(e.databaseInfo);return new o_(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,d=e.asyncQueue,m=O=>Vl(this.syncEngine,O,0),I=jp.vt()?new jp:new $p,new zp(t,o,d,m,I);var t,o,d,m,I}createSyncEngine(e,t){return function(o,d,m,I,O,Q,te){const Ue=new Wv(o,d,m,I,O,Q);return te&&(Ue.da=!0),Ue}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,we.Z)(function*(t){const o=Sn(t);ln("RemoteStore","RemoteStore shutting down."),o.wu.add(5),yield Hh(o),o.gu.shutdown(),o.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function _g(i,e=10240){let t=0;return{read:()=>(0,we.Z)(function*(){if(t<i.byteLength){const o={value:i.slice(t,t+e),done:!1};return t+=e,o}return{done:!0}})(),cancel:()=>(0,we.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class ef{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class qm{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new x,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(o=>{o&&o.Mu()?this.metadata.resolve(o.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==o?void 0:o.payload)}`))},o=>this.metadata.reject(o))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,we.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,we.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,we.Z)(function*(){const t=yield e.Va();if(null===t)return null;const o=e.ba.decode(t),d=Number(o);isNaN(d)&&e.va(`length string (${o}) is not valid number`);const m=yield e.Sa(d);return new Om(JSON.parse(m),t.length+d)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,we.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),o})()}Sa(e){var t=this;return(0,we.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const o=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),o})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,we.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const o=new Uint8Array(e.buffer.length+t.value.length);o.set(e.buffer),o.set(t.value,e.buffer.length),e.buffer=o}return t.done})()}}class Ym{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,we.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new M(Vt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(d=(0,we.Z)(function*(m,I){const O=Sn(m),Q=ya(O.M)+"/documents",te={documents:I.map(fn=>Vo(O.M,fn))},Ue=yield O._o("BatchGetDocuments",Q,te),ut=new Map;Ue.forEach(fn=>{const mn=function Ic(i,e){return"found"in e?function(t,o){ur(!!o.found);const d=ma(t,o.found.name),m=Zs(o.found.updateTime),I=new Rt({mapValue:{fields:o.found.fields}});return Cn.newFoundDocument(d,m,I)}(i,e):"missing"in e?function(t,o){ur(!!o.missing),ur(!!o.readTime);const d=ma(t,o.missing),m=Zs(o.readTime);return Cn.newNoDocument(d,m)}(i,e):Kn()}(O.M,fn);ut.set(mn.key.toString(),mn)});const $t=[];return I.forEach(fn=>{const mn=ut.get(fn.toString());ur(!!mn),$t.push(mn)}),$t}),function(m,I){return d.apply(this,arguments)})(t.datastore,e);var d;return o.forEach(d=>t.recordVersion(d)),o})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new Sa(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,we.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var o;e.mutations.forEach(o=>{t.delete(o.key.toString())}),t.forEach((o,d)=>{const m=xn.fromPath(d);e.mutations.push(new pu(m,e.precondition(m)))}),yield(o=(0,we.Z)(function*(d,m){const I=Sn(d),O=ya(I.M)+"/documents",Q={writes:m.map(te=>eo(I.M,te))};yield I.co("Commit",O,Q)}),function(d,m){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Kn();t=lr.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!t.isEqual(o))throw new M(Vt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?$s.updateTime(t):$s.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(lr.min()))throw new M(Vt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return $s.updateTime(t)}return $s.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Km{constructor(e,t,o,d,m){this.asyncQueue=e,this.datastore=t,this.options=o,this.updateFunction=d,this.deferred=m,this.xa=o.maxAttempts,this.No=new Gp(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,we.Z)(function*(){const t=new Ym(e.datastore),o=e.ka(t);o&&o.then(d=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(d)}).catch(m=>{e.Ma(m)}))}).catch(d=>{e.Ma(d)})}))}ka(e){try{const t=this.updateFunction(e);return!ta(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!vc(t)}return!1}}class Zm{constructor(e,t,o,d){var m=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=d,this.user=os.UNAUTHENTICATED,this.clientId=ci.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var I=(0,we.Z)(function*(O){ln("FirestoreClient","Received user=",O.uid),yield m.authCredentialListener(O),m.user=O});return function(O){return I.apply(this,arguments)}}()),this.appCheckCredentials.start(o,I=>(ln("FirestoreClient","Received new app check token=",I),this.appCheckCredentialListener(I,this.user)))}getConfiguration(){var e=this;return(0,we.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new M(Vt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new x;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const d=sh(o,"Failed to shutdown persistence");t.reject(d)}})),t.promise}}function Xm(i,e){return np.apply(this,arguments)}function np(){return np=(0,we.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),ln("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener(function(){var d=(0,we.Z)(function*(m){o.isEqual(m)||(yield um(e.localStore,m),o=m)});return function(m){return d.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),np.apply(this,arguments)}function Qm(i,e){return vg.apply(this,arguments)}function vg(){return vg=(0,we.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield rp(i);ln("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(t,o),i.setCredentialChangeListener(d=>Rm(e.remoteStore,d)),i.setAppCheckTokenChangeListener((d,m)=>Rm(e.remoteStore,m)),i.onlineComponents=e}),vg.apply(this,arguments)}function rp(i){return Eg.apply(this,arguments)}function Eg(){return Eg=(0,we.Z)(function*(i){return i.offlineComponents||(ln("FirestoreClient","Using default OfflineComponentProvider"),yield Xm(i,new Cd)),i.offlineComponents}),Eg.apply(this,arguments)}function ip(i){return sp.apply(this,arguments)}function sp(){return sp=(0,we.Z)(function*(i){return i.onlineComponents||(ln("FirestoreClient","Using default OnlineComponentProvider"),yield Qm(i,new tp)),i.onlineComponents}),sp.apply(this,arguments)}function Jm(i){return rp(i).then(e=>e.persistence)}function op(i){return rp(i).then(e=>e.localStore)}function ey(i){return ip(i).then(e=>e.remoteStore)}function bg(i){return ip(i).then(e=>e.syncEngine)}function tf(i){return wg.apply(this,arguments)}function wg(){return wg=(0,we.Z)(function*(i){const e=yield ip(i),t=e.eventManager;return t.onListen=Vm.bind(null,e.syncEngine),t.onUnlisten=qv.bind(null,e.syncEngine),t}),wg.apply(this,arguments)}function v_(i,e,t={}){const o=new x;return i.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(d,m,I,O,Q){const te=new ef({next:ut=>{m.enqueueAndForget(()=>ig(d,Ue));const $t=ut.docs.has(I);!$t&&ut.fromCache?Q.reject(new M(Vt.UNAVAILABLE,"Failed to get document because the client is offline.")):$t&&ut.fromCache&&O&&"server"===O.source?Q.reject(new M(Vt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):Q.resolve(ut)},error:ut=>Q.reject(ut)}),Ue=new Yh($a(I.path),te,{includeMetadataChanges:!0,ku:!0});return rg(d,Ue)}(yield tf(i),i.asyncQueue,e,t,o)})),o.promise}function E_(i,e,t={}){const o=new x;return i.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(d,m,I,O,Q){const te=new ef({next:ut=>{m.enqueueAndForget(()=>ig(d,Ue)),ut.fromCache&&"server"===O.source?Q.reject(new M(Vt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):Q.resolve(ut)},error:ut=>Q.reject(ut)}),Ue=new Yh(I,te,{includeMetadataChanges:!0,ku:!0});return rg(d,Ue)}(yield tf(i),i.asyncQueue,e,t,o)})),o.promise}const Dd=new Map;function Dg(i,e,t){if(!t)throw new M(Vt.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Tg(i,e,t,o){if(!0===e&&!0===o)throw new M(Vt.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function ny(i){if(!xn.isDocumentKey(i))throw new M(Vt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Sg(i){if(xn.isDocumentKey(i))throw new M(Vt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Td(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":Kn()}function Ui(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new M(Vt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Td(i);throw new M(Vt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function Ag(i,e){if(e<=0)throw new M(Vt.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class ry{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new M(Vt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new M(Vt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Tg("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nf{constructor(e,t,o){this._authCredentials=t,this._appCheckCredentials=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ry({}),this._settingsFrozen=!1,e instanceof Xs?this._databaseId=e:(this._app=e,this._databaseId=function(d){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new M(Vt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xs(d.options.projectId)}(e))}get app(){if(!this._app)throw new M(Vt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new M(Vt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ry(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new U;switch(t.type){case"gapi":const o=t.client;return ur(!("object"!=typeof o||null===o||!o.auth||!o.auth.getAuthHeaderValueForFirstParty)),new it(o,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new M(Vt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Dd.get(e);t&&(ln("ComponentProvider","Removing Datastore"),Dd.delete(e),t.terminate())}(this),Promise.resolve()}}class js{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new js(this.firestore,e,this._key)}}class va{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new va(this.firestore,e,this._query)}}class nu extends va{constructor(e,t,o){super(e,t,$a(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new js(this.firestore,null,new xn(e))}withConverter(e){return new nu(this.firestore,e,this._path)}}function iy(i,e,...t){if(i=(0,Xe.m9)(i),Dg("collection","path",e),i instanceof nf){const o=mi.fromString(e,...t);return Sg(o),new nu(i,null,o)}{if(!(i instanceof js||i instanceof nu))throw new M(Vt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(mi.fromString(e,...t));return Sg(o),new nu(i.firestore,null,o)}}function rf(i,e,...t){if(i=(0,Xe.m9)(i),1===arguments.length&&(e=ci.R()),Dg("doc","path",e),i instanceof nf){const o=mi.fromString(e,...t);return ny(o),new js(i,null,new xn(o))}{if(!(i instanceof js||i instanceof nu))throw new M(Vt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(mi.fromString(e,...t));return ny(o),new js(i.firestore,i instanceof nu?i.converter:null,new xn(o))}}function ap(i,e){return i=(0,Xe.m9)(i),e=(0,Xe.m9)(e),(i instanceof js||i instanceof nu)&&(e instanceof js||e instanceof nu)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function C_(i,e){return i=(0,Xe.m9)(i),e=(0,Xe.m9)(e),i instanceof va&&e instanceof va&&i.firestore===e.firestore&&cu(i._query,e._query)&&i.converter===e.converter}class xg{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new Gp(this,"async_queue_retry"),this.Qa=()=>{const t=Vf();t&&ln("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=Vf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=Vf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new x;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,we.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!Ol(t))throw t;ln("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(o=>{throw this.Ua=o,this.qa=!1,Pi("INTERNAL UNHANDLED ERROR: ",function(m){let I=m.message||"";return m.stack&&(I=m.stack.includes(m.message)?m.stack:m.message+"\n"+m.stack),I}(o)),o}).then(o=>(this.qa=!1,o))));return this.Fa=t,t}enqueueAfterDelay(e,t,o){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const d=qh.createAndSchedule(this,e,t,o,m=>this.Ha(m));return this.La.push(d),d}ja(){this.Ua&&Kn()}verifyOperationInProgress(){}Ja(){var e=this;return(0,we.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function Mg(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const d of["next","error","complete"])if(d in o&&"function"==typeof o[d])return!0;return!1}(i)}class Qv{constructor(){this._progressObserver={},this._taskCompletionResolver=new x,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,o){this._progressObserver={next:e,error:t,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Hs extends nf{constructor(e,t,o){super(e,t,o),this.type="firestore",this._queue=new xg,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||af(this),this._firestoreClient.terminate()}}function Po(i){return i._firestoreClient||af(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function af(i){var e;const t=i._freezeSettings(),o=(m=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Ia(i._databaseId,m,i._persistenceKey,(O=t).host,O.ssl,O.experimentalForceLongPolling,O.experimentalAutoDetectLongPolling,O.useFetchStreams));var m,O;i._firestoreClient=new Zm(i._authCredentials,i._appCheckCredentials,i._queue,o)}function D_(i,e,t){const o=new x;return i.asyncQueue.enqueue((0,we.Z)(function*(){try{yield Xm(i,t),yield Qm(i,e),o.resolve()}catch(d){if(!("FirebaseError"===(m=d).name?m.code===Vt.FAILED_PRECONDITION||m.code===Vt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&m instanceof DOMException)||22===m.code||20===m.code||11===m.code))throw d;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+d),o.reject(d)}var m})).then(()=>o.promise)}function kg(i){if(i._initialized||i._terminated)throw new M(Vt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ru{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new M(Vt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ms(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Au{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Au(Vs.fromBase64String(e))}catch(t){throw new M(Vt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Au(Vs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Wc{constructor(e){this._methodName=e}}class lf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new M(Vt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new M(Vt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ir(this._lat,e._lat)||Ir(this._long,e._long)}}const Ng=/^__.*__$/;class uy{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new Sl(e,this.data,this.fieldMask,t,this.fieldTransforms):new ju(e,this.data,t,this.fieldTransforms)}}class cy{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new Sl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Fg(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Kn()}}class uf{constructor(e,t,o,d,m,I){this.settings=e,this.databaseId=t,this.M=o,this.ignoreUndefinedProperties=d,void 0===m&&this.tc(),this.fieldTransforms=m||[],this.fieldMask=I||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new uf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),d=this.nc({path:o,ic:!1});return d.rc(e),d}oc(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),d=this.nc({path:o,ic:!1});return d.tc(),d}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return df(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(Fg(this.ec)&&Ng.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class Lg{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=o||rh(e)}lc(e,t,o,d=!1){return new uf({ec:e,methodName:t,hc:o,path:Ms.emptyPath(),ic:!1,cc:d},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function ic(i){const e=i._freezeSettings(),t=rh(i._databaseId);return new Lg(i._databaseId,!!e.ignoreUndefinedProperties,t)}function cf(i,e,t,o,d,m={}){const I=i.lc(m.merge||m.mergeFields?2:0,e,t,d);Io("Data must be an object, but it was:",I,o);const O=Vg(o,I);let Q,te;if(m.merge)Q=new Gl(I.fieldMask),te=I.fieldTransforms;else if(m.mergeFields){const Ue=[];for(const ut of m.mergeFields){const $t=fp(e,ut,t);if(!I.contains($t))throw new M(Vt.INVALID_ARGUMENT,`Field '${$t}' is specified in your field mask but missing from your input data.`);yy(Ue,$t)||Ue.push($t)}Q=new Gl(Ue),te=I.fieldTransforms.filter(ut=>Q.covers(ut.field))}else Q=null,te=I.fieldTransforms;return new uy(new Rt(O),Q,te)}class dh extends Wc{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof dh}}function Bg(i,e,t){return new uf({ec:3,hc:e.settings.hc,methodName:i._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class dp extends Wc{_toFieldTransform(e){return new Dl(e.path,new ja)}isEqual(e){return e instanceof dp}}class dy extends Wc{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=Bg(this,e,!0),o=this.fc.map(m=>Sd(m,t)),d=new Bo(o);return new Dl(e.path,d)}isEqual(e){return this===e}}class hy extends Wc{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=Bg(this,e,!0),o=this.fc.map(m=>Sd(m,t)),d=new mo(o);return new Dl(e.path,d)}isEqual(e){return this===e}}class fy extends Wc{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new yo(e.M,mc(e.M,this.dc));return new Dl(e.path,t)}isEqual(e){return this===e}}function hp(i,e,t,o){const d=i.lc(1,e,t);Io("Data must be an object, but it was:",d,o);const m=[],I=Rt.empty();Qa(o,(Q,te)=>{const Ue=pp(e,Q,t);te=(0,Xe.m9)(te);const ut=d.oc(Ue);if(te instanceof dh)m.push(Ue);else{const $t=Sd(te,ut);null!=$t&&(m.push(Ue),I.set(Ue,$t))}});const O=new Gl(m);return new cy(I,O,d.fieldTransforms)}function py(i,e,t,o,d,m){const I=i.lc(1,e,t),O=[fp(e,o,t)],Q=[d];if(m.length%2!=0)throw new M(Vt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let $t=0;$t<m.length;$t+=2)O.push(fp(e,m[$t])),Q.push(m[$t+1]);const te=[],Ue=Rt.empty();for(let $t=O.length-1;$t>=0;--$t)if(!yy(te,O[$t])){const fn=O[$t];let mn=Q[$t];mn=(0,Xe.m9)(mn);const tr=I.oc(fn);if(mn instanceof dh)te.push(fn);else{const ti=Sd(mn,tr);null!=ti&&(te.push(fn),Ue.set(fn,ti))}}const ut=new Gl(te);return new cy(Ue,ut,I.fieldTransforms)}function gy(i,e,t,o=!1){return Sd(t,i.lc(o?4:3,e))}function Sd(i,e){if(my(i=(0,Xe.m9)(i)))return Io("Unsupported field value:",e,i),Vg(i,e);if(i instanceof Wc)return function(t,o){if(!Fg(o.ec))throw o.ac(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.ac(`${t._methodName}() is not currently supported inside arrays`);const d=t._toFieldTransform(o);d&&o.fieldTransforms.push(d)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,o){const d=[];let m=0;for(const I of t){let O=Sd(I,o.uc(m));null==O&&(O={nullValue:"NULL_VALUE"}),d.push(O),m++}return{arrayValue:{values:d}}}(i,e)}return function(t,o){if(null===(t=(0,Xe.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return mc(o.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const d=fs.fromDate(t);return{timestampValue:gu(o.M,d)}}if(t instanceof fs){const d=new fs(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:gu(o.M,d)}}if(t instanceof lf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Au)return{bytesValue:wc(o.M,t._byteString)};if(t instanceof js){const d=o.databaseId,m=t.firestore._databaseId;if(!m.isEqual(d))throw o.ac(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:Ku(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.ac(`Unsupported field value: ${Td(t)}`)}(i,e)}function Vg(i,e){const t={};return Pu(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qa(i,(o,d)=>{const m=Sd(d,e.sc(o));null!=m&&(t[o]=m)}),{mapValue:{fields:t}}}function my(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof fs||i instanceof lf||i instanceof Au||i instanceof js||i instanceof Wc)}function Io(i,e,t){if(!my(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=Td(t);throw e.ac("an object"===o?i+" a custom object":i+" "+o)}var o}function fp(i,e,t){if((e=(0,Xe.m9)(e))instanceof ru)return e._internalPath;if("string"==typeof e)return pp(i,e);throw df("Field path arguments must be of type string or ",i,!1,void 0,t)}const x_=new RegExp("[~\\*/\\[\\]]");function pp(i,e,t){if(e.search(x_)>=0)throw df(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new ru(...e.split("."))._internalPath}catch(o){throw df(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function df(i,e,t,o,d){const m=o&&!o.isEmpty(),I=void 0!==d;let O=`Function ${e}() called with invalid data`;t&&(O+=" (via `toFirestore()`)"),O+=". ";let Q="";return(m||I)&&(Q+=" (found",m&&(Q+=` in field ${o}`),I&&(Q+=` in document ${d}`),Q+=")"),new M(Vt.INVALID_ARGUMENT,O+i+Q)}function yy(i,e){return i.some(t=>t.isEqual(e))}class hh{constructor(e,t,o,d,m){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=d,this._converter=m}get id(){return this._key.path.lastSegment()}get ref(){return new js(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new _y(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(sc("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class _y extends hh{data(){return super.data()}}function sc(i,e){return"string"==typeof e?pp(i,e):e instanceof ru?e._internalPath:e._delegate._internalPath}class Ad{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class oc extends hh{constructor(e,t,o,d,m,I){super(e,t,o,d,I),this._firestore=e,this._firestoreImpl=e,this.metadata=m}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new fh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(sc("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class fh extends oc{data(e={}){return super.data(e)}}class qc{constructor(e,t,o,d){this._firestore=e,this._userDataWriter=t,this._snapshot=d,this.metadata=new Ad(d.hasPendingWrites,d.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new fh(this._firestore,this._userDataWriter,o.key,o,new Ad(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new M(Vt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,d){if(o._snapshot.oldDocs.isEmpty()){let m=0;return o._snapshot.docChanges.map(I=>({type:"added",doc:new fh(o._firestore,o._userDataWriter,I.doc.key,I.doc,new Ad(o._snapshot.mutatedKeys.has(I.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:m++}))}{let m=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(I=>d||3!==I.type).map(I=>{const O=new fh(o._firestore,o._userDataWriter,I.doc.key,I.doc,new Ad(o._snapshot.mutatedKeys.has(I.doc.key),o._snapshot.fromCache),o.query.converter);let Q=-1,te=-1;return 0!==I.type&&(Q=m.indexOf(I.doc.key),m=m.delete(I.doc.key)),1!==I.type&&(m=m.add(I.doc),te=m.indexOf(I.doc.key)),{type:vy(I.type),doc:O,oldIndex:Q,newIndex:te}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function vy(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Kn()}}function M_(i,e){return i instanceof oc&&e instanceof oc?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof qc&&e instanceof qc&&i._firestore===e._firestore&&C_(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function Ug(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new M(Vt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xd{}function la(i,...e){for(const t of e)i=t._apply(i);return i}class R_ extends xd{constructor(e,t,o){super(),this._c=e,this.wc=t,this.mc=o,this.type="where"}_apply(e){const t=ic(e.firestore),o=function(d,m,I,O,Q,te,Ue){let ut;if(Q.isKeyField()){if("array-contains"===te||"array-contains-any"===te)throw new M(Vt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${te}' queries on documentId().`);if("in"===te||"not-in"===te){Dy(Ue,te);const fn=[];for(const mn of Ue)fn.push(jg(O,d,mn));ut={arrayValue:{values:fn}}}else ut=jg(O,d,Ue)}else"in"!==te&&"not-in"!==te&&"array-contains-any"!==te||Dy(Ue,te),ut=gy(I,"where",Ue,"in"===te||"not-in"===te);const $t=Fs.create(Q,te,ut);return function(fn,mn){if(mn.S()){const ti=uu(fn);if(null!==ti&&!ti.isEqual(mn.field))throw new M(Vt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ti.toString()}' and '${mn.field.toString()}'`);const Gs=lu(fn);null!==Gs&&Hg(0,mn.field,Gs)}const tr=function(ti,Gs){for(const lo of ti.filters)if(Gs.indexOf(lo.op)>=0)return lo.op;return null}(fn,function(ti){switch(ti){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(mn.op));if(null!==tr)throw new M(Vt.INVALID_ARGUMENT,tr===mn.op?`Invalid query. You cannot use more than one '${mn.op.toString()}' filter.`:`Invalid query. You cannot use '${mn.op.toString()}' filters with '${tr.toString()}' filters.`)}(d,$t),$t}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new va(e.firestore,e.converter,function(d,m){const I=d.filters.concat([m]);return new rl(d.path,d.collectionGroup,d.explicitOrderBy.slice(),I,d.limit,d.limitType,d.startAt,d.endAt)}(e._query,o))}}class xu extends xd{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(o,d,m){if(null!==o.startAt)throw new M(Vt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new M(Vt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const I=new wl(d,m);return function(O,Q){if(null===lu(O)){const te=uu(O);null!==te&&Hg(0,te,Q.field)}}(o,I),I}(e._query,this._c,this.gc);return new va(e.firestore,e.converter,function(o,d){const m=o.explicitOrderBy.concat([d]);return new rl(o.path,o.collectionGroup,m,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}class Ul extends xd{constructor(e,t,o){super(),this.type=e,this.yc=t,this.Ic=o}_apply(e){return new va(e.firestore,e.converter,gc(e._query,this.yc,this.Ic))}}class wy extends xd{constructor(e,t,o){super(),this.type=e,this.Tc=t,this.Ec=o}_apply(e){const t=Cy(e,this.type,this.Tc,this.Ec);return new va(e.firestore,e.converter,(d=t,new rl((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,d,o.endAt)));var o,d}}class Iy extends xd{constructor(e,t,o){super(),this.type=e,this.Tc=t,this.Ec=o}_apply(e){const t=Cy(e,this.type,this.Tc,this.Ec);return new va(e.firestore,e.converter,(d=t,new rl((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,d)));var o,d}}function Cy(i,e,t,o){if(t[0]=(0,Xe.m9)(t[0]),t[0]instanceof hh)return function(d,m,I,O,Q){if(!O)throw new M(Vt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${I}().`);const te=[];for(const Ue of il(d))if(Ue.field.isKeyField())te.push(Ao(m,O.key));else{const ut=O.data.field(Ue.field);if(Ja(ut))throw new M(Vt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Ue.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===ut){const $t=Ue.field.canonicalString();throw new M(Vt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${$t}' (used as the orderBy) does not exist.`)}te.push(ut)}return new Ca(te,Q)}(i._query,i.firestore._databaseId,e,t[0]._document,o);{const d=ic(i.firestore);return function(m,I,O,Q,te,Ue){const ut=m.explicitOrderBy;if(te.length>ut.length)throw new M(Vt.INVALID_ARGUMENT,`Too many arguments provided to ${Q}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const $t=[];for(let fn=0;fn<te.length;fn++){const mn=te[fn];if(ut[fn].field.isKeyField()){if("string"!=typeof mn)throw new M(Vt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${Q}(), but got a ${typeof mn}`);if(!Da(m)&&-1!==mn.indexOf("/"))throw new M(Vt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${Q}() must be a plain document ID, but '${mn}' contains a slash.`);const tr=m.path.child(mi.fromString(mn));if(!xn.isDocumentKey(tr))throw new M(Vt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${Q}() must result in a valid document path, but '${tr}' is not because it contains an odd number of segments.`);const ti=new xn(tr);$t.push(Ao(I,ti))}else{const tr=gy(O,Q,mn);$t.push(tr)}}return new Ca($t,Ue)}(i._query,i.firestore._databaseId,d,e,t,o)}}function jg(i,e,t){if("string"==typeof(t=(0,Xe.m9)(t))){if(""===t)throw new M(Vt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Da(e)&&-1!==t.indexOf("/"))throw new M(Vt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(mi.fromString(t));if(!xn.isDocumentKey(o))throw new M(Vt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Ao(i,new xn(o))}if(t instanceof js)return Ao(i,t._key);throw new M(Vt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Td(t)}.`)}function Dy(i,e){if(!Array.isArray(i)||0===i.length)throw new M(Vt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new M(Vt.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Hg(i,e,t){if(!t.isEqual(e))throw new M(Vt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const Ty={maxAttempts:5};class ph{convertValue(e,t="none"){switch(Ba(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Hi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(fl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Kn()}}convertObject(e,t){const o={};return Qa(e.fields,(d,m)=>{o[d]=this.convertValue(m,t)}),o}convertGeoPoint(e){return new lf(Hi(e.latitude),Hi(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=so(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(Rs(e));default:return null}}convertTimestamp(e){const t=ea(e);return new fs(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=mi.fromString(e);ur(ge(o));const d=new Xs(o.get(1),o.get(3)),m=new xn(o.popFirst(5));return d.isEqual(t)||Pi(`Document ${m} contains a document reference within a different database (${d.projectId}/${d.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),m}}function gp(i,e,t){let o;return o=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,o}class Sy extends ph{constructor(e){super(),this.firestore=e}convertBytes(e){return new Au(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new js(this.firestore,null,t)}}class Gg{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ic(e)}set(e,t,o){this._verifyNotCommitted();const d=Mu(e,this._firestore),m=gp(d.converter,t,o),I=cf(this._dataReader,"WriteBatch.set",d._key,m,null!==d.converter,o);return this._mutations.push(I.toMutation(d._key,$s.none())),this}update(e,t,o,...d){this._verifyNotCommitted();const m=Mu(e,this._firestore);let I;return I="string"==typeof(t=(0,Xe.m9)(t))||t instanceof ru?py(this._dataReader,"WriteBatch.update",m._key,t,o,d):hp(this._dataReader,"WriteBatch.update",m._key,t),this._mutations.push(I.toMutation(m._key,$s.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Mu(e,this._firestore);return this._mutations=this._mutations.concat(new Sa(t._key,$s.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new M(Vt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Mu(i,e){if((i=(0,Xe.m9)(i)).firestore!==e)throw new M(Vt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Yc extends ph{constructor(e){super(),this.firestore=e}convertBytes(e){return new Au(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new js(this.firestore,null,t)}}function zg(i,e,t){i=Ui(i,js);const o=Ui(i.firestore,Hs),d=gp(i.converter,e,t);return gh(o,[cf(ic(o),"setDoc",i._key,d,null!==i.converter,t).toMutation(i._key,$s.none())])}function Wg(i,e,t,...o){i=Ui(i,js);const d=Ui(i.firestore,Hs),m=ic(d);let I;return I="string"==typeof(e=(0,Xe.m9)(e))||e instanceof ru?py(m,"updateDoc",i._key,e,t,o):hp(m,"updateDoc",i._key,e),gh(d,[I.toMutation(i._key,$s.exists(!0))])}function Oy(i,...e){var t,o,d;i=(0,Xe.m9)(i);let m={includeMetadataChanges:!1},I=0;"object"!=typeof e[I]||Mg(e[I])||(m=e[I],I++);const O={includeMetadataChanges:m.includeMetadataChanges};if(Mg(e[I])){const ut=e[I];e[I]=null===(t=ut.next)||void 0===t?void 0:t.bind(ut),e[I+1]=null===(o=ut.error)||void 0===o?void 0:o.bind(ut),e[I+2]=null===(d=ut.complete)||void 0===d?void 0:d.bind(ut)}let Q,te,Ue;if(i instanceof js)te=Ui(i.firestore,Hs),Ue=$a(i._key.path),Q={next:ut=>{e[I]&&e[I](qg(te,i,ut))},error:e[I+1],complete:e[I+2]};else{const ut=Ui(i,va);te=Ui(ut.firestore,Hs),Ue=ut._query;const $t=new Yc(te);Q={next:fn=>{e[I]&&e[I](new qc(te,$t,ut,fn))},error:e[I+1],complete:e[I+2]},Ug(i._query)}return function(ut,$t,fn,mn){const tr=new ef(mn),ti=new Yh($t,tr,fn);return ut.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return rg(yield tf(ut),ti)})),()=>{tr.Aa(),ut.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return ig(yield tf(ut),ti)}))}}(Po(te),Ue,O,Q)}function gh(i,e){return function(t,o){const d=new x;return t.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function p_(i,e,t){return Zf.apply(this,arguments)}(yield bg(t),o,d)})),d.promise}(Po(i),e)}function qg(i,e,t){const o=t.docs.get(e._key),d=new Yc(i);return new oc(i,d,e._key,o,new Ad(t.hasPendingWrites,t.fromCache),e.converter)}class B_ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ic(e)}get(e){const t=Mu(e,this._firestore),o=new Sy(this._firestore);return this._transaction.lookup([t._key]).then(d=>{if(!d||1!==d.length)return Kn();const m=d[0];if(m.isFoundDocument())return new hh(this._firestore,o,m.key,m,t.converter);if(m.isNoDocument())return new hh(this._firestore,o,t._key,null,t.converter);throw Kn()})}set(e,t,o){const d=Mu(e,this._firestore),m=gp(d.converter,t,o),I=cf(this._dataReader,"Transaction.set",d._key,m,null!==d.converter,o);return this._transaction.set(d._key,I),this}update(e,t,o,...d){const m=Mu(e,this._firestore);let I;return I="string"==typeof(t=(0,Xe.m9)(t))||t instanceof ru?py(this._dataReader,"Transaction.update",m._key,t,o,d):hp(this._dataReader,"Transaction.update",m._key,t),this._transaction.update(m._key,I),this}delete(e){const t=Mu(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Mu(e,this._firestore),o=new Yc(this._firestore);return super.get(e).then(d=>new oc(this._firestore,o,t._key,d._document,new Ad(!1,!1),t.converter))}}function yp(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new M("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function Yg(){if("undefined"==typeof Uint8Array)throw new M("unimplemented","Uint8Arrays are not available in this environment.")}function Kg(){if(!function zl(){return"undefined"!=typeof atob}())throw new M("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){go=dt.SDK_VERSION,(0,dt._registerComponent)(new St.wA("firestore",(t,{options:o})=>{const d=t.getProvider("app").getImmediate(),m=new Hs(d,new ue(t.getProvider("auth-internal")),new $n(t.getProvider("app-check-internal")));return o=Object.assign({useFetchStreams:e},o),m._setSettings(o),m},"PUBLIC")),(0,dt.registerVersion)(dl,"3.4.9",i),(0,dt.registerVersion)(dl,"3.4.9","esm2017")}();class mh{constructor(e){this._delegate=e}static fromBase64String(e){return Kg(),new mh(Au.fromBase64String(e))}static fromUint8Array(e){return Yg(),new mh(Au.fromUint8Array(e))}toBase64(){return Kg(),this._delegate.toBase64()}toUint8Array(){return Yg(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function _p(i){return function Ny(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const o of e)if(o in t&&"function"==typeof t[o])return!0;return!1}(i,["next","error","complete"])}class Fy{enableIndexedDbPersistence(e,t){return function lp(i,e){kg(i=Ui(i,Hs));const t=Po(i),o=i._freezeSettings(),d=new tp;return D_(t,d,new yg(d,o.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Rg(i){kg(i=Ui(i,Hs));const e=Po(i),t=i._freezeSettings(),o=new tp;return D_(e,o,new Wm(o,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function T_(i){if(i._initialized&&!i._terminated)throw new M(Vt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new x;return i._queue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{yield(t=(0,we.Z)(function*(o){if(!Aa.vt())return Promise.resolve();const d=o+"main";yield Aa.delete(d)}),function(o){return t.apply(this,arguments)})(Bl(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Zg{constructor(e,t,o){this._delegate=t,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof Xs||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&io("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,o={}){!function I_(i,e,t,o={}){var d;const m=(i=Ui(i,nf))._getSettings();if("firestore.googleapis.com"!==m.host&&m.host!==e&&io("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},m),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let I,O;if("string"==typeof o.mockUserToken)I=o.mockUserToken,O=os.MOCK_USER;else{I=(0,Xe.Sg)(o.mockUserToken,null===(d=i._app)||void 0===d?void 0:d.options.projectId);const Q=o.mockUserToken.sub||o.mockUserToken.user_id;if(!Q)throw new M(Vt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");O=new os(Q)}i._authCredentials=new Y(new S(I,O))}}(this._delegate,e,t,o)}enableNetwork(){return function cp(i){return function Ig(i){return i.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield Jm(i),t=yield ey(i);return e.setNetworkEnabled(!0),function(o){const d=Sn(o);return d.wu.delete(0),jh(d)}(t)}))}(Po(i=Ui(i,Hs)))}(this._delegate)}disableNetwork(){return function Pg(i){return function Cg(i){return i.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield Jm(i),t=yield ey(i);return e.setNetworkEnabled(!1),(o=(0,we.Z)(function*(d){const m=Sn(d);m.wu.add(0),yield Hh(m),m.yu.set("Offline")}),function(d){return o.apply(this,arguments)})(t);var o}))}(Po(i=Ui(i,Hs)))}(this._delegate)}enablePersistence(e){let t=!1,o=!1;return e&&(t=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,Tg("synchronizeTabs",t,"experimentalForceOwningTab",o)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function up(i){return function(e){const t=new x;return e.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function Kv(i,e){return Qf.apply(this,arguments)}(yield bg(e),t)})),t.promise}(Po(i=Ui(i,Hs)))}(this._delegate)}onSnapshotsInSync(e){return function L_(i,e){return function b_(i,e){const t=new ef(e);return i.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return o=yield tf(i),d=t,Sn(o).bu.add(d),void d.next();var o,d})),()=>{t.Aa(),i.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return o=yield tf(i),d=t,void Sn(o).bu.delete(d);var o,d}))}}(Po(i=Ui(i,Hs)),Mg(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new M("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new _h(this,iy(this._delegate,e))}catch(t){throw Oo(t,"collection()","Firestore.collection()")}}doc(e){try{return new $l(this,rf(this._delegate,e))}catch(t){throw Oo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ea(this,function sy(i,e){if(i=Ui(i,nf),Dg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new M(Vt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new va(i,null,(t=e,new rl(mi.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Oo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function V_(i,e,t){i=Ui(i,Hs);const o=Object.assign(Object.assign({},Ty),t);return function(d){if(d.maxAttempts<1)throw new M(Vt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function ty(i,e,t){const o=new x;return i.asyncQueue.enqueueAndForget((0,we.Z)(function*(){const d=yield(m=i,ip(m).then(I=>I.datastore));var m;new Km(i.asyncQueue,d,t,e,o).run()})),o.promise}(Po(i),d=>e(new B_(i,d)),o)}(this._delegate,t=>e(new Xg(this,t)))}batch(){return Po(this._delegate),new Kc(new Gg(this._delegate,e=>gh(this._delegate,e)))}loadBundle(e){return function Og(i,e){const t=Po(i=Ui(i,Hs)),o=new Qv;return function Xv(i,e,t,o){const d=function(m,I){let O;return O="string"==typeof m?(new TextEncoder).encode(m):m,Q=function(Q,te){if(Q instanceof Uint8Array)return _g(Q,void 0);if(Q instanceof ArrayBuffer)return _g(new Uint8Array(Q),void 0);if(Q instanceof ReadableStream)return Q.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(O),new qm(Q,I);var Q}(t,rh(e));i.asyncQueue.enqueueAndForget((0,we.Z)(function*(){!function ch(i,e,t){const o=Sn(i);var d;(d=(0,we.Z)(function*(m,I,O){try{const Q=yield I.getMetadata();if(yield function($t,fn){const mn=Sn($t),tr=Zs(fn.createTime);return mn.persistence.runTransaction("hasNewerBundle","readonly",ti=>mn._s.getBundleMetadata(ti,fn.id)).then(ti=>!!ti&&ti.createTime.compareTo(tr)>=0)}(m.localStore,Q))return yield I.close(),O._completeWith({taskState:"Success",documentsLoaded:($t=Q).totalDocuments,bytesLoaded:$t.totalBytes,totalDocuments:$t.totalDocuments,totalBytes:$t.totalBytes}),Promise.resolve(new Set);O._updateProgress(ag(Q));const te=new km(Q,m.localStore,I.M);let Ue=yield I.ma();for(;Ue;){const $t=yield te.Fu(Ue);$t&&O._updateProgress($t),Ue=yield I.ma()}const ut=yield te.complete();return yield nc(m,ut.Lu,void 0),yield function($t,fn){const mn=Sn($t);return mn.persistence.runTransaction("Save bundle","readwrite",tr=>mn._s.saveBundleMetadata(tr,fn))}(m.localStore,Q),O._completeWith(ut.progress),Promise.resolve(ut.Bu)}catch(Q){return io("SyncEngine",`Loading bundle failed with ${Q}`),O._failWith(Q),Promise.resolve(new Set)}var $t}),function(m,I,O){return d.apply(this,arguments)})(o,e,t).then(d=>{o.sharedClientState.notifyBundleLoaded(d)})}(yield bg(i),d,o)}))}(t,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function ly(i,e){return function w_(i,e){return i.asyncQueue.enqueue((0,we.Z)(function*(){return function(t,o){const d=Sn(t);return d.persistence.runTransaction("Get named query","readonly",m=>d._s.getNamedQuery(m,o))}(yield op(i),e)}))}(Po(i=Ui(i,Hs)),e).then(t=>t?new va(i,null,t.query):null)}(this._delegate,e).then(t=>t?new Ea(this,t):null)}}class ff extends ph{constructor(e){super(),this.firestore=e}convertBytes(e){return new mh(new Au(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return $l.forKey(t,this.firestore,null)}}class Xg{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ff(e)}get(e){const t=Rd(e);return this._delegate.get(t).then(o=>new Ep(this._firestore,new oc(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,t.converter)))}set(e,t,o){const d=Rd(e);return o?(yp("Transaction.set",o),this._delegate.set(d,t,o)):this._delegate.set(d,t),this}update(e,t,o,...d){const m=Rd(e);return 2===arguments.length?this._delegate.update(m,t):this._delegate.update(m,t,o,...d),this}delete(e){const t=Rd(e);return this._delegate.delete(t),this}}class Kc{constructor(e){this._delegate=e}set(e,t,o){const d=Rd(e);return o?(yp("WriteBatch.set",o),this._delegate.set(d,t,o)):this._delegate.set(d,t),this}update(e,t,o,...d){const m=Rd(e);return 2===arguments.length?this._delegate.update(m,t):this._delegate.update(m,t,o,...d),this}delete(e){const t=Rd(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Md{constructor(e,t,o){this._firestore=e,this._userDataWriter=t,this._delegate=o}fromFirestore(e,t){const o=new fh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new yh(this._firestore,o),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const o=Md.INSTANCES;let d=o.get(e);d||(d=new WeakMap,o.set(e,d));let m=d.get(t);return m||(m=new Md(e,new ff(e),t),d.set(t,m)),m}}Md.INSTANCES=new WeakMap;class $l{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ff(e)}static forPath(e,t,o){if(e.length%2!=0)throw new M("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new $l(t,new js(t._delegate,o,new xn(e)))}static forKey(e,t,o){return new $l(t,new js(t._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new _h(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new _h(this.firestore,iy(this._delegate,e))}catch(t){throw Oo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Xe.m9)(e))instanceof js&&ap(this._delegate,e)}set(e,t){t=yp("DocumentReference.set",t);try{return t?zg(this._delegate,e,t):zg(this._delegate,e)}catch(o){throw Oo(o,"setDoc()","DocumentReference.set()")}}update(e,t,...o){try{return 1===arguments.length?Wg(this._delegate,e):Wg(this._delegate,e,t,...o)}catch(d){throw Oo(d,"updateDoc()","DocumentReference.update()")}}delete(){return function N_(i){return gh(Ui(i.firestore,Hs),[new Sa(i._key,$s.none())])}(this._delegate)}onSnapshot(...e){const t=q_(e),o=vp(e,d=>new Ep(this.firestore,new oc(this.firestore._delegate,this._userDataWriter,d._key,d._document,d.metadata,this._delegate.converter)));return Oy(this._delegate,t,o)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Ay(i){i=Ui(i,js);const e=Ui(i.firestore,Hs),t=Po(e),o=new Yc(e);return function __(i,e){const t=new x;return i.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(o=(0,we.Z)(function*(d,m,I){try{const O=yield function(Q,te){const Ue=Sn(Q);return Ue.persistence.runTransaction("read document","readonly",ut=>Ue.fi.Ls(ut,te))}(d,m);O.isFoundDocument()?I.resolve(O):O.isNoDocument()?I.resolve(null):I.reject(new M(Vt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(O){const Q=sh(O,`Failed to get document '${m} from cache`);I.reject(Q)}}),function(d,m,I){return o.apply(this,arguments)})(yield op(i),e,t);var o})),t.promise}(t,i._key).then(d=>new oc(e,o,i._key,d,new Ad(null!==d&&d.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function xy(i){i=Ui(i,js);const e=Ui(i.firestore,Hs);return v_(Po(e),i._key,{source:"server"}).then(t=>qg(e,i,t))}(this._delegate):function mp(i){i=Ui(i,js);const e=Ui(i.firestore,Hs);return v_(Po(e),i._key).then(t=>qg(e,i,t))}(this._delegate),t.then(o=>new Ep(this.firestore,new oc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new $l(this.firestore,this._delegate.withConverter(e?Md.getInstance(this.firestore,e):null))}}function Oo(i,e,t){return i.message=i.message.replace(e,t),i}function q_(i){for(const e of i)if("object"==typeof e&&!_p(e))return e;return{}}function vp(i,e){var t,o;let d;return d=_p(i[0])?i[0]:_p(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:m=>{d.next&&d.next(e(m))},error:null===(t=d.error)||void 0===t?void 0:t.bind(d),complete:null===(o=d.complete)||void 0===o?void 0:o.bind(d)}}class Ep{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new $l(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return M_(this._delegate,e._delegate)}}class yh extends Ep{data(e){const t=this._delegate.data(e);return function ha(i,e){i||Kn()}(void 0!==t),t}}class Ea{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ff(e)}where(e,t,o){try{return new Ea(this.firestore,la(this._delegate,function P_(i,e,t){const o=e,d=sc("where",i);return new R_(d,o,t)}(e,t,o)))}catch(d){throw Oo(d,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ea(this.firestore,la(this._delegate,function iu(i,e="asc"){const t=e,o=sc("orderBy",i);return new xu(o,t)}(e,t)))}catch(o){throw Oo(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ea(this.firestore,la(this._delegate,function Ey(i){return Ag("limit",i),new Ul("limit",i,"F")}(e)))}catch(t){throw Oo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ea(this.firestore,la(this._delegate,function by(i){return Ag("limitToLast",i),new Ul("limitToLast",i,"L")}(e)))}catch(t){throw Oo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ea(this.firestore,la(this._delegate,function O_(...i){return new wy("startAt",i,!0)}(...e)))}catch(t){throw Oo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ea(this.firestore,la(this._delegate,function k_(...i){return new wy("startAfter",i,!1)}(...e)))}catch(t){throw Oo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ea(this.firestore,la(this._delegate,function $g(...i){return new Iy("endBefore",i,!1)}(...e)))}catch(t){throw Oo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ea(this.firestore,la(this._delegate,function hf(...i){return new Iy("endAt",i,!0)}(...e)))}catch(t){throw Oo(t,"endAt()","Query.endAt()")}}isEqual(e){return C_(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Ry(i){i=Ui(i,va);const e=Ui(i.firestore,Hs),t=Po(e),o=new Yc(e);return function Zv(i,e){const t=new x;return i.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(o=(0,we.Z)(function*(d,m,I){try{const O=yield tc(d,m,!0),Q=new Lm(m,O._i),te=Q.Wu(O.documents),Ue=Q.applyChanges(te,!1);I.resolve(Ue.snapshot)}catch(O){const Q=sh(O,`Failed to execute query '${m} against cache`);I.reject(Q)}}),function(d,m,I){return o.apply(this,arguments)})(yield op(i),e,t);var o})),t.promise}(t,i._query).then(d=>new qc(e,o,i,d))}(this._delegate):"server"===(null==e?void 0:e.source)?function Py(i){i=Ui(i,va);const e=Ui(i.firestore,Hs),t=Po(e),o=new Yc(e);return E_(t,i._query,{source:"server"}).then(d=>new qc(e,o,i,d))}(this._delegate):function My(i){i=Ui(i,va);const e=Ui(i.firestore,Hs),t=Po(e),o=new Yc(e);return Ug(i._query),E_(t,i._query).then(d=>new qc(e,o,i,d))}(this._delegate),t.then(o=>new Hr(this.firestore,new qc(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const t=q_(e),o=vp(e,d=>new Hr(this.firestore,new qc(this.firestore._delegate,this._userDataWriter,this._delegate,d._snapshot)));return Oy(this._delegate,t,o)}withConverter(e){return new Ea(this.firestore,this._delegate.withConverter(e?Md.getInstance(this.firestore,e):null))}}class t0{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new yh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Hr{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ea(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new yh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new t0(this._firestore,t))}forEach(e,t){this._delegate.forEach(o=>{e.call(t,new yh(this._firestore,o))})}isEqual(e){return M_(this._delegate,e._delegate)}}class _h extends Ea{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new $l(this.firestore,e):null}doc(e){try{return new $l(this.firestore,void 0===e?rf(this._delegate):rf(this._delegate,e))}catch(t){throw Oo(t,"doc()","CollectionReference.doc()")}}add(e){return function F_(i,e){const t=Ui(i.firestore,Hs),o=rf(i),d=gp(i.converter,e);return gh(t,[cf(ic(i.firestore),"addDoc",o._key,d,null!==i.converter,{}).toMutation(o._key,$s.exists(!1))]).then(()=>o)}(this._delegate,e).then(t=>new $l(this.firestore,t))}isEqual(e){return ap(this._delegate,e._delegate)}withConverter(e){return new _h(this.firestore,this._delegate.withConverter(e?Md.getInstance(this.firestore,e):null))}}function Rd(i){return Ui(i,js)}class Qg{constructor(...e){this._delegate=new ru(...e)}static documentId(){return new Qg(Ms.keyField().canonicalString())}isEqual(e){return(e=(0,Xe.m9)(e))instanceof ru&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ru{constructor(e){this._delegate=e}static serverTimestamp(){const e=function $_(){return new dp("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ru(e)}static delete(){const e=function U_(){return new dh("deleteField")}();return e._methodName="FieldValue.delete",new Ru(e)}static arrayUnion(...e){const t=function j_(...i){return new dy("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new Ru(t)}static arrayRemove(...e){const t=function H_(...i){return new hy("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new Ru(t)}static increment(e){const t=function G_(i){return new fy("increment",i)}(e);return t._methodName="FieldValue.increment",new Ru(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Y_={Firestore:Zg,GeoPoint:lf,Timestamp:fs,Blob:mh,Transaction:Xg,WriteBatch:Kc,DocumentReference:$l,DocumentSnapshot:Ep,Query:Ea,QueryDocumentSnapshot:yh,QuerySnapshot:Hr,CollectionReference:_h,FieldPath:Qg,FieldValue:Ru,setLogLevel:function Ly(i){!function gi(i){Go.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function wp(i){(function bp(i,e){i.INTERNAL.registerComponent(new St.wA("firestore-compat",t=>{const o=t.getProvider("app-compat").getImmediate(),d=t.getProvider("firestore").getImmediate();return e(o,d)},"PUBLIC").setServiceProps(Object.assign({},Y_)))})(i,(e,t)=>new Zg(e,t,new Fy)),i.registerVersion("@firebase/firestore-compat","0.1.18")}(Et.Z);var ms=L(4941),n0=L(440),By=L(127);function Vy(i,e){return function K_(i,e=J.z){return new Z.y(t=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},t)}):o=i.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=o&&o()}})}(i,e)}function Ip(i,e){return Vy(i,e).pipe((0,ne.U)(t=>({payload:t,type:"query"})))}function pf(i,e){return Ip(i,e).pipe((0,ve.O)(void 0),De(),(0,ne.U)(([t,o])=>{const d=o.payload.docChanges(),m=d.map(I=>({type:I.type,payload:I}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((I,O)=>{const Q=d.find(Ue=>Ue.doc.ref.isEqual(I.ref)),te=null==t?void 0:t.payload.docs.find(Ue=>Ue.ref.isEqual(I.ref));Q&&JSON.stringify(Q.doc.metadata)===JSON.stringify(I.metadata)||!Q&&te&&JSON.stringify(te.metadata)===JSON.stringify(I.metadata)||m.push({type:"modified",payload:{oldIndex:O,newIndex:O,type:"modified",doc:I}})}),m}))}function Jg(i,e,t){return pf(i,t).pipe((0,ce.R)((o,d)=>function Z_(i,e,t){return e.forEach(o=>{t.indexOf(o.type)>-1&&(i=function X_(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return em(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return em(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return em(i,e.oldIndex,1)}return i}(i,o))}),i}(o,d.map(m=>m.payload),e),[]),(0,Ke.x)(),(0,ne.U)(o=>o.map(d=>({type:d.type,payload:d}))))}function em(i,e,t,...o){const d=i.slice();return d.splice(e,t,...o),d}function vh(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class $y{constructor(e,t,o){this.ref=e,this.query=t,this.afs=o}stateChanges(e){let t=pf(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ne.U)(o=>o.filter(d=>e.indexOf(d.type)>-1)))),t.pipe((0,ve.O)(void 0),De(),(0,Ve.h)(([o,d])=>d.length>0||!o),(0,ne.U)(([o,d])=>d),ae.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,ce.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=vh(e);return Jg(this.query,t,this.afs.schedulers.outsideAngular).pipe(ae.iC)}valueChanges(e={}){return Ip(this.query,this.afs.schedulers.outsideAngular).pipe((0,ne.U)(t=>t.payload.docs.map(o=>e.idField?Object.assign(Object.assign({},o.data()),{[e.idField]:o.id}):o.data())),ae.iC)}get(e){return(0,We.D)(this.query.get(e)).pipe(ae.iC)}add(e){return this.ref.add(e)}doc(e){return new jy(this.ref.doc(e),this.afs)}}class jy{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const o=this.ref.collection(e),{ref:d,query:m}=zy(o,t);return new $y(d,m,this.afs)}snapshotChanges(){return function Uy(i,e){return Vy(i,e).pipe((0,ve.O)(void 0),De(),(0,ne.U)(([t,o])=>o.exists?(null==t?void 0:t.exists)?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ae.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ne.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,We.D)(this.ref.get(e)).pipe(ae.iC)}}class Q_{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?pf(this.query,this.afs.schedulers.outsideAngular).pipe((0,ne.U)(t=>t.filter(o=>e.indexOf(o.type)>-1)),(0,Ve.h)(t=>t.length>0),ae.iC):pf(this.query,this.afs.schedulers.outsideAngular).pipe(ae.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,ce.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=vh(e);return Jg(this.query,t,this.afs.schedulers.outsideAngular).pipe(ae.iC)}valueChanges(e={}){return Ip(this.query,this.afs.schedulers.outsideAngular).pipe((0,ne.U)(o=>o.payload.docs.map(d=>e.idField?Object.assign({[e.idField]:d.id},d.data()):d.data())),ae.iC)}get(e){return(0,We.D)(this.query.get(e)).pipe(ae.iC)}}const gf=new a.OlP("angularfire2.enableFirestorePersistence"),tm=new a.OlP("angularfire2.firestore.persistenceSettings"),Hy=new a.OlP("angularfire2.firestore.settings"),Gy=new a.OlP("angularfire2.firestore.use-emulator");function zy(i,e=(t=>t)){return{query:e(i),ref:i}}let Eh=(()=>{class i{constructor(t,o,d,m,I,O,Q,te,Ue,ut,$t,fn,mn,tr,ti,Gs,lo){this.schedulers=Q;const Ji=(0,Ee.on)(t,O,o),ko=Ue;ut&&(0,ms.nw)(Ji,O,$t,mn,tr,ti,fn,Gs),[this.firestore,this.persistenceEnabled$]=(0,Ee.cc)(`${Ji.name}.firestore`,"AngularFirestore",Ji.name,()=>{const zs=O.runOutsideAngular(()=>Ji.firestore());if(m&&zs.settings(m),ko&&zs.useEmulator(...ko),d&&!(0,Fe.PM)(I)){const to=()=>{try{return(0,We.D)(zs.enablePersistence(te||void 0).then(()=>!0,()=>!1))}catch(ba){return"undefined"!=typeof console&&console.warn(ba),(0,Ne.of)(!1)}};return[zs,O.runOutsideAngular(to)]}return[zs,(0,Ne.of)(!1)]},[m,ko,d])}collection(t,o){let d;d="string"==typeof t?this.firestore.collection(t):t;const{ref:m,query:I}=zy(d,o),O=this.schedulers.ngZone.run(()=>m);return new $y(O,I,this)}collectionGroup(t,o){const d=o||(I=>I),m=this.firestore.collectionGroup(t);return new Q_(d(m),this)}doc(t){let o;o="string"==typeof t?this.firestore.doc(t):t;const d=this.schedulers.ngZone.run(()=>o);return new jy(d,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(a.LFG(Ee.Dh),a.LFG(Ee.xv,8),a.LFG(gf,8),a.LFG(Hy,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(ae.HU),a.LFG(tm,8),a.LFG(Gy,8),a.LFG(ms.zQ,8),a.LFG(ms.Qv,8),a.LFG(ms.L6,8),a.LFG(ms._Q,8),a.LFG(ms.rT,8),a.LFG(ms.lh,8),a.LFG(ms.f7,8),a.LFG(n0.nm,8))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),mf=(()=>{class i{constructor(){By.Z.registerVersion("angularfire",ae.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:gf,useValue:!0},{provide:tm,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({providers:[Eh]}),i})()},4586:(dn,ft,L)=>{"use strict";L.d(ft,{Q1:()=>Ut,TE:()=>b});var a=L(2916),J=L(1086),Z=L(5254),We=L(3489),Ne=L(353);class Ae{constructor(C,W){this.dueTime=C,this.scheduler=W}call(C,W){return W.subscribe(new De(C,this.dueTime,this.scheduler))}}class De extends We.L{constructor(C,W,pe){super(C),this.dueTime=W,this.scheduler=pe,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(C){this.clearDebounce(),this.lastValue=C,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Ie,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:C}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(C)}}clearDebounce(){const C=this.debouncedSubscription;null!==C&&(this.remove(C),C.unsubscribe(),this.debouncedSubscription=null)}}function Ie(v){v.debouncedNext()}var oe=L(4850),ve=L(7545),ne=L(6351),ce=L(5e3),Ke=L(2011),Ve=L(3942),Ee=L(5861),Fe=L(9681),Be=L(2090),Et=L(4859);const we="firebasestorage.googleapis.com",dt="storageBucket";class Xe extends Be.ZR{constructor(C,W){super(Tt(C),`Firebase Storage: ${W} (${Tt(C)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Xe.prototype)}_codeEquals(C){return Tt(C)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(C){this.customData.serverResponse=C,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Tt(v){return"storage/"+v}function me(){return new Xe("unknown","An unknown error occurred, please check the error payload for server response.")}function Mt(){return new Xe("canceled","User canceled the upload/download.")}function Ye(){return new Xe("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Ce(v){return new Xe("invalid-argument",v)}function tt(){return new Xe("app-deleted","The Firebase app was deleted.")}function Gt(v){return new Xe("invalid-root-operation","The operation '"+v+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ct(v,C){return new Xe("invalid-format","String does not match format '"+v+"': "+C)}function sn(v){throw new Xe("internal-error","Internal error: "+v)}class bn{constructor(C,W){this.bucket=C,this.path_=W}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const C=encodeURIComponent;return"/b/"+C(this.bucket)+"/o/"+C(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(C,W){let pe;try{pe=bn.makeFromUrl(C,W)}catch(Le){return new bn(C,"")}if(""===pe.path)return pe;throw function mt(v){return new Xe("invalid-default-bucket","Invalid default bucket '"+v+"'.")}(C)}static makeFromUrl(C,W){let pe=null;const Le="([A-Za-z0-9.\\-_]+)",In=new RegExp("^gs://"+Le+"(/(.*))?$","i");function or(is){is.path_=decodeURIComponent(is.path)}const Dr=W.replace(/[.]/g,"\\."),rs=[{regex:In,indices:{bucket:1,path:3},postModify:function vt(is){"/"===is.path.charAt(is.path.length-1)&&(is.path_=is.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${Dr}/v[A-Za-z0-9_]+/b/${Le}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:or},{regex:new RegExp(`^https?://${W===we?"(?:storage.googleapis.com|storage.cloud.google.com)":W}/${Le}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:or}];for(let is=0;is<rs.length;is++){const co=rs[is],ho=co.regex.exec(C);if(ho){let fo=ho[co.indices.path];fo||(fo=""),pe=new bn(ho[co.indices.bucket],fo),co.postModify(pe);break}}if(null==pe)throw function Jt(v){return new Xe("invalid-url","Invalid URL '"+v+"'.")}(C);return pe}}class kn{constructor(C){this.promise_=Promise.reject(C)}getPromise(){return this.promise_}cancel(C=!1){}}function Yn(v){return"string"==typeof v||v instanceof String}function on(v){return Rr()&&v instanceof Blob}function Rr(){return"undefined"!=typeof Blob}function cr(v,C,W,pe){if(pe<C)throw Ce(`Invalid value for '${v}'. Expected ${C} or greater.`);if(pe>W)throw Ce(`Invalid value for '${v}'. Expected ${W} or less.`)}function Bn(v,C,W){let pe=C;return null==W&&(pe=`https://${C}`),`${W}://${pe}/v0${v}`}function nr(v){const C=encodeURIComponent;let W="?";for(const pe in v)v.hasOwnProperty(pe)&&(W=W+(C(pe)+"=")+C(v[pe])+"&");return W=W.slice(0,-1),W}var _r=(()=>{return(v=_r||(_r={}))[v.NO_ERROR=0]="NO_ERROR",v[v.NETWORK_ERROR=1]="NETWORK_ERROR",v[v.ABORT=2]="ABORT",_r;var v})();class _t{constructor(C,W,pe,Le,vt,Ht,In,Wt,or,mr,Dr){this.url_=C,this.method_=W,this.headers_=pe,this.body_=Le,this.successCodes_=vt,this.additionalRetryCodes_=Ht,this.callback_=In,this.errorCallback_=Wt,this.timeout_=or,this.progressCallback_=mr,this.connectionFactory_=Dr,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Un,Ci)=>{this.resolve_=Un,this.reject_=Ci,this.start_()})}start_(){const W=(pe,Le)=>{const vt=this.resolve_,Ht=this.reject_,In=Le.connection;if(Le.wasSuccessCode)try{const Wt=this.callback_(In,In.getResponse());!function qn(v){return void 0!==v}(Wt)?vt():vt(Wt)}catch(Wt){Ht(Wt)}else if(null!==In){const Wt=me();Wt.serverResponse=In.getErrorText(),Ht(this.errorCallback_?this.errorCallback_(In,Wt):Wt)}else Ht(Le.canceled?this.appDelete_?tt():Mt():function Ze(){return new Xe("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?W(0,new He(!1,null,!0)):this.backoffId_=function _n(v,C,W){let pe=1,Le=null,vt=null,Ht=!1,In=0;function Wt(){return 2===In}let or=!1;function mr(...fi){or||(or=!0,C.apply(null,fi))}function Dr(fi){Le=setTimeout(()=>{Le=null,v(Ci,Wt())},fi)}function Un(){vt&&clearTimeout(vt)}function Ci(fi,...Ws){if(or)return void Un();if(fi)return Un(),void mr.call(null,fi,...Ws);if(Wt()||Ht)return Un(),void mr.call(null,fi,...Ws);let rs;pe<64&&(pe*=2),1===In?(In=2,rs=0):rs=1e3*(pe+Math.random()),Dr(rs)}let Di=!1;function Ai(fi){Di||(Di=!0,Un(),!or&&(null!==Le?(fi||(In=2),clearTimeout(Le),Dr(0)):fi||(In=1)))}return Dr(0),vt=setTimeout(()=>{Ht=!0,Ai(!0)},W),Ai}((pe,Le)=>{if(Le)return void pe(!1,new He(!1,null,!0));const vt=this.connectionFactory_();this.pendingConnection_=vt;const Ht=In=>{null!==this.progressCallback_&&this.progressCallback_(In.loaded,In.lengthComputable?In.total:-1)};null!==this.progressCallback_&&vt.addUploadProgressListener(Ht),vt.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&vt.removeUploadProgressListener(Ht),this.pendingConnection_=null;const In=vt.getErrorCode()===_r.NO_ERROR,Wt=vt.getStatus();if(!In||this.isRetryStatusCode_(Wt)){const mr=vt.getErrorCode()===_r.ABORT;return void pe(!1,new He(!1,null,mr))}const or=-1!==this.successCodes_.indexOf(Wt);pe(!0,new He(or,vt))})},W,this.timeout_)}getPromise(){return this.promise_}cancel(C){this.canceled_=!0,this.appDelete_=C||!1,null!==this.backoffId_&&function gn(v){v(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(C){const W=C>=500&&C<600,Le=-1!==[408,429].indexOf(C),vt=-1!==this.additionalRetryCodes_.indexOf(C);return W||Le||vt}}class He{constructor(C,W,pe){this.wasSuccessCode=C,this.connection=W,this.canceled=!!pe}}function Jn(...v){const C=function Zn(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==C){const W=new C;for(let pe=0;pe<v.length;pe++)W.append(v[pe]);return W.getBlob()}if(Rr())return new Blob(v);throw new Xe("unsupported-environment","This browser doesn't seem to support creating Blobs")}const vr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Hn{constructor(C,W){this.data=C,this.contentType=W||null}}function xe(v,C){switch(v){case vr.RAW:return new Hn(qe(C));case vr.BASE64:case vr.BASE64URL:return new Hn(Lt(v,C));case vr.DATA_URL:return new Hn(function ht(v){const C=new Ge(v);return C.base64?Lt(vr.BASE64,C.rest):function rt(v){let C;try{C=decodeURIComponent(v)}catch(W){throw Ct(vr.DATA_URL,"Malformed data URL.")}return qe(C)}(C.rest)}(C),function tn(v){return new Ge(v).contentType}(C))}throw me()}function qe(v){const C=[];for(let W=0;W<v.length;W++){let pe=v.charCodeAt(W);pe<=127?C.push(pe):pe<=2047?C.push(192|pe>>6,128|63&pe):55296==(64512&pe)?W<v.length-1&&56320==(64512&v.charCodeAt(W+1))?(pe=65536|(1023&pe)<<10|1023&v.charCodeAt(++W),C.push(240|pe>>18,128|pe>>12&63,128|pe>>6&63,128|63&pe)):C.push(239,191,189):56320==(64512&pe)?C.push(239,191,189):C.push(224|pe>>12,128|pe>>6&63,128|63&pe)}return new Uint8Array(C)}function Lt(v,C){switch(v){case vr.BASE64:{const Le=-1!==C.indexOf("-"),vt=-1!==C.indexOf("_");if(Le||vt)throw Ct(v,"Invalid character '"+(Le?"-":"_")+"' found: is it base64url encoded?");break}case vr.BASE64URL:{const Le=-1!==C.indexOf("+"),vt=-1!==C.indexOf("/");if(Le||vt)throw Ct(v,"Invalid character '"+(Le?"+":"/")+"' found: is it base64 encoded?");C=C.replace(/-/g,"+").replace(/_/g,"/");break}}let W;try{W=function Fn(v){return atob(v)}(C)}catch(Le){throw Ct(v,"Invalid character found")}const pe=new Uint8Array(W.length);for(let Le=0;Le<W.length;Le++)pe[Le]=W.charCodeAt(Le);return pe}class Ge{constructor(C){this.base64=!1,this.contentType=null;const W=C.match(/^data:([^,]+)?,/);if(null===W)throw Ct(vr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const pe=W[1]||null;null!=pe&&(this.base64=function un(v,C){return v.length>=C.length&&v.substring(v.length-C.length)===C}(pe,";base64"),this.contentType=this.base64?pe.substring(0,pe.length-7):pe),this.rest=C.substring(C.indexOf(",")+1)}}class vn{constructor(C,W){let pe=0,Le="";on(C)?(this.data_=C,pe=C.size,Le=C.type):C instanceof ArrayBuffer?(W?this.data_=new Uint8Array(C):(this.data_=new Uint8Array(C.byteLength),this.data_.set(new Uint8Array(C))),pe=this.data_.length):C instanceof Uint8Array&&(W?this.data_=C:(this.data_=new Uint8Array(C.length),this.data_.set(C)),pe=C.length),this.size_=pe,this.type_=Le}size(){return this.size_}type(){return this.type_}slice(C,W){if(on(this.data_)){const Le=function Mn(v,C,W){return v.webkitSlice?v.webkitSlice(C,W):v.mozSlice?v.mozSlice(C,W):v.slice?v.slice(C,W):null}(this.data_,C,W);return null===Le?null:new vn(Le)}{const pe=new Uint8Array(this.data_.buffer,C,W-C);return new vn(pe,!0)}}static getBlob(...C){if(Rr()){const W=C.map(pe=>pe instanceof vn?pe.data_:pe);return new vn(Jn.apply(null,W))}{const W=C.map(Ht=>Yn(Ht)?xe(vr.RAW,Ht).data:Ht.data_);let pe=0;W.forEach(Ht=>{pe+=Ht.byteLength});const Le=new Uint8Array(pe);let vt=0;return W.forEach(Ht=>{for(let In=0;In<Ht.length;In++)Le[vt++]=Ht[In]}),new vn(Le,!0)}}uploadData(){return this.data_}}function Vn(v){let C;try{C=JSON.parse(v)}catch(W){return null}return function Qn(v){return"object"==typeof v&&!Array.isArray(v)}(C)?C:null}function Sr(v){const C=v.lastIndexOf("/",v.length-2);return-1===C?v:v.slice(C+1)}function Gr(v,C){return C}class zr{constructor(C,W,pe,Le){this.server=C,this.local=W||C,this.writable=!!pe,this.xform=Le||Gr}}let Dt=null;function Re(){if(Dt)return Dt;const v=[];v.push(new zr("bucket")),v.push(new zr("generation")),v.push(new zr("metageneration")),v.push(new zr("name","fullPath",!0));const W=new zr("name");W.xform=function C(vt,Ht){return function st(v){return!Yn(v)||v.length<2?v:Sr(v)}(Ht)},v.push(W);const Le=new zr("size");return Le.xform=function pe(vt,Ht){return void 0!==Ht?Number(Ht):Ht},v.push(Le),v.push(new zr("timeCreated")),v.push(new zr("updated")),v.push(new zr("md5Hash",null,!0)),v.push(new zr("cacheControl",null,!0)),v.push(new zr("contentDisposition",null,!0)),v.push(new zr("contentEncoding",null,!0)),v.push(new zr("contentLanguage",null,!0)),v.push(new zr("contentType",null,!0)),v.push(new zr("metadata","customMetadata",!0)),Dt=v,Dt}function Ln(v,C,W){const pe=Vn(C);return null===pe?null:function Kt(v,C,W){const pe={type:"file"},Le=W.length;for(let vt=0;vt<Le;vt++){const Ht=W[vt];pe[Ht.local]=Ht.xform(pe,C[Ht.server])}return function gt(v,C){Object.defineProperty(v,"ref",{get:function W(){const vt=new bn(v.bucket,v.fullPath);return C._makeStorageReference(vt)}})}(pe,v),pe}(v,pe,W)}function Er(v,C){const W={},pe=C.length;for(let Le=0;Le<pe;Le++){const vt=C[Le];vt.writable&&(W[vt.server]=v[vt.local])}return JSON.stringify(W)}const Wn="prefixes";class Br{constructor(C,W,pe,Le){this.url=C,this.method=W,this.handler=pe,this.timeout=Le,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Yr(v){if(!v)throw me()}function Kr(v,C){return function W(pe,Le){const vt=Ln(v,Le,C);return Yr(null!==vt),vt}}function ir(v){return function C(W,pe){let Le;return Le=401===W.getStatus()?W.getErrorText().includes("Firebase App Check token is invalid")?function ye(){return new Xe("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function fe(){return new Xe("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===W.getStatus()?function Se(v){return new Xe("quota-exceeded","Quota for bucket '"+v+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(v.bucket):403===W.getStatus()?function je(v){return new Xe("unauthorized","User does not have permission to access '"+v+"'.")}(v.path):pe,Le.serverResponse=pe.serverResponse,Le}}function ii(v){const C=ir(v);return function W(pe,Le){let vt=C(pe,Le);return 404===pe.getStatus()&&(vt=function Oe(v){return new Xe("object-not-found","Object '"+v+"' does not exist.")}(v.path)),vt.serverResponse=Le.serverResponse,vt}}function ni(v,C,W){const Le=Bn(C.fullServerUrl(),v.host,v._protocol),Ht=v.maxOperationRetryTime,In=new Br(Le,"GET",Kr(v,W),Ht);return In.errorHandler=ii(C),In}function Vr(v,C,W,pe,Le){const vt={};vt.prefix=C.isRoot?"":C.path+"/",W&&W.length>0&&(vt.delimiter=W),pe&&(vt.pageToken=pe),Le&&(vt.maxResults=Le);const In=Bn(C.bucketOnlyServerUrl(),v.host,v._protocol),or=v.maxOperationRetryTime,mr=new Br(In,"GET",function nn(v,C){return function W(pe,Le){const vt=function Ei(v,C,W){const pe=Vn(W);return null===pe?null:function Ki(v,C,W){const pe={prefixes:[],items:[],nextPageToken:W.nextPageToken};if(W[Wn])for(const Le of W[Wn]){const vt=Le.replace(/\/$/,""),Ht=v._makeStorageReference(new bn(C,vt));pe.prefixes.push(Ht)}if(W.items)for(const Le of W.items){const vt=v._makeStorageReference(new bn(C,Le.name));pe.items.push(vt)}return pe}(v,C,pe)}(v,C,Le);return Yr(null!==vt),vt}}(v,C.bucket),or);return mr.urlParams=vt,mr.errorHandler=ir(C),mr}function Zi(v,C,W){const pe=Object.assign({},W);return pe.fullPath=v.path,pe.size=C.size(),pe.contentType||(pe.contentType=function sr(v,C){return v&&v.contentType||C&&C.type()||"application/octet-stream"}(null,C)),pe}class Mi{constructor(C,W,pe,Le){this.current=C,this.total=W,this.finalized=!!pe,this.metadata=Le||null}}function wi(v,C){let W=null;try{W=v.getResponseHeader("X-Goog-Upload-Status")}catch(Le){Yr(!1)}return Yr(!!W&&-1!==(C||["active"]).indexOf(W)),W}const _e={STATE_CHANGED:"state_changed"},Je={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function pt(v){switch(v){case"running":case"pausing":case"canceling":return Je.RUNNING;case"paused":return Je.PAUSED;case"success":return Je.SUCCESS;case"canceled":return Je.CANCELED;default:return Je.ERROR}}class be{constructor(C,W,pe){if(function Zr(v){return"function"==typeof v}(C)||null!=W||null!=pe)this.next=C,this.error=null!=W?W:void 0,this.complete=null!=pe?pe:void 0;else{const vt=C;this.next=vt.next,this.error=vt.error,this.complete=vt.complete}}}function ke(v){return(...C)=>{Promise.resolve().then(()=>v(...C))}}class Nt extends class jt{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=_r.NO_ERROR,this.sendPromise_=new Promise(C=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=_r.ABORT,C()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=_r.NETWORK_ERROR,C()}),this.xhr_.addEventListener("load",()=>{C()})})}send(C,W,pe,Le){if(this.sent_)throw sn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(W,C,!0),void 0!==Le)for(const vt in Le)Le.hasOwnProperty(vt)&&this.xhr_.setRequestHeader(vt,Le[vt].toString());return void 0!==pe?this.xhr_.send(pe):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw sn("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw sn("cannot .getStatus() before sending");try{return this.xhr_.status}catch(C){return-1}}getResponse(){if(!this.sent_)throw sn("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw sn("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(C){return this.xhr_.getResponseHeader(C)}addUploadProgressListener(C){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",C)}removeUploadProgressListener(C){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",C)}}{initXhr(){this.xhr_.responseType="text"}}function Ot(){return new Nt}class si{constructor(C,W,pe=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=C,this._blob=W,this._metadata=pe,this._mappings=Re(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=Le=>{this._request=void 0,this._chunkMultiplier=1,Le._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=Le,this._transition("error"))},this._metadataErrorHandler=Le=>{this._request=void 0,Le._codeEquals("canceled")?this.completeTransitions_():(this._error=Le,this._transition("error"))},this._promise=new Promise((Le,vt)=>{this._resolve=Le,this._reject=vt,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const C=this._transferred;return W=>this._updateProgress(C+W)}_shouldDoResumable(C){return C.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(C){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([W,pe])=>{switch(this._state){case"running":C(W,pe);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((C,W)=>{const pe=function oi(v,C,W,pe,Le){const vt=C.bucketOnlyServerUrl(),Ht=Zi(C,pe,Le),In={name:Ht.fullPath},Wt=Bn(vt,v.host,v._protocol),mr={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${pe.size()}`,"X-Goog-Upload-Header-Content-Type":Ht.contentType,"Content-Type":"application/json; charset=utf-8"},Dr=Er(Ht,W),Di=new Br(Wt,"POST",function Ci(Ai){let fi;wi(Ai);try{fi=Ai.getResponseHeader("X-Goog-Upload-URL")}catch(Ws){Yr(!1)}return Yr(Yn(fi)),fi},v.maxUploadRetryTime);return Di.urlParams=In,Di.headers=mr,Di.body=Dr,Di.errorHandler=ir(C),Di}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),Le=this._ref.storage._makeRequest(pe,Ot,C,W);this._request=Le,Le.getPromise().then(vt=>{this._request=void 0,this._uploadUrl=vt,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const C=this._uploadUrl;this._resolveToken((W,pe)=>{const Le=function ki(v,C,W,pe){const Wt=new Br(W,"POST",function vt(or){const mr=wi(or,["active","final"]);let Dr=null;try{Dr=or.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Ci){Yr(!1)}Dr||Yr(!1);const Un=Number(Dr);return Yr(!isNaN(Un)),new Mi(Un,pe.size(),"final"===mr)},v.maxUploadRetryTime);return Wt.headers={"X-Goog-Upload-Command":"query"},Wt.errorHandler=ir(C),Wt}(this._ref.storage,this._ref._location,C,this._blob),vt=this._ref.storage._makeRequest(Le,Ot,W,pe);this._request=vt,vt.getPromise().then(Ht=>{Ht=Ht,this._request=void 0,this._updateProgress(Ht.current),this._needToFetchStatus=!1,Ht.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const C=262144*this._chunkMultiplier,W=new Mi(this._transferred,this._blob.size()),pe=this._uploadUrl;this._resolveToken((Le,vt)=>{let Ht;try{Ht=function ee(v,C,W,pe,Le,vt,Ht,In){const Wt=new Mi(0,0);if(Ht?(Wt.current=Ht.current,Wt.total=Ht.total):(Wt.current=0,Wt.total=pe.size()),pe.size()!==Wt.total)throw function q(){return new Xe("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const or=Wt.total-Wt.current;let mr=or;Le>0&&(mr=Math.min(mr,Le));const Dr=Wt.current,Di={"X-Goog-Upload-Command":mr===or?"upload, finalize":"upload","X-Goog-Upload-Offset":`${Wt.current}`},Ai=pe.slice(Dr,Dr+mr);if(null===Ai)throw Ye();const rs=new Br(W,"POST",function fi(is,co){const ho=wi(is,["active","final"]),jo=Wt.current+mr,fo=pe.size();let po;return po="final"===ho?Kr(C,vt)(is,co):null,new Mi(jo,fo,"final"===ho,po)},C.maxUploadRetryTime);return rs.headers=Di,rs.body=Ai.uploadData(),rs.progressCallback=In||null,rs.errorHandler=ir(v),rs}(this._ref._location,this._ref.storage,pe,this._blob,C,this._mappings,W,this._makeProgressCallback())}catch(Wt){return this._error=Wt,void this._transition("error")}const In=this._ref.storage._makeRequest(Ht,Ot,Le,vt);this._request=In,In.getPromise().then(Wt=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(Wt.current),Wt.finalized?(this._metadata=Wt.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((C,W)=>{const pe=ni(this._ref.storage,this._ref._location,this._mappings),Le=this._ref.storage._makeRequest(pe,Ot,C,W);this._request=Le,Le.getPromise().then(vt=>{this._request=void 0,this._metadata=vt,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((C,W)=>{const pe=function Oi(v,C,W,pe,Le){const vt=C.bucketOnlyServerUrl(),Ht={"X-Goog-Upload-Protocol":"multipart"},Wt=function In(){let rs="";for(let is=0;is<2;is++)rs+=Math.random().toString().slice(2);return rs}();Ht["Content-Type"]="multipart/related; boundary="+Wt;const or=Zi(C,pe,Le),mr=Er(or,W),Ci=vn.getBlob("--"+Wt+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+mr+"\r\n--"+Wt+"\r\nContent-Type: "+or.contentType+"\r\n\r\n",pe,"\r\n--"+Wt+"--");if(null===Ci)throw Ye();const Di={name:or.fullPath},Ai=Bn(vt,v.host,v._protocol),Ws=v.maxUploadRetryTime,pi=new Br(Ai,"POST",Kr(v,W),Ws);return pi.urlParams=Di,pi.headers=Ht,pi.body=Ci.uploadData(),pi.errorHandler=ir(C),pi}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),Le=this._ref.storage._makeRequest(pe,Ot,C,W);this._request=Le,Le.getPromise().then(vt=>{this._request=void 0,this._metadata=vt,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(C){const W=this._transferred;this._transferred=C,this._transferred!==W&&this._notifyObservers()}_transition(C){if(this._state!==C)switch(C){case"canceling":case"pausing":this._state=C,void 0!==this._request&&this._request.cancel();break;case"running":const W="paused"===this._state;this._state=C,W&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=C,this._notifyObservers();break;case"canceled":this._error=Mt(),this._state=C,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const C=pt(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:C,metadata:this._metadata,task:this,ref:this._ref}}on(C,W,pe,Le){const vt=new be(W||void 0,pe||void 0,Le||void 0);return this._addObserver(vt),()=>{this._removeObserver(vt)}}then(C,W){return this._promise.then(C,W)}catch(C){return this.then(null,C)}_addObserver(C){this._observers.push(C),this._notifyObserver(C)}_removeObserver(C){const W=this._observers.indexOf(C);-1!==W&&this._observers.splice(W,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(W=>{this._notifyObserver(W)})}_finishPromise(){if(void 0!==this._resolve){let C=!0;switch(pt(this._state)){case Je.SUCCESS:ke(this._resolve.bind(null,this.snapshot))();break;case Je.CANCELED:case Je.ERROR:ke(this._reject.bind(null,this._error))();break;default:C=!1}C&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(C){switch(pt(this._state)){case Je.RUNNING:case Je.PAUSED:C.next&&ke(C.next.bind(C,this.snapshot))();break;case Je.SUCCESS:C.complete&&ke(C.complete.bind(C))();break;default:C.error&&ke(C.error.bind(C,this._error))()}}resume(){const C="paused"===this._state||"pausing"===this._state;return C&&this._transition("running"),C}pause(){const C="running"===this._state;return C&&this._transition("pausing"),C}cancel(){const C="running"===this._state||"pausing"===this._state;return C&&this._transition("canceling"),C}}class _i{constructor(C,W){this._service=C,this._location=W instanceof bn?W:bn.makeFromUrl(W,C.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(C,W){return new _i(C,W)}get root(){const C=new bn(this._location.bucket,"");return this._newRef(this._service,C)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Sr(this._location.path)}get storage(){return this._service}get parent(){const C=function Gn(v){if(0===v.length)return null;const C=v.lastIndexOf("/");return-1===C?"":v.slice(0,C)}(this._location.path);if(null===C)return null;const W=new bn(this._location.bucket,C);return new _i(this._service,W)}_throwIfRoot(C){if(""===this._location.path)throw Gt(C)}}function Qr(v,C,W){return ui.apply(this,arguments)}function ui(){return(ui=(0,Ee.Z)(function*(v,C,W){const Le=yield Ur(v,{pageToken:W});C.prefixes.push(...Le.prefixes),C.items.push(...Le.items),null!=Le.nextPageToken&&(yield Qr(v,C,Le.nextPageToken))})).apply(this,arguments)}function Ur(v,C){null!=C&&"number"==typeof C.maxResults&&cr("options.maxResults",1,1e3,C.maxResults);const W=C||{},pe=Vr(v.storage,v._location,"/",W.pageToken,W.maxResults);return v.storage.makeRequestWithTokens(pe,Ot)}function Ni(v){v._throwIfRoot("getDownloadURL");const C=function Wr(v,C,W){const Le=Bn(C.fullServerUrl(),v.host,v._protocol),Ht=v.maxOperationRetryTime,In=new Br(Le,"GET",function wn(v,C){return function W(pe,Le){const vt=Ln(v,Le,C);return Yr(null!==vt),function zn(v,C,W,pe){const Le=Vn(C);if(null===Le||!Yn(Le.downloadTokens))return null;const vt=Le.downloadTokens;if(0===vt.length)return null;const Ht=encodeURIComponent;return vt.split(",").map(or=>{const Dr=v.fullPath;return Bn("/b/"+Ht(v.bucket)+"/o/"+Ht(Dr),W,pe)+nr({alt:"media",token:or})})[0]}(vt,Le,v.host,v._protocol)}}(v,W),Ht);return In.errorHandler=ii(C),In}(v.storage,v._location,Re());return v.storage.makeRequestWithTokens(C,Ot).then(W=>{if(null===W)throw function bt(){return new Xe("no-download-url","The given file does not have any download URLs.")}();return W})}function Ts(v,C){const W=function An(v,C){const W=C.split("/").filter(pe=>pe.length>0).join("/");return 0===v.length?W:v+"/"+W}(v._location.path,C),pe=new bn(v._location.bucket,W);return new _i(v.storage,pe)}function Ar(v,C){if(v instanceof _s){const W=v;if(null==W._bucket)throw function wt(){return new Xe("no-default-bucket","No default bucket found. Did you set the '"+dt+"' property when initializing the app?")}();const pe=new _i(W,W._bucket);return null!=C?Ar(pe,C):pe}return void 0!==C?Ts(v,C):v}function hi(v,C){if(C&&function Pr(v){return/^[A-Za-z]+:\/\//.test(v)}(C)){if(v instanceof _s)return function $r(v,C){return new _i(v,C)}(v,C);throw Ce("To use ref(service, url), the first argument must be a Storage instance.")}return Ar(v,C)}function Or(v,C){const W=null==C?void 0:C[dt];return null==W?null:bn.makeFromBucketSpec(W,v)}class _s{constructor(C,W,pe,Le,vt){this.app=C,this._authProvider=W,this._appCheckProvider=pe,this._url=Le,this._firebaseVersion=vt,this._bucket=null,this._host=we,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=Le?bn.makeFromBucketSpec(Le,this._host):Or(this._host,this.app.options)}get host(){return this._host}set host(C){this._host=C,this._bucket=null!=this._url?bn.makeFromBucketSpec(this._url,C):Or(C,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(C){cr("time",0,Number.POSITIVE_INFINITY,C),this._maxUploadRetryTime=C}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(C){cr("time",0,Number.POSITIVE_INFINITY,C),this._maxOperationRetryTime=C}_getAuthToken(){var C=this;return(0,Ee.Z)(function*(){if(C._overrideAuthToken)return C._overrideAuthToken;const W=C._authProvider.getImmediate({optional:!0});if(W){const pe=yield W.getToken();if(null!==pe)return pe.accessToken}return null})()}_getAppCheckToken(){var C=this;return(0,Ee.Z)(function*(){const W=C._appCheckProvider.getImmediate({optional:!0});return W?(yield W.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(C=>C.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(C){return new _i(this,C)}_makeRequest(C,W,pe,Le){if(this._deleted)return new kn(tt());{const vt=function cn(v,C,W,pe,Le,vt){const Ht=nr(v.urlParams),In=v.url+Ht,Wt=Object.assign({},v.headers);return function kt(v,C){C&&(v["X-Firebase-GMPID"]=C)}(Wt,C),function Te(v,C){null!==C&&C.length>0&&(v.Authorization="Firebase "+C)}(Wt,W),function en(v,C){v["X-Firebase-Storage-Version"]="webjs/"+(null!=C?C:"AppManager")}(Wt,vt),function qt(v,C){null!==C&&(v["X-Firebase-AppCheck"]=C)}(Wt,pe),new _t(In,v.method,Wt,v.body,v.successCodes,v.additionalRetryCodes,v.handler,v.errorHandler,v.timeout,v.progressCallback,Le)}(C,this._appId,pe,Le,W,this._firebaseVersion);return this._requests.add(vt),vt.getPromise().then(()=>this._requests.delete(vt),()=>this._requests.delete(vt)),vt}}makeRequestWithTokens(C,W){var pe=this;return(0,Ee.Z)(function*(){const[Le,vt]=yield Promise.all([pe._getAuthToken(),pe._getAppCheckToken()]);return pe._makeRequest(C,W,Le,vt).getPromise()})()}}const Ss="@firebase/storage";function Es(v,C){return hi(v=(0,Be.m9)(v),C)}function se(v,{instanceIdentifier:C}){const W=v.getProvider("app").getImmediate(),pe=v.getProvider("auth-internal"),Le=v.getProvider("app-check-internal");return new _s(W,pe,Le,C,Fe.SDK_VERSION)}!function $(){(0,Fe._registerComponent)(new Et.wA("storage",se,"PUBLIC").setMultipleInstances(!0)),(0,Fe.registerVersion)(Ss,"0.9.6",""),(0,Fe.registerVersion)(Ss,"0.9.6","esm2017")}();class de{constructor(C,W,pe){this._delegate=C,this.task=W,this.ref=pe}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class et{constructor(C,W){this._delegate=C,this._ref=W,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new de(this._delegate.snapshot,this,this._ref)}then(C,W){return this._delegate.then(pe=>{if(C)return C(new de(pe,this,this._ref))},W)}on(C,W,pe,Le){let vt;return W&&(vt="function"==typeof W?Ht=>W(new de(Ht,this,this._ref)):{next:W.next?Ht=>W.next(new de(Ht,this,this._ref)):void 0,complete:W.complete||void 0,error:W.error||void 0}),this._delegate.on(C,vt,pe||void 0,Le||void 0)}}class ct{constructor(C,W){this._delegate=C,this._service=W}get prefixes(){return this._delegate.prefixes.map(C=>new zt(C,this._service))}get items(){return this._delegate.items.map(C=>new zt(C,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class zt{constructor(C,W){this._delegate=C,this.storage=W}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(C){const W=function ji(v,C){return Ts(v,C)}(this._delegate,C);return new zt(W,this.storage)}get root(){return new zt(this._delegate.root,this.storage)}get parent(){const C=this._delegate.parent;return null==C?null:new zt(C,this.storage)}put(C,W){return this._throwIfRoot("put"),new et(function Qi(v,C,W){return function Zt(v,C,W){return v._throwIfRoot("uploadBytesResumable"),new si(v,new vn(C),W)}(v=(0,Be.m9)(v),C,W)}(this._delegate,C,W),this)}putString(C,W=vr.RAW,pe){this._throwIfRoot("putString");const Le=xe(W,C),vt=Object.assign({},pe);return null==vt.contentType&&null!=Le.contentType&&(vt.contentType=Le.contentType),new et(new si(this._delegate,new vn(Le.data,!0),vt),this)}listAll(){return function uo(v){return function Pn(v){const C={prefixes:[],items:[]};return Qr(v,C).then(()=>C)}(v=(0,Be.m9)(v))}(this._delegate).then(C=>new ct(C,this.storage))}list(C){return function Ri(v,C){return Ur(v=(0,Be.m9)(v),C)}(this._delegate,C||void 0).then(W=>new ct(W,this.storage))}getMetadata(){return function kr(v){return function ys(v){v._throwIfRoot("getMetadata");const C=ni(v.storage,v._location,Re());return v.storage.makeRequestWithTokens(C,Ot)}(v=(0,Be.m9)(v))}(this._delegate)}updateMetadata(C){return function vs(v,C){return function cs(v,C){v._throwIfRoot("updateMetadata");const W=function bi(v,C,W,pe){const vt=Bn(C.fullServerUrl(),v.host,v._protocol),In=Er(W,pe),or=v.maxOperationRetryTime,mr=new Br(vt,"PATCH",Kr(v,pe),or);return mr.headers={"Content-Type":"application/json; charset=utf-8"},mr.body=In,mr.errorHandler=ii(C),mr}(v.storage,v._location,C,Re());return v.storage.makeRequestWithTokens(W,Ot)}(v=(0,Be.m9)(v),C)}(this._delegate,C)}getDownloadURL(){return function es(v){return Ni(v=(0,Be.m9)(v))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function as(v){return function no(v){v._throwIfRoot("deleteObject");const C=function Xr(v,C){const pe=Bn(C.fullServerUrl(),v.host,v._protocol),In=new Br(pe,"DELETE",function Ht(Wt,or){},v.maxOperationRetryTime);return In.successCodes=[200,204],In.errorHandler=ii(C),In}(v.storage,v._location);return v.storage.makeRequestWithTokens(C,Ot)}(v=(0,Be.m9)(v))}(this._delegate)}_throwIfRoot(C){if(""===this._delegate._location.path)throw Gt(C)}}class Dn{constructor(C,W){this.app=C,this._delegate=W}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(C){if(gr(C))throw Ce("ref() expected a child path but got a URL, use refFromURL instead.");return new zt(Es(this._delegate,C),this)}refFromURL(C){if(!gr(C))throw Ce("refFromURL() expected a full URL but got a child path, use ref() instead.");try{bn.makeFromUrl(C,this._delegate.host)}catch(W){throw Ce("refFromUrl() expected a valid full URL but got an invalid one.")}return new zt(Es(this._delegate,C),this)}setMaxUploadRetryTime(C){this._delegate.maxUploadRetryTime=C}setMaxOperationRetryTime(C){this._delegate.maxOperationRetryTime=C}useEmulator(C,W,pe={}){!function $o(v,C,W,pe={}){!function Xi(v,C,W,pe={}){v.host=`${C}:${W}`,v._protocol="http";const{mockUserToken:Le}=pe;Le&&(v._overrideAuthToken="string"==typeof Le?Le:(0,Be.Sg)(Le,v.app.options.projectId))}(v,C,W,pe)}(this._delegate,C,W,pe)}}function gr(v){return/^[A-Za-z]+:\/\//.test(v)}function Fi(v,{instanceIdentifier:C}){const W=v.getProvider("app-compat").getImmediate(),pe=v.getProvider("storage").getImmediate({identifier:C});return new Dn(W,pe)}!function Nr(v){const C={TaskState:Je,TaskEvent:_e,StringFormat:vr,Storage:Dn,Reference:zt};v.INTERNAL.registerComponent(new Et.wA("storage-compat",Fi,"PUBLIC").setServiceProps(C).setMultipleInstances(!0)),v.registerVersion("@firebase/storage-compat","0.1.14")}(Ve.Z);var vi=L(440),bs=L(127);function Xn(v){const C=function ns(v){return new a.y(C=>{const W=Ht=>C.next(Ht);W(v.snapshot);const vt=v.on("state_changed",W);return v.then(Ht=>{W(Ht),C.complete()},Ht=>{W(v.snapshot),(Ht=>{C.error(Ht)})(Ht)}),function(){vt()}}).pipe(function ae(v,C=Ne.P){return W=>W.lift(new Ae(v,C))}(0))}(v);return{task:v,then:v.then.bind(v),catch:v.catch.bind(v),pause:v.pause.bind(v),cancel:v.cancel.bind(v),resume:v.resume.bind(v),snapshotChanges:()=>C,percentageChanges:()=>C.pipe((0,oe.U)(W=>W.bytesTransferred/W.totalBytes*100))}}function Bi(v){return{getDownloadURL:()=>(0,J.of)(void 0).pipe(ne.fc,(0,ve.w)(()=>v.getDownloadURL()),ne.iC),getMetadata:()=>(0,J.of)(void 0).pipe(ne.fc,(0,ve.w)(()=>v.getMetadata()),ne.iC),delete:()=>(0,Z.D)(v.delete()),child:C=>Bi(v.child(C)),updateMetadata:C=>(0,Z.D)(v.updateMetadata(C)),put:(C,W)=>Xn(v.put(C,W)),putString:(C,W,pe)=>Xn(v.putString(C,W,pe)),list:C=>(0,Z.D)(v.list(C)),listAll:()=>(0,Z.D)(v.listAll())}}const H=new ce.OlP("angularfire2.storageBucket"),B=new ce.OlP("angularfire2.storage.maxUploadRetryTime"),N=new ce.OlP("angularfire2.storage.maxOperationRetryTime"),re=new ce.OlP("angularfire2.storage.use-emulator");let Ut=(()=>{class v{constructor(W,pe,Le,vt,Ht,In,Wt,or,mr,Dr){const Un=(0,Ke.on)(W,Ht,pe);this.storage=(0,Ke.cc)(`${Un.name}.storage.${Le}`,"AngularFireStorage",Un.name,()=>{const Ci=Ht.runOutsideAngular(()=>Un.storage(Le||void 0)),Di=mr;return Di&&Ci.useEmulator(...Di),Wt&&Ci.setMaxUploadRetryTime(Wt),or&&Ci.setMaxOperationRetryTime(or),Ci},[Wt,or])}ref(W){return Bi(this.storage.ref(W))}refFromURL(W){return Bi(this.storage.refFromURL(W))}upload(W,pe,Le){return Bi(this.storage.ref(W)).put(pe,Le)}}return v.\u0275fac=function(W){return new(W||v)(ce.LFG(Ke.Dh),ce.LFG(Ke.xv,8),ce.LFG(H,8),ce.LFG(ce.Lbi),ce.LFG(ce.R0b),ce.LFG(ne.HU),ce.LFG(B,8),ce.LFG(N,8),ce.LFG(re,8),ce.LFG(vi.nm,8))},v.\u0275prov=ce.Yz7({token:v,factory:v.\u0275fac,providedIn:"any"}),v})(),k=(()=>{class v{}return v.\u0275fac=function(W){return new(W||v)},v.\u0275mod=ce.oAB({type:v}),v.\u0275inj=ce.cJS({}),v})(),b=(()=>{class v{constructor(){bs.Z.registerVersion("angularfire",ne.q4.full,"gcs-compat")}}return v.\u0275fac=function(W){return new(W||v)},v.\u0275mod=ce.oAB({type:v}),v.\u0275inj=ce.cJS({providers:[Ut],imports:[k]}),v})()},2011:(dn,ft,L)=>{"use strict";L.d(ft,{hO:()=>ce,xv:()=>Ie,Dh:()=>De,GT:()=>ae,cc:()=>Ke,on:()=>oe,pX:()=>Ne});var a=L(5e3),J=L(127),Z=L(6351);dn=L.hmd(dn);const We=["ngOnDestroy"],Ne=(Be,Et,we,dt={})=>new Proxy(Be,{get:(St,Pt)=>we.runOutsideAngular(()=>{var Xe;if(Be[Pt])return(null===(Xe=null==dt?void 0:dt.spy)||void 0===Xe?void 0:Xe.get)&&dt.spy.get(Pt,Be[Pt]),Be[Pt];if(We.indexOf(Pt)>-1)return()=>{};const Tt=Et.toPromise().then(me=>{const Oe=me&&me[Pt];return"function"==typeof Oe?Oe.bind(me):Oe&&Oe.then?Oe.then(Se=>we.run(()=>Se)):we.run(()=>Oe)});return new Proxy(()=>{},{get:(me,Oe)=>Tt[Oe],apply:(me,Oe,Se)=>Tt.then(fe=>{var ye;const je=fe&&fe(...Se);return(null===(ye=null==dt?void 0:dt.spy)||void 0===ye?void 0:ye.apply)&&dt.spy.apply(Pt,Se,je),je})})})}),ae=(Be,Et)=>{Et.forEach(we=>{Object.getOwnPropertyNames(we.prototype||we).forEach(dt=>{Object.defineProperty(Be.prototype,dt,Object.getOwnPropertyDescriptor(we.prototype||we,dt))})})};class Ae{constructor(Et){return Et}}const De=new a.OlP("angularfire2.app.options"),Ie=new a.OlP("angularfire2.app.name");function oe(Be,Et,we){const St="object"==typeof we&&we||{};St.name=St.name||"string"==typeof we&&we||"[DEFAULT]";const Xe=J.Z.apps.filter(Tt=>Tt&&Tt.name===St.name)[0]||Et.runOutsideAngular(()=>J.Z.initializeApp(Be,St));try{JSON.stringify(Be)!==JSON.stringify(Xe.options)&&ve("error",`${Xe.name} Firebase App already initialized with different options${dn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Tt){}return new Ae(Xe)}const ve=(Be,...Et)=>{(0,a.X6Q)()&&"undefined"!=typeof console&&console[Be](...Et)},ne={provide:Ae,useFactory:oe,deps:[De,a.R0b,[new a.FiY,Ie]]};let ce=(()=>{class Be{constructor(we){J.Z.registerVersion("angularfire",Z.q4.full,"core"),J.Z.registerVersion("angularfire",Z.q4.full,"app-compat"),J.Z.registerVersion("angular",a.q4F.full,we.toString())}static initializeApp(we,dt){return{ngModule:Be,providers:[{provide:De,useValue:we},{provide:Ie,useValue:dt}]}}}return Be.\u0275fac=function(we){return new(we||Be)(a.LFG(a.Lbi))},Be.\u0275mod=a.oAB({type:Be}),Be.\u0275inj=a.cJS({providers:[ne]}),Be})();function Ke(Be,Et,we,dt,St){const[,Pt,Xe]=globalThis.\u0275AngularfireInstanceCache.find(Tt=>Tt[0]===Be)||[];if(Pt)return function Ve(Be,Et){try{return Be.toString()===Et.toString()}catch(we){return Be===Et}}(St,Xe)||(Fe("error",`${Et} was already initialized on the ${we} Firebase App with different settings.${Ee?" You may need to reload as Firebase is not HMR aware.":""}`),Fe("warn",{is:St,was:Xe})),Pt;{const Tt=dt();return globalThis.\u0275AngularfireInstanceCache.push([Be,Tt,St]),Tt}}const Ee=!!dn.hot,Fe=(Be,...Et)=>{(0,a.X6Q)()&&"undefined"!=typeof console&&console[Be](...Et)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6351:(dn,ft,L)=>{"use strict";L.d(ft,{q4:()=>fl,iC:()=>Va,fc:()=>Wl,HU:()=>cc,vb:()=>Ba,JM:()=>ku});var a=L(5e3),J=L(5867),Z=L(5861),We=L(9681),Ne=L(2090),ae=L(4859),Ae=L(1877),De=L(8766);const Ie="@firebase/installations",ne="w:0.5.9",ce="FIS_v2",Et=new Ne.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function we(V){return V instanceof Ne.ZR&&V.code.includes("request-failed")}function dt({projectId:V}){return`https://firebaseinstallations.googleapis.com/v1/projects/${V}/installations`}function St(V){return{token:V.token,requestStatus:2,expiresIn:fe(V.expiresIn),creationTime:Date.now()}}function Pt(V,z){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,Z.Z)(function*(V,z){const ze=(yield z.json()).error;return Et.create("request-failed",{requestName:V,serverCode:ze.code,serverMessage:ze.message,serverStatus:ze.status})})).apply(this,arguments)}function Tt({apiKey:V}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":V})}function me(V,{refreshToken:z}){const he=Tt(V);return he.append("Authorization",function ye(V){return`${ce} ${V}`}(z)),he}function Oe(V){return Se.apply(this,arguments)}function Se(){return(Se=(0,Z.Z)(function*(V){const z=yield V();return z.status>=500&&z.status<600?V():z})).apply(this,arguments)}function fe(V){return Number(V.replace("s","000"))}function je(V,z){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,Z.Z)(function*({appConfig:V,heartbeatServiceProvider:z},{fid:he}){const ze=dt(V),At=Tt(V),Rt=z.getImmediate({optional:!0});if(Rt){const hr=yield Rt.getHeartbeatsHeader();hr&&At.append("x-firebase-client",hr)}const Cn={method:"POST",headers:At,body:JSON.stringify({fid:he,authVersion:ce,appId:V.appId,sdkVersion:ne})},Fr=yield Oe(()=>fetch(ze,Cn));if(Fr.ok){const hr=yield Fr.json();return{fid:hr.fid||he,registrationStatus:2,refreshToken:hr.refreshToken,authToken:St(hr.authToken)}}throw yield Pt("Create Installation",Fr)})).apply(this,arguments)}function Mt(V){return new Promise(z=>{setTimeout(z,V)})}const mt=/^[cdef][\w-]{21}$/;function Ye(){try{const V=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(V),V[0]=112+V[0]%16;const he=function q(V){return function Jt(V){return btoa(String.fromCharCode(...V)).replace(/\+/g,"-").replace(/\//g,"_")}(V).substr(0,22)}(V);return mt.test(he)?he:""}catch(V){return""}}function bt(V){return`${V.appName}!${V.appId}`}const Ce=new Map;function tt(V,z){const he=bt(V);sn(he,z),function bn(V,z){const he=function _n(){return!kn&&"BroadcastChannel"in self&&(kn=new BroadcastChannel("[Firebase] FID Change"),kn.onmessage=V=>{sn(V.data.key,V.data.fid)}),kn}();he&&he.postMessage({key:V,fid:z}),function gn(){0===Ce.size&&kn&&(kn.close(),kn=null)}()}(he,z)}function sn(V,z){const he=Ce.get(V);if(he)for(const ze of he)ze(z)}let kn=null;const Qn="firebase-installations-store";let Yn=null;function on(){return Yn||(Yn=(0,De.X3)("firebase-installations-database",1,{upgrade:(V,z)=>{0===z&&V.createObjectStore(Qn)}})),Yn}function Rr(V,z){return cr.apply(this,arguments)}function cr(){return(cr=(0,Z.Z)(function*(V,z){const he=bt(V),At=(yield on()).transaction(Qn,"readwrite"),Rt=At.objectStore(Qn),hn=yield Rt.get(he);return yield Rt.put(z,he),yield At.done,(!hn||hn.fid!==z.fid)&&tt(V,z.fid),z})).apply(this,arguments)}function Bn(V){return nr.apply(this,arguments)}function nr(){return(nr=(0,Z.Z)(function*(V){const z=bt(V),ze=(yield on()).transaction(Qn,"readwrite");yield ze.objectStore(Qn).delete(z),yield ze.done})).apply(this,arguments)}function _r(V,z){return _t.apply(this,arguments)}function _t(){return(_t=(0,Z.Z)(function*(V,z){const he=bt(V),At=(yield on()).transaction(Qn,"readwrite"),Rt=At.objectStore(Qn),hn=yield Rt.get(he),Cn=z(hn);return void 0===Cn?yield Rt.delete(he):yield Rt.put(Cn,he),yield At.done,Cn&&(!hn||hn.fid!==Cn.fid)&&tt(V,Cn.fid),Cn})).apply(this,arguments)}function He(V){return Te.apply(this,arguments)}function Te(){return(Te=(0,Z.Z)(function*(V){let z;const he=yield _r(V.appConfig,ze=>{const At=en(ze),Rt=kt(V,At);return z=Rt.registrationPromise,Rt.installationEntry});return""===he.fid?{installationEntry:yield z}:{installationEntry:he,registrationPromise:z}})).apply(this,arguments)}function en(V){return Fn(V||{fid:Ye(),registrationStatus:0})}function kt(V,z){if(0===z.registrationStatus){if(!navigator.onLine)return{installationEntry:z,registrationPromise:Promise.reject(Et.create("app-offline"))};const he={fid:z.fid,registrationStatus:1,registrationTime:Date.now()},ze=function qt(V,z){return cn.apply(this,arguments)}(V,he);return{installationEntry:he,registrationPromise:ze}}return 1===z.registrationStatus?{installationEntry:z,registrationPromise:Zn(V)}:{installationEntry:z}}function cn(){return(cn=(0,Z.Z)(function*(V,z){try{const he=yield je(V,z);return Rr(V.appConfig,he)}catch(he){throw we(he)&&409===he.customData.serverCode?yield Bn(V.appConfig):yield Rr(V.appConfig,{fid:z.fid,registrationStatus:0}),he}})).apply(this,arguments)}function Zn(V){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,Z.Z)(function*(V){let z=yield Mn(V.appConfig);for(;1===z.registrationStatus;)yield Mt(100),z=yield Mn(V.appConfig);if(0===z.registrationStatus){const{installationEntry:he,registrationPromise:ze}=yield He(V);return ze||he}return z})).apply(this,arguments)}function Mn(V){return _r(V,z=>{if(!z)throw Et.create("installation-not-found");return Fn(z)})}function Fn(V){return function vr(V){return 1===V.registrationStatus&&V.registrationTime+1e4<Date.now()}(V)?{fid:V.fid,registrationStatus:0}:V}function Hn(V,z){return xe.apply(this,arguments)}function xe(){return(xe=(0,Z.Z)(function*({appConfig:V,heartbeatServiceProvider:z},he){const ze=qe(V,he),At=me(V,he),Rt=z.getImmediate({optional:!0});if(Rt){const hr=yield Rt.getHeartbeatsHeader();hr&&At.append("x-firebase-client",hr)}const Cn={method:"POST",headers:At,body:JSON.stringify({installation:{sdkVersion:ne,appId:V.appId}})},Fr=yield Oe(()=>fetch(ze,Cn));if(Fr.ok)return St(yield Fr.json());throw yield Pt("Generate Auth Token",Fr)})).apply(this,arguments)}function qe(V,{fid:z}){return`${dt(V)}/${z}/authTokens:generate`}function rt(V){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,Z.Z)(function*(V,z=!1){let he;const ze=yield _r(V.appConfig,Rt=>{if(!Vn(Rt))throw Et.create("not-registered");const hn=Rt.authToken;if(!z&&Gn(hn))return Rt;if(1===hn.requestStatus)return he=Ge(V,z),Rt;{if(!navigator.onLine)throw Et.create("app-offline");const Cn=Sr(Rt);return he=un(V,Cn),Cn}});return he?yield he:ze.authToken})).apply(this,arguments)}function Ge(V,z){return ht.apply(this,arguments)}function ht(){return(ht=(0,Z.Z)(function*(V,z){let he=yield tn(V.appConfig);for(;1===he.authToken.requestStatus;)yield Mt(100),he=yield tn(V.appConfig);const ze=he.authToken;return 0===ze.requestStatus?rt(V,z):ze})).apply(this,arguments)}function tn(V){return _r(V,z=>{if(!Vn(z))throw Et.create("not-registered");return function Gr(V){return 1===V.requestStatus&&V.requestTime+1e4<Date.now()}(z.authToken)?Object.assign(Object.assign({},z),{authToken:{requestStatus:0}}):z})}function un(V,z){return vn.apply(this,arguments)}function vn(){return(vn=(0,Z.Z)(function*(V,z){try{const he=yield Hn(V,z),ze=Object.assign(Object.assign({},z),{authToken:he});return yield Rr(V.appConfig,ze),he}catch(he){if(!we(he)||401!==he.customData.serverCode&&404!==he.customData.serverCode){const ze=Object.assign(Object.assign({},z),{authToken:{requestStatus:0}});yield Rr(V.appConfig,ze)}else yield Bn(V.appConfig);throw he}})).apply(this,arguments)}function Vn(V){return void 0!==V&&2===V.registrationStatus}function Gn(V){return 2===V.requestStatus&&!function An(V){const z=Date.now();return z<V.creationTime||V.creationTime+V.expiresIn<z+36e5}(V)}function Sr(V){const z={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},V),{authToken:z})}function Dt(){return(Dt=(0,Z.Z)(function*(V){const z=V,{installationEntry:he,registrationPromise:ze}=yield He(z);return ze?ze.catch(console.error):rt(z).catch(console.error),he.fid})).apply(this,arguments)}function Re(){return(Re=(0,Z.Z)(function*(V,z=!1){const he=V;return yield gt(he),(yield rt(he,z)).token})).apply(this,arguments)}function gt(V){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,Z.Z)(function*(V){const{registrationPromise:z}=yield He(V);z&&(yield z)})).apply(this,arguments)}function Yr(V){return Et.create("missing-app-config-values",{valueName:V})}const Kr="installations",wn=V=>{const z=V.getProvider("app").getImmediate(),he=function Br(V){if(!V||!V.options)throw Yr("App Configuration");if(!V.name)throw Yr("App Name");const z=["projectId","apiKey","appId"];for(const he of z)if(!V.options[he])throw Yr(he);return{appName:V.name,projectId:V.options.projectId,apiKey:V.options.apiKey,appId:V.options.appId}}(z);return{app:z,appConfig:he,heartbeatServiceProvider:(0,We._getProvider)(z,"heartbeat"),_delete:()=>Promise.resolve()}},ir=V=>{const z=V.getProvider("app").getImmediate(),he=(0,We._getProvider)(z,Kr).getImmediate();return{getId:()=>function zr(V){return Dt.apply(this,arguments)}(he),getToken:At=>function st(V){return Re.apply(this,arguments)}(he,At)}};(function ii(){(0,We._registerComponent)(new ae.wA(Kr,wn,"PUBLIC")),(0,We._registerComponent)(new ae.wA("installations-internal",ir,"PRIVATE"))})(),(0,We.registerVersion)(Ie,"0.5.9"),(0,We.registerVersion)(Ie,"0.5.9","esm2017");const ni="@firebase/remote-config",Xr=new Ne.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class er{constructor(z,he,ze,At){this.client=z,this.storage=he,this.storageCache=ze,this.logger=At}isCachedDataFresh(z,he){if(!he)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ze=Date.now()-he,At=ze<=z;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ze}. Cache max age millis (minimumFetchIntervalMillis setting): ${z}. Is cache hit: ${At}.`),At}fetch(z){var he=this;return(0,Z.Z)(function*(){const[ze,At]=yield Promise.all([he.storage.getLastSuccessfulFetchTimestampMillis(),he.storage.getLastSuccessfulFetchResponse()]);if(At&&he.isCachedDataFresh(z.cacheMaxAgeMillis,ze))return At;z.eTag=At&&At.eTag;const Rt=yield he.client.fetch(z),hn=[he.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Rt.status&&hn.push(he.storage.setLastSuccessfulFetchResponse(Rt)),yield Promise.all(hn),Rt})()}}function rr(V=navigator){return V.languages&&V.languages[0]||V.language}class Tr{constructor(z,he,ze,At,Rt,hn){this.firebaseInstallations=z,this.sdkVersion=he,this.namespace=ze,this.projectId=At,this.apiKey=Rt,this.appId=hn}fetch(z){var he=this;return(0,Z.Z)(function*(){const[ze,At]=yield Promise.all([he.firebaseInstallations.getId(),he.firebaseInstallations.getToken()]),hn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${he.projectId}/namespaces/${he.namespace}:fetch?key=${he.apiKey}`,Cn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":z.eTag||"*"},Fr={sdk_version:he.sdkVersion,app_instance_id:ze,app_instance_id_token:At,app_id:he.appId,language_code:rr()},hr={method:"POST",headers:Cn,body:JSON.stringify(Fr)},ei=fetch(hn,hr),Lr=new Promise((Vi,ao)=>{z.signal.addEventListener(()=>{const ls=new Error("The operation was aborted.");ls.name="AbortError",ao(ls)})});let Ti;try{yield Promise.race([ei,Lr]),Ti=yield ei}catch(Vi){let ao="fetch-client-network";throw"AbortError"===Vi.name&&(ao="fetch-timeout"),Xr.create(ao,{originalErrorMessage:Vi.message})}let Us=Ti.status;const yl=Ti.headers.get("ETag")||void 0;let oo,zo;if(200===Ti.status){let Vi;try{Vi=yield Ti.json()}catch(ao){throw Xr.create("fetch-client-parse",{originalErrorMessage:ao.message})}oo=Vi.entries,zo=Vi.state}if("INSTANCE_STATE_UNSPECIFIED"===zo?Us=500:"NO_CHANGE"===zo?Us=304:("NO_TEMPLATE"===zo||"EMPTY_CONFIG"===zo)&&(oo={}),304!==Us&&200!==Us)throw Xr.create("fetch-status",{httpStatus:Us});return{status:Us,eTag:yl,config:oo}})()}}class ot{constructor(z,he){this.client=z,this.storage=he}fetch(z){var he=this;return(0,Z.Z)(function*(){const ze=(yield he.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return he.attemptFetch(z,ze)})()}attemptFetch(z,{throttleEndTimeMillis:he,backoffCount:ze}){var At=this;return(0,Z.Z)(function*(){yield function si(V,z){return new Promise((he,ze)=>{const At=Math.max(z-Date.now(),0),Rt=setTimeout(he,At);V.addEventListener(()=>{clearTimeout(Rt),ze(Xr.create("fetch-throttle",{throttleEndTimeMillis:z}))})})}(z.signal,he);try{const Rt=yield At.client.fetch(z);return yield At.storage.deleteThrottleMetadata(),Rt}catch(Rt){if(!function _i(V){if(!(V instanceof Ne.ZR&&V.customData))return!1;const z=Number(V.customData.httpStatus);return 429===z||500===z||503===z||504===z}(Rt))throw Rt;const hn={throttleEndTimeMillis:Date.now()+(0,Ne.$s)(ze),backoffCount:ze+1};return yield At.storage.setThrottleMetadata(hn),At.attemptFetch(z,hn)}})()}}class Zt{constructor(z,he,ze,At,Rt){this.app=z,this._client=he,this._storageCache=ze,this._storage=At,this._logger=Rt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function yn(V,z){const he=V.target.error||void 0;return Xr.create(z,{originalErrorMessage:he&&he.message})}const Pn="app_namespace_store";class ys{constructor(z,he,ze,At=function Ur(){return new Promise((V,z)=>{try{const he=indexedDB.open("firebase_remote_config",1);he.onerror=ze=>{z(yn(ze,"storage-open"))},he.onsuccess=ze=>{V(ze.target.result)},he.onupgradeneeded=ze=>{0===ze.oldVersion&&ze.target.result.createObjectStore(Pn,{keyPath:"compositeKey"})}}catch(he){z(Xr.create("storage-open",{originalErrorMessage:he}))}})}()){this.appId=z,this.appName=he,this.namespace=ze,this.openDbPromise=At}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(z){return this.set("last_fetch_status",z)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(z){return this.set("last_successful_fetch_timestamp_millis",z)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(z){return this.set("last_successful_fetch_response",z)}getActiveConfig(){return this.get("active_config")}setActiveConfig(z){return this.set("active_config",z)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(z){return this.set("active_config_etag",z)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(z){return this.set("throttle_metadata",z)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(z){var he=this;return(0,Z.Z)(function*(){const ze=yield he.openDbPromise;return new Promise((At,Rt)=>{const Cn=ze.transaction([Pn],"readonly").objectStore(Pn),Fr=he.createCompositeKey(z);try{const hr=Cn.get(Fr);hr.onerror=ei=>{Rt(yn(ei,"storage-get"))},hr.onsuccess=ei=>{const Lr=ei.target.result;At(Lr?Lr.value:void 0)}}catch(hr){Rt(Xr.create("storage-get",{originalErrorMessage:hr&&hr.message}))}})})()}set(z,he){var ze=this;return(0,Z.Z)(function*(){const At=yield ze.openDbPromise;return new Promise((Rt,hn)=>{const Fr=At.transaction([Pn],"readwrite").objectStore(Pn),hr=ze.createCompositeKey(z);try{const ei=Fr.put({compositeKey:hr,value:he});ei.onerror=Lr=>{hn(yn(Lr,"storage-set"))},ei.onsuccess=()=>{Rt()}}catch(ei){hn(Xr.create("storage-set",{originalErrorMessage:ei&&ei.message}))}})})()}delete(z){var he=this;return(0,Z.Z)(function*(){const ze=yield he.openDbPromise;return new Promise((At,Rt)=>{const Cn=ze.transaction([Pn],"readwrite").objectStore(Pn),Fr=he.createCompositeKey(z);try{const hr=Cn.delete(Fr);hr.onerror=ei=>{Rt(yn(ei,"storage-delete"))},hr.onsuccess=()=>{At()}}catch(hr){Rt(Xr.create("storage-delete",{originalErrorMessage:hr&&hr.message}))}})})()}createCompositeKey(z){return[this.appId,this.appName,this.namespace,z].join()}}class cs{constructor(z){this.storage=z}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var z=this;return(0,Z.Z)(function*(){const he=z.storage.getLastFetchStatus(),ze=z.storage.getLastSuccessfulFetchTimestampMillis(),At=z.storage.getActiveConfig(),Rt=yield he;Rt&&(z.lastFetchStatus=Rt);const hn=yield ze;hn&&(z.lastSuccessfulFetchTimestampMillis=hn);const Cn=yield At;Cn&&(z.activeConfig=Cn)})()}setLastFetchStatus(z){return this.lastFetchStatus=z,this.storage.setLastFetchStatus(z)}setLastSuccessfulFetchTimestampMillis(z){return this.lastSuccessfulFetchTimestampMillis=z,this.storage.setLastSuccessfulFetchTimestampMillis(z)}setActiveConfig(z){return this.activeConfig=z,this.storage.setActiveConfig(z)}}function Pr(){return $r.apply(this,arguments)}function $r(){return($r=(0,Z.Z)(function*(){if(!(0,Ne.hl)())return!1;try{return yield(0,Ne.eu)()}catch(V){return!1}})).apply(this,arguments)}!function Ni(){(0,We._registerComponent)(new ae.wA("remote-config",function V(z,{instanceIdentifier:he}){const ze=z.getProvider("app").getImmediate(),At=z.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Xr.create("registration-window");if(!(0,Ne.hl)())throw Xr.create("indexed-db-unavailable");const{projectId:Rt,apiKey:hn,appId:Cn}=ze.options;if(!Rt)throw Xr.create("registration-project-id");if(!hn)throw Xr.create("registration-api-key");if(!Cn)throw Xr.create("registration-app-id");const Fr=new ys(Cn,ze.name,he=he||"firebase"),hr=new cs(Fr),ei=new Ae.Yd(ni);ei.logLevel=Ae.in.ERROR;const Lr=new Tr(At,We.SDK_VERSION,he,Rt,hn,Cn),Ti=new ot(Lr,Fr),Us=new er(Ti,Fr,hr,ei),yl=new Zt(ze,Us,hr,Fr,ei);return function _e(V){const z=(0,Ne.m9)(V);z._initializePromise||(z._initializePromise=z._storageCache.loadFromStorage().then(()=>{z._isInitializationComplete=!0}))}(yl),yl},"PUBLIC").setMultipleInstances(!0)),(0,We.registerVersion)(ni,"0.3.8"),(0,We.registerVersion)(ni,"0.3.8","esm2017")}();const Ar="/firebase-messaging-sw.js",hi="/firebase-cloud-messaging-push-scope",Or="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",_s="google.c.a.c_id",Ss="google.c.a.c_l",ro="google.c.a.ts",ai="google.c.a.e";var Ii=(()=>{return(V=Ii||(Ii={})).PUSH_RECEIVED="push-received",V.NOTIFICATION_CLICKED="notification-clicked",Ii;var V})();function ds(V){const z=new Uint8Array(V);return btoa(String.fromCharCode(...z)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Qi(V){const he=(V+"=".repeat((4-V.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ze=atob(he),At=new Uint8Array(ze.length);for(let Rt=0;Rt<ze.length;++Rt)At[Rt]=ze.charCodeAt(Rt);return At}const kr="fcm_token_details_db",Ri="fcm_token_object_Store";function uo(V){return es.apply(this,arguments)}function es(){return es=(0,Z.Z)(function*(V){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Rt=>Rt.name).includes(kr))return null;let z=null;return(yield(0,De.X3)(kr,5,{upgrade:(ze=(0,Z.Z)(function*(At,Rt,hn,Cn){var Fr;if(Rt<2||!At.objectStoreNames.contains(Ri))return;const hr=Cn.objectStore(Ri),ei=yield hr.index("fcmSenderId").get(V);if(yield hr.clear(),ei)if(2===Rt){const Lr=ei;if(!Lr.auth||!Lr.p256dh||!Lr.endpoint)return;z={token:Lr.fcmToken,createTime:null!==(Fr=Lr.createTime)&&void 0!==Fr?Fr:Date.now(),subscriptionOptions:{auth:Lr.auth,p256dh:Lr.p256dh,endpoint:Lr.endpoint,swScope:Lr.swScope,vapidKey:"string"==typeof Lr.vapidKey?Lr.vapidKey:ds(Lr.vapidKey)}}}else if(3===Rt){const Lr=ei;z={token:Lr.fcmToken,createTime:Lr.createTime,subscriptionOptions:{auth:ds(Lr.auth),p256dh:ds(Lr.p256dh),endpoint:Lr.endpoint,swScope:Lr.swScope,vapidKey:ds(Lr.vapidKey)}}}else if(4===Rt){const Lr=ei;z={token:Lr.fcmToken,createTime:Lr.createTime,subscriptionOptions:{auth:ds(Lr.auth),p256dh:ds(Lr.p256dh),endpoint:Lr.endpoint,swScope:Lr.swScope,vapidKey:ds(Lr.vapidKey)}}}}),function(Rt,hn,Cn,Fr){return ze.apply(this,arguments)})})).close(),yield(0,De.Lj)(kr),yield(0,De.Lj)("fcm_vapid_details_db"),yield(0,De.Lj)("undefined"),as(z)?z:null;var ze}),es.apply(this,arguments)}function as(V){if(!V||!V.subscriptionOptions)return!1;const{subscriptionOptions:z}=V;return"number"==typeof V.createTime&&V.createTime>0&&"string"==typeof V.token&&V.token.length>0&&"string"==typeof z.auth&&z.auth.length>0&&"string"==typeof z.p256dh&&z.p256dh.length>0&&"string"==typeof z.endpoint&&z.endpoint.length>0&&"string"==typeof z.swScope&&z.swScope.length>0&&"string"==typeof z.vapidKey&&z.vapidKey.length>0}const ts="firebase-messaging-store";let $o=null;function jr(){return $o||($o=(0,De.X3)("firebase-messaging-database",1,{upgrade:(V,z)=>{0===z&&V.createObjectStore(ts)}})),$o}function j(V){return se.apply(this,arguments)}function se(){return(se=(0,Z.Z)(function*(V){const z=zt(V),ze=yield(yield jr()).transaction(ts).objectStore(ts).get(z);if(ze)return ze;{const At=yield uo(V.appConfig.senderId);if(At)return yield $(V,At),At}})).apply(this,arguments)}function $(V,z){return de.apply(this,arguments)}function de(){return(de=(0,Z.Z)(function*(V,z){const he=zt(V),At=(yield jr()).transaction(ts,"readwrite");return yield At.objectStore(ts).put(z,he),yield At.done,z})).apply(this,arguments)}function et(V){return ct.apply(this,arguments)}function ct(){return(ct=(0,Z.Z)(function*(V){const z=zt(V),ze=(yield jr()).transaction(ts,"readwrite");yield ze.objectStore(ts).delete(z),yield ze.done})).apply(this,arguments)}function zt({appConfig:V}){return V.appId}const gr=new Ne.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function br(V,z){return dr.apply(this,arguments)}function dr(){return(dr=(0,Z.Z)(function*(V,z){const he=yield ns(V),ze=Bi(z),At={method:"POST",headers:he,body:JSON.stringify(ze)};let Rt;try{Rt=yield(yield fetch(bs(V.appConfig),At)).json()}catch(hn){throw gr.create("token-subscribe-failed",{errorInfo:hn})}if(Rt.error)throw gr.create("token-subscribe-failed",{errorInfo:Rt.error.message});if(!Rt.token)throw gr.create("token-subscribe-no-token");return Rt.token})).apply(this,arguments)}function wr(V,z){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,Z.Z)(function*(V,z){const he=yield ns(V),ze=Bi(z.subscriptionOptions),At={method:"PATCH",headers:he,body:JSON.stringify(ze)};let Rt;try{Rt=yield(yield fetch(`${bs(V.appConfig)}/${z.token}`,At)).json()}catch(hn){throw gr.create("token-update-failed",{errorInfo:hn})}if(Rt.error)throw gr.create("token-update-failed",{errorInfo:Rt.error.message});if(!Rt.token)throw gr.create("token-update-no-token");return Rt.token})).apply(this,arguments)}function Nr(V,z){return vi.apply(this,arguments)}function vi(){return(vi=(0,Z.Z)(function*(V,z){const ze={method:"DELETE",headers:yield ns(V)};try{const Rt=yield(yield fetch(`${bs(V.appConfig)}/${z}`,ze)).json();if(Rt.error)throw gr.create("token-unsubscribe-failed",{errorInfo:Rt.error.message})}catch(At){throw gr.create("token-unsubscribe-failed",{errorInfo:At})}})).apply(this,arguments)}function bs({projectId:V}){return`https://fcmregistrations.googleapis.com/v1/projects/${V}/registrations`}function ns(V){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,Z.Z)(function*({appConfig:V,installations:z}){const he=yield z.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":V.apiKey,"x-goog-firebase-installations-auth":`FIS ${he}`})})).apply(this,arguments)}function Bi({p256dh:V,auth:z,endpoint:he,vapidKey:ze}){const At={web:{endpoint:he,auth:z,p256dh:V}};return ze!==Or&&(At.web.applicationPubKey=ze),At}const H=6048e5;function B(V){return N.apply(this,arguments)}function N(){return(N=(0,Z.Z)(function*(V){const z=yield C(V.swRegistration,V.vapidKey),he={vapidKey:V.vapidKey,swScope:V.swRegistration.scope,endpoint:z.endpoint,auth:ds(z.getKey("auth")),p256dh:ds(z.getKey("p256dh"))},ze=yield j(V.firebaseDependencies);if(ze){if(pe(ze.subscriptionOptions,he))return Date.now()>=ze.createTime+H?E(V,{token:ze.token,createTime:Date.now(),subscriptionOptions:he}):ze.token;try{yield Nr(V.firebaseDependencies,ze.token)}catch(At){console.warn(At)}return b(V.firebaseDependencies,he)}return b(V.firebaseDependencies,he)})).apply(this,arguments)}function re(V){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,Z.Z)(function*(V){const z=yield j(V.firebaseDependencies);z&&(yield Nr(V.firebaseDependencies,z.token),yield et(V.firebaseDependencies));const he=yield V.swRegistration.pushManager.getSubscription();return!he||he.unsubscribe()})).apply(this,arguments)}function E(V,z){return k.apply(this,arguments)}function k(){return(k=(0,Z.Z)(function*(V,z){try{const he=yield wr(V.firebaseDependencies,z),ze=Object.assign(Object.assign({},z),{token:he,createTime:Date.now()});return yield $(V.firebaseDependencies,ze),he}catch(he){throw yield re(V),he}})).apply(this,arguments)}function b(V,z){return v.apply(this,arguments)}function v(){return(v=(0,Z.Z)(function*(V,z){const ze={token:yield br(V,z),createTime:Date.now(),subscriptionOptions:z};return yield $(V,ze),ze.token})).apply(this,arguments)}function C(V,z){return W.apply(this,arguments)}function W(){return(W=(0,Z.Z)(function*(V,z){return(yield V.pushManager.getSubscription())||V.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Qi(z)})})).apply(this,arguments)}function pe(V,z){return z.vapidKey===V.vapidKey&&z.endpoint===V.endpoint&&z.auth===V.auth&&z.p256dh===V.p256dh}function Le(V){const z={from:V.from,collapseKey:V.collapse_key,messageId:V.fcmMessageId};return function vt(V,z){if(!z.notification)return;V.notification={};const he=z.notification.title;he&&(V.notification.title=he);const ze=z.notification.body;ze&&(V.notification.body=ze);const At=z.notification.image;At&&(V.notification.image=At)}(z,V),function Ht(V,z){!z.data||(V.data=z.data)}(z,V),function In(V,z){if(!z.fcmOptions)return;V.fcmOptions={};const he=z.fcmOptions.link;he&&(V.fcmOptions.link=he);const ze=z.fcmOptions.analytics_label;ze&&(V.fcmOptions.analyticsLabel=ze)}(z,V),z}function Wt(V){return"object"==typeof V&&!!V&&_s in V}function or(V,z){const he=[];for(let ze=0;ze<V.length;ze++)he.push(V.charAt(ze)),ze<z.length&&he.push(z.charAt(ze));return he.join("")}function Dr(V){return gr.create("missing-app-config-values",{valueName:V})}or("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),or("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Un{constructor(z,he,ze){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const At=function mr(V){if(!V||!V.options)throw Dr("App Configuration Object");if(!V.name)throw Dr("App Name");const z=["projectId","apiKey","appId","messagingSenderId"],{options:he}=V;for(const ze of z)if(!he[ze])throw Dr(ze);return{appName:V.name,projectId:he.projectId,apiKey:he.apiKey,appId:he.appId,senderId:he.messagingSenderId}}(z);this.firebaseDependencies={app:z,appConfig:At,installations:he,analyticsProvider:ze}}_delete(){return Promise.resolve()}}function Ci(V){return Di.apply(this,arguments)}function Di(){return(Di=(0,Z.Z)(function*(V){try{V.swRegistration=yield navigator.serviceWorker.register(Ar,{scope:hi}),V.swRegistration.update().catch(()=>{})}catch(z){throw gr.create("failed-service-worker-registration",{browserErrorMessage:z.message})}})).apply(this,arguments)}function Ai(V,z){return fi.apply(this,arguments)}function fi(){return(fi=(0,Z.Z)(function*(V,z){if(!z&&!V.swRegistration&&(yield Ci(V)),z||!V.swRegistration){if(!(z instanceof ServiceWorkerRegistration))throw gr.create("invalid-sw-registration");V.swRegistration=z}})).apply(this,arguments)}function Ws(V,z){return pi.apply(this,arguments)}function pi(){return(pi=(0,Z.Z)(function*(V,z){z?V.vapidKey=z:V.vapidKey||(V.vapidKey=Or)})).apply(this,arguments)}function is(){return(is=(0,Z.Z)(function*(V,z){if(!navigator)throw gr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw gr.create("permission-blocked");return yield Ws(V,null==z?void 0:z.vapidKey),yield Ai(V,null==z?void 0:z.serviceWorkerRegistration),B(V)})).apply(this,arguments)}function co(V,z,he){return ho.apply(this,arguments)}function ho(){return(ho=(0,Z.Z)(function*(V,z,he){const ze=jo(z);(yield V.firebaseDependencies.analyticsProvider.get()).logEvent(ze,{message_id:he[_s],message_name:he[Ss],message_time:he[ro],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function jo(V){switch(V){case Ii.NOTIFICATION_CLICKED:return"notification_open";case Ii.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function po(){return(po=(0,Z.Z)(function*(V,z){const he=z.data;if(!he.isFirebaseMessaging)return;V.onMessageHandler&&he.messageType===Ii.PUSH_RECEIVED&&("function"==typeof V.onMessageHandler?V.onMessageHandler(Le(he)):V.onMessageHandler.next(Le(he)));const ze=he.data;Wt(ze)&&"1"===ze[ai]&&(yield co(V,he.messageType,ze))})).apply(this,arguments)}const No="@firebase/messaging",Ma=V=>{const z=new Un(V.getProvider("app").getImmediate(),V.getProvider("installations-internal").getImmediate(),V.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",he=>function fo(V,z){return po.apply(this,arguments)}(z,he)),z},Os=V=>{const z=V.getProvider("messaging").getImmediate();return{getToken:ze=>function rs(V,z){return is.apply(this,arguments)}(z,ze)}};function Yo(){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,Z.Z)(function*(){try{yield(0,Ne.eu)()}catch(V){return!1}return"undefined"!=typeof window&&(0,Ne.hl)()&&(0,Ne.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ya(){(0,We._registerComponent)(new ae.wA("messaging",Ma,"PUBLIC")),(0,We._registerComponent)(new ae.wA("messaging-internal",Os,"PRIVATE")),(0,We.registerVersion)(No,"0.9.13"),(0,We.registerVersion)(No,"0.9.13","esm2017")}();const Oa="analytics",wa="firebase_id",Ns="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ho="https://www.googletagmanager.com/gtag/js",hs=new Ae.Yd("@firebase/analytics");function Xa(V){return Promise.all(V.map(z=>z.catch(he=>he)))}function Ko(V,z){const he=document.createElement("script");he.src=`${Ho}?l=${V}&id=${z}`,he.async=!0,document.head.appendChild(he)}function Zo(V,z,he,ze,At,Rt){return ka.apply(this,arguments)}function ka(){return(ka=(0,Z.Z)(function*(V,z,he,ze,At,Rt){const hn=ze[At];try{if(hn)yield z[hn];else{const Fr=(yield Xa(he)).find(hr=>hr.measurementId===At);Fr&&(yield z[Fr.appId])}}catch(Cn){hs.error(Cn)}V("config",At,Rt)})).apply(this,arguments)}function As(V,z,he,ze,At){return ws.apply(this,arguments)}function ws(){return(ws=(0,Z.Z)(function*(V,z,he,ze,At){try{let Rt=[];if(At&&At.send_to){let hn=At.send_to;Array.isArray(hn)||(hn=[hn]);const Cn=yield Xa(he);for(const Fr of hn){const hr=Cn.find(Lr=>Lr.measurementId===Fr),ei=hr&&z[hr.appId];if(!ei){Rt=[];break}Rt.push(ei)}}0===Rt.length&&(Rt=Object.values(z)),yield Promise.all(Rt),V("event",ze,At||{})}catch(Rt){hs.error(Rt)}})).apply(this,arguments)}function Bs(){const V=window.document.getElementsByTagName("script");for(const z of Object.values(V))if(z.src&&z.src.includes(Ho))return z;return null}const Is=new Ne.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Fa=new class xs{constructor(z={},he=1e3){this.throttleMetadata=z,this.intervalMillis=he}getThrottleMetadata(z){return this.throttleMetadata[z]}setThrottleMetadata(z,he){this.throttleMetadata[z]=he}deleteThrottleMetadata(z){delete this.throttleMetadata[z]}};function jl(V){return new Headers({Accept:"application/json","x-goog-api-key":V})}function Ys(V){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,Z.Z)(function*(V){var z;const{appId:he,apiKey:ze}=V,At={method:"GET",headers:jl(ze)},Rt=Ns.replace("{app-id}",he),hn=yield fetch(Rt,At);if(200!==hn.status&&304!==hn.status){let Cn="";try{const Fr=yield hn.json();(null===(z=Fr.error)||void 0===z?void 0:z.message)&&(Cn=Fr.error.message)}catch(Fr){}throw Is.create("config-fetch-failed",{httpStatus:hn.status,responseMessage:Cn})}return hn.json()})).apply(this,arguments)}function xi(V){return To.apply(this,arguments)}function To(){return(To=(0,Z.Z)(function*(V,z=Fa,he){const{appId:ze,apiKey:At,measurementId:Rt}=V.options;if(!ze)throw Is.create("no-app-id");if(!At){if(Rt)return{measurementId:Rt,appId:ze};throw Is.create("no-api-key")}const hn=z.getThrottleMetadata(ze)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Cn=new Go;return setTimeout((0,Z.Z)(function*(){Cn.abort()}),void 0!==he?he:6e4),Fo({appId:ze,apiKey:At,measurementId:Rt},hn,Cn,z)})).apply(this,arguments)}function Fo(V,z,he){return dl.apply(this,arguments)}function dl(){return(dl=(0,Z.Z)(function*(V,{throttleEndTimeMillis:z,backoffCount:he},ze,At=Fa){const{appId:Rt,measurementId:hn}=V;try{yield os(ze,z)}catch(Cn){if(hn)return hs.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${hn} provided in the "measurementId" field in the local Firebase config. [${Cn.message}]`),{appId:Rt,measurementId:hn};throw Cn}try{const Cn=yield Ys(V);return At.deleteThrottleMetadata(Rt),Cn}catch(Cn){if(!go(Cn)){if(At.deleteThrottleMetadata(Rt),hn)return hs.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${hn} provided in the "measurementId" field in the local Firebase config. [${Cn.message}]`),{appId:Rt,measurementId:hn};throw Cn}const Fr=503===Number(Cn.customData.httpStatus)?(0,Ne.$s)(he,At.intervalMillis,30):(0,Ne.$s)(he,At.intervalMillis),hr={throttleEndTimeMillis:Date.now()+Fr,backoffCount:he+1};return At.setThrottleMetadata(Rt,hr),hs.debug(`Calling attemptFetch again in ${Fr} millis`),Fo(V,hr,ze,At)}})).apply(this,arguments)}function os(V,z){return new Promise((he,ze)=>{const At=Math.max(z-Date.now(),0),Rt=setTimeout(he,At);V.addEventListener(()=>{clearTimeout(Rt),ze(Is.create("fetch-throttle",{throttleEndTimeMillis:z}))})})}function go(V){if(!(V instanceof Ne.ZR&&V.customData))return!1;const z=Number(V.customData.httpStatus);return 429===z||500===z||503===z||504===z}class Go{constructor(){this.listeners=[]}addEventListener(z){this.listeners.push(z)}abort(){this.listeners.forEach(z=>z())}}function hl(){return gi.apply(this,arguments)}function gi(){return(gi=(0,Z.Z)(function*(){if(!(0,Ne.hl)())return hs.warn(Is.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Ne.eu)()}catch(V){return hs.warn(Is.create("indexeddb-unavailable",{errorInfo:V}).message),!1}return!0})).apply(this,arguments)}function Pi(){return(Pi=(0,Z.Z)(function*(V,z,he,ze,At,Rt,hn){var Cn;const Fr=xi(V);Fr.then(Us=>{he[Us.measurementId]=Us.appId,V.options.measurementId&&Us.measurementId!==V.options.measurementId&&hs.warn(`The measurement ID in the local Firebase config (${V.options.measurementId}) does not match the measurement ID fetched from the server (${Us.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Us=>hs.error(Us)),z.push(Fr);const hr=hl().then(Us=>{if(Us)return ze.getId()}),[ei,Lr]=yield Promise.all([Fr,hr]);Bs()||Ko(Rt,ei.measurementId),At("js",new Date);const Ti=null!==(Cn=null==hn?void 0:hn.config)&&void 0!==Cn?Cn:{};return Ti.origin="firebase",Ti.update=!0,null!=Lr&&(Ti[wa]=Lr),At("config",ei.measurementId,Ti),ei.measurementId})).apply(this,arguments)}class io{constructor(z){this.app=z}_delete(){return delete Cs[this.app.options.appId],Promise.resolve()}}let Cs={},Kn=[];const ur={};let Vt,M,ha="dataLayer",x=!1;function Y(V,z,he){!function U(){const V=[];if((0,Ne.ru)()&&V.push("This is a browser extension environment."),(0,Ne.zI)()||V.push("Cookies are not available."),V.length>0){const z=V.map((ze,At)=>`(${At+1}) ${ze}`).join(" "),he=Is.create("invalid-analytics-context",{errorInfo:z});hs.warn(he.message)}}();const ze=V.options.appId;if(!ze)throw Is.create("no-app-id");if(!V.options.apiKey){if(!V.options.measurementId)throw Is.create("no-api-key");hs.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${V.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Cs[ze])throw Is.create("already-exists",{id:ze});if(!x){!function ca(V){let z=[];Array.isArray(window[V])?z=window[V]:window[V]=z}(ha);const{wrappedGtag:Rt,gtagCore:hn}=function Xo(V,z,he,ze,At){let Rt=function(...hn){window[ze].push(arguments)};return window[At]&&"function"==typeof window[At]&&(Rt=window[At]),window[At]=function Na(V,z,he,ze){function Rt(){return(Rt=(0,Z.Z)(function*(hn,Cn,Fr){try{"event"===hn?yield As(V,z,he,Cn,Fr):"config"===hn?yield Zo(V,z,he,ze,Cn,Fr):V("set",Cn)}catch(hr){hs.error(hr)}})).apply(this,arguments)}return function At(hn,Cn,Fr){return Rt.apply(this,arguments)}}(Rt,V,z,he),{gtagCore:Rt,wrappedGtag:window[At]}}(Cs,Kn,ur,ha,"gtag");M=Rt,Vt=hn,x=!0}return Cs[ze]=function ln(V,z,he,ze,At,Rt,hn){return Pi.apply(this,arguments)}(V,Kn,ur,z,Vt,ha,he),new io(V)}function $e(){return($e=(0,Z.Z)(function*(V,z,he,ze,At){if(At&&At.global)V("event",he,ze);else{const Rt=yield z;V("event",he,Object.assign(Object.assign({},ze),{send_to:Rt}))}})).apply(this,arguments)}function fs(){return lr.apply(this,arguments)}function lr(){return(lr=(0,Z.Z)(function*(){if((0,Ne.ru)()||!(0,Ne.zI)()||!(0,Ne.hl)())return!1;try{return yield(0,Ne.eu)()}catch(V){return!1}})).apply(this,arguments)}const uc="@firebase/analytics";!function Gl(){(0,We._registerComponent)(new ae.wA(Oa,(z,{options:he})=>Y(z.getProvider("app").getImmediate(),z.getProvider("installations-internal").getImmediate(),he),"PUBLIC")),(0,We._registerComponent)(new ae.wA("analytics-internal",function V(z){try{const he=z.getProvider(Oa).getImmediate();return{logEvent:(ze,At,Rt)=>function mi(V,z,he,ze){V=(0,Ne.m9)(V),function ue(V,z,he,ze,At){return $e.apply(this,arguments)}(M,Cs[V.app.options.appId],z,he,ze).catch(At=>hs.error(At))}(he,ze,At,Rt)}}catch(he){throw Is.create("interop-component-reg-failed",{reason:he})}},"PRIVATE")),(0,We.registerVersion)(uc,"0.7.9"),(0,We.registerVersion)(uc,"0.7.9","esm2017")}();var zl=L(341),Vs=L(353),ps=L(2868),ea=L(2102),Hi=L(8915);const fl=new a.GfV("7.3.0"),Ja="__angularfire_symbol__analyticsIsSupportedValue",so="__angularfire_symbol__analyticsIsSupported",Rs="__angularfire_symbol__remoteConfigIsSupportedValue",Ia="__angularfire_symbol__remoteConfigIsSupported",Xs="__angularfire_symbol__messagingIsSupportedValue",ta="__angularfire_symbol__messagingIsSupported";function ku(V,z,he){if(z){if(1===z.length)return z[0];const Rt=z.filter(hn=>hn.app===he);if(1===Rt.length)return Rt[0]}return he.container.getProvider(V).getImmediate({optional:!0})}globalThis[so]||(globalThis[so]=fs().then(V=>globalThis[Ja]=V).catch(()=>globalThis[Ja]=!1)),globalThis[ta]||(globalThis[ta]=Yo().then(V=>globalThis[Xs]=V).catch(()=>globalThis[Xs]=!1)),globalThis[Ia]||(globalThis[Ia]=Pr().then(V=>globalThis[Rs]=V).catch(()=>globalThis[Rs]=!1));const Ba=(V,z)=>{const he=z?[z]:(0,J.C6)(),ze=[];return he.forEach(At=>{At.container.getProvider(V).instances.forEach(hn=>{ze.includes(hn)||ze.push(hn)})}),ze};function Wi(){}class fa{constructor(z,he=zl.N){this.zone=z,this.delegate=he}now(){return this.delegate.now()}schedule(z,he,ze){const At=this.zone;return this.delegate.schedule(function(hn){At.runGuarded(()=>{z.apply(this,[hn])})},he,ze)}}class So{constructor(z){this.zone=z,this.task=null}call(z,he){const ze=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Wi,{},Wi,Wi)),he.pipe((0,ps.b)({next:ze,complete:ze,error:ze})).subscribe(z).add(ze)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let cc=(()=>{class V{constructor(he){this.ngZone=he,this.outsideAngular=he.runOutsideAngular(()=>new fa(Zone.current)),this.insideAngular=he.run(()=>new fa(Zone.current,Vs.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return V.\u0275fac=function(he){return new(he||V)(a.LFG(a.R0b))},V.\u0275prov=a.Yz7({token:V,factory:V.\u0275fac,providedIn:"root"}),V})();function Lo(){const V=globalThis.\u0275AngularFireScheduler;if(!V)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return V}function Wl(V){return V.pipe((0,ea.QV)(Lo().outsideAngular))}function Va(V){return Lo(),function gl(V){return function(he){return(he=he.lift(new So(V.ngZone))).pipe((0,Hi.R)(V.outsideAngular),(0,ea.QV)(V.insideAngular))}}(Lo())(V)}},2090:(dn,ft,L)=>{"use strict";L.d(ft,{BH:()=>ce,LL:()=>Ze,ZR:()=>je,gQ:()=>Qn,zI:()=>Se,hu:()=>J,g5:()=>Z,US:()=>ae,tV:()=>Ie,h$:()=>Ae,L:()=>De,$s:()=>Mn,r3:()=>Gt,Sg:()=>Ke,ne:()=>Yn,p$:()=>oe,vZ:()=>kn,ZB:()=>ve,gK:()=>_r,pd:()=>Zr,m9:()=>Hn,z$:()=>Ve,GJ:()=>tt,jU:()=>Be,ru:()=>Et,d:()=>dt,xb:()=>sn,w1:()=>St,hl:()=>me,uI:()=>Ee,UG:()=>Fe,Yr:()=>Xe,b$:()=>we,G6:()=>Tt,Mn:()=>Pt,w9:()=>Ce,cI:()=>mt,UI:()=>bn,xO:()=>gn,zd:()=>qn,DV:()=>Ct,ug:()=>kt,dS:()=>en,Pz:()=>wt,Dv:()=>nr,Wj:()=>He,lb:()=>Te,eu:()=>Oe});const J=function(xe,qe){if(!xe)throw Z(qe)},Z=function(xe){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+xe)},We=function(xe){const qe=[];let rt=0;for(let Lt=0;Lt<xe.length;Lt++){let Ge=xe.charCodeAt(Lt);Ge<128?qe[rt++]=Ge:Ge<2048?(qe[rt++]=Ge>>6|192,qe[rt++]=63&Ge|128):55296==(64512&Ge)&&Lt+1<xe.length&&56320==(64512&xe.charCodeAt(Lt+1))?(Ge=65536+((1023&Ge)<<10)+(1023&xe.charCodeAt(++Lt)),qe[rt++]=Ge>>18|240,qe[rt++]=Ge>>12&63|128,qe[rt++]=Ge>>6&63|128,qe[rt++]=63&Ge|128):(qe[rt++]=Ge>>12|224,qe[rt++]=Ge>>6&63|128,qe[rt++]=63&Ge|128)}return qe},ae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(xe,qe){if(!Array.isArray(xe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const rt=qe?this.byteToCharMapWebSafe_:this.byteToCharMap_,Lt=[];for(let Ge=0;Ge<xe.length;Ge+=3){const ht=xe[Ge],tn=Ge+1<xe.length,un=tn?xe[Ge+1]:0,vn=Ge+2<xe.length,Vn=vn?xe[Ge+2]:0;let Sr=(15&un)<<2|Vn>>6,Gr=63&Vn;vn||(Gr=64,tn||(Sr=64)),Lt.push(rt[ht>>2],rt[(3&ht)<<4|un>>4],rt[Sr],rt[Gr])}return Lt.join("")},encodeString(xe,qe){return this.HAS_NATIVE_SUPPORT&&!qe?btoa(xe):this.encodeByteArray(We(xe),qe)},decodeString(xe,qe){return this.HAS_NATIVE_SUPPORT&&!qe?atob(xe):function(xe){const qe=[];let rt=0,Lt=0;for(;rt<xe.length;){const Ge=xe[rt++];if(Ge<128)qe[Lt++]=String.fromCharCode(Ge);else if(Ge>191&&Ge<224){const ht=xe[rt++];qe[Lt++]=String.fromCharCode((31&Ge)<<6|63&ht)}else if(Ge>239&&Ge<365){const vn=((7&Ge)<<18|(63&xe[rt++])<<12|(63&xe[rt++])<<6|63&xe[rt++])-65536;qe[Lt++]=String.fromCharCode(55296+(vn>>10)),qe[Lt++]=String.fromCharCode(56320+(1023&vn))}else{const ht=xe[rt++],tn=xe[rt++];qe[Lt++]=String.fromCharCode((15&Ge)<<12|(63&ht)<<6|63&tn)}}return qe.join("")}(this.decodeStringToByteArray(xe,qe))},decodeStringToByteArray(xe,qe){this.init_();const rt=qe?this.charToByteMapWebSafe_:this.charToByteMap_,Lt=[];for(let Ge=0;Ge<xe.length;){const ht=rt[xe.charAt(Ge++)],un=Ge<xe.length?rt[xe.charAt(Ge)]:0;++Ge;const Vn=Ge<xe.length?rt[xe.charAt(Ge)]:64;++Ge;const An=Ge<xe.length?rt[xe.charAt(Ge)]:64;if(++Ge,null==ht||null==un||null==Vn||null==An)throw Error();Lt.push(ht<<2|un>>4),64!==Vn&&(Lt.push(un<<4&240|Vn>>2),64!==An&&Lt.push(Vn<<6&192|An))}return Lt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let xe=0;xe<this.ENCODED_VALS.length;xe++)this.byteToCharMap_[xe]=this.ENCODED_VALS.charAt(xe),this.charToByteMap_[this.byteToCharMap_[xe]]=xe,this.byteToCharMapWebSafe_[xe]=this.ENCODED_VALS_WEBSAFE.charAt(xe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[xe]]=xe,xe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(xe)]=xe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(xe)]=xe)}}},Ae=function(xe){const qe=We(xe);return ae.encodeByteArray(qe,!0)},De=function(xe){return Ae(xe).replace(/\./g,"")},Ie=function(xe){try{return ae.decodeString(xe,!0)}catch(qe){console.error("base64Decode failed: ",qe)}return null};function oe(xe){return ve(void 0,xe)}function ve(xe,qe){if(!(qe instanceof Object))return qe;switch(qe.constructor){case Date:return new Date(qe.getTime());case Object:void 0===xe&&(xe={});break;case Array:xe=[];break;default:return qe}for(const rt in qe)!qe.hasOwnProperty(rt)||!ne(rt)||(xe[rt]=ve(xe[rt],qe[rt]));return xe}function ne(xe){return"__proto__"!==xe}class ce{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((qe,rt)=>{this.resolve=qe,this.reject=rt})}wrapCallback(qe){return(rt,Lt)=>{rt?this.reject(rt):this.resolve(Lt),"function"==typeof qe&&(this.promise.catch(()=>{}),1===qe.length?qe(rt):qe(rt,Lt))}}}function Ke(xe,qe){if(xe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Lt=qe||"demo-project",Ge=xe.iat||0,ht=xe.sub||xe.user_id;if(!ht)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const tn=Object.assign({iss:`https://securetoken.google.com/${Lt}`,aud:Lt,iat:Ge,exp:Ge+3600,auth_time:Ge,sub:ht,user_id:ht,firebase:{sign_in_provider:"custom",identities:{}}},xe);return[De(JSON.stringify({alg:"none",type:"JWT"})),De(JSON.stringify(tn)),""].join(".")}function Ve(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ee(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function Fe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(xe){return!1}}function Be(){return"object"==typeof self&&self.self===self}function Et(){const xe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof xe&&void 0!==xe.id}function we(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function dt(){return Ve().indexOf("Electron/")>=0}function St(){const xe=Ve();return xe.indexOf("MSIE ")>=0||xe.indexOf("Trident/")>=0}function Pt(){return Ve().indexOf("MSAppHost/")>=0}function Xe(){return!1}function Tt(){return!Fe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function me(){return"object"==typeof indexedDB}function Oe(){return new Promise((xe,qe)=>{try{let rt=!0;const Lt="validate-browser-context-for-indexeddb-analytics-module",Ge=self.indexedDB.open(Lt);Ge.onsuccess=()=>{Ge.result.close(),rt||self.indexedDB.deleteDatabase(Lt),xe(!0)},Ge.onupgradeneeded=()=>{rt=!1},Ge.onerror=()=>{var ht;qe((null===(ht=Ge.error)||void 0===ht?void 0:ht.message)||"")}}catch(rt){qe(rt)}})}function Se(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class je extends Error{constructor(qe,rt,Lt){super(rt),this.code=qe,this.customData=Lt,this.name="FirebaseError",Object.setPrototypeOf(this,je.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ze.prototype.create)}}class Ze{constructor(qe,rt,Lt){this.service=qe,this.serviceName=rt,this.errors=Lt}create(qe,...rt){const Lt=rt[0]||{},Ge=`${this.service}/${qe}`,ht=this.errors[qe],tn=ht?function Mt(xe,qe){return xe.replace(Jt,(rt,Lt)=>{const Ge=qe[Lt];return null!=Ge?String(Ge):`<${Lt}?>`})}(ht,Lt):"Error";return new je(Ge,`${this.serviceName}: ${tn} (${Ge}).`,Lt)}}const Jt=/\{\$([^}]+)}/g;function mt(xe){return JSON.parse(xe)}function wt(xe){return JSON.stringify(xe)}const Ye=function(xe){let qe={},rt={},Lt={},Ge="";try{const ht=xe.split(".");qe=mt(Ie(ht[0])||""),rt=mt(Ie(ht[1])||""),Ge=ht[2],Lt=rt.d||{},delete rt.d}catch(ht){}return{header:qe,claims:rt,data:Lt,signature:Ge}},Ce=function(xe){const rt=Ye(xe).claims;return!!rt&&"object"==typeof rt&&rt.hasOwnProperty("iat")},tt=function(xe){const qe=Ye(xe).claims;return"object"==typeof qe&&!0===qe.admin};function Gt(xe,qe){return Object.prototype.hasOwnProperty.call(xe,qe)}function Ct(xe,qe){if(Object.prototype.hasOwnProperty.call(xe,qe))return xe[qe]}function sn(xe){for(const qe in xe)if(Object.prototype.hasOwnProperty.call(xe,qe))return!1;return!0}function bn(xe,qe,rt){const Lt={};for(const Ge in xe)Object.prototype.hasOwnProperty.call(xe,Ge)&&(Lt[Ge]=qe.call(rt,xe[Ge],Ge,xe));return Lt}function kn(xe,qe){if(xe===qe)return!0;const rt=Object.keys(xe),Lt=Object.keys(qe);for(const Ge of rt){if(!Lt.includes(Ge))return!1;const ht=xe[Ge],tn=qe[Ge];if(_n(ht)&&_n(tn)){if(!kn(ht,tn))return!1}else if(ht!==tn)return!1}for(const Ge of Lt)if(!rt.includes(Ge))return!1;return!0}function _n(xe){return null!==xe&&"object"==typeof xe}function gn(xe){const qe=[];for(const[rt,Lt]of Object.entries(xe))Array.isArray(Lt)?Lt.forEach(Ge=>{qe.push(encodeURIComponent(rt)+"="+encodeURIComponent(Ge))}):qe.push(encodeURIComponent(rt)+"="+encodeURIComponent(Lt));return qe.length?"&"+qe.join("&"):""}function qn(xe){const qe={};return xe.replace(/^\?/,"").split("&").forEach(Lt=>{if(Lt){const[Ge,ht]=Lt.split("=");qe[decodeURIComponent(Ge)]=decodeURIComponent(ht)}}),qe}function Zr(xe){const qe=xe.indexOf("?");if(!qe)return"";const rt=xe.indexOf("#",qe);return xe.substring(qe,rt>0?rt:void 0)}class Qn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let qe=1;qe<this.blockSize;++qe)this.pad_[qe]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(qe,rt){rt||(rt=0);const Lt=this.W_;if("string"==typeof qe)for(let An=0;An<16;An++)Lt[An]=qe.charCodeAt(rt)<<24|qe.charCodeAt(rt+1)<<16|qe.charCodeAt(rt+2)<<8|qe.charCodeAt(rt+3),rt+=4;else for(let An=0;An<16;An++)Lt[An]=qe[rt]<<24|qe[rt+1]<<16|qe[rt+2]<<8|qe[rt+3],rt+=4;for(let An=16;An<80;An++){const Sr=Lt[An-3]^Lt[An-8]^Lt[An-14]^Lt[An-16];Lt[An]=4294967295&(Sr<<1|Sr>>>31)}let Vn,Gn,Ge=this.chain_[0],ht=this.chain_[1],tn=this.chain_[2],un=this.chain_[3],vn=this.chain_[4];for(let An=0;An<80;An++){An<40?An<20?(Vn=un^ht&(tn^un),Gn=1518500249):(Vn=ht^tn^un,Gn=1859775393):An<60?(Vn=ht&tn|un&(ht|tn),Gn=2400959708):(Vn=ht^tn^un,Gn=3395469782);const Sr=(Ge<<5|Ge>>>27)+Vn+vn+Gn+Lt[An]&4294967295;vn=un,un=tn,tn=4294967295&(ht<<30|ht>>>2),ht=Ge,Ge=Sr}this.chain_[0]=this.chain_[0]+Ge&4294967295,this.chain_[1]=this.chain_[1]+ht&4294967295,this.chain_[2]=this.chain_[2]+tn&4294967295,this.chain_[3]=this.chain_[3]+un&4294967295,this.chain_[4]=this.chain_[4]+vn&4294967295}update(qe,rt){if(null==qe)return;void 0===rt&&(rt=qe.length);const Lt=rt-this.blockSize;let Ge=0;const ht=this.buf_;let tn=this.inbuf_;for(;Ge<rt;){if(0===tn)for(;Ge<=Lt;)this.compress_(qe,Ge),Ge+=this.blockSize;if("string"==typeof qe){for(;Ge<rt;)if(ht[tn]=qe.charCodeAt(Ge),++tn,++Ge,tn===this.blockSize){this.compress_(ht),tn=0;break}}else for(;Ge<rt;)if(ht[tn]=qe[Ge],++tn,++Ge,tn===this.blockSize){this.compress_(ht),tn=0;break}}this.inbuf_=tn,this.total_+=rt}digest(){const qe=[];let rt=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Ge=this.blockSize-1;Ge>=56;Ge--)this.buf_[Ge]=255&rt,rt/=256;this.compress_(this.buf_);let Lt=0;for(let Ge=0;Ge<5;Ge++)for(let ht=24;ht>=0;ht-=8)qe[Lt]=this.chain_[Ge]>>ht&255,++Lt;return qe}}function Yn(xe,qe){const rt=new on(xe,qe);return rt.subscribe.bind(rt)}class on{constructor(qe,rt){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=rt,this.task.then(()=>{qe(this)}).catch(Lt=>{this.error(Lt)})}next(qe){this.forEachObserver(rt=>{rt.next(qe)})}error(qe){this.forEachObserver(rt=>{rt.error(qe)}),this.close(qe)}complete(){this.forEachObserver(qe=>{qe.complete()}),this.close()}subscribe(qe,rt,Lt){let Ge;if(void 0===qe&&void 0===rt&&void 0===Lt)throw new Error("Missing Observer.");Ge=function cr(xe,qe){if("object"!=typeof xe||null===xe)return!1;for(const rt of qe)if(rt in xe&&"function"==typeof xe[rt])return!0;return!1}(qe,["next","error","complete"])?qe:{next:qe,error:rt,complete:Lt},void 0===Ge.next&&(Ge.next=Bn),void 0===Ge.error&&(Ge.error=Bn),void 0===Ge.complete&&(Ge.complete=Bn);const ht=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Ge.error(this.finalError):Ge.complete()}catch(tn){}}),this.observers.push(Ge),ht}unsubscribeOne(qe){void 0===this.observers||void 0===this.observers[qe]||(delete this.observers[qe],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(qe){if(!this.finalized)for(let rt=0;rt<this.observers.length;rt++)this.sendOne(rt,qe)}sendOne(qe,rt){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[qe])try{rt(this.observers[qe])}catch(Lt){"undefined"!=typeof console&&console.error&&console.error(Lt)}})}close(qe){this.finalized||(this.finalized=!0,void 0!==qe&&(this.finalError=qe),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Bn(){}const nr=function(xe,qe,rt,Lt){let Ge;if(Lt<qe?Ge="at least "+qe:Lt>rt&&(Ge=0===rt?"none":"no more than "+rt),Ge)throw new Error(xe+" failed: Was called with "+Lt+(1===Lt?" argument.":" arguments.")+" Expects "+Ge+".")};function _r(xe,qe){return`${xe} failed: ${qe} argument `}function He(xe,qe,rt,Lt){if((!Lt||rt)&&"function"!=typeof rt)throw new Error(_r(xe,qe)+"must be a valid function.")}function Te(xe,qe,rt,Lt){if((!Lt||rt)&&("object"!=typeof rt||null===rt))throw new Error(_r(xe,qe)+"must be a valid context object.")}const en=function(xe){const qe=[];let rt=0;for(let Lt=0;Lt<xe.length;Lt++){let Ge=xe.charCodeAt(Lt);if(Ge>=55296&&Ge<=56319){const ht=Ge-55296;Lt++,J(Lt<xe.length,"Surrogate pair missing trail surrogate."),Ge=65536+(ht<<10)+(xe.charCodeAt(Lt)-56320)}Ge<128?qe[rt++]=Ge:Ge<2048?(qe[rt++]=Ge>>6|192,qe[rt++]=63&Ge|128):Ge<65536?(qe[rt++]=Ge>>12|224,qe[rt++]=Ge>>6&63|128,qe[rt++]=63&Ge|128):(qe[rt++]=Ge>>18|240,qe[rt++]=Ge>>12&63|128,qe[rt++]=Ge>>6&63|128,qe[rt++]=63&Ge|128)}return qe},kt=function(xe){let qe=0;for(let rt=0;rt<xe.length;rt++){const Lt=xe.charCodeAt(rt);Lt<128?qe++:Lt<2048?qe+=2:Lt>=55296&&Lt<=56319?(qe+=4,rt++):qe+=3}return qe};function Mn(xe,qe=1e3,rt=2){const Lt=qe*Math.pow(rt,xe),Ge=Math.round(.5*Lt*(Math.random()-.5)*2);return Math.min(144e5,Lt+Ge)}function Hn(xe){return xe&&xe._delegate?xe._delegate:xe}},4433:(dn,ft,L)=>{"use strict";L.d(ft,{Br:()=>br,dr:()=>qt,oU:()=>Zn,cs:()=>ji,YG:()=>Hn,Sm:()=>xe,PM:()=>qe,FN:()=>rt,Zi:()=>Lt,tO:()=>Ge,Dq:()=>ht,wI:()=>vn,W2:()=>Vn,Gu:()=>st,gu:()=>Re,pK:()=>zn,Ie:()=>Er,Q$:()=>Yr,q_:()=>Kr,jP:()=>es,Nd:()=>ki,VI:()=>Si,yW:()=>er,Bs:()=>Tr,wd:()=>si,sr:()=>ot,Pc:()=>Ut,r4:()=>B,HT:()=>dr,YI:()=>$o,Fo:()=>jr,j9:()=>Bn});var a=L(5e3),J=L(4182),Z=L(655),We=L(2916),Ne=L(6688),ae=L(7043),Ae=L(4850);function Ie(E,k,b,v){return(0,ae.m)(b)&&(v=b,b=void 0),v?Ie(E,k,b).pipe((0,Ae.U)(C=>(0,Ne.k)(C)?v(...C):v(C))):new We.y(C=>{oe(E,k,function W(pe){C.next(arguments.length>1?Array.prototype.slice.call(arguments):pe)},C,b)})}function oe(E,k,b,v,C){let W;if(function ce(E){return E&&"function"==typeof E.addEventListener&&"function"==typeof E.removeEventListener}(E)){const pe=E;E.addEventListener(k,b,C),W=()=>pe.removeEventListener(k,b,C)}else if(function ne(E){return E&&"function"==typeof E.on&&"function"==typeof E.off}(E)){const pe=E;E.on(k,b),W=()=>pe.off(k,b)}else if(function ve(E){return E&&"function"==typeof E.addListener&&"function"==typeof E.removeListener}(E)){const pe=E;E.addListener(k,b),W=()=>pe.removeListener(k,b)}else{if(!E||!E.length)throw new TypeError("Invalid event target");for(let pe=0,Le=E.length;pe<Le;pe++)oe(E[pe],k,b,v,C)}v.add(W)}var Ke=L(8929),Ve=L(591),Ee=L(3442),we=(L(1815),L(6447),L(3139),L(6254)),dt=L(3756),St=L(4318),Xe=(L(7726),L(599)),me=(L(3509),L(2361)),Ze=L(2198),Mt=L(7545),Jt=L(5778),mt=L(9808);const Ye=we.i,Ce=["*"],kn=E=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(E):"function"==typeof requestAnimationFrame?requestAnimationFrame(E):setTimeout(E);let _n=(()=>{class E{constructor(b,v){this.injector=b,this.el=v,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(b){this.el.nativeElement.value=this.lastValue=null==b?"":b,gn(this.el)}handleChangeEvent(b,v){b===this.el.nativeElement&&(v!==this.lastValue&&(this.lastValue=v,this.onChange(v)),gn(this.el))}_handleBlurEvent(b){b===this.el.nativeElement&&(this.onTouched(),gn(this.el))}registerOnChange(b){this.onChange=b}registerOnTouched(b){this.onTouched=b}setDisabledState(b){this.el.nativeElement.disabled=b}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let b;try{b=this.injector.get(J.a5)}catch(C){}if(!b)return;b.statusChanges&&(this.statusChanges=b.statusChanges.subscribe(()=>gn(this.el)));const v=b.control;v&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(W=>{if(void 0!==v[W]){const pe=v[W].bind(v);v[W]=(...Le)=>{pe(...Le),gn(this.el)}}})}}return E.\u0275fac=function(b){return new(b||E)(a.Y36(a.zs3),a.Y36(a.SBq))},E.\u0275dir=a.lG2({type:E,hostBindings:function(b,v){1&b&&a.NdJ("ionBlur",function(W){return v._handleBlurEvent(W.target)})}}),E})();const gn=E=>{kn(()=>{const k=E.nativeElement,b=null!=k.value&&k.value.toString().length>0,v=qn(k);Zr(k,v);const C=k.closest("ion-item");C&&Zr(C,b?[...v,"item-has-value"]:v)})},qn=E=>{const k=E.classList,b=[];for(let v=0;v<k.length;v++){const C=k.item(v);null!==C&&Qn(C,"ng-")&&b.push(`ion-${C.substring(3)}`)}return b},Zr=(E,k)=>{const b=E.classList;b.remove("ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"),b.add(...k)},Qn=(E,k)=>E.substring(0,k.length)===k;let Bn=(()=>{class E extends _n{constructor(b,v){super(b,v)}_handleInputEvent(b){this.handleChangeEvent(b,b.value)}}return E.\u0275fac=function(b){return new(b||E)(a.Y36(a.zs3),a.Y36(a.SBq))},E.\u0275dir=a.lG2({type:E,selectors:[["ion-input",3,"type","number"],["ion-textarea"],["ion-searchbar"]],hostBindings:function(b,v){1&b&&a.NdJ("ionChange",function(W){return v._handleInputEvent(W.target)})},features:[a._Bn([{provide:J.JU,useExisting:E,multi:!0}]),a.qOj]}),E})();const nr=(E,k)=>{const b=E.prototype;k.forEach(v=>{Object.defineProperty(b,v,{get(){return this.el[v]},set(C){this.z.runOutsideAngular(()=>this.el[v]=C)}})})},_r=(E,k)=>{const b=E.prototype;k.forEach(v=>{b[v]=function(){const C=arguments;return this.z.runOutsideAngular(()=>this.el[v].apply(this.el,C))}})},_t=(E,k,b)=>{b.forEach(v=>E[v]=Ie(k,v))};function Te(E){return function(b){const{defineCustomElementFn:v,inputs:C,methods:W}=E;return void 0!==v&&v(),C&&nr(b,C),W&&_r(b,W),b}}let qt=(()=>{let E=class{constructor(b,v,C){this.z=C,b.detach(),this.el=v.nativeElement}};return E.\u0275fac=function(b){return new(b||E)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},E.\u0275cmp=a.Xpm({type:E,selectors:[["ion-app"]],ngContentSelectors:Ce,decls:1,vars:0,template:function(b,v){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,Z.gn)([Te({defineCustomElementFn:void 0})],E),E})(),Zn=(()=>{let E=class{constructor(b,v,C){this.z=C,b.detach(),this.el=v.nativeElement}};return E.\u0275fac=function(b){return new(b||E)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},E.\u0275cmp=a.Xpm({type:E,selectors:[["ion-back-button"]],inputs:{color:"color",defaultHref:"defaultHref",disabled:"disabled",icon:"icon",mode:"mode",routerAnimation:"routerAnimation",text:"text",type:"type"},ngContentSelectors:Ce,decls:1,vars:0,template:function(b,v){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,Z.gn)([Te({defineCustomElementFn:void 0,inputs:["color","defaultHref","disabled","icon","mode","routerAnimation","text","type"]})],E),E})(),Hn=(()=>{let E=class{constructor(b,v,C){this.z=C,b.detach(),this.el=v.nativeElement,_t(this,this.el,["ionFocus","ionBlur"])}};return E.\u0275fac=function(b){return new(b||E)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},E.\u0275cmp=a.Xpm({type:E,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:Ce,decls:1,vars:0,template:function(b,v){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,Z.gn)([Te({defineCustomElementFn:void 0,inputs:["buttonType","color","disabled","download","expand","fill","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],E),E})(),xe=(()=>{let E=class{constructor(b,v,C){this.z=C,b.detach(),this.el=v.nativeElement}};return E.\u0275fac=function(b){return new(b||E)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},E.\u0275cmp=a.Xpm({type:E,selectors:[["ion-buttons"]],inputs:{collapse:"collapse"},ngContentSelectors:Ce,decls:1,vars:0,template:function(b,v){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,Z.gn)([Te({defineCustomElementFn:void 0,inputs:["collapse"]})],E),E})(),qe=(()=>{let E=class{constructor(b,v,C){this.z=C,b.detach(),this.el=v.nativeElement}};return E.\u0275fac=function(b){return new(b||E)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},E.\u0275cmp=a.Xpm({type:E,selectors:[["ion-card"]],inputs:{button:"button",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},ngContentSelectors:Ce,decls:1,vars:0,template:function(b,v){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,Z.gn)([Te({defineCustomElementFn:void 0,inputs:["button","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","target","type"]})],E),E})(),rt=(()=>{let E=class{constructor(b,v,C){this.z=C,b.detach(),this.el=v.nativeElement}};return E.\u0275fac=function(b){return new(b||E)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},E.\u0275cmp=a.Xpm({type:E,selectors:[["ion-card-content"]],inputs:{mode:"mode"},ngContentSelectors:Ce,decls:1,vars:0,template:function(b,v){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,Z.gn)([Te({defineCustomElementFn:void 0,inputs:["mode"]})],E),E})(),Lt=(()=>{let E=class{constructor(b,v,C){this.z=C,b.detach(),this.el=v.nativeElement}};return E.\u0275fac=function(b){return new(b||E)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},E.\u0275cmp=a.Xpm({type:E,selectors:[["ion-card-header"]],inputs:{color:"color",mode:"mode",translucent:"translucent"},ngContentSelectors:Ce,decls:1,vars:0,template:function(b,v){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,Z.gn)([Te({defineCustomElementFn:void 0,inputs:["color","mode","translucent"]})],E),E})(),Ge=(()=>{let E=class{constructor(b,v,C){this.z=C,b.detach(),this.el=v.nativeElement}};return E.\u0275fac=function(b){return new(b||E)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},E.\u0275cmp=a.Xpm({type:E,selectors:[["ion-card-subtitle"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:Ce,decls:1,vars:0,template:function(b,v){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,Z.gn)([Te({defineCustomElementFn:void 0,inputs:["color","mode"]})],E),E})(),ht=(()=>{let E=class{constructor(b,v,C){this.z=C,b.detach(),this.el=v.nativeElement}};return E.\u0275fac=function(b){return new(b||E)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},E.\u0275cmp=a.Xpm({type:E,selectors:[["ion-card-title"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:Ce,decls:1,vars:0,template:function(b,v){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,Z.gn)([Te({defineCustomElementFn:void 0,inputs:["color","mode"]})],E),E})(),vn=(()=>{let E=class{constructor(b,v,C){this.z=C,b.detach(),this.el=v.nativeElement}};return E.\u0275fac=function(b){return new(b||E)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},E.\u0275cmp=a.Xpm({type:E,selectors:[["ion-col"]],inputs:{offset:"offset",offsetLg:"offsetLg",offsetMd:"offsetMd",offsetSm:"offsetSm",offsetXl:"offsetXl",offsetXs:"offsetXs",pull:"pull",pullLg:"pullLg",pullMd:"pullMd",pullSm:"pullSm",pullXl:"pullXl",pullXs:"pullXs",push:"push",pushLg:"pushLg",pushMd:"pushMd",pushSm:"pushSm",pushXl:"pushXl",pushXs:"pushXs",size:"size",sizeLg:"sizeLg",sizeMd:"sizeMd",sizeSm:"sizeSm",sizeXl:"sizeXl",sizeXs:"sizeXs"},ngContentSelectors:Ce,decls:1,vars:0,template:function(b,v){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,Z.gn)([Te({defineCustomElementFn:void 0,inputs:["offset","offsetLg","offsetMd","offsetSm","offsetXl","offsetXs","pull","pullLg","pullMd","pullSm","pullXl","pullXs","push","pushLg","pushMd","pushSm","pushXl","pushXs","size","sizeLg","sizeMd","sizeSm","sizeXl","sizeXs"]})],E),E})(),Vn=(()=>{let E=class{constructor(b,v,C){this.z=C,b.detach(),this.el=v.nativeElement,_t(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}};return E.\u0275fac=function(b){return new(b||E)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},E.\u0275cmp=a.Xpm({type:E,selectors:[["ion-content"]],inputs:{color:"color",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:Ce,decls:1,vars:0,template:function(b,v){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,Z.gn)([Te({defineCustomElementFn:void 0,inputs:["color","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],E),E})(),st=(()=>{let E=class{constructor(b,v,C){this.z=C,b.detach(),this.el=v.nativeElement}};return E.\u0275fac=function(b){return new(b||E)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},E.\u0275cmp=a.Xpm({type:E,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:Ce,decls:1,vars:0,template:function(b,v){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,Z.gn)([Te({defineCustomElementFn:void 0,inputs:["collapse","mode","translucent"]})],E),E})(),Re=(()=>{let E=class{constructor(b,v,C){this.z=C,b.detach(),this.el=v.nativeElement}};return E.\u0275fac=function(b){return new(b||E)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},E.\u0275cmp=a.Xpm({type:E,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:Ce,decls:1,vars:0,template:function(b,v){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,Z.gn)([Te({defineCustomElementFn:void 0,inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],E),E})(),zn=(()=>{let E=class{constructor(b,v,C){this.z=C,b.detach(),this.el=v.nativeElement,_t(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}};return E.\u0275fac=function(b){return new(b||E)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},E.\u0275cmp=a.Xpm({type:E,selectors:[["ion-input"]],inputs:{accept:"accept",autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearOnEdit:"clearOnEdit",color:"color",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",size:"size",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},ngContentSelectors:Ce,decls:1,vars:0,template:function(b,v){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,Z.gn)([Te({defineCustomElementFn:void 0,inputs:["accept","autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearOnEdit","color","debounce","disabled","enterkeyhint","inputmode","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","size","spellcheck","step","type","value"],methods:["setFocus","getInputElement"]})],E),E})(),Er=(()=>{let E=class{constructor(b,v,C){this.z=C,b.detach(),this.el=v.nativeElement}};return E.\u0275fac=function(b){return new(b||E)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},E.\u0275cmp=a.Xpm({type:E,selectors:[["ion-item"]],inputs:{button:"button",color:"color",counter:"counter",counterFormatter:"counterFormatter",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",fill:"fill",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",target:"target",type:"type"},ngContentSelectors:Ce,decls:1,vars:0,template:function(b,v){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,Z.gn)([Te({defineCustomElementFn:void 0,inputs:["button","color","counter","counterFormatter","detail","detailIcon","disabled","download","fill","href","lines","mode","rel","routerAnimation","routerDirection","shape","target","type"]})],E),E})(),Yr=(()=>{let E=class{constructor(b,v,C){this.z=C,b.detach(),this.el=v.nativeElement}};return E.\u0275fac=function(b){return new(b||E)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},E.\u0275cmp=a.Xpm({type:E,selectors:[["ion-label"]],inputs:{color:"color",mode:"mode",position:"position"},ngContentSelectors:Ce,decls:1,vars:0,template:function(b,v){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,Z.gn)([Te({defineCustomElementFn:void 0,inputs:["color","mode","position"]})],E),E})(),Kr=(()=>{let E=class{constructor(b,v,C){this.z=C,b.detach(),this.el=v.nativeElement}};return E.\u0275fac=function(b){return new(b||E)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},E.\u0275cmp=a.Xpm({type:E,selectors:[["ion-list"]],inputs:{inset:"inset",lines:"lines",mode:"mode"},ngContentSelectors:Ce,decls:1,vars:0,template:function(b,v){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,Z.gn)([Te({defineCustomElementFn:void 0,inputs:["inset","lines","mode"],methods:["closeSlidingItems"]})],E),E})(),ki=(()=>{let E=class{constructor(b,v,C){this.z=C,b.detach(),this.el=v.nativeElement}};return E.\u0275fac=function(b){return new(b||E)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},E.\u0275cmp=a.Xpm({type:E,selectors:[["ion-row"]],ngContentSelectors:Ce,decls:1,vars:0,template:function(b,v){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,Z.gn)([Te({defineCustomElementFn:void 0})],E),E})(),Si=(()=>{let E=class{constructor(b,v,C){this.z=C,b.detach(),this.el=v.nativeElement,_t(this,this.el,["ionInput","ionChange","ionCancel","ionClear","ionBlur","ionFocus"])}};return E.\u0275fac=function(b){return new(b||E)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},E.\u0275cmp=a.Xpm({type:E,selectors:[["ion-searchbar"]],inputs:{animated:"animated",autocomplete:"autocomplete",autocorrect:"autocorrect",cancelButtonIcon:"cancelButtonIcon",cancelButtonText:"cancelButtonText",clearIcon:"clearIcon",color:"color",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",mode:"mode",placeholder:"placeholder",searchIcon:"searchIcon",showCancelButton:"showCancelButton",showClearButton:"showClearButton",spellcheck:"spellcheck",type:"type",value:"value"},ngContentSelectors:Ce,decls:1,vars:0,template:function(b,v){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,Z.gn)([Te({defineCustomElementFn:void 0,inputs:["animated","autocomplete","autocorrect","cancelButtonIcon","cancelButtonText","clearIcon","color","debounce","disabled","enterkeyhint","inputmode","mode","placeholder","searchIcon","showCancelButton","showClearButton","spellcheck","type","value"],methods:["setFocus","getInputElement"]})],E),E})(),er=(()=>{let E=class{constructor(b,v,C){this.z=C,b.detach(),this.el=v.nativeElement}};return E.\u0275fac=function(b){return new(b||E)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},E.\u0275cmp=a.Xpm({type:E,selectors:[["ion-text"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:Ce,decls:1,vars:0,template:function(b,v){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,Z.gn)([Te({defineCustomElementFn:void 0,inputs:["color","mode"]})],E),E})(),Tr=(()=>{let E=class{constructor(b,v,C){this.z=C,b.detach(),this.el=v.nativeElement}};return E.\u0275fac=function(b){return new(b||E)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},E.\u0275cmp=a.Xpm({type:E,selectors:[["ion-thumbnail"]],ngContentSelectors:Ce,decls:1,vars:0,template:function(b,v){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,Z.gn)([Te({defineCustomElementFn:void 0})],E),E})(),si=(()=>{let E=class{constructor(b,v,C){this.z=C,b.detach(),this.el=v.nativeElement}};return E.\u0275fac=function(b){return new(b||E)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},E.\u0275cmp=a.Xpm({type:E,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},ngContentSelectors:Ce,decls:1,vars:0,template:function(b,v){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,Z.gn)([Te({defineCustomElementFn:void 0,inputs:["color","size"]})],E),E})(),ot=(()=>{let E=class{constructor(b,v,C){this.z=C,b.detach(),this.el=v.nativeElement}};return E.\u0275fac=function(b){return new(b||E)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},E.\u0275cmp=a.Xpm({type:E,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:Ce,decls:1,vars:0,template:function(b,v){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,Z.gn)([Te({defineCustomElementFn:void 0,inputs:["color","mode"]})],E),E})();class nt{constructor(k={}){this.data=k}get(k){return this.data[k]}}let It=(()=>{class E{constructor(b,v){this.zone=b,this.appRef=v}create(b,v,C){return new Zt(b,v,C,this.appRef,this.zone)}}return E.\u0275fac=function(b){return new(b||E)(a.LFG(a.R0b),a.LFG(a.z2F))},E.\u0275prov=a.Yz7({token:E,factory:E.\u0275fac}),E})();class Zt{constructor(k,b,v,C,W){this.resolver=k,this.injector=b,this.location=v,this.appRef=C,this.zone=W,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(k,b,v,C){return this.zone.run(()=>new Promise(W=>{W(yn(this.zone,this.resolver,this.injector,this.location,this.appRef,this.elRefMap,this.elEventsMap,k,b,v,C))}))}removeViewFromDom(k,b){return this.zone.run(()=>new Promise(v=>{const C=this.elRefMap.get(b);if(C){C.destroy(),this.elRefMap.delete(b);const W=this.elEventsMap.get(b);W&&(W(),this.elEventsMap.delete(b))}v()}))}}const yn=(E,k,b,v,C,W,pe,Le,vt,Ht,In)=>{const Wt=k.resolveComponentFactory(vt),or=a.zs3.create({providers:Ur(Ht),parent:b}),mr=v?v.createComponent(Wt,v.length,or):Wt.create(or),Dr=mr.instance,Un=mr.location.nativeElement;if(Ht&&Object.assign(Dr,Ht),In)for(const Di of In)Un.classList.add(Di);const Ci=Qr(E,Dr,Un);return Le.appendChild(Un),v||C.attachView(mr.hostView),mr.changeDetectorRef.reattach(),W.set(Un,mr),pe.set(Un,Ci),Un},Pn=[St.L,St.a,St.b,St.c,St.d],Qr=(E,k,b)=>E.run(()=>{const v=Pn.filter(C=>"function"==typeof k[C]).map(C=>{const W=pe=>k[C](pe.detail);return b.addEventListener(C,W),()=>b.removeEventListener(C,W)});return()=>v.forEach(C=>C())}),ui=new a.OlP("NavParamsToken"),Ur=E=>[{provide:ui,useValue:E},{provide:nt,useFactory:ys,deps:[ui]}],ys=E=>new nt(E),Ni=(E,k)=>((E=E.filter(b=>b.stackId!==k.stackId)).push(k),E),Pr=(E,k)=>{const b=E.createUrlTree(["."],{relativeTo:k});return E.serializeUrl(b)},Ar=(E,k)=>{if(!E)return;const b=hi(k);for(let v=0;v<b.length;v++){if(v>=E.length)return b[v];if(b[v]!==E[v])return}},hi=E=>E.split("/").map(k=>k.trim()).filter(k=>""!==k),Or=E=>{E&&(E.ref.destroy(),E.unlistenEvents())};class Xi{constructor(k,b,v,C,W,pe){this.containerEl=b,this.router=v,this.navCtrl=C,this.zone=W,this.location=pe,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==k?hi(k):void 0}createView(k,b){var v;const C=Pr(this.router,b),W=null===(v=null==k?void 0:k.location)||void 0===v?void 0:v.nativeElement,pe=Qr(this.zone,k.instance,W);return{id:this.nextId++,stackId:Ar(this.tabsPrefix,C),unlistenEvents:pe,element:W,ref:k,url:C}}getExistingView(k){const b=Pr(this.router,k),v=this.views.find(C=>C.url===b);return v&&v.ref.changeDetectorRef.reattach(),v}setActive(k){var b,v;const C=this.navCtrl.consumeTransition();let{direction:W,animation:pe,animationBuilder:Le}=C;const vt=this.activeView,Ht=((E,k)=>!k||E.stackId!==k.stackId)(k,vt);Ht&&(W="back",pe=void 0);const In=this.views.slice();let Wt;const or=this.router;or.getCurrentNavigation?Wt=or.getCurrentNavigation():(null===(b=or.navigations)||void 0===b?void 0:b.value)&&(Wt=or.navigations.value),(null===(v=null==Wt?void 0:Wt.extras)||void 0===v?void 0:v.replaceUrl)&&this.views.length>0&&this.views.splice(-1,1);const mr=this.views.includes(k),Dr=this.insertView(k,W);mr||k.ref.changeDetectorRef.detectChanges();const Un=k.animationBuilder;return void 0===Le&&"back"===W&&!Ht&&void 0!==Un&&(Le=Un),vt&&(vt.animationBuilder=Le),this.zone.runOutsideAngular(()=>this.wait(()=>(vt&&vt.ref.changeDetectorRef.detach(),k.ref.changeDetectorRef.reattach(),this.transition(k,vt,pe,this.canGoBack(1),!1,Le).then(()=>_s(k,Dr,In,this.location,this.zone)).then(()=>({enteringView:k,direction:W,animation:pe,tabSwitch:Ht})))))}canGoBack(k,b=this.getActiveStackId()){return this.getStack(b).length>k}pop(k,b=this.getActiveStackId()){return this.zone.run(()=>{var v,C;const W=this.getStack(b);if(W.length<=k)return Promise.resolve(!1);const pe=W[W.length-k-1];let Le=pe.url;const vt=pe.savedData;if(vt){const In=vt.get("primary");(null===(C=null===(v=null==In?void 0:In.route)||void 0===v?void 0:v._routerState)||void 0===C?void 0:C.snapshot.url)&&(Le=In.route._routerState.snapshot.url)}const{animationBuilder:Ht}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(Le,Object.assign(Object.assign({},pe.savedExtras),{animation:Ht})).then(()=>!0)})}startBackTransition(){const k=this.activeView;if(k){const b=this.getStack(k.stackId),v=b[b.length-2],C=v.animationBuilder;return this.wait(()=>this.transition(v,k,"back",this.canGoBack(2),!0,C))}return Promise.resolve()}endBackTransition(k){k?(this.skipTransition=!0,this.pop(1)):this.activeView&&Ss(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl(k){const b=this.getStack(k);return b.length>0?b[b.length-1]:void 0}getRootUrl(k){const b=this.getStack(k);return b.length>0?b[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(Or),this.activeView=void 0,this.views=[]}getStack(k){return this.views.filter(b=>b.stackId===k)}insertView(k,b){return this.activeView=k,this.views=((E,k,b)=>"root"===b?Ni(E,k):"forward"===b?((E,k)=>(E.indexOf(k)>=0?E=E.filter(v=>v.stackId!==k.stackId||v.id<=k.id):E.push(k),E))(E,k):((E,k)=>E.indexOf(k)>=0?E.filter(v=>v.stackId!==k.stackId||v.id<=k.id):Ni(E,k))(E,k))(this.views,k,b),this.views.slice()}transition(k,b,v,C,W,pe){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(b===k)return Promise.resolve(!1);const Le=k?k.element:void 0,vt=b?b.element:void 0,Ht=this.containerEl;return Le&&Le!==vt&&(Le.classList.add("ion-page"),Le.classList.add("ion-page-invisible"),Le.parentElement!==Ht&&Ht.appendChild(Le),Ht.commit)?Ht.commit(Le,vt,{deepWait:!0,duration:void 0===v?0:void 0,direction:v,showGoBack:C,progressAnimation:W,animationBuilder:pe}):Promise.resolve(!1)}wait(k){return(0,Z.mG)(this,void 0,void 0,function*(){void 0!==this.runningTask&&(yield this.runningTask,this.runningTask=void 0);const b=this.runningTask=k();return b.finally(()=>this.runningTask=void 0),b})}}const _s=(E,k,b,v,C)=>"function"==typeof requestAnimationFrame?new Promise(W=>{requestAnimationFrame(()=>{Ss(E,k,b,v,C),W()})}):Promise.resolve(),Ss=(E,k,b,v,C)=>{C.run(()=>b.filter(W=>!k.includes(W)).forEach(Or)),k.forEach(W=>{const Le=v.path().split("?")[0].split("#")[0];if(W!==E&&W.url!==Le){const vt=W.element;vt.setAttribute("aria-hidden","true"),vt.classList.add("ion-page-hidden"),W.ref.changeDetectorRef.detach()}})};let ro=(()=>{class E{get(b,v){const C=pr();return C?C.get(b,v):null}getBoolean(b,v){const C=pr();return!!C&&C.getBoolean(b,v)}getNumber(b,v){const C=pr();return C?C.getNumber(b,v):0}}return E.\u0275fac=function(b){return new(b||E)},E.\u0275prov=a.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();const ai=new a.OlP("USERCONFIG"),pr=()=>{if("undefined"!=typeof window){const E=window.Ionic;if(null==E?void 0:E.config)return E.config}return null};let Ii=(()=>{class E{constructor(b,v){this.doc=b,this.backButton=new Ke.xQ,this.keyboardDidShow=new Ke.xQ,this.keyboardDidHide=new Ke.xQ,this.pause=new Ke.xQ,this.resume=new Ke.xQ,this.resize=new Ke.xQ,v.run(()=>{var C;let W;this.win=b.defaultView,this.backButton.subscribeWithPriority=function(pe,Le){return this.subscribe(vt=>vt.register(pe,Ht=>v.run(()=>Le(Ht))))},Qi(this.pause,b,"pause"),Qi(this.resume,b,"resume"),Qi(this.backButton,b,"ionBackButton"),Qi(this.resize,this.win,"resize"),Qi(this.keyboardDidShow,this.win,"ionKeyboardDidShow"),Qi(this.keyboardDidHide,this.win,"ionKeyboardDidHide"),this._readyPromise=new Promise(pe=>{W=pe}),(null===(C=this.win)||void 0===C?void 0:C.cordova)?b.addEventListener("deviceready",()=>{W("cordova")},{once:!0}):W("dom")})}is(b){return(0,we.a)(this.win,b)}platforms(){return(0,we.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(b){return ds(this.win.location.href,b)}isLandscape(){return!this.isPortrait()}isPortrait(){var b,v;return null===(v=(b=this.win).matchMedia)||void 0===v?void 0:v.call(b,"(orientation: portrait)").matches}testUserAgent(b){const v=this.win.navigator;return!!((null==v?void 0:v.userAgent)&&v.userAgent.indexOf(b)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return E.\u0275fac=function(b){return new(b||E)(a.LFG(mt.K0),a.LFG(a.R0b))},E.\u0275prov=a.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();const ds=(E,k)=>{k=k.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");const v=new RegExp("[\\?&]"+k+"=([^&#]*)").exec(E);return v?decodeURIComponent(v[1].replace(/\+/g," ")):null},Qi=(E,k,b)=>{k&&k.addEventListener(b,v=>{E.next(null!=v?v.detail:void 0)})};let kr=(()=>{class E{constructor(b,v,C,W){this.location=v,this.serializer=C,this.router=W,this.direction=Ri,this.animated=uo,this.guessDirection="forward",this.lastNavId=-1,W&&W.events.subscribe(pe=>{if(pe instanceof Ee.OD){const Le=pe.restoredState?pe.restoredState.navigationId:pe.id;this.guessDirection=Le<this.lastNavId?"back":"forward",this.guessAnimation=pe.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?pe.id:Le}}),b.backButton.subscribeWithPriority(0,pe=>{this.pop(),pe()})}navigateForward(b,v={}){return this.setDirection("forward",v.animated,v.animationDirection,v.animation),this.navigate(b,v)}navigateBack(b,v={}){return this.setDirection("back",v.animated,v.animationDirection,v.animation),this.navigate(b,v)}navigateRoot(b,v={}){return this.setDirection("root",v.animated,v.animationDirection,v.animation),this.navigate(b,v)}back(b={animated:!0,animationDirection:"back"}){return this.setDirection("back",b.animated,b.animationDirection,b.animation),this.location.back()}pop(){return(0,Z.mG)(this,void 0,void 0,function*(){let b=this.topOutlet;for(;b&&!(yield b.pop());)b=b.parentOutlet})}setDirection(b,v,C,W){this.direction=b,this.animated=vs(b,v,C),this.animationBuilder=W}setTopOutlet(b){this.topOutlet=b}consumeTransition(){let v,b="root";const C=this.animationBuilder;return"auto"===this.direction?(b=this.guessDirection,v=this.guessAnimation):(v=this.animated,b=this.direction),this.direction=Ri,this.animated=uo,this.animationBuilder=void 0,{direction:b,animation:v,animationBuilder:C}}navigate(b,v){if(Array.isArray(b))return this.router.navigate(b,v);{const C=this.serializer.parse(b.toString());return void 0!==v.queryParams&&(C.queryParams=Object.assign({},v.queryParams)),void 0!==v.fragment&&(C.fragment=v.fragment),this.router.navigateByUrl(C,v)}}}return E.\u0275fac=function(b){return new(b||E)(a.LFG(Ii),a.LFG(mt.Ye),a.LFG(Ee.Hx),a.LFG(Ee.F0,8))},E.\u0275prov=a.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();const vs=(E,k,b)=>{if(!1!==k){if(void 0!==b)return b;if("forward"===E||"back"===E)return E;if("root"===E&&!0===k)return"forward"}},Ri="auto",uo=void 0;let es=(()=>{class E{constructor(b,v,C,W,pe,Le,vt,Ht,In,Wt,or,mr,Dr){this.parentContexts=b,this.location=v,this.resolver=C,this.config=Le,this.navCtrl=vt,this.parentOutlet=Dr,this.activated=null,this.activatedView=null,this._activatedRoute=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new Ve.X(null),this.stackEvents=new a.vpe,this.activateEvents=new a.vpe,this.deactivateEvents=new a.vpe,this.nativeEl=In.nativeElement,this.name=W||Ee.eC,this.tabsPrefix="true"===pe?Pr(Wt,mr):void 0,this.stackCtrl=new Xi(this.tabsPrefix,this.nativeEl,Wt,vt,or,Ht),b.onChildOutletCreated(this.name,this)}set animation(b){this.nativeEl.animation=b}set animated(b){this.nativeEl.animated=b}set swipeGesture(b){this._swipeGesture=b,this.nativeEl.swipeHandler=b?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:v=>this.stackCtrl.endBackTransition(v)}:void 0}ngOnDestroy(){this.stackCtrl.destroy()}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){if(!this.activated){const b=this.getContext();(null==b?void 0:b.route)&&this.activateWith(b.route,b.resolver||null)}new Promise(b=>(0,dt.c)(this.nativeEl,b)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(b,v){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const v=this.getContext();this.activatedView.savedData=new Map(v.children.contexts);const C=this.activatedView.savedData.get("primary");if(C&&v.route&&(C.route=Object.assign({},v.route)),this.activatedView.savedExtras={},v.route){const W=v.route.snapshot;this.activatedView.savedExtras.queryParams=W.queryParams,this.activatedView.savedExtras.fragment=W.fragment}}const b=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(b)}}activateWith(b,v){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=b;let C,W=this.stackCtrl.getExistingView(b);if(W){C=this.activated=W.ref;const pe=W.savedData;pe&&(this.getContext().children.contexts=pe),this.updateActivatedRouteProxy(C.instance,b)}else{const vt=(v=v||this.resolver).resolveComponentFactory(b._futureSnapshot.routeConfig.component),Ht=this.parentContexts.getOrCreateContext(this.name).children,In=new Ve.X(null),Wt=this.createActivatedRouteProxy(In,b),or=new as(Wt,Ht,this.location.injector);C=this.activated=this.location.createComponent(vt,this.location.length,or),In.next(C.instance),W=this.stackCtrl.createView(this.activated,b),this.proxyMap.set(C.instance,Wt),this.currentActivatedRoute$.next({component:C.instance,activatedRoute:b})}this.activatedView=W,this.stackCtrl.setActive(W).then(pe=>{this.navCtrl.setTopOutlet(this),this.activateEvents.emit(C.instance),this.stackEvents.emit(pe)})}canGoBack(b=1,v){return this.stackCtrl.canGoBack(b,v)}pop(b=1,v){return this.stackCtrl.pop(b,v)}getLastUrl(b){const v=this.stackCtrl.getLastUrl(b);return v?v.url:void 0}getLastRouteView(b){return this.stackCtrl.getLastUrl(b)}getRootView(b){return this.stackCtrl.getRootUrl(b)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(b,v){const C=new Ee.gz;return C._futureSnapshot=v._futureSnapshot,C._routerState=v._routerState,C.snapshot=v.snapshot,C.outlet=v.outlet,C.component=v.component,C._paramMap=this.proxyObservable(b,"paramMap"),C._queryParamMap=this.proxyObservable(b,"queryParamMap"),C.url=this.proxyObservable(b,"url"),C.params=this.proxyObservable(b,"params"),C.queryParams=this.proxyObservable(b,"queryParams"),C.fragment=this.proxyObservable(b,"fragment"),C.data=this.proxyObservable(b,"data"),C}proxyObservable(b,v){return b.pipe((0,Ze.h)(C=>!!C),(0,Mt.w)(C=>this.currentActivatedRoute$.pipe((0,Ze.h)(W=>null!==W&&W.component===C),(0,Mt.w)(W=>W&&W.activatedRoute[v]),(0,Jt.x)())))}updateActivatedRouteProxy(b,v){const C=this.proxyMap.get(b);if(!C)throw new Error("Could not find activated route proxy for view");C._futureSnapshot=v._futureSnapshot,C._routerState=v._routerState,C.snapshot=v.snapshot,C.outlet=v.outlet,C.component=v.component,this.currentActivatedRoute$.next({component:b,activatedRoute:v})}}return E.\u0275fac=function(b){return new(b||E)(a.Y36(Ee.y6),a.Y36(a.s_b),a.Y36(a._Vd),a.$8M("name"),a.$8M("tabs"),a.Y36(ro),a.Y36(kr),a.Y36(mt.Ye),a.Y36(a.SBq),a.Y36(Ee.F0),a.Y36(a.R0b),a.Y36(Ee.gz),a.Y36(E,12))},E.\u0275dir=a.lG2({type:E,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",swipeGesture:"swipeGesture"},outputs:{stackEvents:"stackEvents",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),E})();class as{constructor(k,b,v){this.route=k,this.childContexts=b,this.parent=v}get(k,b){return k===Ee.gz?this.route:k===Ee.y6?this.childContexts:this.parent.get(k,b)}}let ji=(()=>{class E{constructor(b,v,C){this.routerOutlet=b,this.navCtrl=v,this.config=C}onClick(b){var v;const C=this.defaultHref||this.config.get("backButtonDefaultHref");(null===(v=this.routerOutlet)||void 0===v?void 0:v.canGoBack())?(this.navCtrl.setDirection("back",void 0,void 0,this.routerAnimation),this.routerOutlet.pop(),b.preventDefault()):null!=C&&(this.navCtrl.navigateBack(C,{animation:this.routerAnimation}),b.preventDefault())}}return E.\u0275fac=function(b){return new(b||E)(a.Y36(es,8),a.Y36(kr),a.Y36(ro))},E.\u0275dir=a.lG2({type:E,selectors:[["ion-back-button"]],hostBindings:function(b,v){1&b&&a.NdJ("click",function(W){return v.onClick(W)})},inputs:{defaultHref:"defaultHref",routerAnimation:"routerAnimation"}}),E})(),$o=(()=>{class E{constructor(b,v,C,W,pe){this.locationStrategy=b,this.navCtrl=v,this.elementRef=C,this.router=W,this.routerLink=pe,this.routerDirection="forward"}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){var b;if(null===(b=this.routerLink)||void 0===b?void 0:b.urlTree){const v=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=v}}onClick(b){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation),b.preventDefault()}}return E.\u0275fac=function(b){return new(b||E)(a.Y36(mt.S$),a.Y36(kr),a.Y36(a.SBq),a.Y36(Ee.F0),a.Y36(Ee.rH,8))},E.\u0275dir=a.lG2({type:E,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(b,v){1&b&&a.NdJ("click",function(W){return v.onClick(W)})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[a.TTD]}),E})(),jr=(()=>{class E{constructor(b,v,C,W,pe){this.locationStrategy=b,this.navCtrl=v,this.elementRef=C,this.router=W,this.routerLink=pe,this.routerDirection="forward"}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){var b;if(null===(b=this.routerLink)||void 0===b?void 0:b.urlTree){const v=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=v}}onClick(){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation)}}return E.\u0275fac=function(b){return new(b||E)(a.Y36(mt.S$),a.Y36(kr),a.Y36(a.SBq),a.Y36(Ee.F0),a.Y36(Ee.rH,8))},E.\u0275dir=a.lG2({type:E,selectors:[["a","routerLink",""],["area","routerLink",""]],hostBindings:function(b,v){1&b&&a.NdJ("click",function(){return v.onClick()})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[a.TTD]}),E})();class Dn{constructor(k){this.ctrl=k}create(k){return this.ctrl.create(k||{})}dismiss(k,b,v){return this.ctrl.dismiss(k,b,v)}getTop(){return this.ctrl.getTop()}}let br=(()=>{class E extends Dn{constructor(){super(Xe.a)}}return E.\u0275fac=function(b){return new(b||E)},E.\u0275prov=a.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})(),dr=(()=>{class E extends Dn{constructor(){super(Xe.l)}}return E.\u0275fac=function(b){return new(b||E)},E.\u0275prov=a.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})(),Nr=(()=>{class E extends Dn{constructor(b,v,C){super(Xe.m),this.angularDelegate=b,this.resolver=v,this.injector=C}create(b){return super.create(Object.assign(Object.assign({},b),{delegate:this.angularDelegate.create(this.resolver,this.injector)}))}}return E.\u0275fac=function(b){return new(b||E)(a.LFG(It),a.LFG(a._Vd),a.LFG(a.zs3))},E.\u0275prov=a.Yz7({token:E,factory:E.\u0275fac}),E})(),vi=(()=>{class E extends Dn{constructor(b,v,C){super(Xe.c),this.angularDelegate=b,this.resolver=v,this.injector=C}create(b){return super.create(Object.assign(Object.assign({},b),{delegate:this.angularDelegate.create(this.resolver,this.injector)}))}}return E.\u0275fac=function(b){return new(b||E)(a.LFG(It),a.LFG(a._Vd),a.LFG(a.zs3))},E.\u0275prov=a.Yz7({token:E,factory:E.\u0275fac}),E})();class B{shouldDetach(k){return!1}shouldAttach(k){return!1}store(k,b){}retrieve(k){return null}shouldReuseRoute(k,b){if(k.routeConfig!==b.routeConfig)return!1;const v=k.params,C=b.params,W=Object.keys(v),pe=Object.keys(C);if(W.length!==pe.length)return!1;for(const Le of W)if(C[Le]!==v[Le])return!1;return!0}}const N=(E,k,b)=>()=>{if(k.defaultView&&"undefined"!=typeof window){(E=>{const k=window,b=k.Ionic;b&&b.config&&"Object"!==b.config.constructor.name||(k.Ionic=k.Ionic||{},k.Ionic.config=Object.assign(Object.assign({},k.Ionic.config),E))})(Object.assign(Object.assign({},E),{_zoneGate:W=>b.run(W)}));const C="__zone_symbol__addEventListener"in k.body?"__zone_symbol__addEventListener":"addEventListener";return function wt(){var E=[];if("undefined"!=typeof window){var k=window;(!k.customElements||k.Element&&(!k.Element.prototype.closest||!k.Element.prototype.matches||!k.Element.prototype.remove||!k.Element.prototype.getRootNode))&&E.push(L.e(6748).then(L.t.bind(L,723,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||k.NodeList&&!k.NodeList.prototype.forEach||!k.fetch||!function(){try{var v=new URL("b","http://a");return v.pathname="c%20d","http://a/c%20d"===v.href&&v.searchParams}catch(C){return!1}}()||"undefined"==typeof WeakMap)&&E.push(L.e(2214).then(L.t.bind(L,4144,23)))}return Promise.all(E)}().then(()=>((E,k)=>"undefined"==typeof window?Promise.resolve():(0,me.p)().then(()=>(Ye(),(0,me.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]]],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64]}],[1,"ion-fab-list",{"activated":[4],"side":[1]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]]]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[4],"layout":[1],"type":[1],"value":[1],"checked":[32]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1025],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]]]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]}]]],["ion-chip",[[33,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-slide_2",[[0,"ion-slide"],[36,"ion-slides",{"options":[8],"pager":[4],"scrollbar":[4],"update":[64],"updateAutoHeight":[64],"slideTo":[64],"slideNext":[64],"slidePrev":[64],"getActiveIndex":[64],"getPreviousIndex":[64],"length":[64],"isEnd":[64],"isBeginning":[64],"startAutoplay":[64],"stopAutoplay":[64],"lockSwipeToNext":[64],"lockSwipeToPrev":[64],"lockSwipes":[64],"getSwiper":[64]}]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-input",[[34,"ion-input",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"inputmode":[1],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-textarea",[[34,"ion-textarea",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[1028,"clear-on-edit"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[2],"rows":[2],"wrap":[1],"autoGrow":[4,"auto-grow"],"value":[1025],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[1],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]]]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"swipeToClose":[4,"swipe-to-close"],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]}],[0,"ion-route-redirect",{"from":[1],"to":[1]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"disabled":[4],"value":[1026],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"activated":[32]}]]],["ion-virtual-scroll",[[0,"ion-virtual-scroll",{"approxItemHeight":[2,"approx-item-height"],"approxHeaderHeight":[2,"approx-header-height"],"approxFooterHeight":[2,"approx-footer-height"],"headerFn":[16],"footerFn":[16],"items":[16],"itemHeight":[16],"headerHeight":[16],"footerHeight":[16],"renderItem":[16],"renderHeader":[16],"renderFooter":[16],"nodeRender":[16],"domRender":[16],"totalHeight":[32],"positionForItem":[64],"checkRange":[64],"checkEnd":[64]},[[9,"resize","onResize"]]]]],["ion-picker-column-internal",[[33,"ion-picker-column-internal",{"items":[16],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"isActive":[32],"scrollActiveItemIntoView":[64]}]]],["ion-picker-internal",[[33,"ion-picker-internal"]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]]]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32],"ariaLabel":[32]}]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isPresented":[32],"isTimePopoverOpen":[32],"confirm":[64],"reset":[64],"cancel":[64]}],[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]}],[32,"ion-picker-column",{"col":[16]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]]]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8]}]]],["ion-select_3",[[33,"ion-select",{"disabled":[4],"cancelText":[1,"cancel-text"],"okText":[1,"ok-text"],"placeholder":[1],"name":[1],"selectedText":[1,"selected-text"],"multiple":[4],"interface":[1],"interfaceOptions":[8,"interface-options"],"compareWith":[1,"compare-with"],"value":[1032],"isExpanded":[32],"open":[64]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]},[[0,"ionChange","onSelect"]]]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[8,"appload","onAppLoad"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]}],[33,"ion-title",{"color":[513],"size":[1]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[34,"ion-buttons",{"collapse":[4]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[1,"ion-skeleton-text",{"animated":[4]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"fill":[1],"shape":[1],"href":[1],"rel":[1],"lines":[1],"counter":[4],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"counterFormatter":[16],"multipleInputs":[32],"focusable":[32],"counterString":[32]},[[0,"ionChange","handleIonChange"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]}],[33,"ion-note",{"color":[513]}]]]]'),k))))(0,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:kn,jmp:W=>b.runOutsideAngular(W),ael(W,pe,Le,vt){W[C](pe,Le,vt)},rel(W,pe,Le,vt){W.removeEventListener(pe,Le,vt)}}))}};let Ut=(()=>{class E{static forRoot(b){return{ngModule:E,providers:[{provide:ai,useValue:b},{provide:a.ip1,useFactory:N,multi:!0,deps:[ai,mt.K0,a.R0b]}]}}}return E.\u0275fac=function(b){return new(b||E)},E.\u0275mod=a.oAB({type:E}),E.\u0275inj=a.cJS({providers:[It,Nr,vi],imports:[[mt.ez]]}),E})()},9442:(dn,ft,L)=>{"use strict";L.d(ft,{c:()=>Ve});var a=L(3756);let J;const We=Ee=>Ee.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ne=Ee=>{if(void 0===J){const Be=void 0!==Ee.style.webkitAnimationName;J=void 0===Ee.style.animationName&&Be?"-webkit-":""}return J},ae=(Ee,Fe,Be)=>{const Et=Fe.startsWith("animation")?Ne(Ee):"";Ee.style.setProperty(Et+Fe,Be)},Ae=(Ee,Fe)=>{const Be=Fe.startsWith("animation")?Ne(Ee):"";Ee.style.removeProperty(Be+Fe)},oe=[],Ke=(Ee=[],Fe)=>{if(void 0!==Fe){const Be=Array.isArray(Fe)?Fe:[Fe];return[...Ee,...Be]}return Ee},Ve=Ee=>{let Fe,Be,Et,we,dt,St,Oe,mt,wt,Ye,q,Gt,Ct,Pt=[],Xe=[],Tt=[],me=!1,Se={},fe=[],ye=[],je={},Ze=0,Mt=!1,Jt=!1,bt=!0,Ce=!1,tt=!0,sn=!1;const bn=Ee,kn=[],_n=[],gn=[],qn=[],Zr=[],Qn=[],Yn=[],on=[],Rr=[],cr=[],Bn="function"==typeof AnimationEffect||"function"==typeof window.AnimationEffect,nr="function"==typeof Element&&"function"==typeof Element.prototype.animate&&Bn,_t=()=>cr,qt=(be,ke)=>(((null==ke?void 0:ke.oneTimeCallback)?_n:kn).push({c:be,o:ke}),Ct),Zn=()=>{if(nr)cr.forEach(be=>{be.cancel()}),cr.length=0;else{const be=gn.slice();(0,a.r)(()=>{be.forEach(ke=>{Ae(ke,"animation-name"),Ae(ke,"animation-duration"),Ae(ke,"animation-timing-function"),Ae(ke,"animation-iteration-count"),Ae(ke,"animation-delay"),Ae(ke,"animation-play-state"),Ae(ke,"animation-fill-mode"),Ae(ke,"animation-direction")})})}},Jn=()=>{Zr.forEach(be=>{(null==be?void 0:be.parentNode)&&be.parentNode.removeChild(be)}),Zr.length=0},vn=()=>void 0!==dt?dt:Oe?Oe.getFill():"both",Vn=()=>void 0!==wt?wt:void 0!==St?St:Oe?Oe.getDirection():"normal",Gn=()=>Mt?"linear":void 0!==Et?Et:Oe?Oe.getEasing():"linear",An=()=>Jt?0:void 0!==Ye?Ye:void 0!==Be?Be:Oe?Oe.getDuration():0,Sr=()=>void 0!==we?we:Oe?Oe.getIterations():1,Gr=()=>void 0!==q?q:void 0!==Fe?Fe:Oe?Oe.getDelay():0,Yr=()=>{0!==Ze&&(Ze--,0===Ze&&((()=>{Oi(),on.forEach(Nt=>Nt()),Rr.forEach(Nt=>Nt());const be=bt?1:0,ke=fe,yt=ye,jt=je;gn.forEach(Nt=>{const Ot=Nt.classList;ke.forEach(Tn=>Ot.add(Tn)),yt.forEach(Tn=>Ot.remove(Tn));for(const Tn in jt)jt.hasOwnProperty(Tn)&&ae(Nt,Tn,jt[Tn])}),kn.forEach(Nt=>Nt.c(be,Ct)),_n.forEach(Nt=>Nt.c(be,Ct)),_n.length=0,tt=!0,bt&&(Ce=!0),bt=!0})(),Oe&&Oe.animationFinish()))},Kr=(be=!0)=>{Jn();const ke=(Ee=>(Ee.forEach(Fe=>{for(const Be in Fe)if(Fe.hasOwnProperty(Be)){const Et=Fe[Be];if("easing"===Be)Fe["animation-timing-function"]=Et,delete Fe[Be];else{const we=We(Be);we!==Be&&(Fe[we]=Et,delete Fe[Be])}}}),Ee))(Pt);gn.forEach(yt=>{if(ke.length>0){const jt=((Ee=[])=>Ee.map(Fe=>{const Be=Fe.offset,Et=[];for(const we in Fe)Fe.hasOwnProperty(we)&&"offset"!==we&&Et.push(`${we}: ${Fe[we]};`);return`${100*Be}% { ${Et.join(" ")} }`}).join(" "))(ke);Gt=void 0!==Ee?Ee:(Ee=>{let Fe=oe.indexOf(Ee);return Fe<0&&(Fe=oe.push(Ee)-1),`ion-animation-${Fe}`})(jt);const Nt=((Ee,Fe,Be)=>{const Et=(Ee=>{const Fe=Ee.getRootNode();return Fe.head||Fe})(Be),we=Ne(Be),dt=Et.querySelector("#"+Ee);if(dt)return dt;const St=(Be.ownerDocument||document).createElement("style");return St.id=Ee,St.textContent=`@${we}keyframes ${Ee} { ${Fe} } @${we}keyframes ${Ee}-alt { ${Fe} }`,Et.appendChild(St),St})(Gt,jt,yt);Zr.push(Nt),ae(yt,"animation-duration",`${An()}ms`),ae(yt,"animation-timing-function",Gn()),ae(yt,"animation-delay",`${Gr()}ms`),ae(yt,"animation-fill-mode",vn()),ae(yt,"animation-direction",Vn());const Ot=Sr()===1/0?"infinite":Sr().toString();ae(yt,"animation-iteration-count",Ot),ae(yt,"animation-play-state","paused"),be&&ae(yt,"animation-name",`${Nt.id}-alt`),(0,a.r)(()=>{ae(yt,"animation-name",Nt.id||null)})}})},wn=(be=!0)=>{(()=>{Qn.forEach(jt=>jt()),Yn.forEach(jt=>jt());const be=Xe,ke=Tt,yt=Se;gn.forEach(jt=>{const Nt=jt.classList;be.forEach(Ot=>Nt.add(Ot)),ke.forEach(Ot=>Nt.remove(Ot));for(const Ot in yt)yt.hasOwnProperty(Ot)&&ae(jt,Ot,yt[Ot])})})(),Pt.length>0&&(nr?(gn.forEach(be=>{const ke=be.animate(Pt,{id:bn,delay:Gr(),duration:An(),easing:Gn(),iterations:Sr(),fill:vn(),direction:Vn()});ke.pause(),cr.push(ke)}),cr.length>0&&(cr[0].onfinish=()=>{Yr()})):Kr(be)),me=!0},ir=be=>{if(be=Math.min(Math.max(be,0),.9999),nr)cr.forEach(ke=>{ke.currentTime=ke.effect.getComputedTiming().delay+An()*be,ke.pause()});else{const ke=`-${An()*be}ms`;gn.forEach(yt=>{Pt.length>0&&(ae(yt,"animation-delay",ke),ae(yt,"animation-play-state","paused"))})}},ii=be=>{cr.forEach(ke=>{ke.effect.updateTiming({delay:Gr(),duration:An(),easing:Gn(),iterations:Sr(),fill:vn(),direction:Vn()})}),void 0!==be&&ir(be)},ni=(be=!0,ke)=>{(0,a.r)(()=>{gn.forEach(yt=>{ae(yt,"animation-name",Gt||null),ae(yt,"animation-duration",`${An()}ms`),ae(yt,"animation-timing-function",Gn()),ae(yt,"animation-delay",void 0!==ke?`-${ke*An()}ms`:`${Gr()}ms`),ae(yt,"animation-fill-mode",vn()||null),ae(yt,"animation-direction",Vn()||null);const jt=Sr()===1/0?"infinite":Sr().toString();ae(yt,"animation-iteration-count",jt),be&&ae(yt,"animation-name",`${Gt}-alt`),(0,a.r)(()=>{ae(yt,"animation-name",Gt||null)})})})},Vr=(be=!1,ke=!0,yt)=>(be&&qn.forEach(jt=>{jt.update(be,ke,yt)}),nr?ii(yt):ni(ke,yt),Ct),Xr=()=>{me&&(nr?cr.forEach(be=>{be.pause()}):gn.forEach(be=>{ae(be,"animation-play-state","paused")}),sn=!0)},Zi=()=>{mt=void 0,Yr()},Oi=()=>{mt&&clearTimeout(mt)},Si=be=>new Promise(ke=>{(null==be?void 0:be.sync)&&(Jt=!0,qt(()=>Jt=!1,{oneTimeCallback:!0})),me||wn(),Ce&&(nr?(ir(0),ii()):ni(),Ce=!1),tt&&(Ze=qn.length+1,tt=!1),qt(()=>ke(),{oneTimeCallback:!0}),qn.forEach(yt=>{yt.play()}),nr?(cr.forEach(be=>{be.play()}),(0===Pt.length||0===gn.length)&&Yr()):(()=>{if(Oi(),(0,a.r)(()=>{gn.forEach(be=>{Pt.length>0&&ae(be,"animation-play-state","running")})}),0===Pt.length||0===gn.length)Yr();else{const be=Gr()||0,ke=An()||0,yt=Sr()||1;isFinite(yt)&&(mt=setTimeout(Zi,be+ke*yt+100)),((Ee,Fe)=>{let Be;const Et={passive:!0},dt=St=>{Ee===St.target&&(Be&&Be(),Oi(),(0,a.r)(()=>{gn.forEach(be=>{Ae(be,"animation-duration"),Ae(be,"animation-delay"),Ae(be,"animation-play-state")}),(0,a.r)(Yr)}))};Ee&&(Ee.addEventListener("webkitAnimationEnd",dt,Et),Ee.addEventListener("animationend",dt,Et),Be=()=>{Ee.removeEventListener("webkitAnimationEnd",dt,Et),Ee.removeEventListener("animationend",dt,Et)})})(gn[0])}})(),sn=!1}),_e=(be,ke)=>{const yt=Pt[0];return void 0===yt||void 0!==yt.offset&&0!==yt.offset?Pt=[{offset:0,[be]:ke},...Pt]:yt[be]=ke,Ct};return Ct={parentAnimation:Oe,elements:gn,childAnimations:qn,id:bn,animationFinish:Yr,from:_e,to:(be,ke)=>{const yt=Pt[Pt.length-1];return void 0===yt||void 0!==yt.offset&&1!==yt.offset?Pt=[...Pt,{offset:1,[be]:ke}]:yt[be]=ke,Ct},fromTo:(be,ke,yt)=>_e(be,ke).to(be,yt),parent:be=>(Oe=be,Ct),play:Si,pause:()=>(qn.forEach(be=>{be.pause()}),Xr(),Ct),stop:()=>{qn.forEach(be=>{be.stop()}),me&&(Zn(),me=!1),Mt=!1,Jt=!1,tt=!0,wt=void 0,Ye=void 0,q=void 0,Ze=0,Ce=!1,bt=!0,sn=!1},destroy:be=>(qn.forEach(ke=>{ke.destroy(be)}),(be=>{Zn(),be&&Jn()})(be),gn.length=0,qn.length=0,Pt.length=0,kn.length=0,_n.length=0,me=!1,tt=!0,Ct),keyframes:be=>{const ke=Pt!==be;return Pt=be,ke&&(be=>{nr?_t().forEach(ke=>{if(ke.effect.setKeyframes)ke.effect.setKeyframes(be);else{const yt=new KeyframeEffect(ke.effect.target,be,ke.effect.getTiming());ke.effect=yt}}):Kr()})(Pt),Ct},addAnimation:be=>{if(null!=be)if(Array.isArray(be))for(const ke of be)ke.parent(Ct),qn.push(ke);else be.parent(Ct),qn.push(be);return Ct},addElement:be=>{if(null!=be)if(1===be.nodeType)gn.push(be);else if(be.length>=0)for(let ke=0;ke<be.length;ke++)gn.push(be[ke]);else console.error("Invalid addElement value");return Ct},update:Vr,fill:be=>(dt=be,Vr(!0),Ct),direction:be=>(St=be,Vr(!0),Ct),iterations:be=>(we=be,Vr(!0),Ct),duration:be=>(!nr&&0===be&&(be=1),Be=be,Vr(!0),Ct),easing:be=>(Et=be,Vr(!0),Ct),delay:be=>(Fe=be,Vr(!0),Ct),getWebAnimations:_t,getKeyframes:()=>Pt,getFill:vn,getDirection:Vn,getDelay:Gr,getIterations:Sr,getEasing:Gn,getDuration:An,afterAddRead:be=>(on.push(be),Ct),afterAddWrite:be=>(Rr.push(be),Ct),afterClearStyles:(be=[])=>{for(const ke of be)je[ke]="";return Ct},afterStyles:(be={})=>(je=be,Ct),afterRemoveClass:be=>(ye=Ke(ye,be),Ct),afterAddClass:be=>(fe=Ke(fe,be),Ct),beforeAddRead:be=>(Qn.push(be),Ct),beforeAddWrite:be=>(Yn.push(be),Ct),beforeClearStyles:(be=[])=>{for(const ke of be)Se[ke]="";return Ct},beforeStyles:(be={})=>(Se=be,Ct),beforeRemoveClass:be=>(Tt=Ke(Tt,be),Ct),beforeAddClass:be=>(Xe=Ke(Xe,be),Ct),onFinish:qt,isRunning:()=>0!==Ze&&!sn,progressStart:(be=!1,ke)=>(qn.forEach(yt=>{yt.progressStart(be,ke)}),Xr(),Mt=be,me||wn(),Vr(!1,!0,ke),Ct),progressStep:be=>(qn.forEach(ke=>{ke.progressStep(be)}),ir(be),Ct),progressEnd:(be,ke,yt)=>(Mt=!1,qn.forEach(jt=>{jt.progressEnd(be,ke,yt)}),void 0!==yt&&(Ye=yt),Ce=!1,bt=!0,0===be?(wt="reverse"===Vn()?"normal":"reverse","reverse"===wt&&(bt=!1),nr?(Vr(),ir(1-ke)):(q=(1-ke)*An()*-1,Vr(!1,!1))):1===be&&(nr?(Vr(),ir(ke)):(q=ke*An()*-1,Vr(!1,!1))),void 0!==be&&(qt(()=>{Ye=void 0,wt=void 0,q=void 0},{oneTimeCallback:!0}),Oe||Si()),Ct)}}},3509:(dn,ft,L)=>{"use strict";L.d(ft,{G:()=>Ne});class J{constructor(Ae,De,Ie,oe,ve){this.id=De,this.name=Ie,this.disableScroll=ve,this.priority=1e6*oe+De,this.ctrl=Ae}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const Ae=this.ctrl.capture(this.name,this.id,this.priority);return Ae&&this.disableScroll&&this.ctrl.disableScroll(this.id),Ae}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class Z{constructor(Ae,De,Ie,oe){this.id=De,this.disable=Ie,this.disableScroll=oe,this.ctrl=Ae}block(){if(this.ctrl){if(this.disable)for(const Ae of this.disable)this.ctrl.disableGesture(Ae,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const Ae of this.disable)this.ctrl.enableGesture(Ae,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const We="backdrop-no-scroll",Ne=new class a{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(Ae){return new J(this,this.newID(),Ae.name,Ae.priority||0,!!Ae.disableScroll)}createBlocker(Ae={}){return new Z(this,this.newID(),Ae.disable,!!Ae.disableScroll)}start(Ae,De,Ie){return this.canStart(Ae)?(this.requestedStart.set(De,Ie),!0):(this.requestedStart.delete(De),!1)}capture(Ae,De,Ie){if(!this.start(Ae,De,Ie))return!1;const oe=this.requestedStart;let ve=-1e4;if(oe.forEach(ne=>{ve=Math.max(ve,ne)}),ve===Ie){this.capturedId=De,oe.clear();const ne=new CustomEvent("ionGestureCaptured",{detail:{gestureName:Ae}});return document.dispatchEvent(ne),!0}return oe.delete(De),!1}release(Ae){this.requestedStart.delete(Ae),this.capturedId===Ae&&(this.capturedId=void 0)}disableGesture(Ae,De){let Ie=this.disabledGestures.get(Ae);void 0===Ie&&(Ie=new Set,this.disabledGestures.set(Ae,Ie)),Ie.add(De)}enableGesture(Ae,De){const Ie=this.disabledGestures.get(Ae);void 0!==Ie&&Ie.delete(De)}disableScroll(Ae){this.disabledScroll.add(Ae),1===this.disabledScroll.size&&document.body.classList.add(We)}enableScroll(Ae){this.disabledScroll.delete(Ae),0===this.disabledScroll.size&&document.body.classList.remove(We)}canStart(Ae){return!(void 0!==this.capturedId||this.isDisabled(Ae))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(Ae){const De=this.disabledGestures.get(Ae);return!!(De&&De.size>0)}newID(){return this.gestureId++,this.gestureId}}},7593:(dn,ft,L)=>{"use strict";L.r(ft),L.d(ft,{MENU_BACK_BUTTON_PRIORITY:()=>Ne,OVERLAY_BACK_BUTTON_PRIORITY:()=>We,blockHardwareBackButton:()=>J,startHardwareBackButton:()=>Z});var a=L(5861);const J=()=>{document.addEventListener("backbutton",()=>{})},Z=()=>{const ae=document;let Ae=!1;ae.addEventListener("backbutton",()=>{if(Ae)return;let De=0,Ie=[];const oe=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(ce,Ke){Ie.push({priority:ce,handler:Ke,id:De++})}}});ae.dispatchEvent(oe);const ve=function(){var ce=(0,a.Z)(function*(Ke){try{if(null==Ke?void 0:Ke.handler){const Ve=Ke.handler(ne);null!=Ve&&(yield Ve)}}catch(Ve){console.error(Ve)}});return function(Ve){return ce.apply(this,arguments)}}(),ne=()=>{if(Ie.length>0){let ce={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};Ie.forEach(Ke=>{Ke.priority>=ce.priority&&(ce=Ke)}),Ae=!0,Ie=Ie.filter(Ke=>Ke.id!==ce.id),ve(ce).then(()=>Ae=!1)}};ne()})},We=100,Ne=99},3756:(dn,ft,L)=>{"use strict";L.d(ft,{a:()=>Ae,b:()=>De,c:()=>Z,d:()=>Ke,e:()=>Ve,f:()=>ce,g:()=>Ie,h:()=>dt,i:()=>ae,j:()=>We,k:()=>ne,l:()=>Ee,m:()=>ve,n:()=>Fe,o:()=>we,p:()=>Et,q:()=>St,r:()=>oe,s:()=>Pt,t:()=>a,u:()=>Be});const a=(Xe,Tt=0)=>new Promise(me=>{J(Xe,Tt,me)}),J=(Xe,Tt=0,me)=>{let Oe,Se;const fe={passive:!0},je=()=>{Oe&&Oe()},Ze=Mt=>{(void 0===Mt||Xe===Mt.target)&&(je(),me(Mt))};return Xe&&(Xe.addEventListener("webkitTransitionEnd",Ze,fe),Xe.addEventListener("transitionend",Ze,fe),Se=setTimeout(Ze,Tt+500),Oe=()=>{Se&&(clearTimeout(Se),Se=void 0),Xe.removeEventListener("webkitTransitionEnd",Ze,fe),Xe.removeEventListener("transitionend",Ze,fe)}),je},Z=(Xe,Tt)=>{Xe.componentOnReady?Xe.componentOnReady().then(me=>Tt(me)):oe(()=>Tt(Xe))},We=(Xe,Tt=[])=>{const me={};return Tt.forEach(Oe=>{Xe.hasAttribute(Oe)&&(null!==Xe.getAttribute(Oe)&&(me[Oe]=Xe.getAttribute(Oe)),Xe.removeAttribute(Oe))}),me},Ne=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],ae=Xe=>We(Xe,Ne),Ae=(Xe,Tt,me,Oe)=>{var Se;if("undefined"!=typeof window){const fe=window,ye=null===(Se=null==fe?void 0:fe.Ionic)||void 0===Se?void 0:Se.config;if(ye){const je=ye.get("_ael");if(je)return je(Xe,Tt,me,Oe);if(ye._ael)return ye._ael(Xe,Tt,me,Oe)}}return Xe.addEventListener(Tt,me,Oe)},De=(Xe,Tt,me,Oe)=>{var Se;if("undefined"!=typeof window){const fe=window,ye=null===(Se=null==fe?void 0:fe.Ionic)||void 0===Se?void 0:Se.config;if(ye){const je=ye.get("_rel");if(je)return je(Xe,Tt,me,Oe);if(ye._rel)return ye._rel(Xe,Tt,me,Oe)}}return Xe.removeEventListener(Tt,me,Oe)},Ie=(Xe,Tt=Xe)=>Xe.shadowRoot||Tt,oe=Xe=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Xe):"function"==typeof requestAnimationFrame?requestAnimationFrame(Xe):setTimeout(Xe),ve=Xe=>!!Xe.shadowRoot&&!!Xe.attachShadow,ne=Xe=>{const Tt=Xe.closest("ion-item");return Tt?Tt.querySelector("ion-label"):null},ce=Xe=>{if(Xe.focus(),Xe.classList.contains("ion-focusable")){const Tt=Xe.closest("ion-app");Tt&&Tt.setFocus([Xe])}},Ke=(Xe,Tt)=>{let me;const Oe=Xe.getAttribute("aria-labelledby"),Se=Xe.id;let fe=null!==Oe&&""!==Oe.trim()?Oe:Tt+"-lbl",ye=null!==Oe&&""!==Oe.trim()?document.getElementById(Oe):ne(Xe);return ye?(null===Oe&&(ye.id=fe),me=ye.textContent,ye.setAttribute("aria-hidden","true")):""!==Se.trim()&&(ye=document.querySelector(`label[for="${Se}"]`),ye&&(""!==ye.id?fe=ye.id:ye.id=fe=`${Se}-lbl`,me=ye.textContent)),{label:ye,labelId:fe,labelText:me}},Ve=(Xe,Tt,me,Oe,Se)=>{if(Xe||ve(Tt)){let fe=Tt.querySelector("input.aux-input");fe||(fe=Tt.ownerDocument.createElement("input"),fe.type="hidden",fe.classList.add("aux-input"),Tt.appendChild(fe)),fe.disabled=Se,fe.name=me,fe.value=Oe||""}},Ee=(Xe,Tt,me)=>Math.max(Xe,Math.min(Tt,me)),Fe=(Xe,Tt)=>{if(!Xe){const me="ASSERT: "+Tt;throw console.error(me),new Error(me)}},Be=Xe=>Xe.timeStamp||Date.now(),Et=Xe=>{if(Xe){const Tt=Xe.changedTouches;if(Tt&&Tt.length>0){const me=Tt[0];return{x:me.clientX,y:me.clientY}}if(void 0!==Xe.pageX)return{x:Xe.pageX,y:Xe.pageY}}return{x:0,y:0}},we=Xe=>{const Tt="rtl"===document.dir;switch(Xe){case"start":return Tt;case"end":return!Tt;default:throw new Error(`"${Xe}" is not a valid value for [side]. Use "start" or "end" instead.`)}},dt=(Xe,Tt)=>{const me=Xe._original||Xe;return{_original:Xe,emit:St(me.emit.bind(me),Tt)}},St=(Xe,Tt=0)=>{let me;return(...Oe)=>{clearTimeout(me),me=setTimeout(Xe,Tt,...Oe)}},Pt=(Xe,Tt)=>{if(null!=Xe||(Xe={}),null!=Tt||(Tt={}),Xe===Tt)return!0;const me=Object.keys(Xe);if(me.length!==Object.keys(Tt).length)return!1;for(const Oe of me)if(!(Oe in Tt)||Xe[Oe]!==Tt[Oe])return!1;return!0}},4318:(dn,ft,L)=>{"use strict";L.d(ft,{L:()=>We,a:()=>Ne,b:()=>ae,c:()=>Ae,d:()=>De,e:()=>Tt,g:()=>Se,l:()=>Pt,s:()=>me,t:()=>ve});var a=L(5861),J=L(2361),Z=L(3756);const We="ionViewWillEnter",Ne="ionViewDidEnter",ae="ionViewWillLeave",Ae="ionViewDidLeave",De="ionViewWillUnload",ve=fe=>new Promise((ye,je)=>{(0,J.c)(()=>{ne(fe),ce(fe).then(Ze=>{Ze.animation&&Ze.animation.destroy(),Ke(fe),ye(Ze)},Ze=>{Ke(fe),je(Ze)})})}),ne=fe=>{const ye=fe.enteringEl,je=fe.leavingEl;Oe(ye,je,fe.direction),fe.showGoBack?ye.classList.add("can-go-back"):ye.classList.remove("can-go-back"),me(ye,!1),ye.style.setProperty("pointer-events","none"),je&&(me(je,!1),je.style.setProperty("pointer-events","none"))},ce=function(){var fe=(0,a.Z)(function*(ye){const je=yield Ve(ye);return je&&J.B.isBrowser?Ee(je,ye):Fe(ye)});return function(je){return fe.apply(this,arguments)}}(),Ke=fe=>{const ye=fe.enteringEl,je=fe.leavingEl;ye.classList.remove("ion-page-invisible"),ye.style.removeProperty("pointer-events"),void 0!==je&&(je.classList.remove("ion-page-invisible"),je.style.removeProperty("pointer-events"))},Ve=function(){var fe=(0,a.Z)(function*(ye){return ye.leavingEl&&ye.animated&&0!==ye.duration?ye.animationBuilder?ye.animationBuilder:"ios"===ye.mode?(yield Promise.resolve().then(L.bind(L,1815))).iosTransitionAnimation:(yield Promise.resolve().then(L.bind(L,6447))).mdTransitionAnimation:void 0});return function(je){return fe.apply(this,arguments)}}(),Ee=function(){var fe=(0,a.Z)(function*(ye,je){yield Be(je,!0);const Ze=ye(je.baseEl,je);dt(je.enteringEl,je.leavingEl);const Mt=yield we(Ze,je);return je.progressCallback&&je.progressCallback(void 0),Mt&&St(je.enteringEl,je.leavingEl),{hasCompleted:Mt,animation:Ze}});return function(je,Ze){return fe.apply(this,arguments)}}(),Fe=function(){var fe=(0,a.Z)(function*(ye){const je=ye.enteringEl,Ze=ye.leavingEl;return yield Be(ye,!1),dt(je,Ze),St(je,Ze),{hasCompleted:!0}});return function(je){return fe.apply(this,arguments)}}(),Be=function(){var fe=(0,a.Z)(function*(ye,je){const Mt=(void 0!==ye.deepWait?ye.deepWait:je)?[Tt(ye.enteringEl),Tt(ye.leavingEl)]:[Xe(ye.enteringEl),Xe(ye.leavingEl)];yield Promise.all(Mt),yield Et(ye.viewIsReady,ye.enteringEl)});return function(je,Ze){return fe.apply(this,arguments)}}(),Et=function(){var fe=(0,a.Z)(function*(ye,je){ye&&(yield ye(je))});return function(je,Ze){return fe.apply(this,arguments)}}(),we=(fe,ye)=>{const je=ye.progressCallback,Ze=new Promise(Mt=>{fe.onFinish(Jt=>Mt(1===Jt))});return je?(fe.progressStart(!0),je(fe)):fe.play(),Ze},dt=(fe,ye)=>{Pt(ye,ae),Pt(fe,We)},St=(fe,ye)=>{Pt(fe,Ne),Pt(ye,Ae)},Pt=(fe,ye)=>{if(fe){const je=new CustomEvent(ye,{bubbles:!1,cancelable:!1});fe.dispatchEvent(je)}},Xe=fe=>fe?new Promise(ye=>(0,Z.c)(fe,ye)):Promise.resolve(),Tt=function(){var fe=(0,a.Z)(function*(ye){const je=ye;if(je){if(null!=je.componentOnReady){if(null!=(yield je.componentOnReady()))return}else if(null!=je.__registerHost)return void(yield new Promise(Mt=>(0,Z.r)(Mt)));yield Promise.all(Array.from(je.children).map(Tt))}});return function(je){return fe.apply(this,arguments)}}(),me=(fe,ye)=>{ye?(fe.setAttribute("aria-hidden","true"),fe.classList.add("ion-page-hidden")):(fe.hidden=!1,fe.removeAttribute("aria-hidden"),fe.classList.remove("ion-page-hidden"))},Oe=(fe,ye,je)=>{void 0!==fe&&(fe.style.zIndex="back"===je?"99":"101"),void 0!==ye&&(ye.style.zIndex="100")},Se=fe=>fe.classList.contains("ion-page")?fe:fe.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||fe},3139:(dn,ft,L)=>{"use strict";L.r(ft),L.d(ft,{GESTURE_CONTROLLER:()=>a.G,createGesture:()=>Ie});var a=L(3509);const J=(ce,Ke,Ve,Ee)=>{const Fe=Z(ce)?{capture:!!Ee.capture,passive:!!Ee.passive}:!!Ee.capture;let Be,Et;return ce.__zone_symbol__addEventListener?(Be="__zone_symbol__addEventListener",Et="__zone_symbol__removeEventListener"):(Be="addEventListener",Et="removeEventListener"),ce[Be](Ke,Ve,Fe),()=>{ce[Et](Ke,Ve,Fe)}},Z=ce=>{if(void 0===We)try{const Ke=Object.defineProperty({},"passive",{get:()=>{We=!0}});ce.addEventListener("optsTest",()=>{},Ke)}catch(Ke){We=!1}return!!We};let We;const Ae=ce=>ce instanceof Document?ce:ce.ownerDocument,Ie=ce=>{let Ke=!1,Ve=!1,Ee=!0,Fe=!1;const Be=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},ce),Et=Be.canStart,we=Be.onWillStart,dt=Be.onStart,St=Be.onEnd,Pt=Be.notCaptured,Xe=Be.onMove,Tt=Be.threshold,me=Be.passive,Oe=Be.blurOnStart,Se={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},fe=((ce,Ke,Ve)=>{const Ee=Ve*(Math.PI/180),Fe="x"===ce,Be=Math.cos(Ee),Et=Ke*Ke;let we=0,dt=0,St=!1,Pt=0;return{start(Xe,Tt){we=Xe,dt=Tt,Pt=0,St=!0},detect(Xe,Tt){if(!St)return!1;const me=Xe-we,Oe=Tt-dt,Se=me*me+Oe*Oe;if(Se<Et)return!1;const fe=Math.sqrt(Se),ye=(Fe?me:Oe)/fe;return Pt=ye>Be?1:ye<-Be?-1:0,St=!1,!0},isGesture:()=>0!==Pt,getDirection:()=>Pt}})(Be.direction,Be.threshold,Be.maxAngle),ye=a.G.createGesture({name:ce.gestureName,priority:ce.gesturePriority,disableScroll:ce.disableScroll}),Mt=()=>{!Ke||(Fe=!1,Xe&&Xe(Se))},Jt=()=>!(ye&&!ye.capture()||(Ke=!0,Ee=!1,Se.startX=Se.currentX,Se.startY=Se.currentY,Se.startTime=Se.currentTime,we?we(Se).then(wt):wt(),0)),wt=()=>{Oe&&(()=>{if("undefined"!=typeof document){const tt=document.activeElement;(null==tt?void 0:tt.blur)&&tt.blur()}})(),dt&&dt(Se),Ee=!0},Ye=()=>{Ke=!1,Ve=!1,Fe=!1,Ee=!0,ye.release()},q=tt=>{const Gt=Ke,Ct=Ee;if(Ye(),Ct){if(oe(Se,tt),Gt)return void(St&&St(Se));Pt&&Pt(Se)}},bt=((ce,Ke,Ve,Ee,Fe)=>{let Be,Et,we,dt,St,Pt,Xe,Tt=0;const me=mt=>{Tt=Date.now()+2e3,Ke(mt)&&(!Et&&Ve&&(Et=J(ce,"touchmove",Ve,Fe)),we||(we=J(mt.target,"touchend",Se,Fe)),dt||(dt=J(mt.target,"touchcancel",Se,Fe)))},Oe=mt=>{Tt>Date.now()||!Ke(mt)||(!Pt&&Ve&&(Pt=J(Ae(ce),"mousemove",Ve,Fe)),Xe||(Xe=J(Ae(ce),"mouseup",fe,Fe)))},Se=mt=>{ye(),Ee&&Ee(mt)},fe=mt=>{je(),Ee&&Ee(mt)},ye=()=>{Et&&Et(),we&&we(),dt&&dt(),Et=we=dt=void 0},je=()=>{Pt&&Pt(),Xe&&Xe(),Pt=Xe=void 0},Ze=()=>{ye(),je()},Mt=(mt=!0)=>{mt?(Be||(Be=J(ce,"touchstart",me,Fe)),St||(St=J(ce,"mousedown",Oe,Fe))):(Be&&Be(),St&&St(),Be=St=void 0,Ze())};return{enable:Mt,stop:Ze,destroy:()=>{Mt(!1),Ee=Ve=Ke=void 0}}})(Be.el,tt=>{const Gt=ne(tt);return!(Ve||!Ee||(ve(tt,Se),Se.startX=Se.currentX,Se.startY=Se.currentY,Se.startTime=Se.currentTime=Gt,Se.velocityX=Se.velocityY=Se.deltaX=Se.deltaY=0,Se.event=tt,Et&&!1===Et(Se))||(ye.release(),!ye.start()))&&(Ve=!0,0===Tt?Jt():(fe.start(Se.startX,Se.startY),!0))},tt=>{Ke?!Fe&&Ee&&(Fe=!0,oe(Se,tt),requestAnimationFrame(Mt)):(oe(Se,tt),fe.detect(Se.currentX,Se.currentY)&&(!fe.isGesture()||!Jt())&&Ce())},q,{capture:!1,passive:me}),Ce=()=>{Ye(),bt.stop(),Pt&&Pt(Se)};return{enable(tt=!0){tt||(Ke&&q(void 0),Ye()),bt.enable(tt)},destroy(){ye.destroy(),bt.destroy()}}},oe=(ce,Ke)=>{if(!Ke)return;const Ve=ce.currentX,Ee=ce.currentY,Fe=ce.currentTime;ve(Ke,ce);const Be=ce.currentX,Et=ce.currentY,dt=(ce.currentTime=ne(Ke))-Fe;if(dt>0&&dt<100){const Pt=(Et-Ee)/dt;ce.velocityX=(Be-Ve)/dt*.7+.3*ce.velocityX,ce.velocityY=.7*Pt+.3*ce.velocityY}ce.deltaX=Be-ce.startX,ce.deltaY=Et-ce.startY,ce.event=Ke},ve=(ce,Ke)=>{let Ve=0,Ee=0;if(ce){const Fe=ce.changedTouches;if(Fe&&Fe.length>0){const Be=Fe[0];Ve=Be.clientX,Ee=Be.clientY}else void 0!==ce.pageX&&(Ve=ce.pageX,Ee=ce.pageY)}Ke.currentX=Ve,Ke.currentY=Ee},ne=ce=>ce.timeStamp||Date.now()},2361:(dn,ft,L)=>{"use strict";L.d(ft,{B:()=>Si,H:()=>qn,a:()=>Ce,b:()=>Br,c:()=>ki,e:()=>rt,f:()=>oi,g:()=>tt,h:()=>_n,i:()=>qe,j:()=>Gn,k:()=>Yr,p:()=>Ee,r:()=>wn,s:()=>Ke});var a=L(5861);let Z,We,Ne,ae=!1,Ae=!1,De=!1,Ie=!1,oe=!1;const ve="undefined"!=typeof window?window:{},ne=ve.document||{head:{}},ce={$flags$:0,$resourcesUrl$:"",jmp:ee=>ee(),raf:ee=>requestAnimationFrame(ee),ael:(ee,_e,Je,pt)=>ee.addEventListener(_e,Je,pt),rel:(ee,_e,Je,pt)=>ee.removeEventListener(_e,Je,pt),ce:(ee,_e)=>new CustomEvent(ee,_e)},Ke=ee=>{Object.assign(ce,ee)},Ee=ee=>Promise.resolve(ee),Fe=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replace}catch(ee){}return!1})(),Be=(ee,_e,Je,pt)=>{Je&&Je.map(([be,ke,yt])=>{const jt=we(ee,be),Nt=Et(_e,yt),Ot=dt(be);ce.ael(jt,ke,Nt,Ot),(_e.$rmListeners$=_e.$rmListeners$||[]).push(()=>ce.rel(jt,ke,Nt,Ot))})},Et=(ee,_e)=>Je=>{try{256&ee.$flags$?ee.$lazyInstance$[_e](Je):(ee.$queuedListeners$=ee.$queuedListeners$||[]).push([_e,Je])}catch(pt){ni(pt)}},we=(ee,_e)=>4&_e?ne:8&_e?ve:16&_e?ne.body:ee,dt=ee=>0!=(2&ee),me="s-id",Oe="sty-id",ye="http://www.w3.org/1999/xlink",Mt=new WeakMap,Jt=(ee,_e,Je)=>{let pt=Wr.get(ee);Fe&&Je?(pt=pt||new CSSStyleSheet,pt.replace(_e)):pt=_e,Wr.set(ee,pt)},mt=(ee,_e,Je,pt)=>{let be=Ye(_e,Je),ke=Wr.get(be);if(ee=11===ee.nodeType?ee:ne,ke)if("string"==typeof ke){let jt,yt=Mt.get(ee=ee.head||ee);yt||Mt.set(ee,yt=new Set),yt.has(be)||(ee.host&&(jt=ee.querySelector(`[${Oe}="${be}"]`))?jt.innerHTML=ke:(jt=ne.createElement("style"),jt.innerHTML=ke,ee.insertBefore(jt,ee.querySelector("link"))),yt&&yt.add(be))}else ee.adoptedStyleSheets.includes(ke)||(ee.adoptedStyleSheets=[...ee.adoptedStyleSheets,ke]);return be},Ye=(ee,_e)=>"sc-"+(_e&&32&ee.$flags$?ee.$tagName$+"-"+_e:ee.$tagName$),q=ee=>ee.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),Ce=ee=>bi.push(ee),tt=ee=>nn(ee).$modeName$,Gt={},kn=ee=>"object"==(ee=typeof ee)||"function"===ee,_n=(ee,_e,...Je)=>{let pt=null,be=null,ke=null,yt=!1,jt=!1,Nt=[];const Ot=er=>{for(let rr=0;rr<er.length;rr++)pt=er[rr],Array.isArray(pt)?Ot(pt):null!=pt&&"boolean"!=typeof pt&&((yt="function"!=typeof ee&&!kn(pt))&&(pt=String(pt)),yt&&jt?Nt[Nt.length-1].$text$+=pt:Nt.push(yt?gn(null,pt):pt),jt=yt)};if(Ot(Je),_e){_e.key&&(be=_e.key),_e.name&&(ke=_e.name);{const er=_e.className||_e.class;er&&(_e.class="object"!=typeof er?er:Object.keys(er).filter(rr=>er[rr]).join(" "))}}if("function"==typeof ee)return ee(null===_e?{}:_e,Nt,Qn);const Tn=gn(ee,null);return Tn.$attrs$=_e,Nt.length>0&&(Tn.$children$=Nt),Tn.$key$=be,Tn.$name$=ke,Tn},gn=(ee,_e)=>({$flags$:0,$tag$:ee,$text$:_e,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),qn={},Qn={forEach:(ee,_e)=>ee.map(Yn).forEach(_e),map:(ee,_e)=>ee.map(Yn).map(_e).map(on)},Yn=ee=>({vattrs:ee.$attrs$,vchildren:ee.$children$,vkey:ee.$key$,vname:ee.$name$,vtag:ee.$tag$,vtext:ee.$text$}),on=ee=>{if("function"==typeof ee.vtag){const Je=Object.assign({},ee.vattrs);return ee.vkey&&(Je.key=ee.vkey),ee.vname&&(Je.name=ee.vname),_n(ee.vtag,Je,...ee.vchildren||[])}const _e=gn(ee.vtag,ee.vtext);return _e.$attrs$=ee.vattrs,_e.$children$=ee.vchildren,_e.$key$=ee.vkey,_e.$name$=ee.vname,_e},Rr=(ee,_e,Je,pt,be,ke)=>{if(Je!==pt){let yt=ii(ee,_e),jt=_e.toLowerCase();if("class"===_e){const Nt=ee.classList,Ot=Bn(Je),Tn=Bn(pt);Nt.remove(...Ot.filter(er=>er&&!Tn.includes(er))),Nt.add(...Tn.filter(er=>er&&!Ot.includes(er)))}else if("style"===_e){for(const Nt in Je)(!pt||null==pt[Nt])&&(Nt.includes("-")?ee.style.removeProperty(Nt):ee.style[Nt]="");for(const Nt in pt)(!Je||pt[Nt]!==Je[Nt])&&(Nt.includes("-")?ee.style.setProperty(Nt,pt[Nt]):ee.style[Nt]=pt[Nt])}else if("key"!==_e)if("ref"===_e)pt&&pt(ee);else if(yt||"o"!==_e[0]||"n"!==_e[1]){const Nt=kn(pt);if((yt||Nt&&null!==pt)&&!be)try{if(ee.tagName.includes("-"))ee[_e]=pt;else{let Tn=null==pt?"":pt;"list"===_e?yt=!1:(null==Je||ee[_e]!=Tn)&&(ee[_e]=Tn)}}catch(Tn){}let Ot=!1;jt!==(jt=jt.replace(/^xlink\:?/,""))&&(_e=jt,Ot=!0),null==pt||!1===pt?(!1!==pt||""===ee.getAttribute(_e))&&(Ot?ee.removeAttributeNS(ye,_e):ee.removeAttribute(_e)):(!yt||4&ke||be)&&!Nt&&(pt=!0===pt?"":pt,Ot?ee.setAttributeNS(ye,_e,pt):ee.setAttribute(_e,pt))}else _e="-"===_e[2]?_e.slice(3):ii(ve,jt)?jt.slice(2):jt[2]+_e.slice(3),Je&&ce.rel(ee,_e,Je,!1),pt&&ce.ael(ee,_e,pt,!1)}},cr=/\s/,Bn=ee=>ee?ee.split(cr):[],nr=(ee,_e,Je,pt)=>{const be=11===_e.$elm$.nodeType&&_e.$elm$.host?_e.$elm$.host:_e.$elm$,ke=ee&&ee.$attrs$||Gt,yt=_e.$attrs$||Gt;for(pt in ke)pt in yt||Rr(be,pt,ke[pt],void 0,Je,_e.$flags$);for(pt in yt)Rr(be,pt,ke[pt],yt[pt],Je,_e.$flags$)},_r=(ee,_e,Je,pt)=>{let yt,jt,Nt,be=_e.$children$[Je],ke=0;if(ae||(De=!0,"slot"===be.$tag$&&(Z&&pt.classList.add(Z+"-s"),be.$flags$|=be.$children$?2:1)),null!==be.$text$)yt=be.$elm$=ne.createTextNode(be.$text$);else if(1&be.$flags$)yt=be.$elm$=ne.createTextNode("");else{if(Ie||(Ie="svg"===be.$tag$),yt=be.$elm$=ne.createElementNS(Ie?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&be.$flags$?"slot-fb":be.$tag$),Ie&&"foreignObject"===be.$tag$&&(Ie=!1),nr(null,be,Ie),(ee=>null!=ee)(Z)&&yt["s-si"]!==Z&&yt.classList.add(yt["s-si"]=Z),be.$children$)for(ke=0;ke<be.$children$.length;++ke)jt=_r(ee,be,ke,yt),jt&&yt.appendChild(jt);"svg"===be.$tag$?Ie=!1:"foreignObject"===yt.tagName&&(Ie=!0)}return yt["s-hn"]=Ne,3&be.$flags$&&(yt["s-sr"]=!0,yt["s-cr"]=We,yt["s-sn"]=be.$name$||"",Nt=ee&&ee.$children$&&ee.$children$[Je],Nt&&Nt.$tag$===be.$tag$&&ee.$elm$&&_t(ee.$elm$,!1)),yt},_t=(ee,_e)=>{ce.$flags$|=1;const Je=ee.childNodes;for(let pt=Je.length-1;pt>=0;pt--){const be=Je[pt];be["s-hn"]!==Ne&&be["s-ol"]&&(cn(be).insertBefore(be,qt(be)),be["s-ol"].remove(),be["s-ol"]=void 0,De=!0),_e&&_t(be,_e)}ce.$flags$&=-2},He=(ee,_e,Je,pt,be,ke)=>{let jt,yt=ee["s-cr"]&&ee["s-cr"].parentNode||ee;for(yt.shadowRoot&&yt.tagName===Ne&&(yt=yt.shadowRoot);be<=ke;++be)pt[be]&&(jt=_r(null,Je,be,ee),jt&&(pt[be].$elm$=jt,yt.insertBefore(jt,qt(_e))))},Te=(ee,_e,Je,pt,be)=>{for(;_e<=Je;++_e)(pt=ee[_e])&&(be=pt.$elm$,Hn(pt),Ae=!0,be["s-ol"]?be["s-ol"].remove():_t(be,!0),be.remove())},kt=(ee,_e)=>ee.$tag$===_e.$tag$&&("slot"===ee.$tag$?ee.$name$===_e.$name$:ee.$key$===_e.$key$),qt=ee=>ee&&ee["s-ol"]||ee,cn=ee=>(ee["s-ol"]?ee["s-ol"]:ee).parentNode,Zn=(ee,_e)=>{const Je=_e.$elm$=ee.$elm$,pt=ee.$children$,be=_e.$children$,ke=_e.$tag$,yt=_e.$text$;let jt;null===yt?(Ie="svg"===ke||"foreignObject"!==ke&&Ie,"slot"===ke||nr(ee,_e,Ie),null!==pt&&null!==be?((ee,_e,Je,pt)=>{let si,_i,be=0,ke=0,yt=0,jt=0,Nt=_e.length-1,Ot=_e[0],Tn=_e[Nt],er=pt.length-1,rr=pt[0],Tr=pt[er];for(;be<=Nt&&ke<=er;)if(null==Ot)Ot=_e[++be];else if(null==Tn)Tn=_e[--Nt];else if(null==rr)rr=pt[++ke];else if(null==Tr)Tr=pt[--er];else if(kt(Ot,rr))Zn(Ot,rr),Ot=_e[++be],rr=pt[++ke];else if(kt(Tn,Tr))Zn(Tn,Tr),Tn=_e[--Nt],Tr=pt[--er];else if(kt(Ot,Tr))("slot"===Ot.$tag$||"slot"===Tr.$tag$)&&_t(Ot.$elm$.parentNode,!1),Zn(Ot,Tr),ee.insertBefore(Ot.$elm$,Tn.$elm$.nextSibling),Ot=_e[++be],Tr=pt[--er];else if(kt(Tn,rr))("slot"===Ot.$tag$||"slot"===Tr.$tag$)&&_t(Tn.$elm$.parentNode,!1),Zn(Tn,rr),ee.insertBefore(Tn.$elm$,Ot.$elm$),Tn=_e[--Nt],rr=pt[++ke];else{for(yt=-1,jt=be;jt<=Nt;++jt)if(_e[jt]&&null!==_e[jt].$key$&&_e[jt].$key$===rr.$key$){yt=jt;break}yt>=0?(_i=_e[yt],_i.$tag$!==rr.$tag$?si=_r(_e&&_e[ke],Je,yt,ee):(Zn(_i,rr),_e[yt]=void 0,si=_i.$elm$),rr=pt[++ke]):(si=_r(_e&&_e[ke],Je,ke,ee),rr=pt[++ke]),si&&cn(Ot.$elm$).insertBefore(si,qt(Ot.$elm$))}be>Nt?He(ee,null==pt[er+1]?null:pt[er+1].$elm$,Je,pt,ke,er):ke>er&&Te(_e,be,Nt)})(Je,pt,_e,be):null!==be?(null!==ee.$text$&&(Je.textContent=""),He(Je,null,_e,be,0,be.length-1)):null!==pt&&Te(pt,0,pt.length-1),Ie&&"svg"===ke&&(Ie=!1)):(jt=Je["s-cr"])?jt.parentNode.textContent=yt:ee.$text$!==yt&&(Je.data=yt)},Jn=ee=>{let Je,pt,be,ke,yt,jt,_e=ee.childNodes;for(pt=0,be=_e.length;pt<be;pt++)if(Je=_e[pt],1===Je.nodeType){if(Je["s-sr"])for(yt=Je["s-sn"],Je.hidden=!1,ke=0;ke<be;ke++)if(jt=_e[ke].nodeType,_e[ke]["s-hn"]!==Je["s-hn"]||""!==yt){if(1===jt&&yt===_e[ke].getAttribute("slot")){Je.hidden=!0;break}}else if(1===jt||3===jt&&""!==_e[ke].textContent.trim()){Je.hidden=!0;break}Jn(Je)}},Mn=[],Fn=ee=>{let _e,Je,pt,be,ke,yt,jt=0,Nt=ee.childNodes,Ot=Nt.length;for(;jt<Ot;jt++){if(_e=Nt[jt],_e["s-sr"]&&(Je=_e["s-cr"])&&Je.parentNode)for(pt=Je.parentNode.childNodes,be=_e["s-sn"],yt=pt.length-1;yt>=0;yt--)Je=pt[yt],!Je["s-cn"]&&!Je["s-nr"]&&Je["s-hn"]!==_e["s-hn"]&&(vr(Je,be)?(ke=Mn.find(Tn=>Tn.$nodeToRelocate$===Je),Ae=!0,Je["s-sn"]=Je["s-sn"]||be,ke?ke.$slotRefNode$=_e:Mn.push({$slotRefNode$:_e,$nodeToRelocate$:Je}),Je["s-sr"]&&Mn.map(Tn=>{vr(Tn.$nodeToRelocate$,Je["s-sn"])&&(ke=Mn.find(er=>er.$nodeToRelocate$===Je),ke&&!Tn.$slotRefNode$&&(Tn.$slotRefNode$=ke.$slotRefNode$))})):Mn.some(Tn=>Tn.$nodeToRelocate$===Je)||Mn.push({$nodeToRelocate$:Je}));1===_e.nodeType&&Fn(_e)}},vr=(ee,_e)=>1===ee.nodeType?null===ee.getAttribute("slot")&&""===_e||ee.getAttribute("slot")===_e:ee["s-sn"]===_e||""===_e,Hn=ee=>{ee.$attrs$&&ee.$attrs$.ref&&ee.$attrs$.ref(null),ee.$children$&&ee.$children$.map(Hn)},qe=ee=>nn(ee).$hostElement$,rt=(ee,_e,Je)=>{const pt=qe(ee);return{emit:be=>Lt(pt,_e,{bubbles:!!(4&Je),composed:!!(2&Je),cancelable:!!(1&Je),detail:be})}},Lt=(ee,_e,Je)=>{const pt=ce.ce(_e,Je);return ee.dispatchEvent(pt),pt},Ge=(ee,_e)=>{_e&&!ee.$onRenderResolve$&&_e["s-p"]&&_e["s-p"].push(new Promise(Je=>ee.$onRenderResolve$=Je))},ht=(ee,_e)=>{if(ee.$flags$|=16,!(4&ee.$flags$))return Ge(ee,ee.$ancestorComponent$),ki(()=>tn(ee,_e));ee.$flags$|=512},tn=(ee,_e)=>{const pt=ee.$lazyInstance$;let be;return _e&&(ee.$flags$|=256,ee.$queuedListeners$&&(ee.$queuedListeners$.map(([ke,yt])=>Sr(pt,ke,yt)),ee.$queuedListeners$=null),be=Sr(pt,"componentWillLoad")),be=Gr(be,()=>Sr(pt,"componentWillRender")),Gr(be,()=>un(ee,pt,_e))},un=function(){var ee=(0,a.Z)(function*(_e,Je,pt){const be=_e.$hostElement$,yt=be["s-rc"];pt&&(ee=>{const _e=ee.$cmpMeta$,Je=ee.$hostElement$,pt=_e.$flags$,ke=mt(Je.shadowRoot?Je.shadowRoot:Je.getRootNode(),_e,ee.$modeName$);10&pt&&(Je["s-sc"]=ke,Je.classList.add(ke+"-h"),2&pt&&Je.classList.add(ke+"-s"))})(_e);vn(_e,Je),yt&&(yt.map(Nt=>Nt()),be["s-rc"]=void 0);{const Nt=be["s-p"],Ot=()=>Vn(_e);0===Nt.length?Ot():(Promise.all(Nt).then(Ot),_e.$flags$|=4,Nt.length=0)}});return function(Je,pt,be){return ee.apply(this,arguments)}}(),vn=(ee,_e,Je)=>{try{_e=_e.render&&_e.render(),ee.$flags$&=-17,ee.$flags$|=2,((ee,_e)=>{const Je=ee.$hostElement$,pt=ee.$cmpMeta$,be=ee.$vnode$||gn(null,null),ke=(ee=>ee&&ee.$tag$===qn)(_e)?_e:_n(null,null,_e);if(Ne=Je.tagName,pt.$attrsToReflect$&&(ke.$attrs$=ke.$attrs$||{},pt.$attrsToReflect$.map(([yt,jt])=>ke.$attrs$[jt]=Je[yt])),ke.$tag$=null,ke.$flags$|=4,ee.$vnode$=ke,ke.$elm$=be.$elm$=Je.shadowRoot||Je,Z=Je["s-sc"],We=Je["s-cr"],ae=0!=(1&pt.$flags$),Ae=!1,Zn(be,ke),ce.$flags$|=1,De){Fn(ke.$elm$);let yt,jt,Nt,Ot,Tn,er,rr=0;for(;rr<Mn.length;rr++)yt=Mn[rr],jt=yt.$nodeToRelocate$,jt["s-ol"]||(Nt=ne.createTextNode(""),Nt["s-nr"]=jt,jt.parentNode.insertBefore(jt["s-ol"]=Nt,jt));for(rr=0;rr<Mn.length;rr++)if(yt=Mn[rr],jt=yt.$nodeToRelocate$,yt.$slotRefNode$){for(Ot=yt.$slotRefNode$.parentNode,Tn=yt.$slotRefNode$.nextSibling,Nt=jt["s-ol"];Nt=Nt.previousSibling;)if(er=Nt["s-nr"],er&&er["s-sn"]===jt["s-sn"]&&Ot===er.parentNode&&(er=er.nextSibling,!er||!er["s-nr"])){Tn=er;break}(!Tn&&Ot!==jt.parentNode||jt.nextSibling!==Tn)&&jt!==Tn&&(!jt["s-hn"]&&jt["s-ol"]&&(jt["s-hn"]=jt["s-ol"].parentNode.nodeName),Ot.insertBefore(jt,Tn))}else 1===jt.nodeType&&(jt.hidden=!0)}Ae&&Jn(ke.$elm$),ce.$flags$&=-2,Mn.length=0})(ee,_e)}catch(pt){ni(pt,ee.$hostElement$)}return null},Vn=ee=>{const Je=ee.$hostElement$,be=ee.$lazyInstance$,ke=ee.$ancestorComponent$;Sr(be,"componentDidRender"),64&ee.$flags$?Sr(be,"componentDidUpdate"):(ee.$flags$|=64,zr(Je),Sr(be,"componentDidLoad"),ee.$onReadyResolve$(Je),ke||An()),ee.$onInstanceResolve$(Je),ee.$onRenderResolve$&&(ee.$onRenderResolve$(),ee.$onRenderResolve$=void 0),512&ee.$flags$&&wi(()=>ht(ee,!1)),ee.$flags$&=-517},Gn=ee=>{{const _e=nn(ee),Je=_e.$hostElement$.isConnected;return Je&&2==(18&_e.$flags$)&&ht(_e,!1),Je}},An=ee=>{zr(ne.documentElement),wi(()=>Lt(ve,"appload",{detail:{namespace:"ionic"}}))},Sr=(ee,_e,Je)=>{if(ee&&ee[_e])try{return ee[_e](Je)}catch(pt){ni(pt)}},Gr=(ee,_e)=>ee&&ee.then?ee.then(_e):_e(),zr=ee=>ee.classList.add("hydrated"),st=(ee,_e,Je,pt,be,ke,yt)=>{let jt,Nt,Ot,Tn;if(1===ke.nodeType){for(jt=ke.getAttribute("c-id"),jt&&(Nt=jt.split("."),(Nt[0]===yt||"0"===Nt[0])&&(Ot={$flags$:0,$hostId$:Nt[0],$nodeId$:Nt[1],$depth$:Nt[2],$index$:Nt[3],$tag$:ke.tagName.toLowerCase(),$elm$:ke,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},_e.push(Ot),ke.removeAttribute("c-id"),ee.$children$||(ee.$children$=[]),ee.$children$[Ot.$index$]=Ot,ee=Ot,pt&&"0"===Ot.$depth$&&(pt[Ot.$index$]=Ot.$elm$))),Tn=ke.childNodes.length-1;Tn>=0;Tn--)st(ee,_e,Je,pt,be,ke.childNodes[Tn],yt);if(ke.shadowRoot)for(Tn=ke.shadowRoot.childNodes.length-1;Tn>=0;Tn--)st(ee,_e,Je,pt,be,ke.shadowRoot.childNodes[Tn],yt)}else if(8===ke.nodeType)Nt=ke.nodeValue.split("."),(Nt[1]===yt||"0"===Nt[1])&&(jt=Nt[0],Ot={$flags$:0,$hostId$:Nt[1],$nodeId$:Nt[2],$depth$:Nt[3],$index$:Nt[4],$elm$:ke,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===jt?(Ot.$elm$=ke.nextSibling,Ot.$elm$&&3===Ot.$elm$.nodeType&&(Ot.$text$=Ot.$elm$.textContent,_e.push(Ot),ke.remove(),ee.$children$||(ee.$children$=[]),ee.$children$[Ot.$index$]=Ot,pt&&"0"===Ot.$depth$&&(pt[Ot.$index$]=Ot.$elm$))):Ot.$hostId$===yt&&("s"===jt?(Ot.$tag$="slot",ke["s-sn"]=Nt[5]?Ot.$name$=Nt[5]:"",ke["s-sr"]=!0,pt&&(Ot.$elm$=ne.createElement(Ot.$tag$),Ot.$name$&&Ot.$elm$.setAttribute("name",Ot.$name$),ke.parentNode.insertBefore(Ot.$elm$,ke),ke.remove(),"0"===Ot.$depth$&&(pt[Ot.$index$]=Ot.$elm$)),Je.push(Ot),ee.$children$||(ee.$children$=[]),ee.$children$[Ot.$index$]=Ot):"r"===jt&&(pt?ke.remove():(be["s-cr"]=ke,ke["s-cn"]=!0))));else if(ee&&"style"===ee.$tag$){const er=gn(null,ke.textContent);er.$elm$=ke,er.$index$="0",ee.$children$=[er]}},Re=(ee,_e)=>{if(1===ee.nodeType){let Je=0;for(;Je<ee.childNodes.length;Je++)Re(ee.childNodes[Je],_e);if(ee.shadowRoot)for(Je=0;Je<ee.shadowRoot.childNodes.length;Je++)Re(ee.shadowRoot.childNodes[Je],_e)}else if(8===ee.nodeType){const Je=ee.nodeValue.split(".");"o"===Je[0]&&(_e.set(Je[1]+"."+Je[2],ee),ee.nodeValue="",ee["s-en"]=Je[3])}},zn=(ee,_e,Je)=>{if(_e.$members$){ee.watchers&&(_e.$watchers$=ee.watchers);const pt=Object.entries(_e.$members$),be=ee.prototype;if(pt.map(([ke,[yt]])=>{31&yt||2&Je&&32&yt?Object.defineProperty(be,ke,{get(){return((ee,_e)=>nn(this).$instanceValues$.get(_e))(0,ke)},set(jt){((ee,_e,Je,pt)=>{const be=nn(ee),ke=be.$hostElement$,yt=be.$instanceValues$.get(_e),jt=be.$flags$,Nt=be.$lazyInstance$;Je=((ee,_e)=>null==ee||kn(ee)?ee:4&_e?"false"!==ee&&(""===ee||!!ee):2&_e?parseFloat(ee):1&_e?String(ee):ee)(Je,pt.$members$[_e][0]);const Ot=Number.isNaN(yt)&&Number.isNaN(Je);if((!(8&jt)||void 0===yt)&&Je!==yt&&!Ot&&(be.$instanceValues$.set(_e,Je),Nt)){if(pt.$watchers$&&128&jt){const er=pt.$watchers$[_e];er&&er.map(rr=>{try{Nt[rr](Je,yt,_e)}catch(Tr){ni(Tr,ke)}})}2==(18&jt)&&ht(be,!1)}})(this,ke,jt,_e)},configurable:!0,enumerable:!0}):1&Je&&64&yt&&Object.defineProperty(be,ke,{value(...jt){const Nt=nn(this);return Nt.$onInstancePromise$.then(()=>Nt.$lazyInstance$[ke](...jt))}})}),1&Je){const ke=new Map;be.attributeChangedCallback=function(yt,jt,Nt){ce.jmp(()=>{const Ot=ke.get(yt);if(this.hasOwnProperty(Ot))Nt=this[Ot],delete this[Ot];else if(be.hasOwnProperty(Ot)&&"number"==typeof this[Ot]&&this[Ot]==Nt)return;this[Ot]=(null!==Nt||"boolean"!=typeof this[Ot])&&Nt})},ee.observedAttributes=pt.filter(([yt,jt])=>15&jt[0]).map(([yt,jt])=>{const Nt=jt[1]||yt;return ke.set(Nt,yt),512&jt[0]&&_e.$attrsToReflect$.push([yt,Nt]),Nt})}}return ee},Er=function(){var ee=(0,a.Z)(function*(_e,Je,pt,be,ke){if(0==(32&Je.$flags$)){{if(Je.$flags$|=32,(ke=yi(pt)).then){const Ot=()=>{};ke=yield ke,Ot()}ke.isProxied||(pt.$watchers$=ke.watchers,zn(ke,pt,2),ke.isProxied=!0);const Nt=()=>{};Je.$flags$|=8;try{new ke(Je)}catch(Ot){ni(Ot)}Je.$flags$&=-9,Je.$flags$|=128,Nt(),Wn(Je.$lazyInstance$)}if(ke.style){let Nt=ke.style;"string"!=typeof Nt&&(Nt=Nt[Je.$modeName$=(ee=>bi.map(_e=>_e(ee)).find(_e=>!!_e))(_e)]);const Ot=Ye(pt,Je.$modeName$);if(!Wr.has(Ot)){const Tn=()=>{};Jt(Ot,Nt,!!(1&pt.$flags$)),Tn()}}}const yt=Je.$ancestorComponent$,jt=()=>ht(Je,!0);yt&&yt["s-rc"]?yt["s-rc"].push(jt):jt()});return function(Je,pt,be,ke,yt){return ee.apply(this,arguments)}}(),Wn=ee=>{Sr(ee,"connectedCallback")},Ki=ee=>{const _e=ee["s-cr"]=ne.createComment("");_e["s-cn"]=!0,ee.insertBefore(_e,ee.firstChild)},Br=(ee,_e={})=>{const pt=[],be=_e.exclude||[],ke=ve.customElements,yt=ne.head,jt=yt.querySelector("meta[charset]"),Nt=ne.createElement("style"),Ot=[],Tn=ne.querySelectorAll(`[${Oe}]`);let er,rr=!0,Tr=0;for(Object.assign(ce,_e),ce.$resourcesUrl$=new URL(_e.resourcesUrl||"./",ne.baseURI).href,ce.$flags$|=2;Tr<Tn.length;Tr++)Jt(Tn[Tr].getAttribute(Oe),q(Tn[Tr].innerHTML),!0);ee.map(si=>{si[1].map(_i=>{const ot={$flags$:_i[0],$tagName$:_i[1],$members$:_i[2],$listeners$:_i[3]};ot.$members$=_i[2],ot.$listeners$=_i[3],ot.$attrsToReflect$=[],ot.$watchers$={};const nt=ot.$tagName$,It=class extends HTMLElement{constructor(Zt){super(Zt),ir(Zt=this,ot),1&ot.$flags$&&Zt.attachShadow({mode:"open",delegatesFocus:!!(16&ot.$flags$)})}connectedCallback(){er&&(clearTimeout(er),er=null),rr?Ot.push(this):ce.jmp(()=>(ee=>{if(0==(1&ce.$flags$)){const _e=nn(ee),Je=_e.$cmpMeta$,pt=()=>{};if(1&_e.$flags$)Be(ee,_e,Je.$listeners$),Wn(_e.$lazyInstance$);else{let be;if(_e.$flags$|=1,be=ee.getAttribute(me),be){if(1&Je.$flags$){const ke=mt(ee.shadowRoot,Je,ee.getAttribute("s-mode"));ee.classList.remove(ke+"-h",ke+"-s")}((ee,_e,Je,pt)=>{const ke=ee.shadowRoot,yt=[],Nt=ke?[]:null,Ot=pt.$vnode$=gn(_e,null);ce.$orgLocNodes$||Re(ne.body,ce.$orgLocNodes$=new Map),ee[me]=Je,ee.removeAttribute(me),st(Ot,yt,[],Nt,ee,ee,Je),yt.map(Tn=>{const er=Tn.$hostId$+"."+Tn.$nodeId$,rr=ce.$orgLocNodes$.get(er),Tr=Tn.$elm$;rr&&""===rr["s-en"]&&rr.parentNode.insertBefore(Tr,rr.nextSibling),ke||(Tr["s-hn"]=_e,rr&&(Tr["s-ol"]=rr,Tr["s-ol"]["s-nr"]=Tr)),ce.$orgLocNodes$.delete(er)}),ke&&Nt.map(Tn=>{Tn&&ke.appendChild(Tn)})})(ee,Je.$tagName$,be,_e)}be||12&Je.$flags$&&Ki(ee);{let ke=ee;for(;ke=ke.parentNode||ke.host;)if(1===ke.nodeType&&ke.hasAttribute("s-id")&&ke["s-p"]||ke["s-p"]){Ge(_e,_e.$ancestorComponent$=ke);break}}Je.$members$&&Object.entries(Je.$members$).map(([ke,[yt]])=>{if(31&yt&&ee.hasOwnProperty(ke)){const jt=ee[ke];delete ee[ke],ee[ke]=jt}}),wi(()=>Er(ee,_e,Je))}pt()}})(this))}disconnectedCallback(){ce.jmp(()=>(ee=>{if(0==(1&ce.$flags$)){const _e=nn(this),Je=_e.$lazyInstance$;_e.$rmListeners$&&(_e.$rmListeners$.map(pt=>pt()),_e.$rmListeners$=void 0),Sr(Je,"disconnectedCallback")}})())}componentOnReady(){return nn(this).$onReadyPromise$}};ot.$lazyBundleId$=si[0],!be.includes(nt)&&!ke.get(nt)&&(pt.push(nt),ke.define(nt,zn(It,ot,1)))})}),Nt.innerHTML=pt+"{visibility:hidden}.hydrated{visibility:inherit}",Nt.setAttribute("data-styles",""),yt.insertBefore(Nt,jt?jt.nextSibling:yt.firstChild),rr=!1,Ot.length?Ot.map(si=>si.connectedCallback()):ce.jmp(()=>er=setTimeout(An,30))},Yr=ee=>{const _e=new URL(ee,ce.$resourcesUrl$);return _e.origin!==ve.location.origin?_e.href:_e.pathname},Kr=new WeakMap,nn=ee=>Kr.get(ee),wn=(ee,_e)=>Kr.set(_e.$lazyInstance$=ee,_e),ir=(ee,_e)=>{const Je={$flags$:0,$hostElement$:ee,$cmpMeta$:_e,$instanceValues$:new Map};return Je.$onInstancePromise$=new Promise(pt=>Je.$onInstanceResolve$=pt),Je.$onReadyPromise$=new Promise(pt=>Je.$onReadyResolve$=pt),ee["s-p"]=[],ee["s-rc"]=[],Be(ee,Je,_e.$listeners$),Kr.set(ee,Je)},ii=(ee,_e)=>_e in ee,ni=(ee,_e)=>(0,console.error)(ee,_e),Vr=new Map,yi=(ee,_e,Je)=>{const pt=ee.$tagName$.replace(/-/g,"_"),be=ee.$lazyBundleId$,ke=Vr.get(be);return ke?ke[pt]:L(863)(`./${be}.entry.js`).then(yt=>(Vr.set(be,yt),yt[pt]),ni)},Wr=new Map,bi=[],Xr=[],sr=[],Zi=(ee,_e)=>Je=>{ee.push(Je),oe||(oe=!0,_e&&4&ce.$flags$?wi(Mi):ce.raf(Mi))},Oi=ee=>{for(let _e=0;_e<ee.length;_e++)try{ee[_e](performance.now())}catch(Je){ni(Je)}ee.length=0},Mi=()=>{Oi(Xr),Oi(sr),(oe=Xr.length>0)&&ce.raf(Mi)},wi=ee=>Ee().then(ee),oi=Zi(Xr,!1),ki=Zi(sr,!0),Si={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1}},7726:(dn,ft,L)=>{"use strict";L.d(ft,{m:()=>ve});var a=L(5861),J=L(7593),Z=L(3756),We=L(6254),Ne=L(9442);const ae=ne=>(0,Ne.c)().duration(ne?400:300),Ae=ne=>{let ce,Ke;const Ve=ne.width+8,Ee=(0,Ne.c)(),Fe=(0,Ne.c)();ne.isEndSide?(ce=Ve+"px",Ke="0px"):(ce=-Ve+"px",Ke="0px"),Ee.addElement(ne.menuInnerEl).fromTo("transform",`translateX(${ce})`,`translateX(${Ke})`);const Et="ios"===(0,We.b)(ne),we=Et?.2:.25;return Fe.addElement(ne.backdropEl).fromTo("opacity",.01,we),ae(Et).addAnimation([Ee,Fe])},De=ne=>{let ce,Ke;const Ve=(0,We.b)(ne),Ee=ne.width;ne.isEndSide?(ce=-Ee+"px",Ke=Ee+"px"):(ce=Ee+"px",Ke=-Ee+"px");const Fe=(0,Ne.c)().addElement(ne.menuInnerEl).fromTo("transform",`translateX(${Ke})`,"translateX(0px)"),Be=(0,Ne.c)().addElement(ne.contentEl).fromTo("transform","translateX(0px)",`translateX(${ce})`),Et=(0,Ne.c)().addElement(ne.backdropEl).fromTo("opacity",.01,.32);return ae("ios"===Ve).addAnimation([Fe,Be,Et])},Ie=ne=>{const ce=(0,We.b)(ne),Ke=ne.width*(ne.isEndSide?-1:1)+"px",Ve=(0,Ne.c)().addElement(ne.contentEl).fromTo("transform","translateX(0px)",`translateX(${Ke})`);return ae("ios"===ce).addAnimation(Ve)},ve=(()=>{const ne=new Map,ce=[],Ke=function(){var wt=(0,a.Z)(function*(Ye){const q=yield dt(Ye);return!!q&&q.open()});return function(q){return wt.apply(this,arguments)}}(),Ve=function(){var wt=(0,a.Z)(function*(Ye){const q=yield void 0!==Ye?dt(Ye):St();return void 0!==q&&q.close()});return function(q){return wt.apply(this,arguments)}}(),Ee=function(){var wt=(0,a.Z)(function*(Ye){const q=yield dt(Ye);return!!q&&q.toggle()});return function(q){return wt.apply(this,arguments)}}(),Fe=function(){var wt=(0,a.Z)(function*(Ye,q){const bt=yield dt(q);return bt&&(bt.disabled=!Ye),bt});return function(q,bt){return wt.apply(this,arguments)}}(),Be=function(){var wt=(0,a.Z)(function*(Ye,q){const bt=yield dt(q);return bt&&(bt.swipeGesture=Ye),bt});return function(q,bt){return wt.apply(this,arguments)}}(),Et=function(){var wt=(0,a.Z)(function*(Ye){if(null!=Ye){const q=yield dt(Ye);return void 0!==q&&q.isOpen()}return void 0!==(yield St())});return function(q){return wt.apply(this,arguments)}}(),we=function(){var wt=(0,a.Z)(function*(Ye){const q=yield dt(Ye);return!!q&&!q.disabled});return function(q){return wt.apply(this,arguments)}}(),dt=function(){var wt=(0,a.Z)(function*(Ye){return yield mt(),"start"===Ye||"end"===Ye?Jt(Ce=>Ce.side===Ye&&!Ce.disabled)||Jt(Ce=>Ce.side===Ye):null!=Ye?Jt(bt=>bt.menuId===Ye):Jt(bt=>!bt.disabled)||(ce.length>0?ce[0].el:void 0)});return function(q){return wt.apply(this,arguments)}}(),St=function(){var wt=(0,a.Z)(function*(){return yield mt(),je()});return function(){return wt.apply(this,arguments)}}(),Pt=function(){var wt=(0,a.Z)(function*(){return yield mt(),Ze()});return function(){return wt.apply(this,arguments)}}(),Xe=function(){var wt=(0,a.Z)(function*(){return yield mt(),Mt()});return function(){return wt.apply(this,arguments)}}(),Tt=(wt,Ye)=>{ne.set(wt,Ye)},Se=wt=>{const Ye=wt.side;ce.filter(q=>q.side===Ye&&q!==wt).forEach(q=>q.disabled=!0)},fe=function(){var wt=(0,a.Z)(function*(Ye,q,bt){if(Mt())return!1;if(q){const Ce=yield St();Ce&&Ye.el!==Ce&&(yield Ce.setOpen(!1,!1))}return Ye._setOpen(q,bt)});return function(q,bt,Ce){return wt.apply(this,arguments)}}(),je=()=>Jt(wt=>wt._isOpen),Ze=()=>ce.map(wt=>wt.el),Mt=()=>ce.some(wt=>wt.isAnimating),Jt=wt=>{const Ye=ce.find(wt);if(void 0!==Ye)return Ye.el},mt=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(wt=>new Promise(Ye=>(0,Z.c)(wt,Ye))));return Tt("reveal",Ie),Tt("push",De),Tt("overlay",Ae),"undefined"!=typeof document&&document.addEventListener("ionBackButton",wt=>{const Ye=je();Ye&&wt.detail.register(J.MENU_BACK_BUTTON_PRIORITY,()=>Ye.close())}),{registerAnimation:Tt,get:dt,getMenus:Pt,getOpen:St,isEnabled:we,swipeGesture:Be,isAnimating:Xe,isOpen:Et,enable:Fe,toggle:Ee,close:Ve,open:Ke,_getOpenSync:je,_createAnimation:(wt,Ye)=>{const q=ne.get(wt);if(!q)throw new Error("animation not registered");return q(Ye)},_register:wt=>{ce.indexOf(wt)<0&&(wt.disabled||Se(wt),ce.push(wt))},_unregister:wt=>{const Ye=ce.indexOf(wt);Ye>-1&&ce.splice(Ye,1)},_setOpen:fe,_setActiveMenu:Se}})()},6254:(dn,ft,L)=>{"use strict";L.d(ft,{a:()=>ve,b:()=>Mt,c:()=>Z,g:()=>oe,i:()=>Jt});var a=L(2361);class J{constructor(){this.m=new Map}reset(wt){this.m=new Map(Object.entries(wt))}get(wt,Ye){const q=this.m.get(wt);return void 0!==q?q:Ye}getBoolean(wt,Ye=!1){const q=this.m.get(wt);return void 0===q?Ye:"string"==typeof q?"true"===q:!!q}getNumber(wt,Ye){const q=parseFloat(this.m.get(wt));return isNaN(q)?void 0!==Ye?Ye:NaN:q}set(wt,Ye){this.m.set(wt,Ye)}}const Z=new J,Ie="ionic-persist-config",oe=mt=>ne(mt),ve=(mt,wt)=>("string"==typeof mt&&(wt=mt,mt=void 0),oe(mt).includes(wt)),ne=(mt=window)=>{if(void 0===mt)return[];mt.Ionic=mt.Ionic||{};let wt=mt.Ionic.platforms;return null==wt&&(wt=mt.Ionic.platforms=ce(mt),wt.forEach(Ye=>mt.document.documentElement.classList.add(`plt-${Ye}`))),wt},ce=mt=>{const wt=Z.get("platform");return Object.keys(je).filter(Ye=>{const q=null==wt?void 0:wt[Ye];return"function"==typeof q?q(mt):je[Ye](mt)})},Ve=mt=>!!(fe(mt,/iPad/i)||fe(mt,/Macintosh/i)&&St(mt)),Be=mt=>fe(mt,/android|sink/i),St=mt=>ye(mt,"(any-pointer:coarse)"),Xe=mt=>Tt(mt)||me(mt),Tt=mt=>!!(mt.cordova||mt.phonegap||mt.PhoneGap),me=mt=>{const wt=mt.Capacitor;return!!(null==wt?void 0:wt.isNative)},fe=(mt,wt)=>wt.test(mt.navigator.userAgent),ye=(mt,wt)=>{var Ye;return null===(Ye=mt.matchMedia)||void 0===Ye?void 0:Ye.call(mt,wt).matches},je={ipad:Ve,iphone:mt=>fe(mt,/iPhone/i),ios:mt=>fe(mt,/iPhone|iPod/i)||Ve(mt),android:Be,phablet:mt=>{const wt=mt.innerWidth,Ye=mt.innerHeight,q=Math.min(wt,Ye),bt=Math.max(wt,Ye);return q>390&&q<520&&bt>620&&bt<800},tablet:mt=>{const wt=mt.innerWidth,Ye=mt.innerHeight,q=Math.min(wt,Ye),bt=Math.max(wt,Ye);return Ve(mt)||(mt=>Be(mt)&&!fe(mt,/mobile/i))(mt)||q>460&&q<820&&bt>780&&bt<1400},cordova:Tt,capacitor:me,electron:mt=>fe(mt,/electron/i),pwa:mt=>{var wt;return!(!(null===(wt=mt.matchMedia)||void 0===wt?void 0:wt.call(mt,"(display-mode: standalone)").matches)&&!mt.navigator.standalone)},mobile:St,mobileweb:mt=>St(mt)&&!Xe(mt),desktop:mt=>!St(mt),hybrid:Xe};let Ze;const Mt=mt=>mt&&(0,a.g)(mt)||Ze,Jt=(mt={})=>{if("undefined"==typeof window)return;const wt=window.document,Ye=window,q=Ye.Ionic=Ye.Ionic||{},bt={};mt._ael&&(bt.ael=mt._ael),mt._rel&&(bt.rel=mt._rel),mt._ce&&(bt.ce=mt._ce),(0,a.s)(bt);const Ce=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(mt=>{try{const wt=mt.sessionStorage.getItem(Ie);return null!==wt?JSON.parse(wt):{}}catch(wt){return{}}})(Ye)),{persistConfig:!1}),q.config),(mt=>{const wt={};return mt.location.search.slice(1).split("&").map(Ye=>Ye.split("=")).map(([Ye,q])=>[decodeURIComponent(Ye),decodeURIComponent(q)]).filter(([Ye])=>((mt,wt)=>mt.substr(0,wt.length)===wt)(Ye,"ionic:")).map(([Ye,q])=>[Ye.slice("ionic:".length),q]).forEach(([Ye,q])=>{wt[Ye]=q}),wt})(Ye)),mt);Z.reset(Ce),Z.getBoolean("persistConfig")&&((mt,wt)=>{try{mt.sessionStorage.setItem(Ie,JSON.stringify(wt))}catch(Ye){return}})(Ye,Ce),ne(Ye),q.config=Z,q.mode=Ze=Z.get("mode",wt.documentElement.getAttribute("mode")||(ve(Ye,"ios")?"ios":"md")),Z.set("mode",Ze),wt.documentElement.setAttribute("mode",Ze),wt.documentElement.classList.add(Ze),Z.getBoolean("_testing")&&Z.set("animated",!1);const tt=Ct=>{var sn;return null===(sn=Ct.tagName)||void 0===sn?void 0:sn.startsWith("ION-")},Gt=Ct=>["ios","md"].includes(Ct);(0,a.a)(Ct=>{for(;Ct;){const sn=Ct.mode||Ct.getAttribute("mode");if(sn){if(Gt(sn))return sn;tt(Ct)&&console.warn('Invalid ionic mode: "'+sn+'", expected: "ios" or "md"')}Ct=Ct.parentElement}return Ze})}},1815:(dn,ft,L)=>{"use strict";L.r(ft),L.d(ft,{iosTransitionAnimation:()=>ne,shadow:()=>ae});var a=L(9442),J=L(4318);L(2361);const Ne=ce=>document.querySelector(`${ce}.ion-cloned-element`),ae=ce=>ce.shadowRoot||ce,Ae=ce=>{const Ke="ION-TABS"===ce.tagName?ce:ce.querySelector("ion-tabs"),Ve="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=Ke){const Ee=Ke.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=Ee?Ee.querySelector(Ve):null}return ce.querySelector(Ve)},De=(ce,Ke)=>{const Ve="ION-TABS"===ce.tagName?ce:ce.querySelector("ion-tabs");let Ee=[];if(null!=Ve){const Fe=Ve.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=Fe&&(Ee=Fe.querySelectorAll("ion-buttons"))}else Ee=ce.querySelectorAll("ion-buttons");for(const Fe of Ee){const Be=Fe.closest("ion-header"),Et=Be&&!Be.classList.contains("header-collapse-condense-inactive"),we=Fe.querySelector("ion-back-button"),dt=Fe.classList.contains("buttons-collapse"),St="start"===Fe.slot||""===Fe.slot;if(null!==we&&St&&(dt&&Et&&Ke||!dt))return we}return null},oe=(ce,Ke,Ve,Ee,Fe,Be)=>{const Et=Ke?`calc(100% - ${Be.right+4}px)`:Be.left-4+"px",we=Ke?"7px":"-7px",dt=Ke?"-4px":"4px",St=Ke?"-4px":"4px",Pt=Ke?"right":"left",Xe=Ke?"left":"right",Oe=Ve?[{offset:0,opacity:1,transform:`translate3d(${dt}, ${Be.top-46}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${we}, ${Fe.top-40}px, 0) scale(2.1)`}]:[{offset:0,opacity:0,transform:`translate3d(${we}, ${Fe.top-40}px, 0) scale(2.1)`},{offset:1,opacity:1,transform:`translate3d(${dt}, ${Be.top-46}px, 0) scale(1)`}],ye=Ve?[{offset:0,opacity:1,transform:`translate3d(${St}, ${Be.top-46}px, 0) scale(1)`},{offset:.2,opacity:0,transform:`translate3d(${St}, ${Be.top-41}px, 0) scale(0.6)`},{offset:1,opacity:0,transform:`translate3d(${St}, ${Be.top-41}px, 0) scale(0.6)`}]:[{offset:0,opacity:0,transform:`translate3d(${St}, ${Be.top-41}px, 0) scale(0.6)`},{offset:1,opacity:1,transform:`translate3d(${St}, ${Be.top-46}px, 0) scale(1)`}],je=(0,a.c)(),Ze=(0,a.c)(),Mt=Ne("ion-back-button"),Jt=ae(Mt).querySelector(".button-text"),mt=ae(Mt).querySelector("ion-icon");Mt.text=Ee.text,Mt.mode=Ee.mode,Mt.icon=Ee.icon,Mt.color=Ee.color,Mt.disabled=Ee.disabled,Mt.style.setProperty("display","block"),Mt.style.setProperty("position","fixed"),Ze.addElement(mt),je.addElement(Jt),je.beforeStyles({"transform-origin":`${Pt} center`}).beforeAddWrite(()=>{Ee.style.setProperty("display","none"),Mt.style.setProperty(Pt,Et)}).afterAddWrite(()=>{Ee.style.setProperty("display",""),Mt.style.setProperty("display","none"),Mt.style.removeProperty(Pt)}).keyframes(Oe),Ze.beforeStyles({"transform-origin":`${Xe} center`}).keyframes(ye),ce.addAnimation([je,Ze])},ve=(ce,Ke,Ve,Ee,Fe,Be)=>{const Et=Ke?`calc(100% - ${Fe.right}px)`:`${Fe.left}px`,we=Ke?"-18px":"18px",dt=Ke?"right":"left",Xe=Ve?[{offset:0,opacity:0,transform:`translate3d(${we}, ${Be.top-4}px, 0) scale(0.49)`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0, ${Fe.top-2}px, 0) scale(1)`}]:[{offset:0,opacity:.99,transform:`translate3d(0, ${Fe.top-2}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${we}, ${Be.top-4}px, 0) scale(0.5)`}],Tt=Ne("ion-title"),me=(0,a.c)();Tt.innerText=Ee.innerText,Tt.size=Ee.size,Tt.color=Ee.color,me.addElement(Tt),me.beforeStyles({"transform-origin":`${dt} center`,height:"46px",display:"",position:"relative",[dt]:Et}).beforeAddWrite(()=>{Ee.style.setProperty("display","none")}).afterAddWrite(()=>{Ee.style.setProperty("display",""),Tt.style.setProperty("display","none")}).keyframes(Xe),ce.addAnimation(me)},ne=(ce,Ke)=>{try{const Ve="cubic-bezier(0.32,0.72,0,1)",Ee="opacity",Fe="transform",Be="0%",we="rtl"===ce.ownerDocument.dir,dt=we?"-99.5%":"99.5%",St=we?"33%":"-33%",Pt=Ke.enteringEl,Xe=Ke.leavingEl,Tt="back"===Ke.direction,me=Pt.querySelector(":scope > ion-content"),Oe=Pt.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),Se=Pt.querySelectorAll(":scope > ion-header > ion-toolbar"),fe=(0,a.c)(),ye=(0,a.c)();if(fe.addElement(Pt).duration(Ke.duration||540).easing(Ke.easing||Ve).fill("both").beforeRemoveClass("ion-page-invisible"),Xe&&ce){const Jt=(0,a.c)();Jt.addElement(ce),fe.addAnimation(Jt)}if(me||0!==Se.length||0!==Oe.length?(ye.addElement(me),ye.addElement(Oe)):ye.addElement(Pt.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),fe.addAnimation(ye),Tt?ye.beforeClearStyles([Ee]).fromTo("transform",`translateX(${St})`,`translateX(${Be})`).fromTo(Ee,.8,1):ye.beforeClearStyles([Ee]).fromTo("transform",`translateX(${dt})`,`translateX(${Be})`),me){const Jt=ae(me).querySelector(".transition-effect");if(Jt){const mt=Jt.querySelector(".transition-cover"),wt=Jt.querySelector(".transition-shadow"),Ye=(0,a.c)(),q=(0,a.c)(),bt=(0,a.c)();Ye.addElement(Jt).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),q.addElement(mt).beforeClearStyles([Ee]).fromTo(Ee,0,.1),bt.addElement(wt).beforeClearStyles([Ee]).fromTo(Ee,.03,.7),Ye.addAnimation([q,bt]),ye.addAnimation([Ye])}}const je=Pt.querySelector("ion-header.header-collapse-condense"),{forward:Ze,backward:Mt}=((ce,Ke,Ve,Ee,Fe)=>{const Be=De(Ee,Ve),Et=Ae(Fe),we=Ae(Ee),dt=De(Fe,Ve),St=null!==Be&&null!==Et&&!Ve,Pt=null!==we&&null!==dt&&Ve;if(St){const Xe=Et.getBoundingClientRect(),Tt=Be.getBoundingClientRect();ve(ce,Ke,Ve,Et,Xe,Tt),oe(ce,Ke,Ve,Be,Xe,Tt)}else if(Pt){const Xe=we.getBoundingClientRect(),Tt=dt.getBoundingClientRect();ve(ce,Ke,Ve,we,Xe,Tt),oe(ce,Ke,Ve,dt,Xe,Tt)}return{forward:St,backward:Pt}})(fe,we,Tt,Pt,Xe);if(Se.forEach(Jt=>{const mt=(0,a.c)();mt.addElement(Jt),fe.addAnimation(mt);const wt=(0,a.c)();wt.addElement(Jt.querySelector("ion-title"));const Ye=(0,a.c)(),q=Array.from(Jt.querySelectorAll("ion-buttons,[menuToggle]")),bt=Jt.closest("ion-header"),Ce=null==bt?void 0:bt.classList.contains("header-collapse-condense-inactive");let tt;tt=q.filter(Tt?kn=>{const _n=kn.classList.contains("buttons-collapse");return _n&&!Ce||!_n}:kn=>!kn.classList.contains("buttons-collapse")),Ye.addElement(tt);const Gt=(0,a.c)();Gt.addElement(Jt.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const Ct=(0,a.c)();Ct.addElement(ae(Jt).querySelector(".toolbar-background"));const sn=(0,a.c)(),bn=Jt.querySelector("ion-back-button");if(bn&&sn.addElement(bn),mt.addAnimation([wt,Ye,Gt,Ct,sn]),Ye.fromTo(Ee,.01,1),Gt.fromTo(Ee,.01,1),Tt)Ce||wt.fromTo("transform",`translateX(${St})`,`translateX(${Be})`).fromTo(Ee,.01,1),Gt.fromTo("transform",`translateX(${St})`,`translateX(${Be})`),sn.fromTo(Ee,.01,1);else if(je||wt.fromTo("transform",`translateX(${dt})`,`translateX(${Be})`).fromTo(Ee,.01,1),Gt.fromTo("transform",`translateX(${dt})`,`translateX(${Be})`),Ct.beforeClearStyles([Ee,"transform"]),(null==bt?void 0:bt.translucent)?Ct.fromTo("transform",we?"translateX(-100%)":"translateX(100%)","translateX(0px)"):Ct.fromTo(Ee,.01,"var(--opacity)"),Ze||sn.fromTo(Ee,.01,1),bn&&!Ze){const _n=(0,a.c)();_n.addElement(ae(bn).querySelector(".button-text")).fromTo("transform",we?"translateX(-100px)":"translateX(100px)","translateX(0px)"),mt.addAnimation(_n)}}),Xe){const Jt=(0,a.c)(),mt=Xe.querySelector(":scope > ion-content"),wt=Xe.querySelectorAll(":scope > ion-header > ion-toolbar"),Ye=Xe.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(mt||0!==wt.length||0!==Ye.length?(Jt.addElement(mt),Jt.addElement(Ye)):Jt.addElement(Xe.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),fe.addAnimation(Jt),Tt){Jt.beforeClearStyles([Ee]).fromTo("transform",`translateX(${Be})`,we?"translateX(-100%)":"translateX(100%)");const q=(0,J.g)(Xe);fe.afterAddWrite(()=>{"normal"===fe.getDirection()&&q.style.setProperty("display","none")})}else Jt.fromTo("transform",`translateX(${Be})`,`translateX(${St})`).fromTo(Ee,1,.8);if(mt){const q=ae(mt).querySelector(".transition-effect");if(q){const bt=q.querySelector(".transition-cover"),Ce=q.querySelector(".transition-shadow"),tt=(0,a.c)(),Gt=(0,a.c)(),Ct=(0,a.c)();tt.addElement(q).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Gt.addElement(bt).beforeClearStyles([Ee]).fromTo(Ee,.1,0),Ct.addElement(Ce).beforeClearStyles([Ee]).fromTo(Ee,.7,.03),tt.addAnimation([Gt,Ct]),Jt.addAnimation([tt])}}wt.forEach(q=>{const bt=(0,a.c)();bt.addElement(q);const Ce=(0,a.c)();Ce.addElement(q.querySelector("ion-title"));const tt=(0,a.c)(),Gt=q.querySelectorAll("ion-buttons,[menuToggle]"),Ct=q.closest("ion-header"),sn=null==Ct?void 0:Ct.classList.contains("header-collapse-condense-inactive"),bn=Array.from(Gt).filter(Qn=>{const Yn=Qn.classList.contains("buttons-collapse");return Yn&&!sn||!Yn});tt.addElement(bn);const kn=(0,a.c)(),_n=q.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");_n.length>0&&kn.addElement(_n);const gn=(0,a.c)();gn.addElement(ae(q).querySelector(".toolbar-background"));const qn=(0,a.c)(),Zr=q.querySelector("ion-back-button");if(Zr&&qn.addElement(Zr),bt.addAnimation([Ce,tt,kn,qn,gn]),fe.addAnimation(bt),qn.fromTo(Ee,.99,0),tt.fromTo(Ee,.99,0),kn.fromTo(Ee,.99,0),Tt){if(sn||Ce.fromTo("transform",`translateX(${Be})`,we?"translateX(-100%)":"translateX(100%)").fromTo(Ee,.99,0),kn.fromTo("transform",`translateX(${Be})`,we?"translateX(-100%)":"translateX(100%)"),gn.beforeClearStyles([Ee,"transform"]),(null==Ct?void 0:Ct.translucent)?gn.fromTo("transform","translateX(0px)",we?"translateX(-100%)":"translateX(100%)"):gn.fromTo(Ee,"var(--opacity)",0),Zr&&!Mt){const Yn=(0,a.c)();Yn.addElement(ae(Zr).querySelector(".button-text")).fromTo("transform",`translateX(${Be})`,`translateX(${(we?-124:124)+"px"})`),bt.addAnimation(Yn)}}else sn||Ce.fromTo("transform",`translateX(${Be})`,`translateX(${St})`).fromTo(Ee,.99,0).afterClearStyles([Fe,Ee]),kn.fromTo("transform",`translateX(${Be})`,`translateX(${St})`).afterClearStyles([Fe,Ee]),qn.afterClearStyles([Ee]),Ce.afterClearStyles([Ee]),tt.afterClearStyles([Ee])})}return fe}catch(Ve){throw Ve}}},6447:(dn,ft,L)=>{"use strict";L.r(ft),L.d(ft,{mdTransitionAnimation:()=>We});var a=L(9442),J=L(4318);L(2361);const We=(Ne,ae)=>{const Ie="back"===ae.direction,ve=ae.leavingEl,ne=(0,J.g)(ae.enteringEl),ce=ne.querySelector("ion-toolbar"),Ke=(0,a.c)();if(Ke.addElement(ne).fill("both").beforeRemoveClass("ion-page-invisible"),Ie?Ke.duration(ae.duration||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):Ke.duration(ae.duration||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),ce){const Ve=(0,a.c)();Ve.addElement(ce),Ke.addAnimation(Ve)}if(ve&&Ie){Ke.duration(ae.duration||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const Ve=(0,a.c)();Ve.addElement((0,J.g)(ve)).onFinish(Ee=>{1===Ee&&Ve.elements.length>0&&Ve.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),Ke.addAnimation(Ve)}return Ke}},599:(dn,ft,L)=>{"use strict";L.d(ft,{B:()=>q,a:()=>De,b:()=>Ie,c:()=>ce,d:()=>Se,e:()=>Ve,f:()=>ye,g:()=>Mt,h:()=>ae,i:()=>mt,j:()=>Et,k:()=>me,l:()=>oe,m:()=>ve,s:()=>Ye});var a=L(5861),J=L(6254),Z=L(7593),We=L(3756);let Ne=0;const ae=new WeakMap,Ae=bt=>({create:Ce=>Ee(bt,Ce),dismiss:(Ce,tt,Gt)=>Xe(document,Ce,tt,bt,Gt),getTop:()=>(0,a.Z)(function*(){return me(document,bt)})()}),De=Ae("ion-alert"),Ie=Ae("ion-action-sheet"),oe=Ae("ion-loading"),ve=Ae("ion-modal"),ce=Ae("ion-popover"),Ve=bt=>{"undefined"!=typeof document&&Pt(document);const Ce=Ne++;bt.overlayIndex=Ce,bt.hasAttribute("id")||(bt.id=`ion-overlay-${Ce}`)},Ee=(bt,Ce)=>"undefined"!=typeof window&&void 0!==window.customElements?window.customElements.whenDefined(bt).then(()=>{const tt=document.createElement(bt);return tt.classList.add("overlay-hidden"),Object.assign(tt,Object.assign(Object.assign({},Ce),{hasController:!0})),je(document).appendChild(tt),new Promise(Gt=>(0,We.c)(tt,Gt))}):Promise.resolve(),Fe='[tabindex]:not([tabindex^="-"]), input:not([type=hidden]):not([tabindex^="-"]), textarea:not([tabindex^="-"]), button:not([tabindex^="-"]), select:not([tabindex^="-"]), .ion-focusable:not([tabindex^="-"])',Be="input:not([type=hidden]), textarea, button, select",Et=(bt,Ce)=>{let tt=bt.querySelector(Fe);const Gt=null==tt?void 0:tt.shadowRoot;Gt&&(tt=Gt.querySelector(Be)||tt),tt?(0,We.f)(tt):Ce.focus()},dt=(bt,Ce)=>{const tt=Array.from(bt.querySelectorAll(Fe));let Gt=tt.length>0?tt[tt.length-1]:null;const Ct=null==Gt?void 0:Gt.shadowRoot;Ct&&(Gt=Ct.querySelector(Be)||Gt),Gt?Gt.focus():Ce.focus()},Pt=bt=>{0===Ne&&(Ne=1,bt.addEventListener("focus",Ce=>{((bt,Ce)=>{const tt=me(Ce,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),Gt=bt.target;tt&&Gt&&!tt.classList.contains("ion-disable-focus-trap")&&(tt.shadowRoot?(()=>{if(tt.contains(Gt))tt.lastFocus=Gt;else{const bn=tt.lastFocus;Et(tt,tt),bn===Ce.activeElement&&dt(tt,tt),tt.lastFocus=Ce.activeElement}})():(()=>{if(tt===Gt)tt.lastFocus=void 0;else{const bn=(0,We.g)(tt);if(!bn.contains(Gt))return;const kn=bn.querySelector(".ion-overlay-wrapper");if(!kn)return;if(kn.contains(Gt))tt.lastFocus=Gt;else{const _n=tt.lastFocus;Et(kn,tt),_n===Ce.activeElement&&dt(kn,tt),tt.lastFocus=Ce.activeElement}}})())})(Ce,bt)},!0),bt.addEventListener("ionBackButton",Ce=>{const tt=me(bt);(null==tt?void 0:tt.backdropDismiss)&&Ce.detail.register(Z.OVERLAY_BACK_BUTTON_PRIORITY,()=>tt.dismiss(void 0,q))}),bt.addEventListener("keyup",Ce=>{if("Escape"===Ce.key){const tt=me(bt);(null==tt?void 0:tt.backdropDismiss)&&tt.dismiss(void 0,q)}}))},Xe=(bt,Ce,tt,Gt,Ct)=>{const sn=me(bt,Gt,Ct);return sn?sn.dismiss(Ce,tt):Promise.reject("overlay does not exist")},me=(bt,Ce,tt)=>{const Gt=((bt,Ce)=>(void 0===Ce&&(Ce="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(bt.querySelectorAll(Ce)).filter(tt=>tt.overlayIndex>0)))(bt,Ce).filter(Ct=>!(bt=>bt.classList.contains("overlay-hidden"))(Ct));return void 0===tt?Gt[Gt.length-1]:Gt.find(Ct=>Ct.id===tt)},Oe=(bt=!1)=>{const tt=je(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");!tt||(bt?tt.setAttribute("aria-hidden","true"):tt.removeAttribute("aria-hidden"))},Se=function(){var bt=(0,a.Z)(function*(Ce,tt,Gt,Ct,sn){var bn,kn;if(Ce.presented)return;Oe(!0),Ce.presented=!0,Ce.willPresent.emit(),null===(bn=Ce.willPresentShorthand)||void 0===bn||bn.emit();const _n=(0,J.b)(Ce),gn=Ce.enterAnimation?Ce.enterAnimation:J.c.get(tt,"ios"===_n?Gt:Ct);(yield Ze(Ce,gn,Ce.el,sn))&&(Ce.didPresent.emit(),null===(kn=Ce.didPresentShorthand)||void 0===kn||kn.emit()),"ION-TOAST"!==Ce.el.tagName&&fe(Ce.el),Ce.keyboardClose&&Ce.el.focus()});return function(tt,Gt,Ct,sn,bn){return bt.apply(this,arguments)}}(),fe=function(){var bt=(0,a.Z)(function*(Ce){let tt=document.activeElement;if(!tt)return;const Gt=null==tt?void 0:tt.shadowRoot;Gt&&(tt=Gt.querySelector(Be)||tt),yield Ce.onDidDismiss(),tt.focus()});return function(tt){return bt.apply(this,arguments)}}(),ye=function(){var bt=(0,a.Z)(function*(Ce,tt,Gt,Ct,sn,bn,kn){var _n,gn;if(!Ce.presented)return!1;Oe(!1),Ce.presented=!1;try{Ce.el.style.setProperty("pointer-events","none"),Ce.willDismiss.emit({data:tt,role:Gt}),null===(_n=Ce.willDismissShorthand)||void 0===_n||_n.emit({data:tt,role:Gt});const qn=(0,J.b)(Ce),Zr=Ce.leaveAnimation?Ce.leaveAnimation:J.c.get(Ct,"ios"===qn?sn:bn);"gesture"!==Gt&&(yield Ze(Ce,Zr,Ce.el,kn)),Ce.didDismiss.emit({data:tt,role:Gt}),null===(gn=Ce.didDismissShorthand)||void 0===gn||gn.emit({data:tt,role:Gt}),ae.delete(Ce),Ce.el.classList.add("overlay-hidden"),Ce.el.style.removeProperty("pointer-events")}catch(qn){console.error(qn)}return Ce.el.remove(),!0});return function(tt,Gt,Ct,sn,bn,kn,_n){return bt.apply(this,arguments)}}(),je=bt=>bt.querySelector("ion-app")||bt.body,Ze=function(){var bt=(0,a.Z)(function*(Ce,tt,Gt,Ct){Gt.classList.remove("overlay-hidden");const bn=tt(Ce.el,Ct);(!Ce.animated||!J.c.getBoolean("animated",!0))&&bn.duration(0),Ce.keyboardClose&&bn.beforeAddWrite(()=>{const _n=Gt.ownerDocument.activeElement;(null==_n?void 0:_n.matches("input,ion-input, ion-textarea"))&&_n.blur()});const kn=ae.get(Ce)||[];return ae.set(Ce,[...kn,bn]),yield bn.play(),!0});return function(tt,Gt,Ct,sn){return bt.apply(this,arguments)}}(),Mt=(bt,Ce)=>{let tt;const Gt=new Promise(Ct=>tt=Ct);return Jt(bt,Ce,Ct=>{tt(Ct.detail)}),Gt},Jt=(bt,Ce,tt)=>{const Gt=Ct=>{(0,We.b)(bt,Ce,Gt),tt(Ct)};(0,We.a)(bt,Ce,Gt)},mt=bt=>"cancel"===bt||bt===q,wt=bt=>bt(),Ye=(bt,Ce)=>{if("function"==typeof bt)return J.c.get("_zoneGate",wt)(()=>{try{return bt(Ce)}catch(Gt){throw Gt}})},q="backdrop"},2734:(dn,ft,L)=>{"use strict";var a=L(2313),J=L(5e3),Z=L(3442),We=L(4586),Ne=L(4433);let ae=(()=>{class h{constructor(){}}return h.\u0275fac=function(c){return new(c||h)},h.\u0275cmp=J.Xpm({type:h,selectors:[["app-root"]],decls:2,vars:0,template:function(c,g){1&c&&(J.TgZ(0,"ion-app"),J._UZ(1,"ion-router-outlet"),J.qZA())},directives:[Ne.dr,Ne.jP],styles:[""]}),h})();const Ae=[{path:"home",loadChildren:()=>L.e(4851).then(L.bind(L,4851)).then(h=>h.HomePageModule)},{path:"",redirectTo:"home",pathMatch:"full"},{path:"login",loadChildren:()=>Promise.all([L.e(8592),L.e(4987)]).then(L.bind(L,4987)).then(h=>h.LoginPageModule)},{path:"movie",loadChildren:()=>Promise.all([L.e(8592),L.e(3893)]).then(L.bind(L,3893)).then(h=>h.MoviePageModule)},{path:"movielist",loadChildren:()=>Promise.all([L.e(8592),L.e(4581)]).then(L.bind(L,4581)).then(h=>h.MovielistPageModule)},{path:"moviedetails",loadChildren:()=>L.e(3447).then(L.bind(L,3447)).then(h=>h.MoviedetailsPageModule)},{path:"moviedetails/:id",loadChildren:()=>L.e(3447).then(L.bind(L,3447)).then(h=>h.MoviedetailsPageModule)},{path:"addmovie",loadChildren:()=>Promise.all([L.e(8592),L.e(2693)]).then(L.bind(L,2693)).then(h=>h.AddmoviePageModule)},{path:"register",loadChildren:()=>Promise.all([L.e(8592),L.e(7826)]).then(L.bind(L,7826)).then(h=>h.RegisterPageModule)}];let De=(()=>{class h{}return h.\u0275fac=function(c){return new(c||h)},h.\u0275mod=J.oAB({type:h}),h.\u0275inj=J.cJS({imports:[[Z.Bz.forRoot(Ae,{preloadingStrategy:Z.wm})],Z.Bz]}),h})();var Ie=L(4182),oe=L(2011);const ve_firebaseConfig={apiKey:"AIzaSyBwxBW0dv7SoiyVFY9PiQvurrnIv9_47v4",authDomain:"pelicula-5fbae.firebaseapp.com",projectId:"pelicula-5fbae",storageBucket:"pelicula-5fbae.appspot.com",messagingSenderId:"722497334561",appId:"1:722497334561:web:9e8817668e053fa9016260",measurementId:"G-R8RFF6PC1Y"};var ne=L(2796),ce=L(4941),Ke=L(353),Ve=L(2916),Ee=L(1086),Fe=L(6787),Be=L(4850),Et=L(2474),we=L(7545),dt=L(2014),St=L(5778),Pt=L(826),Xe=L(448);class me{constructor(u,c){this.observables=u,this.project=c}call(u,c){return c.subscribe(new Oe(u,this.observables,this.project))}}class Oe extends Pt.L{constructor(u,c,g){super(u),this.observables=c,this.project=g,this.toRespond=[];const D=c.length;this.values=new Array(D);for(let P=0;P<D;P++)this.toRespond.push(P);for(let P=0;P<D;P++)this.add((0,Xe.D)(this,c[P],void 0,P))}notifyNext(u,c,g){this.values[g]=c;const D=this.toRespond;if(D.length>0){const P=D.indexOf(g);-1!==P&&D.splice(P,1)}}notifyComplete(){}_next(u){if(0===this.toRespond.length){const c=[u,...this.values];this.project?this._tryProject(c):this.destination.next(c)}}_tryProject(u){let c;try{c=this.project.apply(this,u)}catch(g){return void this.destination.error(g)}this.destination.next(c)}}var Se=L(3489);class ye{constructor(u){this.predicate=u}call(u,c){return c.subscribe(new je(u,this.predicate))}}class je extends Se.L{constructor(u,c){super(u),this.predicate=c,this.skipping=!0,this.index=0}_next(u){const c=this.destination;this.skipping&&this.tryCallPredicate(u),this.skipping||c.next(u)}tryCallPredicate(u){try{const c=this.predicate(u,this.index++);this.skipping=Boolean(c)}catch(c){this.destination.error(c)}}}var Ze=L(6351),Jt=(L(8775),L(3942)),mt=L(4859),wt=L(5861),Ye=L(9681),q=L(2090),bt=L(1877);const Ce="@firebase/database";let Gt="";function Ct(h){Gt=h}class sn{constructor(u){this.domStorage_=u,this.prefix_="firebase:"}set(u,c){null==c?this.domStorage_.removeItem(this.prefixedName_(u)):this.domStorage_.setItem(this.prefixedName_(u),(0,q.Pz)(c))}get(u){const c=this.domStorage_.getItem(this.prefixedName_(u));return null==c?null:(0,q.cI)(c)}remove(u){this.domStorage_.removeItem(this.prefixedName_(u))}prefixedName_(u){return this.prefix_+u}toString(){return this.domStorage_.toString()}}class bn{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(u,c){null==c?delete this.cache_[u]:this.cache_[u]=c}get(u){return(0,q.r3)(this.cache_,u)?this.cache_[u]:null}remove(u){delete this.cache_[u]}}const kn=function(h){try{if("undefined"!=typeof window&&void 0!==window[h]){const u=window[h];return u.setItem("firebase:sentinel","cache"),u.removeItem("firebase:sentinel"),new sn(u)}}catch(u){}return new bn},_n=kn("localStorage"),gn=kn("sessionStorage"),qn=new bt.Yd("@firebase/database"),Zr=function(){let h=1;return function(){return h++}}(),Qn=function(h){const u=(0,q.dS)(h),c=new q.gQ;c.update(u);const g=c.digest();return q.US.encodeByteArray(g)},Yn=function(...h){let u="";for(let c=0;c<h.length;c++){const g=h[c];Array.isArray(g)||g&&"object"==typeof g&&"number"==typeof g.length?u+=Yn.apply(null,g):u+="object"==typeof g?(0,q.Pz)(g):g,u+=" "}return u};let on=null,Rr=!0;const cr=function(h,u){(0,q.hu)(!u||!0===h||!1===h,"Can't turn on custom loggers persistently."),!0===h?(qn.logLevel=bt.in.VERBOSE,on=qn.log.bind(qn),u&&gn.set("logging_enabled",!0)):"function"==typeof h?on=h:(on=null,gn.remove("logging_enabled"))},Bn=function(...h){if(!0===Rr&&(Rr=!1,null===on&&!0===gn.get("logging_enabled")&&cr(!0)),on){const u=Yn.apply(null,h);on(u)}},nr=function(h){return function(...u){Bn(h,...u)}},_r=function(...h){const u="FIREBASE INTERNAL ERROR: "+Yn(...h);qn.error(u)},_t=function(...h){const u=`FIREBASE FATAL ERROR: ${Yn(...h)}`;throw qn.error(u),new Error(u)},He=function(...h){const u="FIREBASE WARNING: "+Yn(...h);qn.warn(u)},en=function(h){return"number"==typeof h&&(h!=h||h===Number.POSITIVE_INFINITY||h===Number.NEGATIVE_INFINITY)},qt="[MIN_NAME]",cn="[MAX_NAME]",Zn=function(h,u){if(h===u)return 0;if(h===qt||u===cn)return-1;if(u===qt||h===cn)return 1;{const c=un(h),g=un(u);return null!==c?null!==g?c-g==0?h.length-u.length:c-g:-1:null!==g?1:h<u?-1:1}},Jn=function(h,u){return h===u?0:h<u?-1:1},Mn=function(h,u){if(u&&h in u)return u[h];throw new Error("Missing required key ("+h+") in object: "+(0,q.Pz)(u))},Fn=function(h){if("object"!=typeof h||null===h)return(0,q.Pz)(h);const u=[];for(const g in h)u.push(g);u.sort();let c="{";for(let g=0;g<u.length;g++)0!==g&&(c+=","),c+=(0,q.Pz)(u[g]),c+=":",c+=Fn(h[u[g]]);return c+="}",c},vr=function(h,u){const c=h.length;if(c<=u)return[h];const g=[];for(let D=0;D<c;D+=u)g.push(h.substring(D,D+u>c?c:D+u));return g};function Hn(h,u){for(const c in h)h.hasOwnProperty(c)&&u(c,h[c])}const xe=function(h){(0,q.hu)(!en(h),"Invalid JSON number");const g=1023;let D,P,G,le,Me;0===h?(P=0,G=0,D=1/h==-1/0?1:0):(D=h<0,(h=Math.abs(h))>=Math.pow(2,1-g)?(le=Math.min(Math.floor(Math.log(h)/Math.LN2),g),P=le+g,G=Math.round(h*Math.pow(2,52-le)-Math.pow(2,52))):(P=0,G=Math.round(h/Math.pow(2,-1074))));const Qe=[];for(Me=52;Me;Me-=1)Qe.push(G%2?1:0),G=Math.floor(G/2);for(Me=11;Me;Me-=1)Qe.push(P%2?1:0),P=Math.floor(P/2);Qe.push(D?1:0),Qe.reverse();const Bt=Qe.join("");let Ft="";for(Me=0;Me<64;Me+=8){let an=parseInt(Bt.substr(Me,8),2).toString(16);1===an.length&&(an="0"+an),Ft+=an}return Ft.toLowerCase()},Ge=new RegExp("^-?(0*)\\d{1,10}$"),ht=-2147483648,tn=2147483647,un=function(h){if(Ge.test(h)){const u=Number(h);if(u>=ht&&u<=tn)return u}return null},vn=function(h){try{h()}catch(u){setTimeout(()=>{throw He("Exception was thrown by user callback.",u.stack||""),u},Math.floor(0))}},Gn=function(h,u){const c=setTimeout(h,u);return"object"==typeof c&&c.unref&&c.unref(),c};class An{constructor(u,c){this.appName_=u,this.appCheckProvider=c,this.appCheck=null==c?void 0:c.getImmediate({optional:!0}),this.appCheck||null==c||c.get().then(g=>this.appCheck=g)}getToken(u){return this.appCheck?this.appCheck.getToken(u):new Promise((c,g)=>{setTimeout(()=>{this.appCheck?this.getToken(u).then(c,g):c(null)},0)})}addTokenChangeListener(u){var c;null===(c=this.appCheckProvider)||void 0===c||c.get().then(g=>g.addTokenListener(u))}notifyForInvalidToken(){He(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Sr{constructor(u,c,g){this.appName_=u,this.firebaseOptions_=c,this.authProvider_=g,this.auth_=null,this.auth_=g.getImmediate({optional:!0}),this.auth_||g.onInit(D=>this.auth_=D)}getToken(u){return this.auth_?this.auth_.getToken(u).catch(c=>c&&"auth/token-not-initialized"===c.code?(Bn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(c)):new Promise((c,g)=>{setTimeout(()=>{this.auth_?this.getToken(u).then(c,g):c(null)},0)})}addTokenChangeListener(u){this.auth_?this.auth_.addAuthTokenListener(u):this.authProvider_.get().then(c=>c.addAuthTokenListener(u))}removeTokenChangeListener(u){this.authProvider_.get().then(c=>c.removeAuthTokenListener(u))}notifyForInvalidToken(){let u='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';u+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',He(u)}}let Gr=(()=>{class h{constructor(c){this.accessToken=c}getToken(c){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(c){c(this.accessToken)}removeTokenChangeListener(c){}notifyForInvalidToken(){}}return h.OWNER="owner",h})();const Kt=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Wn="websocket",di="long_polling";class Ki{constructor(u,c,g,D,P=!1,G="",le=!1){this.secure=c,this.namespace=g,this.webSocketOnly=D,this.nodeAdmin=P,this.persistenceKey=G,this.includeNamespaceInQueryParams=le,this._host=u.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=_n.get("host:"+u)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(u){u!==this.internalHost&&(this.internalHost=u,this.isCacheableHost()&&_n.set("host:"+this._host,this.internalHost))}toString(){let u=this.toURLString();return this.persistenceKey&&(u+="<"+this.persistenceKey+">"),u}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Br(h,u,c){let g;if((0,q.hu)("string"==typeof u,"typeof type must == string"),(0,q.hu)("object"==typeof c,"typeof params must == object"),u===Wn)g=(h.secure?"wss://":"ws://")+h.internalHost+"/.ws?";else{if(u!==di)throw new Error("Unknown connection type: "+u);g=(h.secure?"https://":"http://")+h.internalHost+"/.lp?"}(function Ei(h){return h.host!==h.internalHost||h.isCustomHost()||h.includeNamespaceInQueryParams})(h)&&(c.ns=h.namespace);const D=[];return Hn(c,(P,G)=>{D.push(P+"="+G)}),g+D.join("&")}class Yr{constructor(){this.counters_={}}incrementCounter(u,c=1){(0,q.r3)(this.counters_,u)||(this.counters_[u]=0),this.counters_[u]+=c}get(){return(0,q.p$)(this.counters_)}}const Kr={},nn={};function wn(h){const u=h.toString();return Kr[u]||(Kr[u]=new Yr),Kr[u]}class ii{constructor(u){this.onMessage_=u,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(u,c){this.closeAfterResponse=u,this.onClose=c,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(u,c){for(this.pendingResponses[u]=c;this.pendingResponses[this.currentResponseNum];){const g=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let D=0;D<g.length;++D)g[D]&&vn(()=>{this.onMessage_(g[D])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class pt{constructor(u,c,g,D,P,G,le){this.connId=u,this.repoInfo=c,this.applicationId=g,this.appCheckToken=D,this.authToken=P,this.transportSessionId=G,this.lastSessionId=le,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=nr(u),this.stats_=wn(c),this.urlFn=Me=>(this.appCheckToken&&(Me.ac=this.appCheckToken),Br(c,di,Me))}open(u,c){this.curSegmentNum=0,this.onDisconnect_=c,this.myPacketOrderer=new ii(u),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(h){if((0,q.Yr)()||"complete"===document.readyState)h();else{let u=!1;const c=function(){document.body?u||(u=!0,h()):setTimeout(c,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&c()}),window.attachEvent("onload",c))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new be((...P)=>{const[G,le,Me,Qe,Bt]=P;if(this.incrementIncomingBytes_(P),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===G)this.id=le,this.password=Me;else{if("close"!==G)throw new Error("Unrecognized command received: "+G);le?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(le,()=>{this.onClosed_()})):this.onClosed_()}},(...P)=>{const[G,le]=P;this.incrementIncomingBytes_(P),this.myPacketOrderer.handleResponse(G,le)},()=>{this.onClosed_()},this.urlFn);const g={start:"t"};g.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(g.cb=this.scriptTagHolder.uniqueCallbackIdentifier),g.v="5",this.transportSessionId&&(g.s=this.transportSessionId),this.lastSessionId&&(g.ls=this.lastSessionId),this.applicationId&&(g.p=this.applicationId),this.appCheckToken&&(g.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&Kt.test(location.hostname)&&(g.r="f");const D=this.urlFn(g);this.log_("Connecting via long-poll to "+D),this.scriptTagHolder.addTag(D,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){pt.forceAllow_=!0}static forceDisallow(){pt.forceDisallow_=!0}static isAvailable(){return!((0,q.Yr)()||!pt.forceAllow_&&(pt.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(u){const c=(0,q.Pz)(u);this.bytesSent+=c.length,this.stats_.incrementCounter("bytes_sent",c.length);const g=(0,q.h$)(c),D=vr(g,1840);for(let P=0;P<D.length;P++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,D.length,D[P]),this.curSegmentNum++}addDisconnectPingFrame(u,c){if((0,q.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const g={dframe:"t"};g.id=u,g.pw=c,this.myDisconnFrame.src=this.urlFn(g),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(u){const c=(0,q.Pz)(u).length;this.bytesReceived+=c,this.stats_.incrementCounter("bytes_received",c)}}class be{constructor(u,c,g,D){if(this.onDisconnect=g,this.urlFn=D,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,q.Yr)())this.commandCB=u,this.onMessageCB=c;else{this.uniqueCallbackIdentifier=Zr(),window["pLPCommand"+this.uniqueCallbackIdentifier]=u,window["pRTLPCB"+this.uniqueCallbackIdentifier]=c,this.myIFrame=be.createIFrame_();let P="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(P='<script>document.domain="'+document.domain+'";<\/script>');const G="<html><body>"+P+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(G),this.myIFrame.doc.close()}catch(le){Bn("frame writing exception"),le.stack&&Bn(le.stack),Bn(le)}}}static createIFrame_(){const u=document.createElement("iframe");if(u.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(u);try{u.contentWindow.document||Bn("No IE domain setting required")}catch(c){const g=document.domain;u.src="javascript:void((function(){document.open();document.domain='"+g+"';document.close();})())"}return u.contentDocument?u.doc=u.contentDocument:u.contentWindow?u.doc=u.contentWindow.document:u.document&&(u.doc=u.document),u}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const u=this.onDisconnect;u&&(this.onDisconnect=null,u())}startLongPoll(u,c){for(this.myID=u,this.myPW=c,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const u={};u.id=this.myID,u.pw=this.myPW,u.ser=this.currentSerial;let c=this.urlFn(u),g="",D=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+g.length<=1870;){const G=this.pendingSegs.shift();g=g+"&seg"+D+"="+G.seg+"&ts"+D+"="+G.ts+"&d"+D+"="+G.d,D++}return c+=g,this.addLongPollTag_(c,this.currentSerial),!0}return!1}enqueueSegment(u,c,g){this.pendingSegs.push({seg:u,ts:c,d:g}),this.alive&&this.newRequest_()}addLongPollTag_(u,c){this.outstandingRequests.add(c);const g=()=>{this.outstandingRequests.delete(c),this.newRequest_()},D=setTimeout(g,Math.floor(25e3));this.addTag(u,()=>{clearTimeout(D),g()})}addTag(u,c){(0,q.Yr)()?this.doNodeLongPoll(u,c):setTimeout(()=>{try{if(!this.sendNewPolls)return;const g=this.myIFrame.doc.createElement("script");g.type="text/javascript",g.async=!0,g.src=u,g.onload=g.onreadystatechange=function(){const D=g.readyState;(!D||"loaded"===D||"complete"===D)&&(g.onload=g.onreadystatechange=null,g.parentNode&&g.parentNode.removeChild(g),c())},g.onerror=()=>{Bn("Long-poll script failed to load: "+u),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(g)}catch(g){}},Math.floor(1))}}let jt=null;"undefined"!=typeof MozWebSocket?jt=MozWebSocket:"undefined"!=typeof WebSocket&&(jt=WebSocket);let Nt=(()=>{class h{constructor(c,g,D,P,G,le,Me){this.connId=c,this.applicationId=D,this.appCheckToken=P,this.authToken=G,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=nr(this.connId),this.stats_=wn(g),this.connURL=h.connectionURL_(g,le,Me,P,D),this.nodeAdmin=g.nodeAdmin}static connectionURL_(c,g,D,P,G){const le={v:"5"};return!(0,q.Yr)()&&"undefined"!=typeof location&&location.hostname&&Kt.test(location.hostname)&&(le.r="f"),g&&(le.s=g),D&&(le.ls=D),P&&(le.ac=P),G&&(le.p=G),Br(c,Wn,le)}open(c,g){this.onDisconnect=g,this.onMessage=c,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,_n.set("previous_websocket_failure",!0);try{let D;if((0,q.Yr)()){const G={headers:{"User-Agent":`Firebase/5/${Gt}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(G.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(G.headers["X-Firebase-AppCheck"]=this.appCheckToken);const le=process.env,Me=0===this.connURL.indexOf("wss://")?le.HTTPS_PROXY||le.https_proxy:le.HTTP_PROXY||le.http_proxy;Me&&(G.proxy={origin:Me})}this.mySock=new jt(this.connURL,[],D)}catch(D){this.log_("Error instantiating WebSocket.");const P=D.message||D.data;return P&&this.log_(P),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=D=>{this.handleIncomingFrame(D)},this.mySock.onerror=D=>{this.log_("WebSocket error.  Closing connection.");const P=D.message||D.data;P&&this.log_(P),this.onClosed_()}}start(){}static forceDisallow(){h.forceDisallow_=!0}static isAvailable(){let c=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const D=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);D&&D.length>1&&parseFloat(D[1])<4.4&&(c=!0)}return!c&&null!==jt&&!h.forceDisallow_}static previouslyFailed(){return _n.isInMemoryStorage||!0===_n.get("previous_websocket_failure")}markConnectionHealthy(){_n.remove("previous_websocket_failure")}appendFrame_(c){if(this.frames.push(c),this.frames.length===this.totalFrames){const g=this.frames.join("");this.frames=null;const D=(0,q.cI)(g);this.onMessage(D)}}handleNewFrameCount_(c){this.totalFrames=c,this.frames=[]}extractFrameCount_(c){if((0,q.hu)(null===this.frames,"We already have a frame buffer"),c.length<=6){const g=Number(c);if(!isNaN(g))return this.handleNewFrameCount_(g),null}return this.handleNewFrameCount_(1),c}handleIncomingFrame(c){if(null===this.mySock)return;const g=c.data;if(this.bytesReceived+=g.length,this.stats_.incrementCounter("bytes_received",g.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(g);else{const D=this.extractFrameCount_(g);null!==D&&this.appendFrame_(D)}}send(c){this.resetKeepAlive();const g=(0,q.Pz)(c);this.bytesSent+=g.length,this.stats_.incrementCounter("bytes_sent",g.length);const D=vr(g,16384);D.length>1&&this.sendString_(String(D.length));for(let P=0;P<D.length;P++)this.sendString_(D[P])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(c){try{this.mySock.send(c)}catch(g){this.log_("Exception thrown from WebSocket.send():",g.message||g.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return h.responsesRequiredToBeHealthy=2,h.healthyTimeout=3e4,h})(),Ot=(()=>{class h{constructor(c){this.initTransports_(c)}static get ALL_TRANSPORTS(){return[pt,Nt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(c){const g=Nt&&Nt.isAvailable();let D=g&&!Nt.previouslyFailed();if(c.webSocketOnly&&(g||He("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),D=!0),D)this.transports_=[Nt];else{const P=this.transports_=[];for(const G of h.ALL_TRANSPORTS)G&&G.isAvailable()&&P.push(G);h.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return h.globalTransportInitialized_=!1,h})();class Ur{constructor(u,c,g,D,P,G,le,Me,Qe,Bt){this.id=u,this.repoInfo_=c,this.applicationId_=g,this.appCheckToken_=D,this.authToken_=P,this.onMessage_=G,this.onReady_=le,this.onDisconnect_=Me,this.onKill_=Qe,this.lastSessionId=Bt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=nr("c:"+this.id+":"),this.transportManager_=new Ot(c),this.log_("Connection created"),this.start_()}start_(){const u=this.transportManager_.initialTransport();this.conn_=new u(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=u.responsesRequiredToBeHealthy||0;const c=this.connReceiver_(this.conn_),g=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(c,g)},Math.floor(0));const D=u.healthyTimeout||0;D>0&&(this.healthyTimeout_=Gn(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(D)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(u){return c=>{u===this.conn_?this.onConnectionLost_(c):u===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(u){return c=>{2!==this.state_&&(u===this.rx_?this.onPrimaryMessageReceived_(c):u===this.secondaryConn_?this.onSecondaryMessageReceived_(c):this.log_("message on old connection"))}}sendRequest(u){this.sendData_({t:"d",d:u})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(u){if("t"in u){const c=u.t;"a"===c?this.upgradeIfSecondaryHealthy_():"r"===c?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===c&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(u){const c=Mn("t",u),g=Mn("d",u);if("c"===c)this.onSecondaryControl_(g);else{if("d"!==c)throw new Error("Unknown protocol layer: "+c);this.pendingDataMessages.push(g)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(u){const c=Mn("t",u),g=Mn("d",u);"c"===c?this.onControl_(g):"d"===c&&this.onDataMessage_(g)}onDataMessage_(u){this.onPrimaryResponse_(),this.onMessage_(u)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(u){const c=Mn("t",u);if("d"in u){const g=u.d;if("h"===c)this.onHandshake_(g);else if("n"===c){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let D=0;D<this.pendingDataMessages.length;++D)this.onDataMessage_(this.pendingDataMessages[D]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===c?this.onConnectionShutdown_(g):"r"===c?this.onReset_(g):"e"===c?_r("Server Error: "+g):"o"===c?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):_r("Unknown control packet command: "+c)}}onHandshake_(u){const c=u.ts,g=u.v,D=u.h;this.sessionId=u.s,this.repoInfo_.host=D,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,c),"5"!==g&&He("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const u=this.transportManager_.upgradeTransport();u&&this.startUpgrade_(u)}startUpgrade_(u){this.secondaryConn_=new u(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=u.responsesRequiredToBeHealthy||0;const c=this.connReceiver_(this.secondaryConn_),g=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(c,g),Gn(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(u){this.log_("Reset packet received.  New host: "+u),this.repoInfo_.host=u,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(u,c){this.log_("Realtime connection established."),this.conn_=u,this.state_=1,this.onReady_&&(this.onReady_(c,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Gn(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const u=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===u||this.rx_===u)&&this.close()}onConnectionLost_(u){this.conn_=null,u||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(_n.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(u){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(u),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(u){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(u)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class ys{put(u,c,g,D){}merge(u,c,g,D){}refreshAuthToken(u){}refreshAppCheckToken(u){}onDisconnectPut(u,c,g){}onDisconnectMerge(u,c,g){}onDisconnectCancel(u,c){}reportStats(u){}}class cs{constructor(u){this.allowedEvents_=u,this.listeners_={},(0,q.hu)(Array.isArray(u)&&u.length>0,"Requires a non-empty array")}trigger(u,...c){if(Array.isArray(this.listeners_[u])){const g=[...this.listeners_[u]];for(let D=0;D<g.length;D++)g[D].callback.apply(g[D].context,c)}}on(u,c,g){this.validateEventType_(u),this.listeners_[u]=this.listeners_[u]||[],this.listeners_[u].push({callback:c,context:g});const D=this.getInitialEvent(u);D&&c.apply(g,D)}off(u,c,g){this.validateEventType_(u);const D=this.listeners_[u]||[];for(let P=0;P<D.length;P++)if(D[P].callback===c&&(!g||g===D[P].context))return void D.splice(P,1)}validateEventType_(u){(0,q.hu)(this.allowedEvents_.find(c=>c===u),"Unknown event: "+u)}}class Ni extends cs{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,q.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ni}getInitialEvent(u){return(0,q.hu)("online"===u,"Unknown event type: "+u),[this.online_]}currentlyOnline(){return this.online_}}class Pr{constructor(u,c){if(void 0===c){this.pieces_=u.split("/");let g=0;for(let D=0;D<this.pieces_.length;D++)this.pieces_[D].length>0&&(this.pieces_[g]=this.pieces_[D],g++);this.pieces_.length=g,this.pieceNum_=0}else this.pieces_=u,this.pieceNum_=c}toString(){let u="";for(let c=this.pieceNum_;c<this.pieces_.length;c++)""!==this.pieces_[c]&&(u+="/"+this.pieces_[c]);return u||"/"}}function $r(){return new Pr("")}function Ar(h){return h.pieceNum_>=h.pieces_.length?null:h.pieces_[h.pieceNum_]}function hi(h){return h.pieces_.length-h.pieceNum_}function Or(h){let u=h.pieceNum_;return u<h.pieces_.length&&u++,new Pr(h.pieces_,u)}function Xi(h){return h.pieceNum_<h.pieces_.length?h.pieces_[h.pieces_.length-1]:null}function Ss(h,u=0){return h.pieces_.slice(h.pieceNum_+u)}function ro(h){if(h.pieceNum_>=h.pieces_.length)return null;const u=[];for(let c=h.pieceNum_;c<h.pieces_.length-1;c++)u.push(h.pieces_[c]);return new Pr(u,0)}function ai(h,u){const c=[];for(let g=h.pieceNum_;g<h.pieces_.length;g++)c.push(h.pieces_[g]);if(u instanceof Pr)for(let g=u.pieceNum_;g<u.pieces_.length;g++)c.push(u.pieces_[g]);else{const g=u.split("/");for(let D=0;D<g.length;D++)g[D].length>0&&c.push(g[D])}return new Pr(c,0)}function pr(h){return h.pieceNum_>=h.pieces_.length}function Ii(h,u){const c=Ar(h),g=Ar(u);if(null===c)return u;if(c===g)return Ii(Or(h),Or(u));throw new Error("INTERNAL ERROR: innerPath ("+u+") is not within outerPath ("+h+")")}function ds(h,u){const c=Ss(h,0),g=Ss(u,0);for(let D=0;D<c.length&&D<g.length;D++){const P=Zn(c[D],g[D]);if(0!==P)return P}return c.length===g.length?0:c.length<g.length?-1:1}function Qi(h,u){if(hi(h)!==hi(u))return!1;for(let c=h.pieceNum_,g=u.pieceNum_;c<=h.pieces_.length;c++,g++)if(h.pieces_[c]!==u.pieces_[g])return!1;return!0}function kr(h,u){let c=h.pieceNum_,g=u.pieceNum_;if(hi(h)>hi(u))return!1;for(;c<h.pieces_.length;){if(h.pieces_[c]!==u.pieces_[g])return!1;++c,++g}return!0}class vs{constructor(u,c){this.errorPrefix_=c,this.parts_=Ss(u,0),this.byteLength_=Math.max(1,this.parts_.length);for(let g=0;g<this.parts_.length;g++)this.byteLength_+=(0,q.ug)(this.parts_[g]);es(this)}}function es(h){if(h.byteLength_>768)throw new Error(h.errorPrefix_+"has a key path longer than 768 bytes ("+h.byteLength_+").");if(h.parts_.length>32)throw new Error(h.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+as(h))}function as(h){return 0===h.parts_.length?"":"in property '"+h.parts_.join(".")+"'"}class Es extends cs{constructor(){let u,c;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(c="visibilitychange",u="hidden"):void 0!==document.mozHidden?(c="mozvisibilitychange",u="mozHidden"):void 0!==document.msHidden?(c="msvisibilitychange",u="msHidden"):void 0!==document.webkitHidden&&(c="webkitvisibilitychange",u="webkitHidden")),this.visible_=!0,c&&document.addEventListener(c,()=>{const g=!document[u];g!==this.visible_&&(this.visible_=g,this.trigger("visible",g))},!1)}static getInstance(){return new Es}getInitialEvent(u){return(0,q.hu)("visible"===u,"Unknown event type: "+u),[this.visible_]}}const ji=1e3;let Dn,et=(()=>{class h extends ys{constructor(c,g,D,P,G,le,Me,Qe){if(super(),this.repoInfo_=c,this.applicationId_=g,this.onDataUpdate_=D,this.onConnectStatus_=P,this.onServerInfoUpdate_=G,this.authTokenProvider_=le,this.appCheckTokenProvider_=Me,this.authOverride_=Qe,this.id=h.nextPersistentConnectionId_++,this.log_=nr("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ji,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,Qe&&!(0,q.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Es.getInstance().on("visible",this.onVisible_,this),-1===c.host.indexOf("fblocal")&&Ni.getInstance().on("online",this.onOnline_,this)}sendRequest(c,g,D){const P=++this.requestNumber_,G={r:P,a:c,b:g};this.log_((0,q.Pz)(G)),(0,q.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(G),D&&(this.requestCBHash_[P]=D)}get(c){this.initConnection_();const g=new q.BH,D={p:c._path.toString(),q:c._queryObject},P={action:"g",request:D,onComplete:le=>{const Me=le.d;"ok"===le.s?(this.onDataUpdate_(D.p,Me,!1,null),g.resolve(Me)):g.reject(Me)}};this.outstandingGets_.push(P),this.outstandingGetCount_++;const G=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const le=this.outstandingGets_[G];void 0===le||P!==le||(delete this.outstandingGets_[G],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+G+" timed out on connection"),g.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(G),g.promise}listen(c,g,D,P){this.initConnection_();const G=c._queryIdentifier,le=c._path.toString();this.log_("Listen called for "+le+" "+G),this.listens.has(le)||this.listens.set(le,new Map),(0,q.hu)(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,q.hu)(!this.listens.get(le).has(G),"listen() called twice for same path/queryId.");const Me={onComplete:P,hashFn:g,query:c,tag:D};this.listens.get(le).set(G,Me),this.connected_&&this.sendListen_(Me)}sendGet_(c){const g=this.outstandingGets_[c];this.sendRequest("g",g.request,D=>{delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),g.onComplete&&g.onComplete(D)})}sendListen_(c){const g=c.query,D=g._path.toString(),P=g._queryIdentifier;this.log_("Listen on "+D+" for "+P);const G={p:D};c.tag&&(G.q=g._queryObject,G.t=c.tag),G.h=c.hashFn(),this.sendRequest("q",G,Me=>{const Qe=Me.d,Bt=Me.s;h.warnOnListenWarnings_(Qe,g),(this.listens.get(D)&&this.listens.get(D).get(P))===c&&(this.log_("listen response",Me),"ok"!==Bt&&this.removeListen_(D,P),c.onComplete&&c.onComplete(Bt,Qe))})}static warnOnListenWarnings_(c,g){if(c&&"object"==typeof c&&(0,q.r3)(c,"w")){const D=(0,q.DV)(c,"w");if(Array.isArray(D)&&~D.indexOf("no_index")){const P='".indexOn": "'+g._queryParams.getIndex().toString()+'"',G=g._path.toString();He(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${P} at ${G} to your security rules for better performance.`)}}}refreshAuthToken(c){this.authToken_=c,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(c)}reduceReconnectDelayIfAdminCredential_(c){(c&&40===c.length||(0,q.GJ)(c))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(c){this.appCheckToken_=c,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const c=this.authToken_,g=(0,q.w9)(c)?"auth":"gauth",D={cred:c};null===this.authOverride_?D.noauth=!0:"object"==typeof this.authOverride_&&(D.authvar=this.authOverride_),this.sendRequest(g,D,P=>{const G=P.s,le=P.d||"error";this.authToken_===c&&("ok"===G?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(G,le))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},c=>{const g=c.s,D=c.d||"error";"ok"===g?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(g,D)})}unlisten(c,g){const D=c._path.toString(),P=c._queryIdentifier;this.log_("Unlisten called for "+D+" "+P),(0,q.hu)(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(D,P)&&this.connected_&&this.sendUnlisten_(D,P,c._queryObject,g)}sendUnlisten_(c,g,D,P){this.log_("Unlisten on "+c+" for "+g);const G={p:c};P&&(G.q=D,G.t=P),this.sendRequest("n",G)}onDisconnectPut(c,g,D){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",c,g,D):this.onDisconnectRequestQueue_.push({pathString:c,action:"o",data:g,onComplete:D})}onDisconnectMerge(c,g,D){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",c,g,D):this.onDisconnectRequestQueue_.push({pathString:c,action:"om",data:g,onComplete:D})}onDisconnectCancel(c,g){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",c,null,g):this.onDisconnectRequestQueue_.push({pathString:c,action:"oc",data:null,onComplete:g})}sendOnDisconnect_(c,g,D,P){const G={p:g,d:D};this.log_("onDisconnect "+c,G),this.sendRequest(c,G,le=>{P&&setTimeout(()=>{P(le.s,le.d)},Math.floor(0))})}put(c,g,D,P){this.putInternal("p",c,g,D,P)}merge(c,g,D,P){this.putInternal("m",c,g,D,P)}putInternal(c,g,D,P,G){this.initConnection_();const le={p:g,d:D};void 0!==G&&(le.h=G),this.outstandingPuts_.push({action:c,request:le,onComplete:P}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+g)}sendPut_(c){const g=this.outstandingPuts_[c].action,D=this.outstandingPuts_[c].request,P=this.outstandingPuts_[c].onComplete;this.outstandingPuts_[c].queued=this.connected_,this.sendRequest(g,D,G=>{this.log_(g+" response",G),delete this.outstandingPuts_[c],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),P&&P(G.s,G.d)})}reportStats(c){if(this.connected_){const g={c};this.log_("reportStats",g),this.sendRequest("s",g,D=>{"ok"!==D.s&&this.log_("reportStats","Error sending stats: "+D.d)})}}onDataMessage_(c){if("r"in c){this.log_("from server: "+(0,q.Pz)(c));const g=c.r,D=this.requestCBHash_[g];D&&(delete this.requestCBHash_[g],D(c.b))}else{if("error"in c)throw"A server-side error has occurred: "+c.error;"a"in c&&this.onDataPush_(c.a,c.b)}}onDataPush_(c,g){this.log_("handleServerMessage",c,g),"d"===c?this.onDataUpdate_(g.p,g.d,!1,g.t):"m"===c?this.onDataUpdate_(g.p,g.d,!0,g.t):"c"===c?this.onListenRevoked_(g.p,g.q):"ac"===c?this.onAuthRevoked_(g.s,g.d):"apc"===c?this.onAppCheckRevoked_(g.s,g.d):"sd"===c?this.onSecurityDebugPacket_(g):_r("Unrecognized action received from server: "+(0,q.Pz)(c)+"\nAre you using the latest client?")}onReady_(c,g){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(c),this.lastSessionId=g,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(c){(0,q.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(c))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(c){c&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ji,this.realtime_||this.scheduleConnect_(0)),this.visible_=c}onOnline_(c){c?(this.log_("Browser went online."),this.reconnectDelay_=ji,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=ji),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const c=(new Date).getTime()-this.lastConnectionAttemptTime_;let g=Math.max(0,this.reconnectDelay_-c);g=Math.random()*g,this.log_("Trying to reconnect in "+g+"ms"),this.scheduleConnect_(g),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var c=this;return(0,wt.Z)(function*(){if(c.shouldReconnect_()){c.log_("Making a connection attempt"),c.lastConnectionAttemptTime_=(new Date).getTime(),c.lastConnectionEstablishedTime_=null;const g=c.onDataMessage_.bind(c),D=c.onReady_.bind(c),P=c.onRealtimeDisconnect_.bind(c),G=c.id+":"+h.nextConnectionId_++,le=c.lastSessionId;let Me=!1,Qe=null;const Bt=function(){Qe?Qe.close():(Me=!0,P())};c.realtime_={close:Bt,sendRequest:function(ar){(0,q.hu)(Qe,"sendRequest call when we're not connected not allowed."),Qe.sendRequest(ar)}};const an=c.forceTokenRefresh_;c.forceTokenRefresh_=!1;try{const[ar,Mr]=yield Promise.all([c.authTokenProvider_.getToken(an),c.appCheckTokenProvider_.getToken(an)]);Me?Bn("getToken() completed but was canceled"):(Bn("getToken() completed. Creating connection."),c.authToken_=ar&&ar.accessToken,c.appCheckToken_=Mr&&Mr.token,Qe=new Ur(G,c.repoInfo_,c.applicationId_,c.appCheckToken_,c.authToken_,g,D,P,Yi=>{He(Yi+" ("+c.repoInfo_.toString()+")"),c.interrupt("server_kill")},le))}catch(ar){c.log_("Failed to get token: "+ar),Me||(c.repoInfo_.nodeAdmin&&He(ar),Bt())}}})()}interrupt(c){Bn("Interrupting connection for reason: "+c),this.interruptReasons_[c]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(c){Bn("Resuming connection for reason: "+c),delete this.interruptReasons_[c],(0,q.xb)(this.interruptReasons_)&&(this.reconnectDelay_=ji,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(c){const g=c-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:g})}cancelSentTransactions_(){for(let c=0;c<this.outstandingPuts_.length;c++){const g=this.outstandingPuts_[c];g&&"h"in g.request&&g.queued&&(g.onComplete&&g.onComplete("disconnect"),delete this.outstandingPuts_[c],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(c,g){let D;D=g?g.map(G=>Fn(G)).join("$"):"default";const P=this.removeListen_(c,D);P&&P.onComplete&&P.onComplete("permission_denied")}removeListen_(c,g){const D=new Pr(c).toString();let P;if(this.listens.has(D)){const G=this.listens.get(D);P=G.get(g),G.delete(g),0===G.size&&this.listens.delete(D)}else P=void 0;return P}onAuthRevoked_(c,g){Bn("Auth token revoked: "+c+"/"+g),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===c||"permission_denied"===c)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(c,g){Bn("App check token revoked: "+c+"/"+g),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===c||"permission_denied"===c)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(c){this.securityDebugCallback_?this.securityDebugCallback_(c):"msg"in c&&console.log("FIREBASE: "+c.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const c of this.listens.values())for(const g of c.values())this.sendListen_(g);for(let c=0;c<this.outstandingPuts_.length;c++)this.outstandingPuts_[c]&&this.sendPut_(c);for(;this.onDisconnectRequestQueue_.length;){const c=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(c.action,c.pathString,c.data,c.onComplete)}for(let c=0;c<this.outstandingGets_.length;c++)this.outstandingGets_[c]&&this.sendGet_(c)}sendConnectStats_(){const c={};let g="js";(0,q.Yr)()&&(g=this.repoInfo_.nodeAdmin?"admin_node":"node"),c["sdk."+g+"."+Gt.replace(/\./g,"-")]=1,(0,q.uI)()?c["framework.cordova"]=1:(0,q.b$)()&&(c["framework.reactnative"]=1),this.reportStats(c)}shouldReconnect_(){const c=Ni.getInstance().currentlyOnline();return(0,q.xb)(this.interruptReasons_)&&c}}return h.nextPersistentConnectionId_=0,h.nextConnectionId_=0,h})();class ct{constructor(u,c){this.name=u,this.node=c}static Wrap(u,c){return new ct(u,c)}}class zt{getCompare(){return this.compare.bind(this)}indexedValueChanged(u,c){const g=new ct(qt,u),D=new ct(qt,c);return 0!==this.compare(g,D)}minPost(){return ct.MIN}}class gr extends zt{static get __EMPTY_NODE(){return Dn}static set __EMPTY_NODE(u){Dn=u}compare(u,c){return Zn(u.name,c.name)}isDefinedOn(u){throw(0,q.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(u,c){return!1}minPost(){return ct.MIN}maxPost(){return new ct(cn,Dn)}makePost(u,c){return(0,q.hu)("string"==typeof u,"KeyIndex indexValue must always be a string."),new ct(u,Dn)}toString(){return".key"}}const br=new gr;class dr{constructor(u,c,g,D,P=null){this.isReverse_=D,this.resultGenerator_=P,this.nodeStack_=[];let G=1;for(;!u.isEmpty();)if(u=u,G=c?g(u.key,c):1,D&&(G*=-1),G<0)u=this.isReverse_?u.left:u.right;else{if(0===G){this.nodeStack_.push(u);break}this.nodeStack_.push(u),u=this.isReverse_?u.right:u.left}}getNext(){if(0===this.nodeStack_.length)return null;let c,u=this.nodeStack_.pop();if(c=this.resultGenerator_?this.resultGenerator_(u.key,u.value):{key:u.key,value:u.value},this.isReverse_)for(u=u.left;!u.isEmpty();)this.nodeStack_.push(u),u=u.right;else for(u=u.right;!u.isEmpty();)this.nodeStack_.push(u),u=u.left;return c}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const u=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(u.key,u.value):{key:u.key,value:u.value}}}let ns,wr=(()=>{class h{constructor(c,g,D,P,G){this.key=c,this.value=g,this.color=null!=D?D:h.RED,this.left=null!=P?P:Nr.EMPTY_NODE,this.right=null!=G?G:Nr.EMPTY_NODE}copy(c,g,D,P,G){return new h(null!=c?c:this.key,null!=g?g:this.value,null!=D?D:this.color,null!=P?P:this.left,null!=G?G:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(c){return this.left.inorderTraversal(c)||!!c(this.key,this.value)||this.right.inorderTraversal(c)}reverseTraversal(c){return this.right.reverseTraversal(c)||c(this.key,this.value)||this.left.reverseTraversal(c)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(c,g,D){let P=this;const G=D(c,P.key);return P=G<0?P.copy(null,null,null,P.left.insert(c,g,D),null):0===G?P.copy(null,g,null,null,null):P.copy(null,null,null,null,P.right.insert(c,g,D)),P.fixUp_()}removeMin_(){if(this.left.isEmpty())return Nr.EMPTY_NODE;let c=this;return!c.left.isRed_()&&!c.left.left.isRed_()&&(c=c.moveRedLeft_()),c=c.copy(null,null,null,c.left.removeMin_(),null),c.fixUp_()}remove(c,g){let D,P;if(D=this,g(c,D.key)<0)!D.left.isEmpty()&&!D.left.isRed_()&&!D.left.left.isRed_()&&(D=D.moveRedLeft_()),D=D.copy(null,null,null,D.left.remove(c,g),null);else{if(D.left.isRed_()&&(D=D.rotateRight_()),!D.right.isEmpty()&&!D.right.isRed_()&&!D.right.left.isRed_()&&(D=D.moveRedRight_()),0===g(c,D.key)){if(D.right.isEmpty())return Nr.EMPTY_NODE;P=D.right.min_(),D=D.copy(P.key,P.value,null,null,D.right.removeMin_())}D=D.copy(null,null,null,null,D.right.remove(c,g))}return D.fixUp_()}isRed_(){return this.color}fixUp_(){let c=this;return c.right.isRed_()&&!c.left.isRed_()&&(c=c.rotateLeft_()),c.left.isRed_()&&c.left.left.isRed_()&&(c=c.rotateRight_()),c.left.isRed_()&&c.right.isRed_()&&(c=c.colorFlip_()),c}moveRedLeft_(){let c=this.colorFlip_();return c.right.left.isRed_()&&(c=c.copy(null,null,null,null,c.right.rotateRight_()),c=c.rotateLeft_(),c=c.colorFlip_()),c}moveRedRight_(){let c=this.colorFlip_();return c.left.left.isRed_()&&(c=c.rotateRight_(),c=c.colorFlip_()),c}rotateLeft_(){const c=this.copy(null,null,h.RED,null,this.right.left);return this.right.copy(null,null,this.color,c,null)}rotateRight_(){const c=this.copy(null,null,h.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,c)}colorFlip_(){const c=this.left.copy(null,null,!this.left.color,null,null),g=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,c,g)}checkMaxDepth_(){const c=this.check_();return Math.pow(2,c)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const c=this.left.check_();if(c!==this.right.check_())throw new Error("Black depths differ");return c+(this.isRed_()?0:1)}}return h.RED=!0,h.BLACK=!1,h})();class Nr{constructor(u,c=Nr.EMPTY_NODE){this.comparator_=u,this.root_=c}insert(u,c){return new Nr(this.comparator_,this.root_.insert(u,c,this.comparator_).copy(null,null,wr.BLACK,null,null))}remove(u){return new Nr(this.comparator_,this.root_.remove(u,this.comparator_).copy(null,null,wr.BLACK,null,null))}get(u){let c,g=this.root_;for(;!g.isEmpty();){if(c=this.comparator_(u,g.key),0===c)return g.value;c<0?g=g.left:c>0&&(g=g.right)}return null}getPredecessorKey(u){let c,g=this.root_,D=null;for(;!g.isEmpty();){if(c=this.comparator_(u,g.key),0===c){if(g.left.isEmpty())return D?D.key:null;for(g=g.left;!g.right.isEmpty();)g=g.right;return g.key}c<0?g=g.left:c>0&&(D=g,g=g.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(u){return this.root_.inorderTraversal(u)}reverseTraversal(u){return this.root_.reverseTraversal(u)}getIterator(u){return new dr(this.root_,null,this.comparator_,!1,u)}getIteratorFrom(u,c){return new dr(this.root_,u,this.comparator_,!1,c)}getReverseIteratorFrom(u,c){return new dr(this.root_,u,this.comparator_,!0,c)}getReverseIterator(u){return new dr(this.root_,null,this.comparator_,!0,u)}}function vi(h,u){return Zn(h.name,u.name)}function bs(h,u){return Zn(h,u)}Nr.EMPTY_NODE=new class Fi{copy(u,c,g,D,P){return this}insert(u,c,g){return new wr(u,c,null)}remove(u,c){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(u){return!1}reverseTraversal(u){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Bi=function(h){return"number"==typeof h?"number:"+xe(h):"string:"+h},H=function(h){if(h.isLeafNode()){const u=h.val();(0,q.hu)("string"==typeof u||"number"==typeof u||"object"==typeof u&&(0,q.r3)(u,".sv"),"Priority must be a string or number.")}else(0,q.hu)(h===ns||h.isEmpty(),"priority of unexpected type.");(0,q.hu)(h===ns||h.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let B,re,Ut,N=(()=>{class h{constructor(c,g=h.__childrenNodeConstructor.EMPTY_NODE){this.value_=c,this.priorityNode_=g,this.lazyHash_=null,(0,q.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),H(this.priorityNode_)}static set __childrenNodeConstructor(c){B=c}static get __childrenNodeConstructor(){return B}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(c){return new h(this.value_,c)}getImmediateChild(c){return".priority"===c?this.priorityNode_:h.__childrenNodeConstructor.EMPTY_NODE}getChild(c){return pr(c)?this:".priority"===Ar(c)?this.priorityNode_:h.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(c,g){return null}updateImmediateChild(c,g){return".priority"===c?this.updatePriority(g):g.isEmpty()&&".priority"!==c?this:h.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(c,g).updatePriority(this.priorityNode_)}updateChild(c,g){const D=Ar(c);return null===D?g:g.isEmpty()&&".priority"!==D?this:((0,q.hu)(".priority"!==D||1===hi(c),".priority must be the last token in a path"),this.updateImmediateChild(D,h.__childrenNodeConstructor.EMPTY_NODE.updateChild(Or(c),g)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(c,g){return!1}val(c){return c&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let c="";this.priorityNode_.isEmpty()||(c+="priority:"+Bi(this.priorityNode_.val())+":");const g=typeof this.value_;c+=g+":",c+="number"===g?xe(this.value_):this.value_,this.lazyHash_=Qn(c)}return this.lazyHash_}getValue(){return this.value_}compareTo(c){return c===h.__childrenNodeConstructor.EMPTY_NODE?1:c instanceof h.__childrenNodeConstructor?-1:((0,q.hu)(c.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(c))}compareToLeafNode_(c){const g=typeof c.value_,D=typeof this.value_,P=h.VALUE_TYPE_ORDER.indexOf(g),G=h.VALUE_TYPE_ORDER.indexOf(D);return(0,q.hu)(P>=0,"Unknown leaf type: "+g),(0,q.hu)(G>=0,"Unknown leaf type: "+D),P===G?"object"===D?0:this.value_<c.value_?-1:this.value_===c.value_?0:1:G-P}withIndex(){return this}isIndexed(){return!0}equals(c){if(c===this)return!0;if(c.isLeafNode()){const g=c;return this.value_===g.value_&&this.priorityNode_.equals(g.priorityNode_)}return!1}}return h.VALUE_TYPE_ORDER=["object","boolean","number","string"],h})();const v=new class b extends zt{compare(u,c){const g=u.node.getPriority(),D=c.node.getPriority(),P=g.compareTo(D);return 0===P?Zn(u.name,c.name):P}isDefinedOn(u){return!u.getPriority().isEmpty()}indexedValueChanged(u,c){return!u.getPriority().equals(c.getPriority())}minPost(){return ct.MIN}maxPost(){return new ct(cn,new N("[PRIORITY-POST]",Ut))}makePost(u,c){const g=re(u);return new ct(c,new N("[PRIORITY-POST]",g))}toString(){return".priority"}},C=Math.log(2);class W{constructor(u){this.count=parseInt(Math.log(u+1)/C,10),this.current_=this.count-1;const D=(P=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=u+1&D}nextBitIsOne(){const u=!(this.bits_&1<<this.current_);return this.current_--,u}}const pe=function(h,u,c,g){h.sort(u);const D=function(Me,Qe){const Bt=Qe-Me;let Ft,an;if(0===Bt)return null;if(1===Bt)return Ft=h[Me],an=c?c(Ft):Ft,new wr(an,Ft.node,wr.BLACK,null,null);{const ar=parseInt(Bt/2,10)+Me,Mr=D(Me,ar),Yi=D(ar+1,Qe);return Ft=h[ar],an=c?c(Ft):Ft,new wr(an,Ft.node,wr.BLACK,Mr,Yi)}},le=function(Me){let Qe=null,Bt=null,Ft=h.length;const an=function(Mr,Yi){const Eo=Ft-Mr,Ll=Ft;Ft-=Mr;const bo=D(Eo+1,Ll),Bl=h[Eo],Np=c?c(Bl):Bl;ar(new wr(Np,Bl.node,Yi,null,bo))},ar=function(Mr){Qe?(Qe.left=Mr,Qe=Mr):(Bt=Mr,Qe=Mr)};for(let Mr=0;Mr<Me.count;++Mr){const Yi=Me.nextBitIsOne(),Eo=Math.pow(2,Me.count-(Mr+1));Yi?an(Eo,wr.BLACK):(an(Eo,wr.BLACK),an(Eo,wr.RED))}return Bt}(new W(h.length));return new Nr(g||u,le)};let Le;const vt={};class Ht{constructor(u,c){this.indexes_=u,this.indexSet_=c}static get Default(){return(0,q.hu)(vt&&v,"ChildrenNode.ts has not been loaded"),Le=Le||new Ht({".priority":vt},{".priority":v}),Le}get(u){const c=(0,q.DV)(this.indexes_,u);if(!c)throw new Error("No index defined for "+u);return c instanceof Nr?c:null}hasIndex(u){return(0,q.r3)(this.indexSet_,u.toString())}addIndex(u,c){(0,q.hu)(u!==br,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const g=[];let D=!1;const P=c.getIterator(ct.Wrap);let le,G=P.getNext();for(;G;)D=D||u.isDefinedOn(G.node),g.push(G),G=P.getNext();le=D?pe(g,u.getCompare()):vt;const Me=u.toString(),Qe=Object.assign({},this.indexSet_);Qe[Me]=u;const Bt=Object.assign({},this.indexes_);return Bt[Me]=le,new Ht(Bt,Qe)}addToIndexes(u,c){const g=(0,q.UI)(this.indexes_,(D,P)=>{const G=(0,q.DV)(this.indexSet_,P);if((0,q.hu)(G,"Missing index implementation for "+P),D===vt){if(G.isDefinedOn(u.node)){const le=[],Me=c.getIterator(ct.Wrap);let Qe=Me.getNext();for(;Qe;)Qe.name!==u.name&&le.push(Qe),Qe=Me.getNext();return le.push(u),pe(le,G.getCompare())}return vt}{const le=c.get(u.name);let Me=D;return le&&(Me=Me.remove(new ct(u.name,le))),Me.insert(u,u.node)}});return new Ht(g,this.indexSet_)}removeFromIndexes(u,c){const g=(0,q.UI)(this.indexes_,D=>{if(D===vt)return D;{const P=c.get(u.name);return P?D.remove(new ct(u.name,P)):D}});return new Ht(g,this.indexSet_)}}let In,Wt=(()=>{class h{constructor(c,g,D){this.children_=c,this.priorityNode_=g,this.indexMap_=D,this.lazyHash_=null,this.priorityNode_&&H(this.priorityNode_),this.children_.isEmpty()&&(0,q.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return In||(In=new h(new Nr(bs),null,Ht.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||In}updatePriority(c){return this.children_.isEmpty()?this:new h(this.children_,c,this.indexMap_)}getImmediateChild(c){if(".priority"===c)return this.getPriority();{const g=this.children_.get(c);return null===g?In:g}}getChild(c){const g=Ar(c);return null===g?this:this.getImmediateChild(g).getChild(Or(c))}hasChild(c){return null!==this.children_.get(c)}updateImmediateChild(c,g){if((0,q.hu)(g,"We should always be passing snapshot nodes"),".priority"===c)return this.updatePriority(g);{const D=new ct(c,g);let P,G;g.isEmpty()?(P=this.children_.remove(c),G=this.indexMap_.removeFromIndexes(D,this.children_)):(P=this.children_.insert(c,g),G=this.indexMap_.addToIndexes(D,this.children_));const le=P.isEmpty()?In:this.priorityNode_;return new h(P,le,G)}}updateChild(c,g){const D=Ar(c);if(null===D)return g;{(0,q.hu)(".priority"!==Ar(c)||1===hi(c),".priority must be the last token in a path");const P=this.getImmediateChild(D).updateChild(Or(c),g);return this.updateImmediateChild(D,P)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(c){if(this.isEmpty())return null;const g={};let D=0,P=0,G=!0;if(this.forEachChild(v,(le,Me)=>{g[le]=Me.val(c),D++,G&&h.INTEGER_REGEXP_.test(le)?P=Math.max(P,Number(le)):G=!1}),!c&&G&&P<2*D){const le=[];for(const Me in g)le[Me]=g[Me];return le}return c&&!this.getPriority().isEmpty()&&(g[".priority"]=this.getPriority().val()),g}hash(){if(null===this.lazyHash_){let c="";this.getPriority().isEmpty()||(c+="priority:"+Bi(this.getPriority().val())+":"),this.forEachChild(v,(g,D)=>{const P=D.hash();""!==P&&(c+=":"+g+":"+P)}),this.lazyHash_=""===c?"":Qn(c)}return this.lazyHash_}getPredecessorChildName(c,g,D){const P=this.resolveIndex_(D);if(P){const G=P.getPredecessorKey(new ct(c,g));return G?G.name:null}return this.children_.getPredecessorKey(c)}getFirstChildName(c){const g=this.resolveIndex_(c);if(g){const D=g.minKey();return D&&D.name}return this.children_.minKey()}getFirstChild(c){const g=this.getFirstChildName(c);return g?new ct(g,this.children_.get(g)):null}getLastChildName(c){const g=this.resolveIndex_(c);if(g){const D=g.maxKey();return D&&D.name}return this.children_.maxKey()}getLastChild(c){const g=this.getLastChildName(c);return g?new ct(g,this.children_.get(g)):null}forEachChild(c,g){const D=this.resolveIndex_(c);return D?D.inorderTraversal(P=>g(P.name,P.node)):this.children_.inorderTraversal(g)}getIterator(c){return this.getIteratorFrom(c.minPost(),c)}getIteratorFrom(c,g){const D=this.resolveIndex_(g);if(D)return D.getIteratorFrom(c,P=>P);{const P=this.children_.getIteratorFrom(c.name,ct.Wrap);let G=P.peek();for(;null!=G&&g.compare(G,c)<0;)P.getNext(),G=P.peek();return P}}getReverseIterator(c){return this.getReverseIteratorFrom(c.maxPost(),c)}getReverseIteratorFrom(c,g){const D=this.resolveIndex_(g);if(D)return D.getReverseIteratorFrom(c,P=>P);{const P=this.children_.getReverseIteratorFrom(c.name,ct.Wrap);let G=P.peek();for(;null!=G&&g.compare(G,c)>0;)P.getNext(),G=P.peek();return P}}compareTo(c){return this.isEmpty()?c.isEmpty()?0:-1:c.isLeafNode()||c.isEmpty()?1:c===mr?-1:0}withIndex(c){if(c===br||this.indexMap_.hasIndex(c))return this;{const g=this.indexMap_.addIndex(c,this.children_);return new h(this.children_,this.priorityNode_,g)}}isIndexed(c){return c===br||this.indexMap_.hasIndex(c)}equals(c){if(c===this)return!0;if(c.isLeafNode())return!1;{const g=c;if(this.getPriority().equals(g.getPriority())){if(this.children_.count()===g.children_.count()){const D=this.getIterator(v),P=g.getIterator(v);let G=D.getNext(),le=P.getNext();for(;G&&le;){if(G.name!==le.name||!G.node.equals(le.node))return!1;G=D.getNext(),le=P.getNext()}return null===G&&null===le}return!1}return!1}}resolveIndex_(c){return c===br?null:this.indexMap_.get(c.toString())}}return h.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,h})();const mr=new class or extends Wt{constructor(){super(new Nr(bs),Wt.EMPTY_NODE,Ht.Default)}compareTo(u){return u===this?0:1}equals(u){return u===this}getPriority(){return this}getImmediateChild(u){return Wt.EMPTY_NODE}isEmpty(){return!1}};function Un(h,u=null){if(null===h)return Wt.EMPTY_NODE;if("object"==typeof h&&".priority"in h&&(u=h[".priority"]),(0,q.hu)(null===u||"string"==typeof u||"number"==typeof u||"object"==typeof u&&".sv"in u,"Invalid priority type found: "+typeof u),"object"==typeof h&&".value"in h&&null!==h[".value"]&&(h=h[".value"]),"object"!=typeof h||".sv"in h)return new N(h,Un(u));if(h instanceof Array){let c=Wt.EMPTY_NODE;return Hn(h,(g,D)=>{if((0,q.r3)(h,g)&&"."!==g.substring(0,1)){const P=Un(D);(P.isLeafNode()||!P.isEmpty())&&(c=c.updateImmediateChild(g,P))}}),c.updatePriority(Un(u))}{const c=[];let g=!1;if(Hn(h,(G,le)=>{if("."!==G.substring(0,1)){const Me=Un(le);Me.isEmpty()||(g=g||!Me.getPriority().isEmpty(),c.push(new ct(G,Me)))}}),0===c.length)return Wt.EMPTY_NODE;const P=pe(c,vi,G=>G.name,bs);if(g){const G=pe(c,v.getCompare());return new Wt(P,Un(u),new Ht({".priority":G},{".priority":v}))}return new Wt(P,Un(u),Ht.Default)}}Object.defineProperties(ct,{MIN:{value:new ct(qt,Wt.EMPTY_NODE)},MAX:{value:new ct(cn,mr)}}),gr.__EMPTY_NODE=Wt.EMPTY_NODE,N.__childrenNodeConstructor=Wt,function Xn(h){ns=h}(mr),function k(h){Ut=h}(mr),function E(h){re=h}(Un);class Ci extends zt{constructor(u){super(),this.indexPath_=u,(0,q.hu)(!pr(u)&&".priority"!==Ar(u),"Can't create PathIndex with empty path or .priority key")}extractChild(u){return u.getChild(this.indexPath_)}isDefinedOn(u){return!u.getChild(this.indexPath_).isEmpty()}compare(u,c){const g=this.extractChild(u.node),D=this.extractChild(c.node),P=g.compareTo(D);return 0===P?Zn(u.name,c.name):P}makePost(u,c){const g=Un(u),D=Wt.EMPTY_NODE.updateChild(this.indexPath_,g);return new ct(c,D)}maxPost(){const u=Wt.EMPTY_NODE.updateChild(this.indexPath_,mr);return new ct(cn,u)}toString(){return Ss(this.indexPath_,0).join("/")}}const Ai=new class Di extends zt{compare(u,c){const g=u.node.compareTo(c.node);return 0===g?Zn(u.name,c.name):g}isDefinedOn(u){return!0}indexedValueChanged(u,c){return!u.equals(c)}minPost(){return ct.MIN}maxPost(){return ct.MAX}makePost(u,c){const g=Un(u);return new ct(c,g)}toString(){return".value"}},fi="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",is=function(){let h=0;const u=[];return function(c){const g=c===h;let D;h=c;const P=new Array(8);for(D=7;D>=0;D--)P[D]=fi.charAt(c%64),c=Math.floor(c/64);(0,q.hu)(0===c,"Cannot push at time == 0");let G=P.join("");if(g){for(D=11;D>=0&&63===u[D];D--)u[D]=0;u[D]++}else for(D=0;D<12;D++)u[D]=Math.floor(64*Math.random());for(D=0;D<12;D++)G+=fi.charAt(u[D]);return(0,q.hu)(20===G.length,"nextPushId: Length should be 20."),G}}(),co=function(h){if(h===""+tn)return"-";const u=un(h);if(null!=u)return""+(u+1);const c=new Array(h.length);for(let G=0;G<c.length;G++)c[G]=h.charAt(G);if(c.length<786)return c.push("-"),c.join("");let g=c.length-1;for(;g>=0&&"z"===c[g];)g--;if(-1===g)return cn;const P=fi.charAt(fi.indexOf(c[g])+1);return c[g]=P,c.slice(0,g+1).join("")},ho=function(h){if(h===""+ht)return qt;const u=un(h);if(null!=u)return""+(u-1);const c=new Array(h.length);for(let g=0;g<c.length;g++)c[g]=h.charAt(g);return"-"===c[c.length-1]?1===c.length?""+tn:(delete c[c.length-1],c.join("")):(c[c.length-1]=fi.charAt(fi.indexOf(c[c.length-1])-1),c.join("")+"z".repeat(786-c.length))};function jo(h){return{type:"value",snapshotNode:h}}function fo(h,u){return{type:"child_added",snapshotNode:u,childName:h}}function po(h,u){return{type:"child_removed",snapshotNode:u,childName:h}}function No(h,u,c){return{type:"child_changed",snapshotNode:u,childName:h,oldSnap:c}}class Ma{constructor(u){this.index_=u}updateChild(u,c,g,D,P,G){(0,q.hu)(u.isIndexed(this.index_),"A node must be indexed if only a child is updated");const le=u.getImmediateChild(c);return le.getChild(D).equals(g.getChild(D))&&le.isEmpty()===g.isEmpty()||(null!=G&&(g.isEmpty()?u.hasChild(c)?G.trackChildChange(po(c,le)):(0,q.hu)(u.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):le.isEmpty()?G.trackChildChange(fo(c,g)):G.trackChildChange(No(c,g,le))),u.isLeafNode()&&g.isEmpty())?u:u.updateImmediateChild(c,g).withIndex(this.index_)}updateFullNode(u,c,g){return null!=g&&(u.isLeafNode()||u.forEachChild(v,(D,P)=>{c.hasChild(D)||g.trackChildChange(po(D,P))}),c.isLeafNode()||c.forEachChild(v,(D,P)=>{if(u.hasChild(D)){const G=u.getImmediateChild(D);G.equals(P)||g.trackChildChange(No(D,P,G))}else g.trackChildChange(fo(D,P))})),c.withIndex(this.index_)}updatePriority(u,c){return u.isEmpty()?Wt.EMPTY_NODE:u.updatePriority(c)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Os{constructor(u){this.indexedFilter_=new Ma(u.getIndex()),this.index_=u.getIndex(),this.startPost_=Os.getStartPost_(u),this.endPost_=Os.getEndPost_(u)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(u){return this.index_.compare(this.getStartPost(),u)<=0&&this.index_.compare(u,this.getEndPost())<=0}updateChild(u,c,g,D,P,G){return this.matches(new ct(c,g))||(g=Wt.EMPTY_NODE),this.indexedFilter_.updateChild(u,c,g,D,P,G)}updateFullNode(u,c,g){c.isLeafNode()&&(c=Wt.EMPTY_NODE);let D=c.withIndex(this.index_);D=D.updatePriority(Wt.EMPTY_NODE);const P=this;return c.forEachChild(v,(G,le)=>{P.matches(new ct(G,le))||(D=D.updateImmediateChild(G,Wt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(u,D,g)}updatePriority(u,c){return u}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(u){if(u.hasStart()){const c=u.getIndexStartName();return u.getIndex().makePost(u.getIndexStartValue(),c)}return u.getIndex().minPost()}static getEndPost_(u){if(u.hasEnd()){const c=u.getIndexEndName();return u.getIndex().makePost(u.getIndexEndValue(),c)}return u.getIndex().maxPost()}}class Ya{constructor(u){this.rangedFilter_=new Os(u),this.index_=u.getIndex(),this.limit_=u.getLimit(),this.reverse_=!u.isViewFromLeft()}updateChild(u,c,g,D,P,G){return this.rangedFilter_.matches(new ct(c,g))||(g=Wt.EMPTY_NODE),u.getImmediateChild(c).equals(g)?u:u.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(u,c,g,D,P,G):this.fullLimitUpdateChild_(u,c,g,P,G)}updateFullNode(u,c,g){let D;if(c.isLeafNode()||c.isEmpty())D=Wt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<c.numChildren()&&c.isIndexed(this.index_)){let P;D=Wt.EMPTY_NODE.withIndex(this.index_),P=this.reverse_?c.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):c.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let G=0;for(;P.hasNext()&&G<this.limit_;){const le=P.getNext();let Me;if(Me=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),le)<=0:this.index_.compare(le,this.rangedFilter_.getEndPost())<=0,!Me)break;D=D.updateImmediateChild(le.name,le.node),G++}}else{let P,G,le,Me;if(D=c.withIndex(this.index_),D=D.updatePriority(Wt.EMPTY_NODE),this.reverse_){Me=D.getReverseIterator(this.index_),P=this.rangedFilter_.getEndPost(),G=this.rangedFilter_.getStartPost();const Ft=this.index_.getCompare();le=(an,ar)=>Ft(ar,an)}else Me=D.getIterator(this.index_),P=this.rangedFilter_.getStartPost(),G=this.rangedFilter_.getEndPost(),le=this.index_.getCompare();let Qe=0,Bt=!1;for(;Me.hasNext();){const Ft=Me.getNext();!Bt&&le(P,Ft)<=0&&(Bt=!0),Bt&&Qe<this.limit_&&le(Ft,G)<=0?Qe++:D=D.updateImmediateChild(Ft.name,Wt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(u,D,g)}updatePriority(u,c){return u}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(u,c,g,D,P){let G;if(this.reverse_){const Ft=this.index_.getCompare();G=(an,ar)=>Ft(ar,an)}else G=this.index_.getCompare();const le=u;(0,q.hu)(le.numChildren()===this.limit_,"");const Me=new ct(c,g),Qe=this.reverse_?le.getFirstChild(this.index_):le.getLastChild(this.index_),Bt=this.rangedFilter_.matches(Me);if(le.hasChild(c)){const Ft=le.getImmediateChild(c);let an=D.getChildAfterChild(this.index_,Qe,this.reverse_);for(;null!=an&&(an.name===c||le.hasChild(an.name));)an=D.getChildAfterChild(this.index_,an,this.reverse_);const ar=null==an?1:G(an,Me);if(Bt&&!g.isEmpty()&&ar>=0)return null!=P&&P.trackChildChange(No(c,g,Ft)),le.updateImmediateChild(c,g);{null!=P&&P.trackChildChange(po(c,Ft));const Yi=le.updateImmediateChild(c,Wt.EMPTY_NODE);return null!=an&&this.rangedFilter_.matches(an)?(null!=P&&P.trackChildChange(fo(an.name,an.node)),Yi.updateImmediateChild(an.name,an.node)):Yi}}return g.isEmpty()?u:Bt&&G(Qe,Me)>=0?(null!=P&&(P.trackChildChange(po(Qe.name,Qe.node)),P.trackChildChange(fo(c,g))),le.updateImmediateChild(c,g).updateImmediateChild(Qe.name,Wt.EMPTY_NODE)):u}}class Yo{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=v}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,q.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,q.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:qt}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,q.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,q.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:cn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,q.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===v}copy(){const u=new Yo;return u.limitSet_=this.limitSet_,u.limit_=this.limit_,u.startSet_=this.startSet_,u.indexStartValue_=this.indexStartValue_,u.startNameSet_=this.startNameSet_,u.indexStartName_=this.indexStartName_,u.endSet_=this.endSet_,u.indexEndValue_=this.indexEndValue_,u.endNameSet_=this.endNameSet_,u.indexEndName_=this.indexEndName_,u.index_=this.index_,u.viewFrom_=this.viewFrom_,u}}function Co(h,u,c){const g=h.copy();return g.startSet_=!0,void 0===u&&(u=null),g.indexStartValue_=u,null!=c?(g.startNameSet_=!0,g.indexStartName_=c):(g.startNameSet_=!1,g.indexStartName_=""),g}function ou(h,u,c){const g=h.copy();return g.endSet_=!0,void 0===u&&(u=null),g.indexEndValue_=u,void 0!==c?(g.endNameSet_=!0,g.indexEndName_=c):(g.endNameSet_=!1,g.indexEndName_=""),g}function Za(h,u){const c=h.copy();return c.index_=u,c}function au(h){const u={};if(h.isDefault())return u;let c;return h.index_===v?c="$priority":h.index_===Ai?c="$value":h.index_===br?c="$key":((0,q.hu)(h.index_ instanceof Ci,"Unrecognized index type!"),c=h.index_.toString()),u.orderBy=(0,q.Pz)(c),h.startSet_&&(u.startAt=(0,q.Pz)(h.indexStartValue_),h.startNameSet_&&(u.startAt+=","+(0,q.Pz)(h.indexStartName_))),h.endSet_&&(u.endAt=(0,q.Pz)(h.indexEndValue_),h.endNameSet_&&(u.endAt+=","+(0,q.Pz)(h.indexEndName_))),h.limitSet_&&(h.isViewFromLeft()?u.limitToFirst=h.limit_:u.limitToLast=h.limit_),u}function Oa(h){const u={};if(h.startSet_&&(u.sp=h.indexStartValue_,h.startNameSet_&&(u.sn=h.indexStartName_)),h.endSet_&&(u.ep=h.indexEndValue_,h.endNameSet_&&(u.en=h.indexEndName_)),h.limitSet_){u.l=h.limit_;let c=h.viewFrom_;""===c&&(c=h.isViewFromLeft()?"l":"r"),u.vf=c}return h.index_!==v&&(u.i=h.index_.toString()),u}class wa extends ys{constructor(u,c,g,D){super(),this.repoInfo_=u,this.onDataUpdate_=c,this.authTokenProvider_=g,this.appCheckTokenProvider_=D,this.log_=nr("p:rest:"),this.listens_={}}reportStats(u){throw new Error("Method not implemented.")}static getListenId_(u,c){return void 0!==c?"tag$"+c:((0,q.hu)(u._queryParams.isDefault(),"should have a tag if it's not a default query."),u._path.toString())}listen(u,c,g,D){const P=u._path.toString();this.log_("Listen called for "+P+" "+u._queryIdentifier);const G=wa.getListenId_(u,g),le={};this.listens_[G]=le;const Me=au(u._queryParams);this.restRequest_(P+".json",Me,(Qe,Bt)=>{let Ft=Bt;if(404===Qe&&(Ft=null,Qe=null),null===Qe&&this.onDataUpdate_(P,Ft,!1,g),(0,q.DV)(this.listens_,G)===le){let an;an=Qe?401===Qe?"permission_denied":"rest_error:"+Qe:"ok",D(an,null)}})}unlisten(u,c){const g=wa.getListenId_(u,c);delete this.listens_[g]}get(u){const c=au(u._queryParams),g=u._path.toString(),D=new q.BH;return this.restRequest_(g+".json",c,(P,G)=>{let le=G;404===P&&(le=null,P=null),null===P?(this.onDataUpdate_(g,le,!1,null),D.resolve(le)):D.reject(new Error(le))}),D.promise}refreshAuthToken(u){}restRequest_(u,c={},g){return c.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([D,P])=>{D&&D.accessToken&&(c.auth=D.accessToken),P&&P.token&&(c.ac=P.token);const G=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+u+"?ns="+this.repoInfo_.namespace+(0,q.xO)(c);this.log_("Sending REST request for "+G);const le=new XMLHttpRequest;le.onreadystatechange=()=>{if(g&&4===le.readyState){this.log_("REST Response for "+G+" received. status:",le.status,"response:",le.responseText);let Me=null;if(le.status>=200&&le.status<300){try{Me=(0,q.cI)(le.responseText)}catch(Qe){He("Failed to parse JSON response for "+G+": "+le.responseText)}g(null,Me)}else 401!==le.status&&404!==le.status&&He("Got unsuccessful REST response for "+G+" Status: "+le.status),g(le.status);g=null}},le.open("GET",G,!0),le.send()})}}class cl{constructor(){this.rootNode_=Wt.EMPTY_NODE}getNode(u){return this.rootNode_.getChild(u)}updateSnapshot(u,c){this.rootNode_=this.rootNode_.updateChild(u,c)}}function Do(){return{value:null,children:new Map}}function Ns(h,u,c){if(pr(u))h.value=c,h.children.clear();else if(null!==h.value)h.value=h.value.updateChild(u,c);else{const g=Ar(u);h.children.has(g)||h.children.set(g,Do()),Ns(h.children.get(g),u=Or(u),c)}}function Ho(h,u){if(pr(u))return h.value=null,h.children.clear(),!0;if(null!==h.value){if(h.value.isLeafNode())return!1;{const c=h.value;return h.value=null,c.forEachChild(v,(g,D)=>{Ns(h,new Pr(g),D)}),Ho(h,u)}}if(h.children.size>0){const c=Ar(u);return u=Or(u),h.children.has(c)&&Ho(h.children.get(c),u)&&h.children.delete(c),0===h.children.size}return!0}function hs(h,u,c){null!==h.value?c(u,h.value):function Xa(h,u){h.children.forEach((c,g)=>{u(g,c)})}(h,(g,D)=>{hs(D,new Pr(u.toString()+"/"+g),c)})}class Ko{constructor(u){this.collection_=u,this.last_=null}get(){const u=this.collection_.get(),c=Object.assign({},u);return this.last_&&Hn(this.last_,(g,D)=>{c[g]=c[g]-D}),this.last_=u,c}}class As{constructor(u,c){this.server_=c,this.statsToReport_={},this.statsListener_=new Ko(u);const g=1e4+2e4*Math.random();Gn(this.reportStats_.bind(this),Math.floor(g))}reportStats_(){const u=this.statsListener_.get(),c={};let g=!1;Hn(u,(D,P)=>{P>0&&(0,q.r3)(this.statsToReport_,D)&&(c[D]=P,g=!0)}),g&&this.server_.reportStats(c),Gn(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ws=(()=>{return(h=ws||(ws={}))[h.OVERWRITE=0]="OVERWRITE",h[h.MERGE=1]="MERGE",h[h.ACK_USER_WRITE=2]="ACK_USER_WRITE",h[h.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",ws;var h})();function Bs(h){return{fromUser:!1,fromServer:!0,queryId:h,tagged:!0}}class Qo{constructor(u,c,g){this.path=u,this.affectedTree=c,this.revert=g,this.type=ws.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(u){if(pr(this.path)){if(null!=this.affectedTree.value)return(0,q.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const c=this.affectedTree.subtree(new Pr(u));return new Qo($r(),c,this.revert)}}return(0,q.hu)(Ar(this.path)===u,"operationForChild called for unrelated child."),new Qo(Or(this.path),this.affectedTree,this.revert)}}class Is{constructor(u,c){this.source=u,this.path=c,this.type=ws.LISTEN_COMPLETE}operationForChild(u){return pr(this.path)?new Is(this.source,$r()):new Is(this.source,Or(this.path))}}class qs{constructor(u,c,g){this.source=u,this.path=c,this.snap=g,this.type=ws.OVERWRITE}operationForChild(u){return pr(this.path)?new qs(this.source,$r(),this.snap.getImmediateChild(u)):new qs(this.source,Or(this.path),this.snap)}}class da{constructor(u,c,g){this.source=u,this.path=c,this.children=g,this.type=ws.MERGE}operationForChild(u){if(pr(this.path)){const c=this.children.subtree(new Pr(u));return c.isEmpty()?null:c.value?new qs(this.source,$r(),c.value):new da(this.source,$r(),c)}return(0,q.hu)(Ar(this.path)===u,"Can't get a merge for a child not on the path of the operation"),new da(this.source,Or(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class xs{constructor(u,c,g){this.node_=u,this.fullyInitialized_=c,this.filtered_=g}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(u){if(pr(u))return this.isFullyInitialized()&&!this.filtered_;const c=Ar(u);return this.isCompleteForChild(c)}isCompleteForChild(u){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(u)}getNode(){return this.node_}}class Fa{constructor(u){this.query_=u,this.index_=this.query_._queryParams.getIndex()}}function Ys(h,u,c,g,D,P){const G=g.filter(le=>le.type===c);G.sort((le,Me)=>function xi(h,u,c){if(null==u.childName||null==c.childName)throw(0,q.g5)("Should only compare child_ events.");const g=new ct(u.childName,u.snapshotNode),D=new ct(c.childName,c.snapshotNode);return h.index_.compare(g,D)}(h,le,Me)),G.forEach(le=>{const Me=function Hl(h,u,c){return"value"===u.type||"child_removed"===u.type||(u.prevName=c.getPredecessorChildName(u.childName,u.snapshotNode,h.index_)),u}(h,le,P);D.forEach(Qe=>{Qe.respondsTo(le.type)&&u.push(Qe.createEvent(Me,h.query_))})})}function To(h,u){return{eventCache:h,serverCache:u}}function Fo(h,u,c,g){return To(new xs(u,c,g),h.serverCache)}function dl(h,u,c,g){return To(h.eventCache,new xs(u,c,g))}function os(h){return h.eventCache.isFullyInitialized()?h.eventCache.getNode():null}function go(h){return h.serverCache.isFullyInitialized()?h.serverCache.getNode():null}let Go;class gi{constructor(u,c=(()=>(Go||(Go=new Nr(Jn)),Go))()){this.value=u,this.children=c}static fromObject(u){let c=new gi(null);return Hn(u,(g,D)=>{c=c.set(new Pr(g),D)}),c}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(u,c){if(null!=this.value&&c(this.value))return{path:$r(),value:this.value};if(pr(u))return null;{const g=Ar(u),D=this.children.get(g);if(null!==D){const P=D.findRootMostMatchingPathAndValue(Or(u),c);return null!=P?{path:ai(new Pr(g),P.path),value:P.value}:null}return null}}findRootMostValueAndPath(u){return this.findRootMostMatchingPathAndValue(u,()=>!0)}subtree(u){if(pr(u))return this;{const c=Ar(u),g=this.children.get(c);return null!==g?g.subtree(Or(u)):new gi(null)}}set(u,c){if(pr(u))return new gi(c,this.children);{const g=Ar(u),P=(this.children.get(g)||new gi(null)).set(Or(u),c),G=this.children.insert(g,P);return new gi(this.value,G)}}remove(u){if(pr(u))return this.children.isEmpty()?new gi(null):new gi(null,this.children);{const c=Ar(u),g=this.children.get(c);if(g){const D=g.remove(Or(u));let P;return P=D.isEmpty()?this.children.remove(c):this.children.insert(c,D),null===this.value&&P.isEmpty()?new gi(null):new gi(this.value,P)}return this}}get(u){if(pr(u))return this.value;{const c=Ar(u),g=this.children.get(c);return g?g.get(Or(u)):null}}setTree(u,c){if(pr(u))return c;{const g=Ar(u),P=(this.children.get(g)||new gi(null)).setTree(Or(u),c);let G;return G=P.isEmpty()?this.children.remove(g):this.children.insert(g,P),new gi(this.value,G)}}fold(u){return this.fold_($r(),u)}fold_(u,c){const g={};return this.children.inorderTraversal((D,P)=>{g[D]=P.fold_(ai(u,D),c)}),c(u,this.value,g)}findOnPath(u,c){return this.findOnPath_(u,$r(),c)}findOnPath_(u,c,g){const D=!!this.value&&g(c,this.value);if(D)return D;if(pr(u))return null;{const P=Ar(u),G=this.children.get(P);return G?G.findOnPath_(Or(u),ai(c,P),g):null}}foreachOnPath(u,c){return this.foreachOnPath_(u,$r(),c)}foreachOnPath_(u,c,g){if(pr(u))return this;{this.value&&g(c,this.value);const D=Ar(u),P=this.children.get(D);return P?P.foreachOnPath_(Or(u),ai(c,D),g):new gi(null)}}foreach(u){this.foreach_($r(),u)}foreach_(u,c){this.children.inorderTraversal((g,D)=>{D.foreach_(ai(u,g),c)}),this.value&&c(u,this.value)}foreachChild(u){this.children.inorderTraversal((c,g)=>{g.value&&u(c,g.value)})}}class ln{constructor(u){this.writeTree_=u}static empty(){return new ln(new gi(null))}}function Pi(h,u,c){if(pr(u))return new ln(new gi(c));{const g=h.writeTree_.findRootMostValueAndPath(u);if(null!=g){const D=g.path;let P=g.value;const G=Ii(D,u);return P=P.updateChild(G,c),new ln(h.writeTree_.set(D,P))}{const D=new gi(c),P=h.writeTree_.setTree(u,D);return new ln(P)}}}function io(h,u,c){let g=h;return Hn(c,(D,P)=>{g=Pi(g,ai(u,D),P)}),g}function Cs(h,u){if(pr(u))return ln.empty();{const c=h.writeTree_.setTree(u,new gi(null));return new ln(c)}}function Kn(h,u){return null!=ur(h,u)}function ur(h,u){const c=h.writeTree_.findRootMostValueAndPath(u);return null!=c?h.writeTree_.get(c.path).getChild(Ii(c.path,u)):null}function ha(h){const u=[],c=h.writeTree_.value;return null!=c?c.isLeafNode()||c.forEachChild(v,(g,D)=>{u.push(new ct(g,D))}):h.writeTree_.children.inorderTraversal((g,D)=>{null!=D.value&&u.push(new ct(g,D.value))}),u}function Sn(h,u){if(pr(u))return h;{const c=ur(h,u);return new ln(null!=c?new gi(c):h.writeTree_.subtree(u))}}function Vt(h){return h.writeTree_.isEmpty()}function M(h,u){return x($r(),h.writeTree_,u)}function x(h,u,c){if(null!=u.value)return c.updateChild(h,u.value);{let g=null;return u.children.inorderTraversal((D,P)=>{".priority"===D?((0,q.hu)(null!==P.value,"Priority writes must always be leaf nodes"),g=P.value):c=x(ai(h,D),P,c)}),!c.getChild(h).isEmpty()&&null!==g&&(c=c.updateChild(ai(h,".priority"),g)),c}}function S(h,u){return Ms(u,h)}function it(h,u){if(h.snap)return kr(h.path,u);for(const c in h.children)if(h.children.hasOwnProperty(c)&&kr(ai(h.path,c),u))return!0;return!1}function $n(h){return h.visible}function Jr(h,u,c){let g=ln.empty();for(let D=0;D<h.length;++D){const P=h[D];if(u(P)){const G=P.path;let le;if(P.snap)kr(c,G)?(le=Ii(c,G),g=Pi(g,le,P.snap)):kr(G,c)&&(le=Ii(G,c),g=Pi(g,$r(),P.snap.getChild(le)));else{if(!P.children)throw(0,q.g5)("WriteRecord should have .snap or .children");if(kr(c,G))le=Ii(c,G),g=io(g,le,P.children);else if(kr(G,c))if(le=Ii(G,c),pr(le))g=io(g,$r(),P.children);else{const Me=(0,q.DV)(P.children,Ar(le));if(Me){const Qe=Me.getChild(Or(le));g=Pi(g,$r(),Qe)}}}}}return g}function Nn(h,u,c,g,D){if(g||D){const P=Sn(h.visibleWrites,u);return!D&&Vt(P)?c:D||null!=c||Kn(P,$r())?M(Jr(h.allWrites,function(Qe){return(Qe.visible||D)&&(!g||!~g.indexOf(Qe.writeId))&&(kr(Qe.path,u)||kr(u,Qe.path))},u),c||Wt.EMPTY_NODE):null}{const P=ur(h.visibleWrites,u);if(null!=P)return P;{const G=Sn(h.visibleWrites,u);return Vt(G)?c:null!=c||Kn(G,$r())?M(G,c||Wt.EMPTY_NODE):null}}}function lr(h,u,c,g){return Nn(h.writeTree,h.treePath,u,c,g)}function zi(h,u){return function li(h,u,c){let g=Wt.EMPTY_NODE;const D=ur(h.visibleWrites,u);if(D)return D.isLeafNode()||D.forEachChild(v,(P,G)=>{g=g.updateImmediateChild(P,G)}),g;if(c){const P=Sn(h.visibleWrites,u);return c.forEachChild(v,(G,le)=>{const Me=M(Sn(P,new Pr(G)),le);g=g.updateImmediateChild(G,Me)}),ha(P).forEach(G=>{g=g.updateImmediateChild(G.name,G.node)}),g}return ha(Sn(h.visibleWrites,u)).forEach(G=>{g=g.updateImmediateChild(G.name,G.node)}),g}(h.writeTree,h.treePath,u)}function Qa(h,u,c,g){return function ci(h,u,c,g,D){(0,q.hu)(g||D,"Either existingEventSnap or existingServerSnap must exist");const P=ai(u,c);if(Kn(h.visibleWrites,P))return null;{const G=Sn(h.visibleWrites,P);return Vt(G)?D.getChild(c):M(G,D.getChild(c))}}(h.writeTree,h.treePath,u,c,g)}function Pu(h,u){return function Ks(h,u){return ur(h.visibleWrites,u)}(h.writeTree,ai(h.treePath,u))}function mi(h,u,c){return function Ir(h,u,c,g){const D=ai(u,c),P=ur(h.visibleWrites,D);return null!=P?P:g.isCompleteForChild(c)?M(Sn(h.visibleWrites,D),g.getNode().getImmediateChild(c)):null}(h.writeTree,h.treePath,u,c)}function uc(h,u){return Ms(ai(h.treePath,u),h.writeTree)}function Ms(h,u){return{treePath:h,writeTree:u}}class Gl{constructor(){this.changeMap=new Map}trackChildChange(u){const c=u.type,g=u.childName;(0,q.hu)("child_added"===c||"child_changed"===c||"child_removed"===c,"Only child changes supported for tracking"),(0,q.hu)(".priority"!==g,"Only non-priority child changes can be tracked.");const D=this.changeMap.get(g);if(D){const P=D.type;if("child_added"===c&&"child_removed"===P)this.changeMap.set(g,No(g,u.snapshotNode,D.snapshotNode));else if("child_removed"===c&&"child_added"===P)this.changeMap.delete(g);else if("child_removed"===c&&"child_changed"===P)this.changeMap.set(g,po(g,D.oldSnap));else if("child_changed"===c&&"child_added"===P)this.changeMap.set(g,fo(g,u.snapshotNode));else{if("child_changed"!==c||"child_changed"!==P)throw(0,q.g5)("Illegal combination of changes: "+u+" occurred after "+D);this.changeMap.set(g,No(g,u.snapshotNode,D.oldSnap))}}else this.changeMap.set(g,u)}getChanges(){return Array.from(this.changeMap.values())}}const Vs=new class zl{getCompleteChild(u){return null}getChildAfterChild(u,c,g){return null}};class ps{constructor(u,c,g=null){this.writes_=u,this.viewCache_=c,this.optCompleteServerCache_=g}getCompleteChild(u){const c=this.viewCache_.eventCache;if(c.isCompleteForChild(u))return c.getNode().getImmediateChild(u);{const g=null!=this.optCompleteServerCache_?new xs(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return mi(this.writes_,u,g)}}getChildAfterChild(u,c,g){const D=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:go(this.viewCache_),P=function Ou(h,u,c,g,D,P){return function Jo(h,u,c,g,D,P,G){let le;const Me=Sn(h.visibleWrites,u),Qe=ur(Me,$r());if(null!=Qe)le=Qe;else{if(null==c)return[];le=M(Me,c)}if(le=le.withIndex(G),le.isEmpty()||le.isLeafNode())return[];{const Bt=[],Ft=G.getCompare(),an=P?le.getReverseIteratorFrom(g,G):le.getIteratorFrom(g,G);let ar=an.getNext();for(;ar&&Bt.length<D;)0!==Ft(ar,g)&&Bt.push(ar),ar=an.getNext();return Bt}}(h.writeTree,h.treePath,u,c,g,D,P)}(this.writes_,D,c,1,g,u);return 0===P.length?null:P[0]}}function so(h,u,c,g,D,P){const G=u.eventCache;if(null!=Pu(g,c))return u;{let le,Me;if(pr(c))if((0,q.hu)(u.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),u.serverCache.isFiltered()){const Qe=go(u),Ft=zi(g,Qe instanceof Wt?Qe:Wt.EMPTY_NODE);le=h.filter.updateFullNode(u.eventCache.getNode(),Ft,P)}else{const Qe=lr(g,go(u));le=h.filter.updateFullNode(u.eventCache.getNode(),Qe,P)}else{const Qe=Ar(c);if(".priority"===Qe){(0,q.hu)(1===hi(c),"Can't have a priority with additional path components");const Bt=G.getNode();Me=u.serverCache.getNode();const Ft=Qa(g,c,Bt,Me);le=null!=Ft?h.filter.updatePriority(Bt,Ft):G.getNode()}else{const Bt=Or(c);let Ft;if(G.isCompleteForChild(Qe)){Me=u.serverCache.getNode();const an=Qa(g,c,G.getNode(),Me);Ft=null!=an?G.getNode().getImmediateChild(Qe).updateChild(Bt,an):G.getNode().getImmediateChild(Qe)}else Ft=mi(g,Qe,u.serverCache);le=null!=Ft?h.filter.updateChild(G.getNode(),Qe,Ft,Bt,D,P):G.getNode()}}return Fo(u,le,G.isFullyInitialized()||pr(c),h.filter.filtersNodes())}}function Rs(h,u,c,g,D,P,G,le){const Me=u.serverCache;let Qe;const Bt=G?h.filter:h.filter.getIndexedFilter();if(pr(c))Qe=Bt.updateFullNode(Me.getNode(),g,null);else if(Bt.filtersNodes()&&!Me.isFiltered()){const ar=Me.getNode().updateChild(c,g);Qe=Bt.updateFullNode(Me.getNode(),ar,null)}else{const ar=Ar(c);if(!Me.isCompleteForPath(c)&&hi(c)>1)return u;const Mr=Or(c),Eo=Me.getNode().getImmediateChild(ar).updateChild(Mr,g);Qe=".priority"===ar?Bt.updatePriority(Me.getNode(),Eo):Bt.updateChild(Me.getNode(),ar,Eo,Mr,Vs,null)}const Ft=dl(u,Qe,Me.isFullyInitialized()||pr(c),Bt.filtersNodes());return so(h,Ft,c,D,new ps(D,Ft,P),le)}function Ia(h,u,c,g,D,P,G){const le=u.eventCache;let Me,Qe;const Bt=new ps(D,u,P);if(pr(c))Qe=h.filter.updateFullNode(u.eventCache.getNode(),g,G),Me=Fo(u,Qe,!0,h.filter.filtersNodes());else{const Ft=Ar(c);if(".priority"===Ft)Qe=h.filter.updatePriority(u.eventCache.getNode(),g),Me=Fo(u,Qe,le.isFullyInitialized(),le.isFiltered());else{const an=Or(c),ar=le.getNode().getImmediateChild(Ft);let Mr;if(pr(an))Mr=g;else{const Yi=Bt.getCompleteChild(Ft);Mr=null!=Yi?".priority"===Xi(an)&&Yi.getChild(ro(an)).isEmpty()?Yi:Yi.updateChild(an,g):Wt.EMPTY_NODE}Me=ar.equals(Mr)?u:Fo(u,h.filter.updateChild(le.getNode(),Ft,Mr,an,Bt,G),le.isFullyInitialized(),h.filter.filtersNodes())}}return Me}function Xs(h,u){return h.eventCache.isCompleteForChild(u)}function na(h,u,c){return c.foreach((g,D)=>{u=u.updateChild(g,D)}),u}function el(h,u,c,g,D,P,G,le){if(u.serverCache.getNode().isEmpty()&&!u.serverCache.isFullyInitialized())return u;let Qe,Me=u;Qe=pr(c)?g:new gi(null).setTree(c,g);const Bt=u.serverCache.getNode();return Qe.children.inorderTraversal((Ft,an)=>{if(Bt.hasChild(Ft)){const Mr=na(0,u.serverCache.getNode().getImmediateChild(Ft),an);Me=Rs(h,Me,new Pr(Ft),Mr,D,P,G,le)}}),Qe.children.inorderTraversal((Ft,an)=>{const ar=!u.serverCache.isCompleteForChild(Ft)&&void 0===an.value;if(!Bt.hasChild(Ft)&&!ar){const Yi=na(0,u.serverCache.getNode().getImmediateChild(Ft),an);Me=Rs(h,Me,new Pr(Ft),Yi,D,P,G,le)}}),Me}class Ba{constructor(u,c){this.query_=u,this.eventRegistrations_=[];const g=this.query_._queryParams,D=new Ma(g.getIndex()),P=function Ra(h){return h.loadsAllData()?new Ma(h.getIndex()):h.hasLimit()?new Ya(h):new Os(h)}(g);this.processor_=function ea(h){return{filter:h}}(P);const G=c.serverCache,le=c.eventCache,Me=D.updateFullNode(Wt.EMPTY_NODE,G.getNode(),null),Qe=P.updateFullNode(Wt.EMPTY_NODE,le.getNode(),null),Bt=new xs(Me,G.isFullyInitialized(),D.filtersNodes()),Ft=new xs(Qe,le.isFullyInitialized(),P.filtersNodes());this.viewCache_=To(Ft,Bt),this.eventGenerator_=new Fa(this.query_)}get query(){return this.query_}}function So(h,u){const c=go(h.viewCache_);return c&&(h.query._queryParams.loadsAllData()||!pr(u)&&!c.getImmediateChild(Ar(u)).isEmpty())?c.getChild(u):null}function cc(h){return 0===h.eventRegistrations_.length}function pl(h,u,c){const g=[];if(c){(0,q.hu)(null==u,"A cancel should cancel all event registrations.");const D=h.query._path;h.eventRegistrations_.forEach(P=>{const G=P.createCancelEvent(c,D);G&&g.push(G)})}if(u){let D=[];for(let P=0;P<h.eventRegistrations_.length;++P){const G=h.eventRegistrations_[P];if(G.matches(u)){if(u.hasAnyCallback()){D=D.concat(h.eventRegistrations_.slice(P+1));break}}else D.push(G)}h.eventRegistrations_=D}else h.eventRegistrations_=[];return g}function Ao(h,u,c,g){u.type===ws.MERGE&&null!==u.source.queryId&&((0,q.hu)(go(h.viewCache_),"We should always have a full cache before handling merges"),(0,q.hu)(os(h.viewCache_),"Missing event cache, even though we have a server cache"));const D=h.viewCache_,P=function fl(h,u,c,g,D){const P=new Gl;let G,le;if(c.type===ws.OVERWRITE){const Qe=c;Qe.source.fromUser?G=Ia(h,u,Qe.path,Qe.snap,g,D,P):((0,q.hu)(Qe.source.fromServer,"Unknown source."),le=Qe.source.tagged||u.serverCache.isFiltered()&&!pr(Qe.path),G=Rs(h,u,Qe.path,Qe.snap,g,D,le,P))}else if(c.type===ws.MERGE){const Qe=c;Qe.source.fromUser?G=function ta(h,u,c,g,D,P,G){let le=u;return g.foreach((Me,Qe)=>{const Bt=ai(c,Me);Xs(u,Ar(Bt))&&(le=Ia(h,le,Bt,Qe,D,P,G))}),g.foreach((Me,Qe)=>{const Bt=ai(c,Me);Xs(u,Ar(Bt))||(le=Ia(h,le,Bt,Qe,D,P,G))}),le}(h,u,Qe.path,Qe.children,g,D,P):((0,q.hu)(Qe.source.fromServer,"Unknown source."),le=Qe.source.tagged||u.serverCache.isFiltered(),G=el(h,u,Qe.path,Qe.children,g,D,le,P))}else if(c.type===ws.ACK_USER_WRITE){const Qe=c;G=Qe.revert?function ku(h,u,c,g,D,P){let G;if(null!=Pu(g,c))return u;{const le=new ps(g,u,D),Me=u.eventCache.getNode();let Qe;if(pr(c)||".priority"===Ar(c)){let Bt;if(u.serverCache.isFullyInitialized())Bt=lr(g,go(u));else{const Ft=u.serverCache.getNode();(0,q.hu)(Ft instanceof Wt,"serverChildren would be complete if leaf node"),Bt=zi(g,Ft)}Bt=Bt,Qe=h.filter.updateFullNode(Me,Bt,P)}else{const Bt=Ar(c);let Ft=mi(g,Bt,u.serverCache);null==Ft&&u.serverCache.isCompleteForChild(Bt)&&(Ft=Me.getImmediateChild(Bt)),Qe=null!=Ft?h.filter.updateChild(Me,Bt,Ft,Or(c),le,P):u.eventCache.getNode().hasChild(Bt)?h.filter.updateChild(Me,Bt,Wt.EMPTY_NODE,Or(c),le,P):Me,Qe.isEmpty()&&u.serverCache.isFullyInitialized()&&(G=lr(g,go(u)),G.isLeafNode()&&(Qe=h.filter.updateFullNode(Qe,G,P)))}return G=u.serverCache.isFullyInitialized()||null!=Pu(g,$r()),Fo(u,Qe,G,h.filter.filtersNodes())}}(h,u,Qe.path,g,D,P):function xn(h,u,c,g,D,P,G){if(null!=Pu(D,c))return u;const le=u.serverCache.isFiltered(),Me=u.serverCache;if(null!=g.value){if(pr(c)&&Me.isFullyInitialized()||Me.isCompleteForPath(c))return Rs(h,u,c,Me.getNode().getChild(c),D,P,le,G);if(pr(c)){let Qe=new gi(null);return Me.getNode().forEachChild(br,(Bt,Ft)=>{Qe=Qe.set(new Pr(Bt),Ft)}),el(h,u,c,Qe,D,P,le,G)}return u}{let Qe=new gi(null);return g.foreach((Bt,Ft)=>{const an=ai(c,Bt);Me.isCompleteForPath(an)&&(Qe=Qe.set(Bt,Me.getNode().getChild(an)))}),el(h,u,c,Qe,D,P,le,G)}}(h,u,Qe.path,Qe.affectedTree,g,D,P)}else{if(c.type!==ws.LISTEN_COMPLETE)throw(0,q.g5)("Unknown operation type: "+c.type);G=function La(h,u,c,g,D){const P=u.serverCache;return so(h,dl(u,P.getNode(),P.isFullyInitialized()||pr(c),P.isFiltered()),c,g,Vs,D)}(h,u,c.path,g,P)}const Me=P.getChanges();return function Ja(h,u,c){const g=u.eventCache;if(g.isFullyInitialized()){const D=g.getNode().isLeafNode()||g.getNode().isEmpty(),P=os(h);(c.length>0||!h.eventCache.isFullyInitialized()||D&&!g.getNode().equals(P)||!g.getNode().getPriority().equals(P.getPriority()))&&c.push(jo(os(u)))}}(u,G,Me),{viewCache:G,changes:Me}}(h.processor_,D,u,c,g);return function Hi(h,u){(0,q.hu)(u.eventCache.getNode().isIndexed(h.filter.getIndex()),"Event snap not indexed"),(0,q.hu)(u.serverCache.getNode().isIndexed(h.filter.getIndex()),"Server snap not indexed")}(h.processor_,P.viewCache),(0,q.hu)(P.viewCache.serverCache.isFullyInitialized()||!D.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),h.viewCache_=P.viewCache,ql(h,P.changes,P.viewCache.eventCache.getNode(),null)}function ql(h,u,c,g){return function jl(h,u,c,g){const D=[],P=[];return u.forEach(G=>{"child_changed"===G.type&&h.index_.indexedValueChanged(G.oldSnap,G.snapshotNode)&&P.push(function ua(h,u){return{type:"child_moved",snapshotNode:u,childName:h}}(G.childName,G.snapshotNode))}),Ys(h,D,"child_removed",u,g,c),Ys(h,D,"child_added",u,g,c),Ys(h,D,"child_moved",P,g,c),Ys(h,D,"child_changed",u,g,c),Ys(h,D,"value",u,g,c),D}(h.eventGenerator_,u,c,g?[g]:h.eventRegistrations_)}let Va,Lr;class gl{constructor(){this.views=new Map}}function z(h,u,c,g){const D=u.source.queryId;if(null!==D){const P=h.views.get(D);return(0,q.hu)(null!=P,"SyncTree gave us an op for an invalid query."),Ao(P,u,c,g)}{let P=[];for(const G of h.views.values())P=P.concat(Ao(G,u,c,g));return P}}function he(h,u,c,g,D){const G=h.views.get(u._queryIdentifier);if(!G){let le=lr(c,D?g:null),Me=!1;le?Me=!0:g instanceof Wt?(le=zi(c,g),Me=!1):(le=Wt.EMPTY_NODE,Me=!1);const Qe=To(new xs(le,Me,!1),new xs(g,D,!1));return new Ba(u,Qe)}return G}function Rt(h){const u=[];for(const c of h.views.values())c.query._queryParams.loadsAllData()||u.push(c);return u}function hn(h,u){let c=null;for(const g of h.views.values())c=c||So(g,u);return c}function Cn(h,u){return u._queryParams.loadsAllData()?ei(h):h.views.get(u._queryIdentifier)}function Fr(h,u){return null!=Cn(h,u)}function hr(h){return null!=ei(h)}function ei(h){for(const u of h.views.values())if(u.query._queryParams.loadsAllData())return u;return null}let yl=1;class oo{constructor(u){this.listenProvider_=u,this.syncPointTree_=new gi(null),this.pendingWriteTree_=function fs(){return{visibleWrites:ln.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function zo(h,u,c,g,D){return function U(h,u,c,g,D){(0,q.hu)(g>h.lastWriteId,"Stacking an older write on top of newer ones"),void 0===D&&(D=!0),h.allWrites.push({path:u,snap:c,writeId:g,visible:D}),D&&(h.visibleWrites=Pi(h.visibleWrites,u,c)),h.lastWriteId=g}(h.pendingWriteTree_,u,c,g,D),D?Ua(h,new qs({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},u,c)):[]}function ao(h,u,c=!1){const g=function ue(h,u){for(let c=0;c<h.allWrites.length;c++){const g=h.allWrites[c];if(g.writeId===u)return g}return null}(h.pendingWriteTree_,u);if(function $e(h,u){const c=h.allWrites.findIndex(le=>le.writeId===u);(0,q.hu)(c>=0,"removeWrite called with nonexistent writeId.");const g=h.allWrites[c];h.allWrites.splice(c,1);let D=g.visible,P=!1,G=h.allWrites.length-1;for(;D&&G>=0;){const le=h.allWrites[G];le.visible&&(G>=c&&it(le,g.path)?D=!1:kr(g.path,le.path)&&(P=!0)),G--}return!!D&&(P?(function Qt(h){h.visibleWrites=Jr(h.allWrites,$n,$r()),h.lastWriteId=h.allWrites.length>0?h.allWrites[h.allWrites.length-1].writeId:-1}(h),!0):(g.snap?h.visibleWrites=Cs(h.visibleWrites,g.path):Hn(g.children,Me=>{h.visibleWrites=Cs(h.visibleWrites,ai(g.path,Me))}),!0))}(h.pendingWriteTree_,u)){let P=new gi(null);return null!=g.snap?P=P.set($r(),!0):Hn(g.children,G=>{P=P.set(new Pr(G),!0)}),Ua(h,new Qo(g.path,P,c))}return[]}function ls(h,u,c){return Ua(h,new qs({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u,c))}function tl(h,u,c,g){const D=u._path,P=h.syncPointTree_.get(D);let G=[];if(P&&("default"===u._queryIdentifier||Fr(P,u))){const le=function At(h,u,c,g){const D=u._queryIdentifier,P=[];let G=[];const le=hr(h);if("default"===D)for(const[Me,Qe]of h.views.entries())G=G.concat(pl(Qe,c,g)),cc(Qe)&&(h.views.delete(Me),Qe.query._queryParams.loadsAllData()||P.push(Qe.query));else{const Me=h.views.get(D);Me&&(G=G.concat(pl(Me,c,g)),cc(Me)&&(h.views.delete(D),Me.query._queryParams.loadsAllData()||P.push(Me.query)))}return le&&!hr(h)&&P.push(new(function ra(){return(0,q.hu)(Va,"Reference.ts has not been loaded"),Va}())(u._repo,u._path)),{removed:P,events:G}}(P,u,c,g);(function V(h){return 0===h.views.size})(P)&&(h.syncPointTree_=h.syncPointTree_.remove(D));const Me=le.removed;G=le.events;const Qe=-1!==Me.findIndex(Ft=>Ft._queryParams.loadsAllData()),Bt=h.syncPointTree_.findOnPath(D,(Ft,an)=>hr(an));if(Qe&&!Bt){const Ft=h.syncPointTree_.subtree(D);if(!Ft.isEmpty()){const an=function bh(h){return h.fold((u,c,g)=>{if(c&&hr(c))return[ei(c)];{let D=[];return c&&(D=Rt(c)),Hn(g,(P,G)=>{D=D.concat(G)}),D}})}(Ft);for(let ar=0;ar<an.length;++ar){const Mr=an[ar],Yi=Mr.query,Eo=Fs(h,Mr);h.listenProvider_.startListening(bl(Yi),dc(h,Yi),Eo.hashFn,Eo.onComplete)}}}!Bt&&Me.length>0&&!g&&(Qe?h.listenProvider_.stopListening(bl(u),null):Me.forEach(Ft=>{const an=h.queryToTagMap.get(Bu(Ft));h.listenProvider_.stopListening(bl(Ft),an)})),function wh(h,u){for(let c=0;c<u.length;++c){const g=u[c];if(!g._queryParams.loadsAllData()){const D=Bu(g),P=h.queryToTagMap.get(D);h.queryToTagMap.delete(D),h.tagToQueryMap.delete(P)}}}(h,Me)}return G}function Nu(h,u,c){const g=u._path;let D=null,P=!1;h.syncPointTree_.foreachOnPath(g,(Ft,an)=>{const ar=Ii(Ft,g);D=D||hn(an,ar),P=P||hr(an)});let le,G=h.syncPointTree_.get(g);G?(P=P||hr(G),D=D||hn(G,$r())):(G=new gl,h.syncPointTree_=h.syncPointTree_.set(g,G)),null!=D?le=!0:(le=!1,D=Wt.EMPTY_NODE,h.syncPointTree_.subtree(g).foreachChild((an,ar)=>{const Mr=hn(ar,$r());Mr&&(D=D.updateImmediateChild(an,Mr))}));const Me=Fr(G,u);if(!Me&&!u._queryParams.loadsAllData()){const Ft=Bu(u);(0,q.hu)(!h.queryToTagMap.has(Ft),"View does not exist, but we have a tag");const an=function Ca(){return yl++}();h.queryToTagMap.set(Ft,an),h.tagToQueryMap.set(an,Ft)}let Bt=function ze(h,u,c,g,D,P){const G=he(h,u,g,D,P);return h.views.has(u._queryIdentifier)||h.views.set(u._queryIdentifier,G),function Lo(h,u){h.eventRegistrations_.push(u)}(G,c),function Wl(h,u){const c=h.viewCache_.eventCache,g=[];return c.getNode().isLeafNode()||c.getNode().forEachChild(v,(P,G)=>{g.push(fo(P,G))}),c.isFullyInitialized()&&g.push(jo(c.getNode())),ql(h,g,c.getNode(),u)}(G,c)}(G,u,c,S(h.pendingWriteTree_,g),D,le);if(!Me&&!P){const Ft=Cn(G,u);Bt=Bt.concat(function wl(h,u,c){const g=u._path,D=dc(h,u),P=Fs(h,c),G=h.listenProvider_.startListening(bl(u),D,P.hashFn,P.onComplete),le=h.syncPointTree_.subtree(g);if(D)(0,q.hu)(!hr(le.value),"If we're adding a query, it shouldn't be shadowed");else{const Me=le.fold((Qe,Bt,Ft)=>{if(!pr(Qe)&&Bt&&hr(Bt))return[ei(Bt).query];{let an=[];return Bt&&(an=an.concat(Rt(Bt).map(ar=>ar.query))),Hn(Ft,(ar,Mr)=>{an=an.concat(Mr)}),an}});for(let Qe=0;Qe<Me.length;++Qe){const Bt=Me[Qe];h.listenProvider_.stopListening(bl(Bt),dc(h,Bt))}}return G}(h,u,Ft))}return Bt}function pa(h,u,c){const D=h.pendingWriteTree_,P=h.syncPointTree_.findOnPath(u,(G,le)=>{const Qe=hn(le,Ii(G,u));if(Qe)return Qe});return Nn(D,u,P,c,!0)}function Ua(h,u){return Lu(u,h.syncPointTree_,null,S(h.pendingWriteTree_,$r()))}function Lu(h,u,c,g){if(pr(h.path))return El(h,u,c,g);{const D=u.get($r());null==c&&null!=D&&(c=hn(D,$r()));let P=[];const G=Ar(h.path),le=h.operationForChild(G),Me=u.children.get(G);if(Me&&le){const Qe=c?c.getImmediateChild(G):null,Bt=uc(g,G);P=P.concat(Lu(le,Me,Qe,Bt))}return D&&(P=P.concat(z(D,h,g,c))),P}}function El(h,u,c,g){const D=u.get($r());null==c&&null!=D&&(c=hn(D,$r()));let P=[];return u.children.inorderTraversal((G,le)=>{const Me=c?c.getImmediateChild(G):null,Qe=uc(g,G),Bt=h.operationForChild(G);Bt&&(P=P.concat(El(Bt,le,Me,Qe)))}),D&&(P=P.concat(z(D,h,g,c))),P}function Fs(h,u){const c=u.query,g=dc(h,c);return{hashFn:()=>(function Wi(h){return h.viewCache_.serverCache.getNode()}(u)||Wt.EMPTY_NODE).hash(),onComplete:D=>{if("ok"===D)return g?function vl(h,u,c){const g=hc(h,c);if(g){const D=fc(g),P=D.path,G=D.queryId,le=Ii(P,u);return Xc(h,P,new Is(Bs(G),le))}return[]}(h,c._path,g):function _l(h,u){return Ua(h,new Is({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u))}(h,c._path);{const P=function Lt(h,u){let c="Unknown Error";"too_big"===h?c="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===h?c="Client doesn't have permission to access the desired data.":"unavailable"===h&&(c="The service is unavailable");const g=new Error(h+" at "+u._path.toString()+": "+c);return g.code=h.toUpperCase(),g}(D,c);return tl(h,c,null,P)}}}}function dc(h,u){const c=Bu(u);return h.queryToTagMap.get(c)}function Bu(h){return h._path.toString()+"$"+h._queryIdentifier}function hc(h,u){return h.tagToQueryMap.get(u)}function fc(h){const u=h.indexOf("$");return(0,q.hu)(-1!==u&&u<h.length-1,"Bad queryKey."),{queryId:h.substr(u+1),path:new Pr(h.substr(0,u))}}function Xc(h,u,c){const g=h.syncPointTree_.get(u);return(0,q.hu)(g,"Missing sync point for query tag that we're tracking"),z(g,c,S(h.pendingWriteTree_,u),null)}function bl(h){return h._queryParams.loadsAllData()&&!h._queryParams.isDefault()?new(function Us(){return(0,q.hu)(Lr,"Reference.ts has not been loaded"),Lr}())(h._repo,h._path):h}class Il{constructor(u){this.node_=u}getImmediateChild(u){const c=this.node_.getImmediateChild(u);return new Il(c)}node(){return this.node_}}class pc{constructor(u,c){this.syncTree_=u,this.path_=c}getImmediateChild(u){const c=ai(this.path_,u);return new pc(this.syncTree_,c)}node(){return pa(this.syncTree_,this.path_)}}const rl=function(h,u,c){return h&&"object"==typeof h?((0,q.hu)(".sv"in h,"Unexpected leaf node or priority contents"),"string"==typeof h[".sv"]?Vu(h[".sv"],u,c):"object"==typeof h[".sv"]?$a(h[".sv"],u):void(0,q.hu)(!1,"Unexpected server value: "+JSON.stringify(h,null,2))):h},Vu=function(h,u,c){if("timestamp"===h)return c.timestamp;(0,q.hu)(!1,"Unexpected server value: "+h)},$a=function(h,u,c){h.hasOwnProperty("increment")||(0,q.hu)(!1,"Unexpected server value: "+JSON.stringify(h,null,2));const g=h.increment;"number"!=typeof g&&(0,q.hu)(!1,"Unexpected increment value: "+g);const D=u.node();if((0,q.hu)(null!=D,"Expected ChildrenNode.EMPTY_NODE for nulls"),!D.isLeafNode())return g;const G=D.getValue();return"number"!=typeof G?g:G+g},Qc=function(h,u,c,g){return uu(u,new pc(c,h),g)},lu=function(h,u,c){return uu(h,new Il(u),c)};function uu(h,u,c){const g=h.getPriority().val(),D=rl(g,u.getImmediateChild(".priority"),c);let P;if(h.isLeafNode()){const G=h,le=rl(G.getValue(),u,c);return le!==G.getValue()||D!==G.getPriority().val()?new N(le,Un(D)):h}{const G=h;return P=G,D!==G.getPriority().val()&&(P=P.updatePriority(new N(D))),G.forEachChild(v,(le,Me)=>{const Qe=uu(Me,u.getImmediateChild(le),c);Qe!==Me&&(P=P.updateImmediateChild(le,Qe))}),P}}class Da{constructor(u="",c=null,g={children:{},childCount:0}){this.name=u,this.parent=c,this.node=g}}function il(h,u){let c=u instanceof Pr?u:new Pr(u),g=h,D=Ar(c);for(;null!==D;){const P=(0,q.DV)(g.node.children,D)||{children:{},childCount:0};g=new Da(D,g,P),c=Or(c),D=Ar(c)}return g}function Qs(h){return h.node.value}function gc(h,u){h.node.value=u,ed(h)}function cu(h){return h.node.childCount>0}function Wo(h,u){Hn(h.node.children,(c,g)=>{u(new Da(c,h,g))})}function Ta(h,u,c,g){c&&!g&&u(h),Wo(h,D=>{Ta(D,u,!0,g)}),c&&g&&u(h)}function Cl(h){return new Pr(null===h.parent?h.name:Cl(h.parent)+"/"+h.name)}function ed(h){null!==h.parent&&function td(h,u,c){const g=function kd(h){return void 0===Qs(h)&&!cu(h)}(c),D=(0,q.r3)(h.node.children,u);g&&D?(delete h.node.children[u],h.node.childCount--,ed(h)):!g&&!D&&(h.node.children[u]=c.node,h.node.childCount++,ed(h))}(h.parent,h.name,h)}const Nd=/[\[\].#$\/\u0000-\u001F\u007F]/,mc=/[\[\].#$\u0000-\u001F\u007F]/,Yl=10485760,Uu=function(h){return"string"==typeof h&&0!==h.length&&!Nd.test(h)},nd=function(h){return"string"==typeof h&&0!==h.length&&!mc.test(h)},ja=function(h){return null===h||"string"==typeof h||"number"==typeof h&&!en(h)||h&&"object"==typeof h&&(0,q.r3)(h,".sv")},Bo=function(h,u,c,g){g&&void 0===u||$u((0,q.gK)(h,"value"),u,c)},$u=function(h,u,c){const g=c instanceof Pr?new vs(c,h):c;if(void 0===u)throw new Error(h+"contains undefined "+as(g));if("function"==typeof u)throw new Error(h+"contains a function "+as(g)+" with contents = "+u.toString());if(en(u))throw new Error(h+"contains "+u.toString()+" "+as(g));if("string"==typeof u&&u.length>Yl/3&&(0,q.ug)(u)>Yl)throw new Error(h+"contains a string greater than "+Yl+" utf8 bytes "+as(g)+" ('"+u.substring(0,50)+"...')");if(u&&"object"==typeof u){let D=!1,P=!1;if(Hn(u,(G,le)=>{if(".value"===G)D=!0;else if(".priority"!==G&&".sv"!==G&&(P=!0,!Uu(G)))throw new Error(h+" contains an invalid key ("+G+") "+as(g)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Ri(h,u){h.parts_.length>0&&(h.byteLength_+=1),h.parts_.push(u),h.byteLength_+=(0,q.ug)(u),es(h)})(g,G),$u(h,le,g),function uo(h){const u=h.parts_.pop();h.byteLength_-=(0,q.ug)(u),h.parts_.length>0&&(h.byteLength_-=1)}(g)}),D&&P)throw new Error(h+' contains ".value" child '+as(g)+" in addition to actual children.")}},yc=function(h,u,c,g){if(g&&void 0===u)return;const D=(0,q.gK)(h,"values");if(!u||"object"!=typeof u||Array.isArray(u))throw new Error(D+" must be an object containing the children to replace.");const P=[];Hn(u,(G,le)=>{const Me=new Pr(G);if($u(D,le,ai(c,Me)),".priority"===Xi(Me)&&!ja(le))throw new Error(D+"contains an invalid value for '"+Me.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");P.push(Me)}),function(h,u){let c,g;for(c=0;c<u.length;c++){g=u[c];const P=Ss(g);for(let G=0;G<P.length;G++)if((".priority"!==P[G]||G!==P.length-1)&&!Uu(P[G]))throw new Error(h+"contains an invalid key ("+P[G]+") in path "+g.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}u.sort(ds);let D=null;for(c=0;c<u.length;c++){if(g=u[c],null!==D&&kr(D,g))throw new Error(h+"contains a path "+D.toString()+" that is ancestor of another path "+g.toString());D=g}}(D,P)},yo=function(h,u,c){if(!c||void 0!==u){if(en(u))throw new Error((0,q.gK)(h,"priority")+"is "+u.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ja(u))throw new Error((0,q.gK)(h,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ga=function(h,u,c,g){if(!(g&&void 0===c||Uu(c)))throw new Error((0,q.gK)(h,u)+'was an invalid key = "'+c+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Kl=function(h,u,c,g){if(!(g&&void 0===c||nd(c)))throw new Error((0,q.gK)(h,u)+'was an invalid path = "'+c+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ia=function(h,u){if(".info"===Ar(u))throw new Error(h+" failed = Can't modify data under /.info/")},Ih=function(h,u){const c=u.path.toString();if("string"!=typeof u.repoInfo.host||0===u.repoInfo.host.length||!Uu(u.repoInfo.namespace)&&"localhost"!==u.repoInfo.host.split(":")[0]||0!==c.length&&!function(h){return h&&(h=h.replace(/^\/*\.info(\/|$)/,"/")),nd(h)}(c))throw new Error((0,q.gK)(h,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class $s{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function du(h,u){let c=null;for(let g=0;g<u.length;g++){const D=u[g],P=D.getPath();null!==c&&!Qi(P,c.path)&&(h.eventLists_.push(c),c=null),null===c&&(c={events:[],path:P}),c.events.push(D)}c&&h.eventLists_.push(c)}function Tl(h,u,c){du(h,c),hu(h,g=>Qi(g,u))}function xo(h,u,c){du(h,c),hu(h,g=>kr(g,u)||kr(u,g))}function hu(h,u){h.recursionDepth_++;let c=!0;for(let g=0;g<h.eventLists_.length;g++){const D=h.eventLists_[g];D&&(u(D.path)?(Ef(h.eventLists_[g]),h.eventLists_[g]=null):c=!1)}c&&(h.eventLists_=[]),h.recursionDepth_--}function Ef(h){for(let u=0;u<h.events.length;u++){const c=h.events[u];if(null!==c){h.events[u]=null;const g=c.getEventRunner();on&&Bn("event: "+c.toString()),vn(g)}}}const Ld="repo_interrupt";class ju{constructor(u,c,g,D){this.repoInfo_=u,this.forceRestClient_=c,this.authTokenProvider_=g,this.appCheckProvider_=D,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new $s,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Do(),this.transactionQueueTree_=new Da,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Hu(h){const c=h.infoData_.getNode(new Pr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+c}function fu(h){return function(h){return(h=h||{}).timestamp=h.timestamp||(new Date).getTime(),h}({timestamp:Hu(h)})}function _c(h,u,c,g,D){h.dataUpdateCount++;const P=new Pr(u);c=h.interceptServerDataCallback_?h.interceptServerDataCallback_(u,c):c;let G=[];if(D)if(g){const Me=(0,q.UI)(c,Qe=>Un(Qe));G=function nl(h,u,c,g){const D=hc(h,g);if(D){const P=fc(D),G=P.path,le=P.queryId,Me=Ii(G,u),Qe=gi.fromObject(c);return Xc(h,G,new da(Bs(le),Me,Qe))}return[]}(h.serverSyncTree_,P,Me,D)}else{const Me=Un(c);G=function Pd(h,u,c,g){const D=hc(h,g);if(null!=D){const P=fc(D),G=P.path,le=P.queryId,Me=Ii(G,u);return Xc(h,G,new qs(Bs(le),Me,c))}return[]}(h.serverSyncTree_,P,Me,D)}else if(g){const Me=(0,q.UI)(c,Qe=>Un(Qe));G=function Li(h,u,c){const g=gi.fromObject(c);return Ua(h,new da({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u,g))}(h.serverSyncTree_,P,Me)}else{const Me=Un(c);G=ls(h.serverSyncTree_,P,Me)}let le=P;G.length>0&&(le=oa(h,P)),xo(h.eventQueue_,le,G)}function Sa(h,u){Gu(h,"connected",u),!1===u&&function Ha(h){Ga(h,"onDisconnectEvents");const u=fu(h),c=Do();hs(h.onDisconnect_,$r(),(D,P)=>{const G=Qc(D,P,h.serverSyncTree_,u);Ns(c,D,G)});let g=[];hs(c,$r(),(D,P)=>{g=g.concat(ls(h.serverSyncTree_,D,P));const G=xl(h,D);oa(h,G)}),h.onDisconnect_=Do(),xo(h.eventQueue_,$r(),g)}(h)}function Gu(h,u,c){const g=new Pr("/.info/"+u),D=Un(c);h.infoData_.updateSnapshot(g,D);const P=ls(h.infoSyncTree_,g,D);xo(h.eventQueue_,g,P)}function Ps(h){return h.nextWriteId_++}function vc(h,u,c,g,D){Ga(h,"set",{path:u.toString(),value:c,priority:g});const P=fu(h),G=Un(c,g),le=pa(h.serverSyncTree_,u),Me=lu(G,le,P),Qe=Ps(h),Bt=zo(h.serverSyncTree_,u,Me,Qe,!0);du(h.eventQueue_,Bt),h.server_.put(u.toString(),G.val(!0),(an,ar)=>{const Mr="ok"===an;Mr||He("set at "+u+" failed: "+an);const Yi=ao(h.serverSyncTree_,Qe,!Mr);xo(h.eventQueue_,u,Yi),gs(0,D,an,ar)});const Ft=xl(h,u);oa(h,Ft),xo(h.eventQueue_,Ft,[])}function id(h,u,c){h.server_.onDisconnectCancel(u.toString(),(g,D)=>{"ok"===g&&Ho(h.onDisconnect_,u),gs(0,c,g,D)})}function sa(h,u,c,g){const D=Un(c);h.server_.onDisconnectPut(u.toString(),D.val(!0),(P,G)=>{"ok"===P&&Ns(h.onDisconnect_,u,D),gs(0,g,P,G)})}function Zl(h,u,c){let g;g=".info"===Ar(u._path)?tl(h.infoSyncTree_,u,c):tl(h.serverSyncTree_,u,c),Tl(h.eventQueue_,u._path,g)}function Dh(h){h.persistentConnection_&&h.persistentConnection_.interrupt(Ld)}function Ga(h,...u){let c="";h.persistentConnection_&&(c=h.persistentConnection_.id+":"),Bn(c,...u)}function gs(h,u,c,g){u&&vn(()=>{if("ok"===c)u(null);else{const D=(c||"error").toUpperCase();let P=D;g&&(P+=": "+g);const G=new Error(P);G.code=D,u(G)}})}function Al(h,u,c){return pa(h.serverSyncTree_,u,c)||Wt.EMPTY_NODE}function sl(h,u=h.transactionQueueTree_){if(u||Mo(h,u),Qs(u)){const c=qu(h,u);(0,q.hu)(c.length>0,"Sending zero length transaction queue"),c.every(D=>0===D.status)&&function Js(h,u,c){const g=c.map(Qe=>Qe.currentWriteId),D=Al(h,u,g);let P=D;const G=D.hash();for(let Qe=0;Qe<c.length;Qe++){const Bt=c[Qe];(0,q.hu)(0===Bt.status,"tryToSendTransactionQueue_: items in queue should all be run."),Bt.status=1,Bt.retryCount++;const Ft=Ii(u,Bt.path);P=P.updateChild(Ft,Bt.currentOutputSnapshotRaw)}const le=P.val(!0),Me=u;h.server_.put(Me.toString(),le,Qe=>{Ga(h,"transaction put response",{path:Me.toString(),status:Qe});let Bt=[];if("ok"===Qe){const Ft=[];for(let an=0;an<c.length;an++)c[an].status=2,Bt=Bt.concat(ao(h.serverSyncTree_,c[an].currentWriteId)),c[an].onComplete&&Ft.push(()=>c[an].onComplete(null,!0,c[an].currentOutputSnapshotResolved)),c[an].unwatcher();Mo(h,il(h.transactionQueueTree_,u)),sl(h,h.transactionQueueTree_),xo(h.eventQueue_,u,Bt);for(let an=0;an<Ft.length;an++)vn(Ft[an])}else{if("datastale"===Qe)for(let Ft=0;Ft<c.length;Ft++)c[Ft].status=3===c[Ft].status?4:0;else{He("transaction at "+Me.toString()+" failed: "+Qe);for(let Ft=0;Ft<c.length;Ft++)c[Ft].status=4,c[Ft].abortReason=Qe}oa(h,u)}},G)}(h,Cl(u),c)}else cu(u)&&Wo(u,c=>{sl(h,c)})}function oa(h,u){const c=Vd(h,u),g=Cl(c);return function Wu(h,u,c){if(0===u.length)return;const g=[];let D=[];const G=u.filter(le=>0===le.status).map(le=>le.currentWriteId);for(let le=0;le<u.length;le++){const Me=u[le],Qe=Ii(c,Me.path);let Ft,Bt=!1;if((0,q.hu)(null!==Qe,"rerunTransactionsUnderNode_: relativePath should not be null."),4===Me.status)Bt=!0,Ft=Me.abortReason,D=D.concat(ao(h.serverSyncTree_,Me.currentWriteId,!0));else if(0===Me.status)if(Me.retryCount>=25)Bt=!0,Ft="maxretry",D=D.concat(ao(h.serverSyncTree_,Me.currentWriteId,!0));else{const an=Al(h,Me.path,G);Me.currentInputSnapshot=an;const ar=u[le].update(an.val());if(void 0!==ar){$u("transaction failed: Data returned ",ar,Me.path);let Mr=Un(ar);"object"==typeof ar&&null!=ar&&(0,q.r3)(ar,".priority")||(Mr=Mr.updatePriority(an.getPriority()));const Eo=Me.currentWriteId,Ll=fu(h),bo=lu(Mr,an,Ll);Me.currentOutputSnapshotRaw=Mr,Me.currentOutputSnapshotResolved=bo,Me.currentWriteId=Ps(h),G.splice(G.indexOf(Eo),1),D=D.concat(zo(h.serverSyncTree_,Me.path,bo,Me.currentWriteId,Me.applyLocally)),D=D.concat(ao(h.serverSyncTree_,Eo,!0))}else Bt=!0,Ft="nodata",D=D.concat(ao(h.serverSyncTree_,Me.currentWriteId,!0))}xo(h.eventQueue_,c,D),D=[],Bt&&(u[le].status=2,setTimeout(u[le].unwatcher,Math.floor(0)),u[le].onComplete&&g.push("nodata"===Ft?()=>u[le].onComplete(null,!1,u[le].currentInputSnapshot):()=>u[le].onComplete(new Error(Ft),!1,null)))}Mo(h,h.transactionQueueTree_);for(let le=0;le<g.length;le++)vn(g[le]);sl(h,h.transactionQueueTree_)}(h,qu(h,c),g),g}function Vd(h,u){let c,g=h.transactionQueueTree_;for(c=Ar(u);null!==c&&void 0===Qs(g);)g=il(g,c),c=Ar(u=Or(u));return g}function qu(h,u){const c=[];return Ec(h,u,c),c.sort((g,D)=>g.order-D.order),c}function Ec(h,u,c){const g=Qs(u);if(g)for(let D=0;D<g.length;D++)c.push(g[D]);Wo(u,D=>{Ec(h,D,c)})}function Mo(h,u){const c=Qs(u);if(c){let g=0;for(let D=0;D<c.length;D++)2!==c[D].status&&(c[g]=c[D],g++);c.length=g,gc(u,c.length>0?c:void 0)}Wo(u,g=>{Mo(h,g)})}function xl(h,u){const c=Cl(Vd(h,u)),g=il(h.transactionQueueTree_,u);return function Jc(h,u,c){let g=c?h:h.parent;for(;null!==g;){if(u(g))return!0;g=g.parent}}(g,D=>{bc(h,D)}),bc(h,g),Ta(g,D=>{bc(h,D)}),c}function bc(h,u){const c=Qs(u);if(c){const g=[];let D=[],P=-1;for(let G=0;G<c.length;G++)3===c[G].status||(1===c[G].status?((0,q.hu)(P===G-1,"All SENT items should be at beginning of queue."),P=G,c[G].status=3,c[G].abortReason="set"):((0,q.hu)(0===c[G].status,"Unexpected transaction status in abort"),c[G].unwatcher(),D=D.concat(ao(h.serverSyncTree_,c[G].currentWriteId,!0)),c[G].onComplete&&g.push(c[G].onComplete.bind(null,new Error("set"),!1,null))));-1===P?gc(u,void 0):c.length=P+1,xo(h.eventQueue_,Cl(u),D);for(let G=0;G<g.length;G++)vn(g[G])}}const Yu=function(h,u){const c=Zs(h),g=c.namespace;return"firebase.com"===c.domain&&_t(c.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!g||"undefined"===g)&&"localhost"!==c.domain&&_t("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),c.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&He("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Ki(c.host,c.secure,g,"ws"===c.scheme||"wss"===c.scheme,u,"",g!==c.subdomain),path:new Pr(c.pathString)}},Zs=function(h){let u="",c="",g="",D="",P="",G=!0,le="https",Me=443;if("string"==typeof h){let Qe=h.indexOf("//");Qe>=0&&(le=h.substring(0,Qe-1),h=h.substring(Qe+2));let Bt=h.indexOf("/");-1===Bt&&(Bt=h.length);let Ft=h.indexOf("?");-1===Ft&&(Ft=h.length),u=h.substring(0,Math.min(Bt,Ft)),Bt<Ft&&(D=function gu(h){let u="";const c=h.split("/");for(let g=0;g<c.length;g++)if(c[g].length>0){let D=c[g];try{D=decodeURIComponent(D.replace(/\+/g," "))}catch(P){}u+="/"+D}return u}(h.substring(Bt,Ft)));const an=function wc(h){const u={};"?"===h.charAt(0)&&(h=h.substring(1));for(const c of h.split("&")){if(0===c.length)continue;const g=c.split("=");2===g.length?u[decodeURIComponent(g[0])]=decodeURIComponent(g[1]):He(`Invalid query segment '${c}' in query '${h}'`)}return u}(h.substring(Math.min(h.length,Ft)));Qe=u.indexOf(":"),Qe>=0?(G="https"===le||"wss"===le,Me=parseInt(u.substring(Qe+1),10)):Qe=u.length;const ar=u.slice(0,Qe);if("localhost"===ar.toLowerCase())c="localhost";else if(ar.split(".").length<=2)c=ar;else{const Mr=u.indexOf(".");g=u.substring(0,Mr).toLowerCase(),c=u.substring(Mr+1),P=g}"ns"in an&&(P=an.ns)}return{host:u,port:Me,domain:c,subdomain:g,secure:G,scheme:le,pathString:D,namespace:P}};class Ku{constructor(u,c,g,D){this.eventType=u,this.eventRegistration=c,this.snapshot=g,this.prevName=D}getPath(){const u=this.snapshot.ref;return"value"===this.eventType?u._path:u.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,q.Pz)(this.snapshot.exportVal())}}class od{constructor(u,c,g){this.eventRegistration=u,this.error=c,this.path=g}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Vo{constructor(u,c){this.snapshotCallback=u,this.cancelCallback=c}onValue(u,c){this.snapshotCallback.call(null,u,c)}onCancel(u){return(0,q.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,u)}get hasCancelCallback(){return!!this.cancelCallback}matches(u){return this.snapshotCallback===u.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===u.snapshotCallback.userCallback&&this.snapshotCallback.context===u.snapshotCallback.context}}class ma{constructor(u,c){this._repo=u,this._path=c}cancel(){const u=new q.BH;return id(this._repo,this._path,u.wrapCallback(()=>{})),u.promise}remove(){ia("OnDisconnect.remove",this._path);const u=new q.BH;return sa(this._repo,this._path,null,u.wrapCallback(()=>{})),u.promise}set(u){ia("OnDisconnect.set",this._path),Bo("OnDisconnect.set",u,this._path,!1);const c=new q.BH;return sa(this._repo,this._path,u,c.wrapCallback(()=>{})),c.promise}setWithPriority(u,c){ia("OnDisconnect.setWithPriority",this._path),Bo("OnDisconnect.setWithPriority",u,this._path,!1),yo("OnDisconnect.setWithPriority",c,!1);const g=new q.BH;return function Ch(h,u,c,g,D){const P=Un(c,g);h.server_.onDisconnectPut(u.toString(),P.val(!0),(G,le)=>{"ok"===G&&Ns(h.onDisconnect_,u,P),gs(0,D,G,le)})}(this._repo,this._path,u,c,g.wrapCallback(()=>{})),g.promise}update(u){ia("OnDisconnect.update",this._path),yc("OnDisconnect.update",u,this._path,!1);const c=new q.BH;return function sd(h,u,c,g){if((0,q.xb)(c))return Bn("onDisconnect().update() called with empty data.  Don't do anything."),void gs(0,g,"ok",void 0);h.server_.onDisconnectMerge(u.toString(),c,(D,P)=>{"ok"===D&&Hn(c,(G,le)=>{const Me=Un(le);Ns(h.onDisconnect_,ai(u,G),Me)}),gs(0,g,D,P)})}(this._repo,this._path,u,c.wrapCallback(()=>{})),c.promise}}class Ro{constructor(u,c,g,D){this._repo=u,this._path=c,this._queryParams=g,this._orderByCalled=D}get key(){return pr(this._path)?null:Xi(this._path)}get ref(){return new us(this._repo,this._path)}get _queryIdentifier(){const u=Oa(this._queryParams),c=Fn(u);return"{}"===c?"default":c}get _queryObject(){return Oa(this._queryParams)}isEqual(u){if(!((u=(0,q.m9)(u))instanceof Ro))return!1;const c=this._repo===u._repo,g=Qi(this._path,u._path);return c&&g&&this._queryIdentifier===u._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function _s(h){let u="";for(let c=h.pieceNum_;c<h.pieces_.length;c++)""!==h.pieces_[c]&&(u+="/"+encodeURIComponent(String(h.pieces_[c])));return u||"/"}(this._path)}}function Ml(h,u){if(!0===h._orderByCalled)throw new Error(u+": You can't combine multiple orderBy calls.")}function ya(h){let u=null,c=null;if(h.hasStart()&&(u=h.getIndexStartValue()),h.hasEnd()&&(c=h.getIndexEndValue()),h.getIndex()===br){const g="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",D="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(h.hasStart()){if(h.getIndexStartName()!==qt)throw new Error(g);if("string"!=typeof u)throw new Error(D)}if(h.hasEnd()){if(h.getIndexEndName()!==cn)throw new Error(g);if("string"!=typeof c)throw new Error(D)}}else if(h.getIndex()===v){if(null!=u&&!ja(u)||null!=c&&!ja(c))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,q.hu)(h.getIndex()instanceof Ci||h.getIndex()===Ai,"unknown index type."),null!=u&&"object"==typeof u||null!=c&&"object"==typeof c)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function mu(h){if(h.hasStart()&&h.hasEnd()&&h.hasLimit()&&!h.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class us extends Ro{constructor(u,c){super(u,c,new Yo,!1)}get parent(){const u=ro(this._path);return null===u?null:new us(this._repo,u)}get root(){let u=this;for(;null!==u.parent;)u=u.parent;return u}}class za{constructor(u,c,g){this._node=u,this.ref=c,this._index=g}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(u){const c=new Pr(u),g=eo(this.ref,u);return new za(this._node.getChild(c),g,v)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(u){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(g,D)=>u(new za(D,eo(this.ref,g),v)))}hasChild(u){const c=new Pr(u);return!this._node.getChild(c).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ic(h,u){return(h=(0,q.m9)(h))._checkNotDeleted("ref"),void 0!==u?eo(h._root,u):h._root}function ad(h,u){(h=(0,q.m9)(h))._checkNotDeleted("refFromURL");const c=Yu(u,h._repo.repoInfo_.nodeAdmin);Ih("refFromURL",c);const g=c.repoInfo;return!h._repo.repoInfo_.isCustomHost()&&g.host!==h._repo.repoInfo_.host&&_t("refFromURL: Host name does not match the current database: (found "+g.host+" but expected "+h._repo.repoInfo_.host+")"),Ic(h,c.path.toString())}function eo(h,u){return null===Ar((h=(0,q.m9)(h))._path)?(c=u,c&&(c=c.replace(/^\/*\.info(\/|$)/,"/")),Kl("child","path",c,!1)):Kl("child","path",u,!1),new us(h._repo,ai(h._path,u));var c}function Cc(h,u){h=(0,q.m9)(h),ia("set",h._path),Bo("set",u,h._path,!1);const c=new q.BH;return vc(h._repo,h._path,u,null,c.wrapCallback(()=>{})),c.promise}function $d(h,u){yc("update",u,h._path,!1);const c=new q.BH;return function Bd(h,u,c,g){Ga(h,"update",{path:u.toString(),value:c});let D=!0;const P=fu(h),G={};if(Hn(c,(le,Me)=>{D=!1,G[le]=Qc(ai(u,le),Un(Me),h.serverSyncTree_,P)}),D)Bn("update() called with empty data.  Don't do anything."),gs(0,g,"ok",void 0);else{const le=Ps(h),Me=function Vi(h,u,c,g){!function Y(h,u,c,g){(0,q.hu)(g>h.lastWriteId,"Stacking an older merge on top of newer ones"),h.allWrites.push({path:u,children:c,writeId:g,visible:!0}),h.visibleWrites=io(h.visibleWrites,u,c),h.lastWriteId=g}(h.pendingWriteTree_,u,c,g);const D=gi.fromObject(c);return Ua(h,new da({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},u,D))}(h.serverSyncTree_,u,G,le);du(h.eventQueue_,Me),h.server_.merge(u.toString(),c,(Qe,Bt)=>{const Ft="ok"===Qe;Ft||He("update at "+u+" failed: "+Qe);const an=ao(h.serverSyncTree_,le,!Ft),ar=an.length>0?oa(h,u):u;xo(h.eventQueue_,ar,an),gs(0,g,Qe,Bt)}),Hn(c,Qe=>{const Bt=xl(h,ai(u,Qe));oa(h,Bt)}),xo(h.eventQueue_,u,[])}}(h._repo,h._path,u,c.wrapCallback(()=>{})),c.promise}function _u(h){return function Cr(h,u){const c=function Fu(h,u){const c=u._path;let g=null;h.syncPointTree_.foreachOnPath(c,(Qe,Bt)=>{const Ft=Ii(Qe,c);g=g||hn(Bt,Ft)});let D=h.syncPointTree_.get(c);D?g=g||hn(D,$r()):(D=new gl,h.syncPointTree_=h.syncPointTree_.set(c,D));const P=null!=g,G=P?new xs(g,!0,!1):null;return function fa(h){return os(h.viewCache_)}(he(D,u,S(h.pendingWriteTree_,u._path),P?G.getNode():Wt.EMPTY_NODE,P))}(h.serverSyncTree_,u);return null!=c?Promise.resolve(c):h.server_.get(u).then(g=>{const D=Un(g).withIndex(u._queryParams.getIndex()),P=ls(h.serverSyncTree_,u._path,D);return Tl(h.eventQueue_,u._path,P),Promise.resolve(D)},g=>(Ga(h,"get for query "+(0,q.Pz)(u)+" failed: "+g),Promise.reject(new Error(g))))}((h=(0,q.m9)(h))._repo,h).then(u=>new za(u,new us(h._repo,h._path),h._queryParams.getIndex()))}class aa{constructor(u){this.callbackContext=u}respondsTo(u){return"value"===u}createEvent(u,c){const g=c._queryParams.getIndex();return new Ku("value",this,new za(u.snapshotNode,new us(c._repo,c._path),g))}getEventRunner(u){return"cancel"===u.getEventType()?()=>this.callbackContext.onCancel(u.error):()=>this.callbackContext.onValue(u.snapshot,null)}createCancelEvent(u,c){return this.callbackContext.hasCancelCallback?new od(this,u,c):null}matches(u){return u instanceof aa&&(!u.callbackContext||!this.callbackContext||u.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class w{constructor(u,c){this.eventType=u,this.callbackContext=c}respondsTo(u){let c="children_added"===u?"child_added":u;return c="children_removed"===c?"child_removed":c,this.eventType===c}createCancelEvent(u,c){return this.callbackContext.hasCancelCallback?new od(this,u,c):null}createEvent(u,c){(0,q.hu)(null!=u.childName,"Child events should have a childName.");const g=eo(new us(c._repo,c._path),u.childName),D=c._queryParams.getIndex();return new Ku(u.type,this,new za(u.snapshotNode,g,D),u.prevName)}getEventRunner(u){return"cancel"===u.getEventType()?()=>this.callbackContext.onCancel(u.error):()=>this.callbackContext.onValue(u.snapshot,u.prevName)}matches(u){return u instanceof w&&this.eventType===u.eventType&&(!this.callbackContext||!u.callbackContext||this.callbackContext.matches(u.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function p(h,u,c,g,D){let P;if("object"==typeof g&&(P=void 0,D=g),"function"==typeof g&&(P=g),D&&D.onlyOnce){const Me=c,Qe=(Bt,Ft)=>{Zl(h._repo,h,le),Me(Bt,Ft)};Qe.userCallback=c.userCallback,Qe.context=c.context,c=Qe}const G=new Vo(c,P||void 0),le="value"===u?new aa(G):new w(u,G);return function zu(h,u,c){let g;g=".info"===Ar(u._path)?Nu(h.infoSyncTree_,u,c):Nu(h.serverSyncTree_,u,c),Tl(h.eventQueue_,u._path,g)}(h._repo,h,le),()=>Zl(h._repo,h,le)}function _(h,u,c,g){return p(h,"value",u,c,g)}function A(h,u,c,g){return p(h,"child_added",u,c,g)}function K(h,u,c,g){return p(h,"child_changed",u,c,g)}function ge(h,u,c,g){return p(h,"child_moved",u,c,g)}function lt(h,u,c,g){return p(h,"child_removed",u,c,g)}function Xt(h,u,c){let g=null;const D=c?new Vo(c):null;"value"===u?g=new aa(D):u&&(g=new w(u,D)),Zl(h._repo,h,g)}class En{}class On extends En{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){Bo("endAt",this._value,u._path,!0);const c=ou(u._queryParams,this._value,this._key);if(mu(c),ya(c),u._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ro(u._repo,u._path,c,u._orderByCalled)}}class yr extends En{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){Bo("endBefore",this._value,u._path,!1);const c=function Ka(h,u,c){let g,D;return h.index_===br?("string"==typeof u&&(u=ho(u)),D=ou(h,u,c)):(g=null==c?qt:ho(c),D=ou(h,u,g)),D.endBeforeSet_=!0,D}(u._queryParams,this._value,this._key);if(mu(c),ya(c),u._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ro(u._repo,u._path,c,u._orderByCalled)}}class qo extends En{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){Bo("startAt",this._value,u._path,!0);const c=Co(u._queryParams,this._value,this._key);if(mu(c),ya(c),u._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ro(u._repo,u._path,c,u._orderByCalled)}}class Sh extends En{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){Bo("startAfter",this._value,u._path,!1);const c=function ss(h,u,c){let g;if(h.index_===br)"string"==typeof u&&(u=co(u)),g=Co(h,u,c);else{let D;D=null==c?cn:co(c),g=Co(h,u,D)}return g.startAfterSet_=!0,g}(u._queryParams,this._value,this._key);if(mu(c),ya(c),u._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ro(u._repo,u._path,c,u._orderByCalled)}}class Tc extends En{constructor(u){super(),this._limit=u}_apply(u){if(u._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ro(u._repo,u._path,function Pa(h,u){const c=h.copy();return c.limitSet_=!0,c.limit_=u,c.viewFrom_="l",c}(u._queryParams,this._limit),u._orderByCalled)}}class cd extends En{constructor(u){super(),this._limit=u}_apply(u){if(u._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ro(u._repo,u._path,function ks(h,u){const c=h.copy();return c.limitSet_=!0,c.limit_=u,c.viewFrom_="r",c}(u._queryParams,this._limit),u._orderByCalled)}}class jd extends En{constructor(u){super(),this._path=u}_apply(u){Ml(u,"orderByChild");const c=new Pr(this._path);if(pr(c))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const g=new Ci(c),D=Za(u._queryParams,g);return ya(D),new Ro(u._repo,u._path,D,!0)}}class Hd extends En{_apply(u){Ml(u,"orderByKey");const c=Za(u._queryParams,br);return ya(c),new Ro(u._repo,u._path,c,!0)}}class hd extends En{_apply(u){Ml(u,"orderByPriority");const c=Za(u._queryParams,v);return ya(c),new Ro(u._repo,u._path,c,!0)}}class bf extends En{_apply(u){Ml(u,"orderByValue");const c=Za(u._queryParams,Ai);return ya(c),new Ro(u._repo,u._path,c,!0)}}class wf extends En{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){if(Bo("equalTo",this._value,u._path,!1),u._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(u._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new On(this._value,this._key)._apply(new qo(this._value,this._key)._apply(u))}}function ol(h,...u){let c=(0,q.m9)(h);for(const g of u)c=g._apply(c);return c}(function ml(h){(0,q.hu)(!Va,"__referenceConstructor has already been defined"),Va=h})(us),function Ti(h){(0,q.hu)(!Lr,"__referenceConstructor has already been defined"),Lr=h}(us);const fd={};function Aa(h,u,c,g,D){let P=g||h.options.databaseURL;void 0===P&&(h.options.projectId||_t("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Bn("Using default host for project ",h.options.projectId),P=`${h.options.projectId}-default-rtdb.firebaseio.com`);let Me,Qe,G=Yu(P,D),le=G.repoInfo;"undefined"!=typeof process&&process.env&&(Qe=process.env.FIREBASE_DATABASE_EMULATOR_HOST),Qe?(Me=!0,P=`http://${Qe}?ns=${le.namespace}`,G=Yu(P,D),le=G.repoInfo):Me=!G.repoInfo.secure;const Bt=D&&Me?new Gr(Gr.OWNER):new Sr(h.name,h.options,u);Ih("Invalid Firebase Database URL",G),pr(G.path)||_t("Database URL must point to the root of a Firebase Database (not including a child path).");const Ft=function pd(h,u,c,g){let D=fd[u.name];D||(D={},fd[u.name]=D);let P=D[h.toURLString()];return P&&_t("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),P=new ju(h,false,c,g),D[h.toURLString()]=P,P}(le,h,Bt,new An(h.name,c));return new xp(Ft,h)}class xp{constructor(u,c){this._repoInternal=u,this.app=c,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Sl(h,u,c){if(h.stats_=wn(h.repoInfo_),h.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)h.server_=new wa(h.repoInfo_,(g,D,P,G)=>{_c(h,g,D,P,G)},h.authTokenProvider_,h.appCheckProvider_),setTimeout(()=>Sa(h,!0),0);else{if(null!=c){if("object"!=typeof c)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,q.Pz)(c)}catch(g){throw new Error("Invalid authOverride provided: "+g)}}h.persistentConnection_=new et(h.repoInfo_,u,(g,D,P,G)=>{_c(h,g,D,P,G)},g=>{Sa(h,g)},g=>{!function pu(h,u){Hn(u,(c,g)=>{Gu(h,c,g)})}(h,g)},h.authTokenProvider_,h.appCheckProvider_,c),h.server_=h.persistentConnection_}h.authTokenProvider_.addTokenChangeListener(g=>{h.server_.refreshAuthToken(g)}),h.appCheckProvider_.addTokenChangeListener(g=>{h.server_.refreshAppCheckToken(g.token)}),h.statsReporter_=function ir(h,u){const c=h.toString();return nn[c]||(nn[c]=u()),nn[c]}(h.repoInfo_,()=>new As(h.stats_,h.server_)),h.infoData_=new cl,h.infoSyncTree_=new oo({startListening:(g,D,P,G)=>{let le=[];const Me=h.infoData_.getNode(g._path);return Me.isEmpty()||(le=ls(h.infoSyncTree_,g._path,Me),setTimeout(()=>{G("ok")},0)),le},stopListening:()=>{}}),Gu(h,"connected",!1),h.serverSyncTree_=new oo({startListening:(g,D,P,G)=>(h.server_.listen(g,P,D,(le,Me)=>{const Qe=G(le,Me);xo(h.eventQueue_,g._path,Qe)}),[]),stopListening:(g,D)=>{h.server_.unlisten(g,D)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new us(this._repo,$r())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Cf(h,u){const c=fd[u];(!c||c[h.key]!==h)&&_t(`Database ${u}(${h.repoInfo_}) has already been deleted.`),Dh(h),delete c[h.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(u){null===this._rootInternal&&_t("Cannot call "+u+" on a deleted database.")}}function Ql(){Ot.IS_TRANSPORT_INITIALIZED&&He("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Mh(){Ql(),pt.forceDisallow()}function Wd(){Ql(),Nt.forceDisallow(),pt.forceAllow()}function qd(h,u){cr(h,u)}const Ph={".sv":"timestamp"};class Yd{constructor(u,c){this.committed=u,this.snapshot=c}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}et.prototype.simpleListen=function(h,u){this.sendRequest("q",{p:h},u)},et.prototype.echo=function(h,u){this.sendRequest("echo",{d:h},u)},function kl(h){Ct(Ye.SDK_VERSION),(0,Ye._registerComponent)(new mt.wA("database",(u,{instanceIdentifier:c})=>Aa(u.getProvider("app").getImmediate(),u.getProvider("auth-internal"),u.getProvider("app-check-internal"),c),"PUBLIC").setMultipleInstances(!0)),(0,Ye.registerVersion)(Ce,"0.13.0",h),(0,Ye.registerVersion)(Ce,"0.13.0","esm2017")}();const Zd=new bt.Yd("@firebase/database-compat"),kh=function(h){Zd.warn("FIREBASE WARNING: "+h)};class Fh{constructor(u){this._delegate=u}cancel(u){(0,q.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,q.Wj)("OnDisconnect.cancel","onComplete",u,!0);const c=this._delegate.cancel();return u&&c.then(()=>u(null),g=>u(g)),c}remove(u){(0,q.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,q.Wj)("OnDisconnect.remove","onComplete",u,!0);const c=this._delegate.remove();return u&&c.then(()=>u(null),g=>u(g)),c}set(u,c){(0,q.Dv)("OnDisconnect.set",1,2,arguments.length),(0,q.Wj)("OnDisconnect.set","onComplete",c,!0);const g=this._delegate.set(u);return c&&g.then(()=>c(null),D=>c(D)),g}setWithPriority(u,c,g){(0,q.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,q.Wj)("OnDisconnect.setWithPriority","onComplete",g,!0);const D=this._delegate.setWithPriority(u,c);return g&&D.then(()=>g(null),P=>g(P)),D}update(u,c){if((0,q.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(u)){const D={};for(let P=0;P<u.length;++P)D[""+P]=u[P];u=D,kh("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,q.Wj)("OnDisconnect.update","onComplete",c,!0);const g=this._delegate.update(u);return c&&g.then(()=>c(null),D=>c(D)),g}}class Df{constructor(u,c){this.committed=u,this.snapshot=c}toJSON(){return(0,q.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Nl{constructor(u,c){this._database=u,this._delegate=c}val(){return(0,q.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,q.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,q.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,q.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(u){return(0,q.Dv)("DataSnapshot.child",0,1,arguments.length),u=String(u),Kl("DataSnapshot.child","path",u,!1),new Nl(this._database,this._delegate.child(u))}hasChild(u){return(0,q.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Kl("DataSnapshot.hasChild","path",u,!1),this._delegate.hasChild(u)}getPriority(){return(0,q.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(u){return(0,q.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,q.Wj)("DataSnapshot.forEach","action",u,!1),this._delegate.forEach(c=>u(new Nl(this._database,c)))}hasChildren(){return(0,q.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,q.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,q.Dv)("DataSnapshot.ref",0,0,arguments.length),new vo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class qi{constructor(u,c){this.database=u,this._delegate=c}on(u,c,g,D){var P;(0,q.Dv)("Query.on",2,4,arguments.length),(0,q.Wj)("Query.on","callback",c,!1);const G=qi.getCancelAndContextArgs_("Query.on",g,D),le=(Qe,Bt)=>{c.call(G.context,new Nl(this.database,Qe),Bt)};le.userCallback=c,le.context=G.context;const Me=null===(P=G.cancel)||void 0===P?void 0:P.bind(G.context);switch(u){case"value":return _(this._delegate,le,Me),c;case"child_added":return A(this._delegate,le,Me),c;case"child_removed":return lt(this._delegate,le,Me),c;case"child_changed":return K(this._delegate,le,Me),c;case"child_moved":return ge(this._delegate,le,Me),c;default:throw new Error((0,q.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(u,c,g){if((0,q.Dv)("Query.off",0,3,arguments.length),function(h,u,c){if(void 0!==u)switch(u){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,q.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,u),(0,q.Wj)("Query.off","callback",c,!0),(0,q.lb)("Query.off","context",g,!0),c){const D=()=>{};D.userCallback=c,D.context=g,Xt(this._delegate,u,D)}else Xt(this._delegate,u)}get(){return _u(this._delegate).then(u=>new Nl(this.database,u))}once(u,c,g,D){(0,q.Dv)("Query.once",1,4,arguments.length),(0,q.Wj)("Query.once","callback",c,!0);const P=qi.getCancelAndContextArgs_("Query.once",g,D),G=new q.BH,le=(Qe,Bt)=>{const Ft=new Nl(this.database,Qe);c&&c.call(P.context,Ft,Bt),G.resolve(Ft)};le.userCallback=c,le.context=P.context;const Me=Qe=>{P.cancel&&P.cancel.call(P.context,Qe),G.reject(Qe)};switch(u){case"value":_(this._delegate,le,Me,{onlyOnce:!0});break;case"child_added":A(this._delegate,le,Me,{onlyOnce:!0});break;case"child_removed":lt(this._delegate,le,Me,{onlyOnce:!0});break;case"child_changed":K(this._delegate,le,Me,{onlyOnce:!0});break;case"child_moved":ge(this._delegate,le,Me,{onlyOnce:!0});break;default:throw new Error((0,q.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return G.promise}limitToFirst(u){return(0,q.Dv)("Query.limitToFirst",1,1,arguments.length),new qi(this.database,ol(this._delegate,function ud(h){if("number"!=typeof h||Math.floor(h)!==h||h<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Tc(h)}(u)))}limitToLast(u){return(0,q.Dv)("Query.limitToLast",1,1,arguments.length),new qi(this.database,ol(this._delegate,function Sc(h){if("number"!=typeof h||Math.floor(h)!==h||h<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new cd(h)}(u)))}orderByChild(u){return(0,q.Dv)("Query.orderByChild",1,1,arguments.length),new qi(this.database,ol(this._delegate,function dd(h){if("$key"===h)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===h)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===h)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Kl("orderByChild","path",h,!1),new jd(h)}(u)))}orderByKey(){return(0,q.Dv)("Query.orderByKey",0,0,arguments.length),new qi(this.database,ol(this._delegate,function Ah(){return new Hd}()))}orderByPriority(){return(0,q.Dv)("Query.orderByPriority",0,0,arguments.length),new qi(this.database,ol(this._delegate,function xh(){return new hd}()))}orderByValue(){return(0,q.Dv)("Query.orderByValue",0,0,arguments.length),new qi(this.database,ol(this._delegate,function Gd(){return new bf}()))}startAt(u=null,c){return(0,q.Dv)("Query.startAt",0,2,arguments.length),new qi(this.database,ol(this._delegate,function Zu(h=null,u){return ga("startAt","key",u,!0),new qo(h,u)}(u,c)))}startAfter(u=null,c){return(0,q.Dv)("Query.startAfter",0,2,arguments.length),new qi(this.database,ol(this._delegate,function Rl(h,u){return ga("startAfter","key",u,!0),new Sh(h,u)}(u,c)))}endAt(u=null,c){return(0,q.Dv)("Query.endAt",0,2,arguments.length),new qi(this.database,ol(this._delegate,function xr(h,u){return ga("endAt","key",u,!0),new On(h,u)}(u,c)))}endBefore(u=null,c){return(0,q.Dv)("Query.endBefore",0,2,arguments.length),new qi(this.database,ol(this._delegate,function Ls(h,u){return ga("endBefore","key",u,!0),new yr(h,u)}(u,c)))}equalTo(u,c){return(0,q.Dv)("Query.equalTo",1,2,arguments.length),new qi(this.database,ol(this._delegate,function zd(h,u){return ga("equalTo","key",u,!0),new wf(h,u)}(u,c)))}toString(){return(0,q.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,q.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(u){if((0,q.Dv)("Query.isEqual",1,1,arguments.length),!(u instanceof qi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(u._delegate)}static getCancelAndContextArgs_(u,c,g){const D={cancel:void 0,context:void 0};if(c&&g)D.cancel=c,(0,q.Wj)(u,"cancel",D.cancel,!0),D.context=g,(0,q.lb)(u,"context",D.context,!0);else if(c)if("object"==typeof c&&null!==c)D.context=c;else{if("function"!=typeof c)throw new Error((0,q.gK)(u,"cancelOrContext")+" must either be a cancel callback or a context object.");D.cancel=c}return D}get ref(){return new vo(this.database,new us(this._delegate._repo,this._delegate._path))}}class vo extends qi{constructor(u,c){super(u,new Ro(c._repo,c._path,new Yo,!1)),this.database=u,this._delegate=c}getKey(){return(0,q.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(u){return(0,q.Dv)("Reference.child",1,1,arguments.length),"number"==typeof u&&(u=String(u)),new vo(this.database,eo(this._delegate,u))}getParent(){(0,q.Dv)("Reference.parent",0,0,arguments.length);const u=this._delegate.parent;return u?new vo(this.database,u):null}getRoot(){return(0,q.Dv)("Reference.root",0,0,arguments.length),new vo(this.database,this._delegate.root)}set(u,c){(0,q.Dv)("Reference.set",1,2,arguments.length),(0,q.Wj)("Reference.set","onComplete",c,!0);const g=Cc(this._delegate,u);return c&&g.then(()=>c(null),D=>c(D)),g}update(u,c){if((0,q.Dv)("Reference.update",1,2,arguments.length),Array.isArray(u)){const D={};for(let P=0;P<u.length;++P)D[""+P]=u[P];u=D,kh("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ia("Reference.update",this._delegate._path),(0,q.Wj)("Reference.update","onComplete",c,!0);const g=$d(this._delegate,u);return c&&g.then(()=>c(null),D=>c(D)),g}setWithPriority(u,c,g){(0,q.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,q.Wj)("Reference.setWithPriority","onComplete",g,!0);const D=function Th(h,u,c){if(ia("setWithPriority",h._path),Bo("setWithPriority",u,h._path,!1),yo("setWithPriority",c,!1),".length"===h.key||".keys"===h.key)throw"setWithPriority failed: "+h.key+" is a read-only object.";const g=new q.BH;return vc(h._repo,h._path,u,c,g.wrapCallback(()=>{})),g.promise}(this._delegate,u,c);return g&&D.then(()=>g(null),P=>g(P)),D}remove(u){(0,q.Dv)("Reference.remove",0,1,arguments.length),(0,q.Wj)("Reference.remove","onComplete",u,!0);const c=function ld(h){return ia("remove",h._path),Cc(h,null)}(this._delegate);return u&&c.then(()=>u(null),g=>u(g)),c}transaction(u,c,g){(0,q.Dv)("Reference.transaction",1,3,arguments.length),(0,q.Wj)("Reference.transaction","transactionUpdate",u,!1),(0,q.Wj)("Reference.transaction","onComplete",c,!0),function(h,u,c,g){if(void 0!==c&&"boolean"!=typeof c)throw new Error((0,q.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,g);const D=function vu(h,u,c){var g;if(h=(0,q.m9)(h),ia("Reference.transaction",h._path),".length"===h.key||".keys"===h.key)throw"Reference.transaction failed: "+h.key+" is a read-only object.";const D=null===(g=null==c?void 0:c.applyLocally)||void 0===g||g,P=new q.BH,le=_(h,()=>{});return function Xl(h,u,c,g,D,P){Ga(h,"transaction on "+u);const G={path:u,update:c,onComplete:g,status:null,order:Zr(),applyLocally:P,retryCount:0,unwatcher:D,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},le=Al(h,u,void 0);G.currentInputSnapshot=le;const Me=G.update(le.val());if(void 0===Me)G.unwatcher(),G.currentOutputSnapshotRaw=null,G.currentOutputSnapshotResolved=null,G.onComplete&&G.onComplete(null,!1,G.currentInputSnapshot);else{$u("transaction failed: Data returned ",Me,G.path),G.status=0;const Qe=il(h.transactionQueueTree_,u),Bt=Qs(Qe)||[];let Ft;Bt.push(G),gc(Qe,Bt),"object"==typeof Me&&null!==Me&&(0,q.r3)(Me,".priority")?(Ft=(0,q.DV)(Me,".priority"),(0,q.hu)(ja(Ft),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Ft=(pa(h.serverSyncTree_,u)||Wt.EMPTY_NODE).getPriority().val();const an=fu(h),ar=Un(Me,Ft),Mr=lu(ar,le,an);G.currentOutputSnapshotRaw=ar,G.currentOutputSnapshotResolved=Mr,G.currentWriteId=Ps(h);const Yi=zo(h.serverSyncTree_,u,Mr,G.currentWriteId,G.applyLocally);xo(h.eventQueue_,u,Yi),sl(h,h.transactionQueueTree_)}}(h._repo,h._path,u,(Me,Qe,Bt)=>{let Ft=null;Me?P.reject(Me):(Ft=new za(Bt,new us(h._repo,h._path),v),P.resolve(new Yd(Qe,Ft)))},le,D),P.promise}(this._delegate,u,{applyLocally:g}).then(P=>new Df(P.committed,new Nl(this.database,P.snapshot)));return c&&D.then(P=>c(null,P.committed,P.snapshot),P=>c(P,!1,null)),D}setPriority(u,c){(0,q.Dv)("Reference.setPriority",1,2,arguments.length),(0,q.Wj)("Reference.setPriority","onComplete",c,!0);const g=function Dc(h,u){h=(0,q.m9)(h),ia("setPriority",h._path),yo("setPriority",u,!1);const c=new q.BH;return vc(h._repo,ai(h._path,".priority"),u,null,c.wrapCallback(()=>{})),c.promise}(this._delegate,u);return c&&g.then(()=>c(null),D=>c(D)),g}push(u,c){(0,q.Dv)("Reference.push",0,2,arguments.length),(0,q.Wj)("Reference.push","onComplete",c,!0);const g=function Ud(h,u){h=(0,q.m9)(h),ia("push",h._path),Bo("push",u,h._path,!0);const c=Hu(h._repo),g=is(c),D=eo(h,g),P=eo(h,g);let G;return G=null!=u?Cc(P,u).then(()=>P):Promise.resolve(P),D.then=G.then.bind(G),D.catch=G.then.bind(G,void 0),D}(this._delegate,u),D=g.then(G=>new vo(this.database,G));c&&D.then(()=>c(null),G=>c(G));const P=new vo(this.database,g);return P.then=D.then.bind(D),P.catch=D.catch.bind(D,void 0),P}onDisconnect(){return ia("Reference.onDisconnect",this._delegate._path),new Fh(new ma(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Oc{constructor(u,c){this._delegate=u,this.app=c,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Mh,forceLongPolling:Wd}}useEmulator(u,c,g={}){!function _o(h,u,c,g={}){(h=(0,q.m9)(h))._checkNotDeleted("useEmulator"),h._instanceStarted&&_t("Cannot call useEmulator() after instance has already been initialized.");const D=h._repoInternal;let P;if(D.repoInfo_.nodeAdmin)g.mockUserToken&&_t('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),P=new Gr(Gr.OWNER);else if(g.mockUserToken){const G="string"==typeof g.mockUserToken?g.mockUserToken:(0,q.Sg)(g.mockUserToken,h.app.options.projectId);P=new Gr(G)}!function Pl(h,u,c,g){h.repoInfo_=new Ki(`${u}:${c}`,!1,h.repoInfo_.namespace,h.repoInfo_.webSocketOnly,h.repoInfo_.nodeAdmin,h.repoInfo_.persistenceKey,h.repoInfo_.includeNamespaceInQueryParams),g&&(h.authTokenProvider_=g)}(D,u,c,P)}(this._delegate,u,c,g)}ref(u){if((0,q.Dv)("database.ref",0,1,arguments.length),u instanceof vo){const c=ad(this._delegate,u.toString());return new vo(this,c)}{const c=Ic(this._delegate,u);return new vo(this,c)}}refFromURL(u){(0,q.Dv)("database.refFromURL",1,1,arguments.length);const g=ad(this._delegate,u);return new vo(this,g)}goOffline(){return(0,q.Dv)("database.goOffline",0,0,arguments.length),function Ac(h){(h=(0,q.m9)(h))._checkNotDeleted("goOffline"),Dh(h._repo)}(this._delegate)}goOnline(){return(0,q.Dv)("database.goOnline",0,0,arguments.length),function xc(h){(h=(0,q.m9)(h))._checkNotDeleted("goOnline"),function Gi(h){h.persistentConnection_&&h.persistentConnection_.resume(Ld)}(h._repo)}(this._delegate)}}Oc.ServerValue={TIMESTAMP:function Oh(){return Ph}(),increment:h=>function Mc(h){return{".sv":{increment:h}}}(h)};var Rp=Object.freeze({__proto__:null,initStandalone:function Tf({app:h,url:u,version:c,customAuthImpl:g,namespace:D,nodeAdmin:P=!1}){Ct(c);const G=new mt.zt("auth-internal",new mt.H0("database-standalone"));return G.setComponent(new mt.wA("auth-internal",()=>g,"PRIVATE")),{instance:new Oc(Aa(h,G,void 0,u,P),h),namespace:D}}});const Pp=Oc.ServerValue;!function Op(h){h.INTERNAL.registerComponent(new mt.wA("database-compat",(u,{instanceIdentifier:c})=>{const g=u.getProvider("app-compat").getImmediate(),D=u.getProvider("database").getImmediate({identifier:c});return new Oc(D,g)},"PUBLIC").setServiceProps({Reference:vo,Query:qi,Database:Oc,DataSnapshot:Nl,enableLogging:qd,INTERNAL:Rp,ServerValue:Pp}).setMultipleInstances(!0)),h.registerVersion("@firebase/database-compat","0.2.0")}(Jt.Z);var kc=L(440),Xu=L(127);function ri(h){return null==h}function Lh(h){return"function"==typeof h.set}function md(h,u){return Lh(u)?u:h.ref(u)}function Nc(h,u){if(function Qu(h){return"string"==typeof h}(h))return u.stringCase();if(Lh(h))return u.firebaseCase();if(function Sf(h){return"function"==typeof h.exportVal}(h))return u.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof h)}function Eu(h,u,c="on",g=Ke.z){return new Ve.y(D=>{let P=null;return P=h[c](u,(G,le)=>{g.schedule(()=>{D.next({snapshot:G,prevKey:le})}),"once"===c&&g.schedule(()=>D.complete())},G=>{g.schedule(()=>D.error(G))}),"on"===c?{unsubscribe(){null!=P&&h.off(u,P)}}:{unsubscribe(){}}}).pipe((0,Be.U)(D=>{const{snapshot:P,prevKey:G}=D;let le=null;return P.exists()&&(le=P.key),{type:u,payload:P,prevKey:G,key:le}}),(0,Et.B)())}function Ju(h,u){const c=h.length;for(let g=0;g<c;g++)if(h[g].payload.key===u)return g;return-1}function Fc(h,u){const{payload:c,prevKey:g,key:D}=u,P=Ju(h,D),G=function Xd(h,u){if(ri(u))return 0;{const c=Ju(h,u);return-1===c?h.length:c+1}}(h,g);switch(u.type){case"value":if(u.payload&&u.payload.exists()){let le=null;u.payload.forEach(Me=>{const Qe={payload:Me,type:"value",prevKey:le,key:Me.key};return le=Me.key,h=[...h,Qe],!1})}return h;case"child_added":if(P>-1){const le=h[P-1];(le&&le.key||null)!==g&&(h=h.filter(Me=>Me.payload.key!==c.key)).splice(G,0,u)}else{if(null==g)return[u,...h];(h=h.slice()).splice(G,0,u)}return h;case"child_removed":return h.filter(le=>le.payload.key!==c.key);case"child_changed":return h.map(le=>le.payload.key===D?u:le);case"child_moved":if(P>-1){const le=h.splice(P,1)[0];return(h=h.slice()).splice(G,0,le),h}return h;default:return h}}function al(h){return(ri(h)||0===h.length)&&(h=["child_added","child_removed","child_changed","child_moved"]),h}function Uo(h,u,c){return function Wa(h,u,c){return Eu(h,"value","once",c).pipe((0,we.w)(g=>{const D=[(0,Ee.of)(g)];return u.forEach(P=>D.push(Eu(h,P,"on",c))),(0,Fe.T)(...D).pipe((0,dt.R)(Fc,[]))}),(0,St.x)())}(h,u=al(u),c)}function Qd(h,u,c){const g=(u=al(u)).map(D=>Eu(h,D,"on",c));return(0,Fe.T)(...g)}function bu(h,u){return function(g,D){return Nc(g,{stringCase:()=>h.child(g)[u](D),firebaseCase:()=>g[u](D),snapshotCase:()=>g.ref[u](D)})}}function Jl(h){return function(c){return c?Nc(c,{stringCase:()=>h.child(c).remove(),firebaseCase:()=>c.remove(),snapshotCase:()=>c.ref.remove()}):h.remove()}}function Fl(h,u){return function(){return Eu(h,"value","on",u)}}const wu=new J.OlP("angularfire2.realtimeDatabaseURL"),kp=new J.OlP("angularfire2.database.use-emulator");let Iu=(()=>{class h{constructor(c,g,D,P,G,le,Me,Qe,Bt,Ft,an,ar,Mr,Yi,Eo){this.schedulers=le;const Ll=Me,bo=(0,oe.on)(c,G,g);Qe&&(0,ce.nw)(bo,G,Bt,an,ar,Mr,Ft,Yi),this.database=(0,oe.cc)(`${bo.name}.database.${D}`,"AngularFireDatabase",bo.name,()=>{const Bl=G.runOutsideAngular(()=>bo.database(D||void 0));return Ll&&Bl.useEmulator(...Ll),Bl},[Ll])}list(c,g){const D=this.schedulers.ngZone.runOutsideAngular(()=>md(this.database,c));let P=D;return g&&(P=g(D)),function yd(h,u){const c=u.schedulers.outsideAngular,g=u.schedulers.ngZone.run(()=>h.ref);return{query:h,update:bu(g,"update"),set:bu(g,"set"),push:D=>g.push(D),remove:Jl(g),snapshotChanges:D=>Uo(h,D,c).pipe(Ze.iC),stateChanges:D=>Qd(h,D,c).pipe(Ze.iC),auditTrail:D=>function Lc(h,u,c){return function Bh(h,u,c){return function Af(h,u){return Eu(h,"value","on",u).pipe((0,Be.U)(c=>{let g;return c.payload.forEach(D=>(g=D.key,!1)),{data:c,lastKeyToLoad:g}}))}(h,c).pipe(function Tt(...h){return u=>{let c;return"function"==typeof h[h.length-1]&&(c=h.pop()),u.lift(new me(h,c))}}(u),(0,Be.U)(([D,P])=>{const G=D.lastKeyToLoad,le=P.map(Me=>Me.key);return{actions:P,lastKeyToLoad:G,loadedKeys:le}}),function fe(h){return u=>u.lift(new ye(h))}(D=>-1===D.loadedKeys.indexOf(D.lastKeyToLoad)),(0,Be.U)(D=>D.actions))}(h,Qd(h,u).pipe((0,dt.R)((D,P)=>[...D,P],[])),c)}(h,D,c).pipe(Ze.iC),valueChanges:(D,P)=>Uo(h,D,c).pipe((0,Be.U)(le=>le.map(Me=>P&&P.idField?Object.assign(Object.assign({},Me.payload.val()),{[P.idField]:Me.key}):Me.payload.val())),Ze.iC)}}(P,this)}object(c){return function Vh(h,u){return{query:h,snapshotChanges:()=>Fl(h,u.schedulers.outsideAngular)().pipe(Ze.iC),update:c=>h.ref.update(c),set:c=>h.ref.set(c),remove:()=>h.ref.remove(),valueChanges:()=>Fl(h,u.schedulers.outsideAngular)().pipe(Ze.iC,(0,Be.U)(g=>g.payload.exists()?g.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>md(this.database,c)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return h.\u0275fac=function(c){return new(c||h)(J.LFG(oe.Dh),J.LFG(oe.xv,8),J.LFG(wu,8),J.LFG(J.Lbi),J.LFG(J.R0b),J.LFG(Ze.HU),J.LFG(kp,8),J.LFG(ce.zQ,8),J.LFG(ce.Qv,8),J.LFG(ce.L6,8),J.LFG(ce._Q,8),J.LFG(ce.rT,8),J.LFG(ce.lh,8),J.LFG(ce.f7,8),J.LFG(kc.nm,8))},h.\u0275prov=J.Yz7({token:h,factory:h.\u0275fac,providedIn:"any"}),h})(),ec=(()=>{class h{constructor(){Xu.Z.registerVersion("angularfire",Ze.q4.full,"rtdb-compat")}}return h.\u0275fac=function(c){return new(c||h)},h.\u0275mod=J.oAB({type:h}),h.\u0275inj=J.cJS({providers:[Iu]}),h})();var Uh=L(520);let xf=(()=>{class h{}return h.\u0275fac=function(c){return new(c||h)},h.\u0275mod=J.oAB({type:h,bootstrap:[ae]}),h.\u0275inj=J.cJS({providers:[{provide:Z.wN,useClass:Ne.r4}],imports:[[a.b2,Uh.JF,Ne.Pc.forRoot(),De,Ie.u5,Ie.UX,ne.yb,ce.ww,We.TE,ec,oe.hO.initializeApp(ve_firebaseConfig)]]}),h})();(0,J.G48)(),a.q6().bootstrapModule(xf).catch(h=>console.log(h))},5867:(dn,ft,L)=>{"use strict";L.d(ft,{Mq:()=>a.getApp,C6:()=>a.getApps});var a=L(9681);(0,a.registerVersion)("firebase","9.8.2","app")},127:(dn,ft,L)=>{"use strict";L.d(ft,{Z:()=>a.Z});var a=L(3942);a.Z.registerVersion("firebase","9.8.2","app-compat")},8775:(dn,ft,L)=>{"use strict";L.r(ft);var a=L(5861),J=L(3942),Z=L(2090),We=L(9681),Ne=L(655),ae=L(1877),Ae=L(4859);const Ve=function ce(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ee=function Ke(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Fe=new Z.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Et=new ae.Yd("@firebase/auth");function we(w,...p){Et.logLevel<=ae.in.ERROR&&Et.error(`Auth (${We.SDK_VERSION}): ${w}`,...p)}function dt(w,...p){throw Tt(w,...p)}function St(w,...p){return Tt(w,...p)}function Pt(w,p,_){const A=Object.assign(Object.assign({},Ee()),{[p]:_});return new Z.LL("auth","Firebase",A).create(p,{appName:w.name})}function Xe(w,p,_){if(!(p instanceof _))throw _.name!==p.constructor.name&&dt(w,"argument-error"),Pt(w,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Tt(w,...p){if("string"!=typeof w){const _=p[0],A=[...p.slice(1)];return A[0]&&(A[0].appName=w.name),w._errorFactory.create(_,...A)}return Fe.create(w,...p)}function me(w,p,..._){if(!w)throw Tt(p,..._)}function Oe(w){const p="INTERNAL ASSERTION FAILED: "+w;throw we(p),new Error(p)}function Se(w,p){w||Oe(p)}const fe=new Map;function ye(w){Se(w instanceof Function,"Expected a class definition");let p=fe.get(w);return p?(Se(p instanceof w,"Instance stored in cache mismatched with class"),p):(p=new w,fe.set(w,p),p)}function Mt(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function Jt(){return"http:"===mt()||"https:"===mt()}function mt(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class q{constructor(p,_){this.shortDelay=p,this.longDelay=_,Se(_>p,"Short delay should be less than long delay!"),this.isMobile=(0,Z.uI)()||(0,Z.b$)()}get(){return function wt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Jt()||(0,Z.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function bt(w,p){Se(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return p?`${_}${p.startsWith("/")?p.slice(1):p}`:_}class Ce{static initialize(p,_,A){this.fetchImpl=p,_&&(this.headersImpl=_),A&&(this.responseImpl=A)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Oe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Oe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Oe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const tt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Gt=new q(3e4,6e4);function Ct(w,p){return w.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:w.tenantId}):p}function sn(w,p,_,A){return bn.apply(this,arguments)}function bn(){return(bn=(0,a.Z)(function*(w,p,_,A,K={}){return kn(w,K,(0,a.Z)(function*(){let ge={},lt={};A&&("GET"===p?lt=A:ge={body:JSON.stringify(A)});const Xt=(0,Z.xO)(Object.assign({key:w.config.apiKey},lt)).slice(1),En=yield w._getAdditionalHeaders();return En["Content-Type"]="application/json",w.languageCode&&(En["X-Firebase-Locale"]=w.languageCode),Ce.fetch()(Zr(w,w.config.apiHost,_,Xt),Object.assign({method:p,headers:En,referrerPolicy:"no-referrer"},ge))}))})).apply(this,arguments)}function kn(w,p,_){return _n.apply(this,arguments)}function _n(){return(_n=(0,a.Z)(function*(w,p,_){w._canInitEmulator=!1;const A=Object.assign(Object.assign({},tt),p);try{const K=new Qn(w),ge=yield Promise.race([_(),K.promise]);K.clearNetworkTimeout();const lt=yield ge.json();if("needConfirmation"in lt)throw Yn(w,"account-exists-with-different-credential",lt);if(ge.ok&&!("errorMessage"in lt))return lt;{const Xt=ge.ok?lt.errorMessage:lt.error.message,[En,On]=Xt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===En)throw Yn(w,"credential-already-in-use",lt);if("EMAIL_EXISTS"===En)throw Yn(w,"email-already-in-use",lt);if("USER_DISABLED"===En)throw Yn(w,"user-disabled",lt);const xr=A[En]||En.toLowerCase().replace(/[_\s]+/g,"-");if(On)throw Pt(w,xr,On);dt(w,xr)}}catch(K){if(K instanceof Z.ZR)throw K;dt(w,"network-request-failed")}})).apply(this,arguments)}function gn(w,p,_,A){return qn.apply(this,arguments)}function qn(){return(qn=(0,a.Z)(function*(w,p,_,A,K={}){const ge=yield sn(w,p,_,A,K);return"mfaPendingCredential"in ge&&dt(w,"multi-factor-auth-required",{_serverResponse:ge}),ge})).apply(this,arguments)}function Zr(w,p,_,A){const K=`${p}${_}?${A}`;return w.config.emulator?bt(w.config,K):`${w.config.apiScheme}://${K}`}class Qn{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((_,A)=>{this.timer=setTimeout(()=>A(St(this.auth,"network-request-failed")),Gt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Yn(w,p,_){const A={appName:w.name};_.email&&(A.email=_.email),_.phoneNumber&&(A.phoneNumber=_.phoneNumber);const K=St(w,p,A);return K.customData._tokenResponse=_,K}function Rr(){return(Rr=(0,a.Z)(function*(w,p){return sn(w,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function cr(w,p){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,a.Z)(function*(w,p){return sn(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function nr(w,p){return _r.apply(this,arguments)}function _r(){return(_r=(0,a.Z)(function*(w,p){return sn(w,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function _t(w){if(w)try{const p=new Date(Number(w));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function en(){return(en=(0,a.Z)(function*(w,p=!1){const _=(0,Z.m9)(w),A=yield _.getIdToken(p),K=qt(A);me(K&&K.exp&&K.auth_time&&K.iat,_.auth,"internal-error");const ge="object"==typeof K.firebase?K.firebase:void 0,lt=null==ge?void 0:ge.sign_in_provider;return{claims:K,token:A,authTime:_t(kt(K.auth_time)),issuedAtTime:_t(kt(K.iat)),expirationTime:_t(kt(K.exp)),signInProvider:lt||null,signInSecondFactor:(null==ge?void 0:ge.sign_in_second_factor)||null}})).apply(this,arguments)}function kt(w){return 1e3*Number(w)}function qt(w){const[p,_,A]=w.split(".");if(void 0===p||void 0===_||void 0===A)return we("JWT malformed, contained fewer than 3 sections"),null;try{const K=(0,Z.tV)(_);return K?JSON.parse(K):(we("Failed to decode base64 JWT payload"),null)}catch(K){return we("Caught error parsing JWT payload as JSON",K),null}}function Zn(w,p){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,a.Z)(function*(w,p,_=!1){if(_)return p;try{return yield p}catch(A){throw A instanceof Z.ZR&&Mn(A)&&w.auth.currentUser===w&&(yield w.auth.signOut()),A}})).apply(this,arguments)}function Mn({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class Fn{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var _;if(p){const A=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),A}{this.errorBackoff=3e4;const K=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,K)}}schedule(p=!1){var _=this;if(!this.isRunning)return;const A=this.getInterval(p);this.timerId=setTimeout((0,a.Z)(function*(){yield _.iteration()}),A)}iteration(){var p=this;return(0,a.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_.code&&p.schedule(!0))}p.schedule()})()}}class vr{constructor(p,_){this.createdAt=p,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=_t(this.lastLoginAt),this.creationTime=_t(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Hn(w){return xe.apply(this,arguments)}function xe(){return(xe=(0,a.Z)(function*(w){var p;const _=w.auth,A=yield w.getIdToken(),K=yield Zn(w,nr(_,{idToken:A}));me(null==K?void 0:K.users.length,_,"internal-error");const ge=K.users[0];w._notifyReloadListener(ge);const lt=(null===(p=ge.providerUserInfo)||void 0===p?void 0:p.length)?Ge(ge.providerUserInfo):[],Xt=Lt(w.providerData,lt),xr=!!w.isAnonymous&&!(w.email&&ge.passwordHash||(null==Xt?void 0:Xt.length)),yr={uid:ge.localId,displayName:ge.displayName||null,photoURL:ge.photoUrl||null,email:ge.email||null,emailVerified:ge.emailVerified||!1,phoneNumber:ge.phoneNumber||null,tenantId:ge.tenantId||null,providerData:Xt,metadata:new vr(ge.createdAt,ge.lastLoginAt),isAnonymous:xr};Object.assign(w,yr)})).apply(this,arguments)}function rt(){return(rt=(0,a.Z)(function*(w){const p=(0,Z.m9)(w);yield Hn(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Lt(w,p){return[...w.filter(A=>!p.some(K=>K.providerId===A.providerId)),...p]}function Ge(w){return w.map(p=>{var{providerId:_}=p,A=(0,Ne._T)(p,["providerId"]);return{providerId:_,uid:A.rawId||"",displayName:A.displayName||null,email:A.email||null,phoneNumber:A.phoneNumber||null,photoURL:A.photoUrl||null}})}function tn(){return(tn=(0,a.Z)(function*(w,p){const _=yield kn(w,{},(0,a.Z)(function*(){const A=(0,Z.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:K,apiKey:ge}=w.config,lt=Zr(w,K,"/v1/token",`key=${ge}`),Xt=yield w._getAdditionalHeaders();return Xt["Content-Type"]="application/x-www-form-urlencoded",Ce.fetch()(lt,{method:"POST",headers:Xt,body:A})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class un{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){me(p.idToken,"internal-error"),me(void 0!==p.idToken,"internal-error"),me(void 0!==p.refreshToken,"internal-error");const _="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function cn(w){const p=qt(w);return me(p,"internal-error"),me(void 0!==p.exp,"internal-error"),me(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,_)}getToken(p,_=!1){var A=this;return(0,a.Z)(function*(){return me(!A.accessToken||A.refreshToken,p,"user-token-expired"),_||!A.accessToken||A.isExpired?A.refreshToken?(yield A.refresh(p,A.refreshToken),A.accessToken):null:A.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,_){var A=this;return(0,a.Z)(function*(){const{accessToken:K,refreshToken:ge,expiresIn:lt}=yield function ht(w,p){return tn.apply(this,arguments)}(p,_);A.updateTokensAndExpiration(K,ge,Number(lt))})()}updateTokensAndExpiration(p,_,A){this.refreshToken=_||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*A}static fromJSON(p,_){const{refreshToken:A,accessToken:K,expirationTime:ge}=_,lt=new un;return A&&(me("string"==typeof A,"internal-error",{appName:p}),lt.refreshToken=A),K&&(me("string"==typeof K,"internal-error",{appName:p}),lt.accessToken=K),ge&&(me("number"==typeof ge,"internal-error",{appName:p}),lt.expirationTime=ge),lt}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new un,this.toJSON())}_performRefresh(){return Oe("not implemented")}}function vn(w,p){me("string"==typeof w||void 0===w,"internal-error",{appName:p})}class Vn{constructor(p){var{uid:_,auth:A,stsTokenManager:K}=p,ge=(0,Ne._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Fn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=A,this.stsTokenManager=K,this.accessToken=K.accessToken,this.displayName=ge.displayName||null,this.email=ge.email||null,this.emailVerified=ge.emailVerified||!1,this.phoneNumber=ge.phoneNumber||null,this.photoURL=ge.photoURL||null,this.isAnonymous=ge.isAnonymous||!1,this.tenantId=ge.tenantId||null,this.providerData=ge.providerData?[...ge.providerData]:[],this.metadata=new vr(ge.createdAt||void 0,ge.lastLoginAt||void 0)}getIdToken(p){var _=this;return(0,a.Z)(function*(){const A=yield Zn(_,_.stsTokenManager.getToken(_.auth,p));return me(A,_.auth,"internal-error"),_.accessToken!==A&&(_.accessToken=A,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),A})()}getIdTokenResult(p){return function Te(w){return en.apply(this,arguments)}(this,p)}reload(){return function qe(w){return rt.apply(this,arguments)}(this)}_assign(p){this!==p&&(me(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(_=>Object.assign({},_)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new Vn(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,_=!1){var A=this;return(0,a.Z)(function*(){let K=!1;p.idToken&&p.idToken!==A.stsTokenManager.accessToken&&(A.stsTokenManager.updateFromServerResponse(p),K=!0),_&&(yield Hn(A)),yield A.auth._persistUserIfCurrent(A),K&&A.auth._notifyListenersIfCurrent(A)})()}delete(){var p=this;return(0,a.Z)(function*(){const _=yield p.getIdToken();return yield Zn(p,function on(w,p){return Rr.apply(this,arguments)}(p.auth,{idToken:_})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,_){var A,K,ge,lt,Xt,En,On,xr;const yr=null!==(A=_.displayName)&&void 0!==A?A:void 0,Ls=null!==(K=_.email)&&void 0!==K?K:void 0,qo=null!==(ge=_.phoneNumber)&&void 0!==ge?ge:void 0,Zu=null!==(lt=_.photoURL)&&void 0!==lt?lt:void 0,Sh=null!==(Xt=_.tenantId)&&void 0!==Xt?Xt:void 0,Rl=null!==(En=_._redirectEventId)&&void 0!==En?En:void 0,Tc=null!==(On=_.createdAt)&&void 0!==On?On:void 0,ud=null!==(xr=_.lastLoginAt)&&void 0!==xr?xr:void 0,{uid:cd,emailVerified:Sc,isAnonymous:jd,providerData:dd,stsTokenManager:Hd}=_;me(cd&&Hd,p,"internal-error");const Ah=un.fromJSON(this.name,Hd);me("string"==typeof cd,p,"internal-error"),vn(yr,p.name),vn(Ls,p.name),me("boolean"==typeof Sc,p,"internal-error"),me("boolean"==typeof jd,p,"internal-error"),vn(qo,p.name),vn(Zu,p.name),vn(Sh,p.name),vn(Rl,p.name),vn(Tc,p.name),vn(ud,p.name);const hd=new Vn({uid:cd,auth:p,email:Ls,emailVerified:Sc,displayName:yr,isAnonymous:jd,photoURL:Zu,phoneNumber:qo,tenantId:Sh,stsTokenManager:Ah,createdAt:Tc,lastLoginAt:ud});return dd&&Array.isArray(dd)&&(hd.providerData=dd.map(xh=>Object.assign({},xh))),Rl&&(hd._redirectEventId=Rl),hd}static _fromIdTokenResponse(p,_,A=!1){return(0,a.Z)(function*(){const K=new un;K.updateFromServerResponse(_);const ge=new Vn({uid:_.localId,auth:p,stsTokenManager:K,isAnonymous:A});return yield Hn(ge),ge})()}}const An=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,a.Z)(function*(){return!0})()}_set(_,A){var K=this;return(0,a.Z)(function*(){K.storage[_]=A})()}_get(_){var A=this;return(0,a.Z)(function*(){const K=A.storage[_];return void 0===K?null:K})()}_remove(_){var A=this;return(0,a.Z)(function*(){delete A.storage[_]})()}_addListener(_,A){}_removeListener(_,A){}}return w.type="NONE",w})();function Sr(w,p,_){return`firebase:${w}:${p}:${_}`}class Gr{constructor(p,_,A){this.persistence=p,this.auth=_,this.userKey=A;const{config:K,name:ge}=this.auth;this.fullUserKey=Sr(this.userKey,K.apiKey,ge),this.fullPersistenceKey=Sr("persistence",K.apiKey,ge),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,a.Z)(function*(){const _=yield p.persistence._get(p.fullUserKey);return _?Vn._fromJSON(p.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var _=this;return(0,a.Z)(function*(){if(_.persistence===p)return;const A=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=p,A?_.setCurrentUser(A):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,_,A="authUser"){return(0,a.Z)(function*(){if(!_.length)return new Gr(ye(An),p,A);const K=(yield Promise.all(_.map(function(){var On=(0,a.Z)(function*(xr){if(yield xr._isAvailable())return xr});return function(xr){return On.apply(this,arguments)}}()))).filter(On=>On);let ge=K[0]||ye(An);const lt=Sr(A,p.config.apiKey,p.name);let Xt=null;for(const On of _)try{const xr=yield On._get(lt);if(xr){const yr=Vn._fromJSON(p,xr);On!==ge&&(Xt=yr),ge=On;break}}catch(xr){}const En=K.filter(On=>On._shouldAllowMigration);return ge._shouldAllowMigration&&En.length?(ge=En[0],Xt&&(yield ge._set(lt,Xt.toJSON())),yield Promise.all(_.map(function(){var On=(0,a.Z)(function*(xr){if(xr!==ge)try{yield xr._remove(lt)}catch(yr){}});return function(xr){return On.apply(this,arguments)}}())),new Gr(ge,p,A)):new Gr(ge,p,A)})()}}function zr(w){const p=w.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(gt(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(Dt(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Ln(p))return"Blackberry";if(zn(p))return"Webos";if(st(p))return"Safari";if((p.includes("chrome/")||Re(p))&&!p.includes("edge/"))return"Chrome";if(Kt(p))return"Android";{const A=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==A?void 0:A.length))return A[1]}return"Other"}function Dt(w=(0,Z.z$)()){return/firefox\//i.test(w)}function st(w=(0,Z.z$)()){const p=w.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function Re(w=(0,Z.z$)()){return/crios\//i.test(w)}function gt(w=(0,Z.z$)()){return/iemobile/i.test(w)}function Kt(w=(0,Z.z$)()){return/android/i.test(w)}function Ln(w=(0,Z.z$)()){return/blackberry/i.test(w)}function zn(w=(0,Z.z$)()){return/webos/i.test(w)}function Er(w=(0,Z.z$)()){return/iphone|ipad|ipod/i.test(w)}function Ei(w=(0,Z.z$)()){return Er(w)||Kt(w)||zn(w)||Ln(w)||/windows phone/i.test(w)||gt(w)}function Yr(w,p=[]){let _;switch(w){case"Browser":_=zr((0,Z.z$)());break;case"Worker":_=`${zr((0,Z.z$)())}-${w}`;break;default:_=w}const A=p.length?p.join(","):"FirebaseCore-web";return`${_}/JsCore/${We.SDK_VERSION}/${A}`}class Kr{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,_){const A=ge=>new Promise((lt,Xt)=>{try{lt(p(ge))}catch(En){Xt(En)}});A.onAbort=_,this.queue.push(A);const K=this.queue.length-1;return()=>{this.queue[K]=()=>Promise.resolve()}}runMiddleware(p){var _=this;return(0,a.Z)(function*(){if(_.auth.currentUser===p)return;const A=[];try{for(const K of _.queue)yield K(p),K.onAbort&&A.push(K.onAbort)}catch(K){A.reverse();for(const ge of A)try{ge()}catch(lt){}throw _.auth._errorFactory.create("login-blocked",{originalMessage:K.message})}})()}}class nn{constructor(p,_,A){this.app=p,this.heartbeatServiceProvider=_,this.config=A,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ir(this),this.idTokenSubscription=new ir(this),this.beforeStateQueue=new Kr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Fe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=A.sdkClientVersion}_initializeWithPersistence(p,_){var A=this;return _&&(this._popupRedirectResolver=ye(_)),this._initializationPromise=this.queue((0,a.Z)(function*(){var K,ge;if(!A._deleted&&(A.persistenceManager=yield Gr.create(A,p),!A._deleted)){if(null===(K=A._popupRedirectResolver)||void 0===K?void 0:K._shouldInitProactively)try{yield A._popupRedirectResolver._initialize(A)}catch(lt){}yield A.initializeCurrentUser(_),A.lastNotifiedUid=(null===(ge=A.currentUser)||void 0===ge?void 0:ge.uid)||null,!A._deleted&&(A._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,a.Z)(function*(){if(p._deleted)return;const _=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||_){if(p.currentUser&&_&&p.currentUser.uid===_.uid)return p._currentUser._assign(_),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(_,!0)}})()}initializeCurrentUser(p){var _=this;return(0,a.Z)(function*(){var A;const K=yield _.assertedPersistence.getCurrentUser();let ge=K,lt=!1;if(p&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const Xt=null===(A=_.redirectUser)||void 0===A?void 0:A._redirectEventId,En=null==ge?void 0:ge._redirectEventId,On=yield _.tryRedirectSignIn(p);(!Xt||Xt===En)&&(null==On?void 0:On.user)&&(ge=On.user,lt=!0)}if(!ge)return _.directlySetCurrentUser(null);if(!ge._redirectEventId){if(lt)try{yield _.beforeStateQueue.runMiddleware(ge)}catch(Xt){ge=K,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(Xt))}return ge?_.reloadAndSetCurrentUserOrClear(ge):_.directlySetCurrentUser(null)}return me(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===ge._redirectEventId?_.directlySetCurrentUser(ge):_.reloadAndSetCurrentUserOrClear(ge)})()}tryRedirectSignIn(p){var _=this;return(0,a.Z)(function*(){let A=null;try{A=yield _._popupRedirectResolver._completeRedirectFn(_,p,!0)}catch(K){yield _._setRedirectUser(null)}return A})()}reloadAndSetCurrentUserOrClear(p){var _=this;return(0,a.Z)(function*(){try{yield Hn(p)}catch(A){if("auth/network-request-failed"!==A.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function Ye(){if("undefined"==typeof navigator)return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var p=this;return(0,a.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var _=this;return(0,a.Z)(function*(){const A=p?(0,Z.m9)(p):null;return A&&me(A.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(A&&A._clone(_))})()}_updateCurrentUser(p,_=!1){var A=this;return(0,a.Z)(function*(){if(!A._deleted)return p&&me(A.tenantId===p.tenantId,A,"tenant-id-mismatch"),_||(yield A.beforeStateQueue.runMiddleware(p)),A.queue((0,a.Z)(function*(){yield A.directlySetCurrentUser(p),A.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,a.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var _=this;return this.queue((0,a.Z)(function*(){yield _.assertedPersistence.setPersistence(ye(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new Z.LL("auth","Firebase",p())}onAuthStateChanged(p,_,A){return this.registerStateListener(this.authStateSubscription,p,_,A)}beforeAuthStateChanged(p,_){return this.beforeStateQueue.pushCallback(p,_)}onIdTokenChanged(p,_,A){return this.registerStateListener(this.idTokenSubscription,p,_,A)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,_){var A=this;return(0,a.Z)(function*(){const K=yield A.getOrInitRedirectPersistenceManager(_);return null===p?K.removeCurrentUser():K.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var _=this;return(0,a.Z)(function*(){if(!_.redirectPersistenceManager){const A=p&&ye(p)||_._popupRedirectResolver;me(A,_,"argument-error"),_.redirectPersistenceManager=yield Gr.create(_,[ye(A._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(p){var _=this;return(0,a.Z)(function*(){var A,K;return _._isInitialized&&(yield _.queue((0,a.Z)(function*(){}))),(null===(A=_._currentUser)||void 0===A?void 0:A._redirectEventId)===p?_._currentUser:(null===(K=_.redirectUser)||void 0===K?void 0:K._redirectEventId)===p?_.redirectUser:null})()}_persistUserIfCurrent(p){var _=this;return(0,a.Z)(function*(){if(p===_.currentUser)return _.queue((0,a.Z)(function*(){return _.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const A=null!==(_=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==A&&(this.lastNotifiedUid=A,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,_,A,K){if(this._deleted)return()=>{};const ge="function"==typeof _?_:_.next.bind(_),lt=this._isInitialized?Promise.resolve():this._initializationPromise;return me(lt,this,"internal-error"),lt.then(()=>ge(this.currentUser)),"function"==typeof _?p.addObserver(_,A,K):p.addObserver(_)}directlySetCurrentUser(p){var _=this;return(0,a.Z)(function*(){_.currentUser&&_.currentUser!==p&&(_._currentUser._stopProactiveRefresh(),p&&_.isProactiveRefreshEnabled&&p._startProactiveRefresh()),_.currentUser=p,p?yield _.assertedPersistence.setCurrentUser(p):yield _.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Yr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,a.Z)(function*(){var _;const A={"X-Client-Version":p.clientVersion};p.app.options.appId&&(A["X-Firebase-gmpid"]=p.app.options.appId);const K=yield null===(_=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return K&&(A["X-Firebase-Client"]=K),A})()}}function wn(w){return(0,Z.m9)(w)}class ir{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,Z.ne)(_=>this.observer=_)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ni(w){const p=w.indexOf(":");return p<0?"":w.substr(0,p+1)}function yi(w){if(!w)return null;const p=Number(w);return isNaN(p)?null:p}class bi{constructor(p,_){this.providerId=p,this.signInMethod=_}toJSON(){return Oe("not implemented")}_getIdTokenResponse(p){return Oe("not implemented")}_linkToIdToken(p,_){return Oe("not implemented")}_getReauthenticationResolver(p){return Oe("not implemented")}}function Xr(w,p){return sr.apply(this,arguments)}function sr(){return(sr=(0,a.Z)(function*(w,p){return sn(w,"POST","/v1/accounts:resetPassword",Ct(w,p))})).apply(this,arguments)}function Zi(w,p){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,a.Z)(function*(w,p){return sn(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Mi(w,p){return wi.apply(this,arguments)}function wi(){return(wi=(0,a.Z)(function*(w,p){return sn(w,"POST","/v1/accounts:update",Ct(w,p))})).apply(this,arguments)}function ki(){return(ki=(0,a.Z)(function*(w,p){return gn(w,"POST","/v1/accounts:signInWithPassword",Ct(w,p))})).apply(this,arguments)}function Si(w,p){return ee.apply(this,arguments)}function ee(){return(ee=(0,a.Z)(function*(w,p){return sn(w,"POST","/v1/accounts:sendOobCode",Ct(w,p))})).apply(this,arguments)}function _e(w,p){return Je.apply(this,arguments)}function Je(){return(Je=(0,a.Z)(function*(w,p){return Si(w,p)})).apply(this,arguments)}function pt(w,p){return be.apply(this,arguments)}function be(){return(be=(0,a.Z)(function*(w,p){return Si(w,p)})).apply(this,arguments)}function ke(w,p){return yt.apply(this,arguments)}function yt(){return(yt=(0,a.Z)(function*(w,p){return Si(w,p)})).apply(this,arguments)}function jt(w,p){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,a.Z)(function*(w,p){return Si(w,p)})).apply(this,arguments)}function Tn(){return(Tn=(0,a.Z)(function*(w,p){return gn(w,"POST","/v1/accounts:signInWithEmailLink",Ct(w,p))})).apply(this,arguments)}function rr(){return(rr=(0,a.Z)(function*(w,p){return gn(w,"POST","/v1/accounts:signInWithEmailLink",Ct(w,p))})).apply(this,arguments)}class Tr extends bi{constructor(p,_,A,K=null){super("password",A),this._email=p,this._password=_,this._tenantId=K}static _fromEmailAndPassword(p,_){return new Tr(p,_,"password")}static _fromEmailAndCode(p,_,A=null){return new Tr(p,_,"emailLink",A)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(p){var _=this;return(0,a.Z)(function*(){switch(_.signInMethod){case"password":return function oi(w,p){return ki.apply(this,arguments)}(p,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Ot(w,p){return Tn.apply(this,arguments)}(p,{email:_._email,oobCode:_._password});default:dt(p,"internal-error")}})()}_linkToIdToken(p,_){var A=this;return(0,a.Z)(function*(){switch(A.signInMethod){case"password":return Zi(p,{idToken:_,returnSecureToken:!0,email:A._email,password:A._password});case"emailLink":return function er(w,p){return rr.apply(this,arguments)}(p,{idToken:_,email:A._email,oobCode:A._password});default:dt(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function si(w,p){return _i.apply(this,arguments)}function _i(){return(_i=(0,a.Z)(function*(w,p){return gn(w,"POST","/v1/accounts:signInWithIdp",Ct(w,p))})).apply(this,arguments)}class nt extends bi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const _=new nt(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(_.idToken=p.idToken),p.accessToken&&(_.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(_.nonce=p.nonce),p.pendingToken&&(_.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(_.accessToken=p.oauthToken,_.secret=p.oauthTokenSecret):dt("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:A,signInMethod:K}=_,ge=(0,Ne._T)(_,["providerId","signInMethod"]);if(!A||!K)return null;const lt=new nt(A,K);return lt.idToken=ge.idToken||void 0,lt.accessToken=ge.accessToken||void 0,lt.secret=ge.secret,lt.nonce=ge.nonce,lt.pendingToken=ge.pendingToken||null,lt}_getIdTokenResponse(p){return si(p,this.buildRequest())}_linkToIdToken(p,_){const A=this.buildRequest();return A.idToken=_,si(p,A)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,si(p,_)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),p.postBody=(0,Z.xO)(_)}return p}}function It(w,p){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,a.Z)(function*(w,p){return sn(w,"POST","/v1/accounts:sendVerificationCode",Ct(w,p))})).apply(this,arguments)}function Pn(){return(Pn=(0,a.Z)(function*(w,p){return gn(w,"POST","/v1/accounts:signInWithPhoneNumber",Ct(w,p))})).apply(this,arguments)}function ui(){return(ui=(0,a.Z)(function*(w,p){const _=yield gn(w,"POST","/v1/accounts:signInWithPhoneNumber",Ct(w,p));if(_.temporaryProof)throw Yn(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Ur={USER_NOT_FOUND:"user-not-found"};function cs(){return(cs=(0,a.Z)(function*(w,p){return gn(w,"POST","/v1/accounts:signInWithPhoneNumber",Ct(w,Object.assign(Object.assign({},p),{operation:"REAUTH"})),Ur)})).apply(this,arguments)}class Ni extends bi{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,_){return new Ni({verificationId:p,verificationCode:_})}static _fromTokenResponse(p,_){return new Ni({phoneNumber:p,temporaryProof:_})}_getIdTokenResponse(p){return function yn(w,p){return Pn.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,_){return function Qr(w,p){return ui.apply(this,arguments)}(p,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function ys(w,p){return cs.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:_,verificationId:A,verificationCode:K}=this.params;return p&&_?{temporaryProof:p,phoneNumber:_}:{sessionInfo:A,code:K}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:_,verificationCode:A,phoneNumber:K,temporaryProof:ge}=p;return A||_||K||ge?new Ni({verificationId:_,verificationCode:A,phoneNumber:K,temporaryProof:ge}):null}}class Pr{constructor(p){var _,A,K,ge,lt,Xt;const En=(0,Z.zd)((0,Z.pd)(p)),On=null!==(_=En.apiKey)&&void 0!==_?_:null,xr=null!==(A=En.oobCode)&&void 0!==A?A:null,yr=function no(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(K=En.mode)&&void 0!==K?K:null);me(On&&xr&&yr,"argument-error"),this.apiKey=On,this.operation=yr,this.code=xr,this.continueUrl=null!==(ge=En.continueUrl)&&void 0!==ge?ge:null,this.languageCode=null!==(lt=En.languageCode)&&void 0!==lt?lt:null,this.tenantId=null!==(Xt=En.tenantId)&&void 0!==Xt?Xt:null}static parseLink(p){const _=function Ts(w){const p=(0,Z.zd)((0,Z.pd)(w)).link,_=p?(0,Z.zd)((0,Z.pd)(p)).deep_link_id:null,A=(0,Z.zd)((0,Z.pd)(w)).deep_link_id;return(A?(0,Z.zd)((0,Z.pd)(A)).link:null)||A||_||p||w}(p);try{return new Pr(_)}catch(A){return null}}}let Ar=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(_,A){return Tr._fromEmailAndPassword(_,A)}static credentialWithLink(_,A){const K=Pr.parseLink(A);return me(K,"argument-error"),Tr._fromEmailAndCode(_,K.code,K.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class hi{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Or extends hi{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Xi extends Or{static credentialFromJSON(p){const _="string"==typeof p?JSON.parse(p):p;return me("providerId"in _&&"signInMethod"in _,"argument-error"),nt._fromParams(_)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return me(p.idToken||p.accessToken,"argument-error"),nt._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Xi.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Xi.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:A,oauthTokenSecret:K,pendingToken:ge,nonce:lt,providerId:Xt}=p;if(!A&&!K&&!_&&!ge||!Xt)return null;try{return new Xi(Xt)._credential({idToken:_,accessToken:A,nonce:lt,pendingToken:ge})}catch(En){return null}}}let _s=(()=>{class w extends Or{constructor(){super("facebook.com")}static credential(_){return nt._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch(A){return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),Ss=(()=>{class w extends Or{constructor(){super("google.com"),this.addScope("profile")}static credential(_,A){return nt._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:A})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:A,oauthAccessToken:K}=_;if(!A&&!K)return null;try{return w.credential(A,K)}catch(ge){return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),ro=(()=>{class w extends Or{constructor(){super("github.com")}static credential(_){return nt._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch(A){return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class pr extends bi{constructor(p,_){super(p,p),this.pendingToken=_}_getIdTokenResponse(p){return si(p,this.buildRequest())}_linkToIdToken(p,_){const A=this.buildRequest();return A.idToken=_,si(p,A)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,si(p,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:A,signInMethod:K,pendingToken:ge}=_;return A&&K&&ge&&A===K?new pr(A,ge):null}static _create(p,_){return new pr(p,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ds extends hi{constructor(p){me(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return ds.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return ds.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const _=pr.fromJSON(p);return me(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:_,providerId:A}=p;if(!_||!A)return null;try{return pr._create(A,_)}catch(K){return null}}}let Qi=(()=>{class w extends Or{constructor(){super("twitter.com")}static credential(_,A){return nt._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:A})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:A,oauthTokenSecret:K}=_;if(!A||!K)return null;try{return w.credential(A,K)}catch(ge){return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function kr(w,p){return vs.apply(this,arguments)}function vs(){return(vs=(0,a.Z)(function*(w,p){return gn(w,"POST","/v1/accounts:signUp",Ct(w,p))})).apply(this,arguments)}class Ri{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,_,A,K=!1){return(0,a.Z)(function*(){const ge=yield Vn._fromIdTokenResponse(p,A,K),lt=uo(A);return new Ri({user:ge,providerId:lt,_tokenResponse:A,operationType:_})})()}static _forOperation(p,_,A){return(0,a.Z)(function*(){yield p._updateTokensIfNecessary(A,!0);const K=uo(A);return new Ri({user:p,providerId:K,_tokenResponse:A,operationType:_})})()}}function uo(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function as(){return(as=(0,a.Z)(function*(w){var p;const _=wn(w);if(yield _._initializationPromise,null===(p=_.currentUser)||void 0===p?void 0:p.isAnonymous)return new Ri({user:_.currentUser,providerId:null,operationType:"signIn"});const A=yield kr(_,{returnSecureToken:!0}),K=yield Ri._fromIdTokenResponse(_,"signIn",A,!0);return yield _._updateCurrentUser(K.user),K})).apply(this,arguments)}class Es extends Z.ZR{constructor(p,_,A,K){var ge;super(_.code,_.message),this.operationType=A,this.user=K,Object.setPrototypeOf(this,Es.prototype),this.customData={appName:p.name,tenantId:null!==(ge=p.tenantId)&&void 0!==ge?ge:void 0,_serverResponse:_.customData._serverResponse,operationType:A}}static _fromErrorAndOperation(p,_,A,K){return new Es(p,_,A,K)}}function ji(w,p,_,A){return("reauthenticate"===p?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(ge=>{throw"auth/multi-factor-auth-required"===ge.code?Es._fromErrorAndOperation(w,ge,p,A):ge})}function ts(w){return new Set(w.map(({providerId:p})=>p).filter(p=>!!p))}function jr(){return(jr=(0,a.Z)(function*(w,p){const _=(0,Z.m9)(w);yield $(!0,_,p);const{providerUserInfo:A}=yield cr(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[p]}),K=ts(A||[]);return _.providerData=_.providerData.filter(ge=>K.has(ge.providerId)),K.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function j(w,p){return se.apply(this,arguments)}function se(){return(se=(0,a.Z)(function*(w,p,_=!1){const A=yield Zn(w,p._linkToIdToken(w.auth,yield w.getIdToken()),_);return Ri._forOperation(w,"link",A)})).apply(this,arguments)}function $(w,p,_){return de.apply(this,arguments)}function de(){return(de=(0,a.Z)(function*(w,p,_){yield Hn(p);const K=!1===w?"provider-already-linked":"no-such-provider";me(ts(p.providerData).has(_)===w,p.auth,K)})).apply(this,arguments)}function et(w,p){return ct.apply(this,arguments)}function ct(){return(ct=(0,a.Z)(function*(w,p,_=!1){const{auth:A}=w,K="reauthenticate";try{const ge=yield Zn(w,ji(A,K,p,w),_);me(ge.idToken,A,"internal-error");const lt=qt(ge.idToken);me(lt,A,"internal-error");const{sub:Xt}=lt;return me(w.uid===Xt,A,"user-mismatch"),Ri._forOperation(w,K,ge)}catch(ge){throw"auth/user-not-found"===(null==ge?void 0:ge.code)&&dt(A,"user-mismatch"),ge}})).apply(this,arguments)}function zt(w,p){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,a.Z)(function*(w,p,_=!1){const A="signIn",K=yield ji(w,A,p),ge=yield Ri._fromIdTokenResponse(w,A,K);return _||(yield w._updateCurrentUser(ge.user)),ge})).apply(this,arguments)}function gr(w,p){return br.apply(this,arguments)}function br(){return(br=(0,a.Z)(function*(w,p){return zt(wn(w),p)})).apply(this,arguments)}function dr(w,p){return wr.apply(this,arguments)}function wr(){return(wr=(0,a.Z)(function*(w,p){const _=(0,Z.m9)(w);return yield $(!1,_,p.providerId),j(_,p)})).apply(this,arguments)}function Fi(w,p){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,a.Z)(function*(w,p){return et((0,Z.m9)(w),p)})).apply(this,arguments)}function vi(w,p){return bs.apply(this,arguments)}function bs(){return(bs=(0,a.Z)(function*(w,p){return gn(w,"POST","/v1/accounts:signInWithCustomToken",Ct(w,p))})).apply(this,arguments)}function Xn(){return(Xn=(0,a.Z)(function*(w,p){const _=wn(w),A=yield vi(_,{token:p,returnSecureToken:!0}),K=yield Ri._fromIdTokenResponse(_,"signIn",A);return yield _._updateCurrentUser(K.user),K})).apply(this,arguments)}class Bi{constructor(p,_){this.factorId=p,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(p,_){return"phoneInfo"in _?H._fromServerResponse(p,_):dt(p,"internal-error")}}class H extends Bi{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,_){return new H(_)}}function B(w,p,_){var A;me((null===(A=_.url)||void 0===A?void 0:A.length)>0,w,"invalid-continue-uri"),me(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),p.continueUrl=_.url,p.dynamicLinkDomain=_.dynamicLinkDomain,p.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(me(_.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),p.iOSBundleId=_.iOS.bundleId),_.android&&(me(_.android.packageName.length>0,w,"missing-android-pkg-name"),p.androidInstallApp=_.android.installApp,p.androidMinimumVersionCode=_.android.minimumVersion,p.androidPackageName=_.android.packageName)}function re(){return(re=(0,a.Z)(function*(w,p,_){const A=(0,Z.m9)(w),K={requestType:"PASSWORD_RESET",email:p};_&&B(A,K,_),yield pt(A,K)})).apply(this,arguments)}function E(){return(E=(0,a.Z)(function*(w,p,_){yield Xr((0,Z.m9)(w),{oobCode:p,newPassword:_})})).apply(this,arguments)}function b(){return(b=(0,a.Z)(function*(w,p){yield Mi((0,Z.m9)(w),{oobCode:p})})).apply(this,arguments)}function v(w,p){return C.apply(this,arguments)}function C(){return(C=(0,a.Z)(function*(w,p){const _=(0,Z.m9)(w),A=yield Xr(_,{oobCode:p}),K=A.requestType;switch(me(K,_,"internal-error"),K){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":me(A.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":me(A.mfaInfo,_,"internal-error");default:me(A.email,_,"internal-error")}let ge=null;return A.mfaInfo&&(ge=Bi._fromServerResponse(wn(_),A.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.newEmail:A.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.email:A.newEmail)||null,multiFactorInfo:ge},operation:K}})).apply(this,arguments)}function pe(){return(pe=(0,a.Z)(function*(w,p){const{data:_}=yield v((0,Z.m9)(w),p);return _.email})).apply(this,arguments)}function vt(){return(vt=(0,a.Z)(function*(w,p,_){const A=wn(w),K=yield kr(A,{returnSecureToken:!0,email:p,password:_}),ge=yield Ri._fromIdTokenResponse(A,"signIn",K);return yield A._updateCurrentUser(ge.user),ge})).apply(this,arguments)}function Wt(){return(Wt=(0,a.Z)(function*(w,p,_){const A=(0,Z.m9)(w),K={requestType:"EMAIL_SIGNIN",email:p};me(_.handleCodeInApp,A,"argument-error"),_&&B(A,K,_),yield ke(A,K)})).apply(this,arguments)}function Dr(){return(Dr=(0,a.Z)(function*(w,p,_){const A=(0,Z.m9)(w),K=Ar.credentialWithLink(p,_||Mt());return me(K._tenantId===(A.tenantId||null),A,"tenant-id-mismatch"),gr(A,K)})).apply(this,arguments)}function Un(w,p){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,a.Z)(function*(w,p){return sn(w,"POST","/v1/accounts:createAuthUri",Ct(w,p))})).apply(this,arguments)}function Ai(){return(Ai=(0,a.Z)(function*(w,p){const A={identifier:p,continueUri:Jt()?Mt():"http://localhost"},{signinMethods:K}=yield Un((0,Z.m9)(w),A);return K||[]})).apply(this,arguments)}function Ws(){return(Ws=(0,a.Z)(function*(w,p){const _=(0,Z.m9)(w),K={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};p&&B(_.auth,K,p);const{email:ge}=yield _e(_.auth,K);ge!==w.email&&(yield w.reload())})).apply(this,arguments)}function rs(){return(rs=(0,a.Z)(function*(w,p,_){const A=(0,Z.m9)(w),ge={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:p};_&&B(A.auth,ge,_);const{email:lt}=yield jt(A.auth,ge);lt!==w.email&&(yield w.reload())})).apply(this,arguments)}function is(w,p){return co.apply(this,arguments)}function co(){return(co=(0,a.Z)(function*(w,p){return sn(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function jo(){return(jo=(0,a.Z)(function*(w,{displayName:p,photoURL:_}){if(void 0===p&&void 0===_)return;const A=(0,Z.m9)(w),ge={idToken:yield A.getIdToken(),displayName:p,photoUrl:_,returnSecureToken:!0},lt=yield Zn(A,is(A.auth,ge));A.displayName=lt.displayName||null,A.photoURL=lt.photoUrl||null;const Xt=A.providerData.find(({providerId:En})=>"password"===En);Xt&&(Xt.displayName=A.displayName,Xt.photoURL=A.photoURL),yield A._updateTokensIfNecessary(lt)})).apply(this,arguments)}function No(w,p,_){return ua.apply(this,arguments)}function ua(){return(ua=(0,a.Z)(function*(w,p,_){const{auth:A}=w,ge={idToken:yield w.getIdToken(),returnSecureToken:!0};p&&(ge.email=p),_&&(ge.password=_);const lt=yield Zn(w,Zi(A,ge));yield w._updateTokensIfNecessary(lt,!0)})).apply(this,arguments)}class Os{constructor(p,_,A={}){this.isNewUser=p,this.providerId=_,this.profile=A}}class Ya extends Os{constructor(p,_,A,K){super(p,_,A),this.username=K}}class Yo extends Os{constructor(p,_){super(p,"facebook.com",_)}}class Ra extends Ya{constructor(p,_){super(p,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class Pa extends Os{constructor(p,_){super(p,"google.com",_)}}class ks extends Ya{constructor(p,_,A){super(p,"twitter.com",_,A)}}function Co(w){const{user:p,_tokenResponse:_}=w;return p.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Ma(w){var p,_;if(!w)return null;const{providerId:A}=w,K=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},ge=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!A&&(null==w?void 0:w.idToken)){const lt=null===(_=null===(p=qt(w.idToken))||void 0===p?void 0:p.firebase)||void 0===_?void 0:_.sign_in_provider;if(lt)return new Os(ge,"anonymous"!==lt&&"custom"!==lt?lt:null)}if(!A)return null;switch(A){case"facebook.com":return new Yo(ge,K);case"github.com":return new Ra(ge,K);case"google.com":return new Pa(ge,K);case"twitter.com":return new ks(ge,K,w.screenName||null);case"custom":case"anonymous":return new Os(ge,null);default:return new Os(ge,A,K)}}(_)}class Ns{constructor(p,_){this.type=p,this.credential=_}static _fromIdtoken(p){return new Ns("enroll",p)}static _fromMfaPendingCredential(p){return new Ns("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var _,A;if(null==p?void 0:p.multiFactorSession){if(null===(_=p.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return Ns._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(A=p.multiFactorSession)||void 0===A?void 0:A.idToken)return Ns._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Ho{constructor(p,_,A){this.session=p,this.hints=_,this.signInResolver=A}static _fromError(p,_){const A=wn(p),K=_.customData._serverResponse,ge=(K.mfaInfo||[]).map(Xt=>Bi._fromServerResponse(A,Xt));me(K.mfaPendingCredential,A,"internal-error");const lt=Ns._fromMfaPendingCredential(K.mfaPendingCredential);return new Ho(lt,ge,function(){var Xt=(0,a.Z)(function*(En){const On=yield En._process(A,lt);delete K.mfaInfo,delete K.mfaPendingCredential;const xr=Object.assign(Object.assign({},K),{idToken:On.idToken,refreshToken:On.refreshToken});switch(_.operationType){case"signIn":const yr=yield Ri._fromIdTokenResponse(A,_.operationType,xr);return yield A._updateCurrentUser(yr.user),yr;case"reauthenticate":return me(_.user,A,"internal-error"),Ri._forOperation(_.user,_.operationType,xr);default:dt(A,"internal-error")}});return function(En){return Xt.apply(this,arguments)}}())}resolveSignIn(p){var _=this;return(0,a.Z)(function*(){return _.signInResolver(p)})()}}function Xa(w,p){return sn(w,"POST","/v2/accounts/mfaEnrollment:start",Ct(w,p))}class Zo{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(A=>Bi._fromServerResponse(p.auth,A)))})}static _fromUser(p){return new Zo(p)}getSession(){var p=this;return(0,a.Z)(function*(){return Ns._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,_){var A=this;return(0,a.Z)(function*(){const K=p,ge=yield A.getSession(),lt=yield Zn(A.user,K._process(A.user.auth,ge,_));return yield A.user._updateTokensIfNecessary(lt),A.user.reload()})()}unenroll(p){var _=this;return(0,a.Z)(function*(){const A="string"==typeof p?p:p.uid,K=yield _.user.getIdToken(),ge=yield Zn(_.user,function ca(w,p){return sn(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Ct(w,p))}(_.user.auth,{idToken:K,mfaEnrollmentId:A}));_.enrolledFactors=_.enrolledFactors.filter(({uid:lt})=>lt!==A),yield _.user._updateTokensIfNecessary(ge);try{yield _.user.reload()}catch(lt){if("auth/user-token-expired"!==lt.code)throw lt}})()}}const ka=new WeakMap,ws="__sak";class Na{constructor(p,_){this.storageRetriever=p,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(ws,"1"),this.storage.removeItem(ws),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,_){return this.storage.setItem(p,JSON.stringify(_)),Promise.resolve()}_get(p){const _=this.storage.getItem(p);return Promise.resolve(_?JSON.parse(_):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const qs=(()=>{class w extends Na{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,A)=>this.onStorageEvent(_,A),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Xo(){const w=(0,Z.z$)();return st(w)||Er(w)}()&&function Br(){try{return!(!window||window===window.top)}catch(w){return!1}}(),this.fallbackToPolling=Ei(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const A of Object.keys(this.listeners)){const K=this.storage.getItem(A),ge=this.localCache[A];K!==ge&&_(A,ge,K)}}onStorageEvent(_,A=!1){if(!_.key)return void this.forAllChangedKeys((Xt,En,On)=>{this.notifyListeners(Xt,On)});const K=_.key;if(A?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Xt=this.storage.getItem(K);if(_.newValue!==Xt)null!==_.newValue?this.storage.setItem(K,_.newValue):this.storage.removeItem(K);else if(this.localCache[K]===_.newValue&&!A)return}const ge=()=>{const Xt=this.storage.getItem(K);!A&&this.localCache[K]===Xt||this.notifyListeners(K,Xt)},lt=this.storage.getItem(K);!function Ki(){return(0,Z.w1)()&&10===document.documentMode}()||lt===_.newValue||_.newValue===_.oldValue?ge():setTimeout(ge,10)}notifyListeners(_,A){this.localCache[_]=A;const K=this.listeners[_];if(K)for(const ge of Array.from(K))ge(A&&JSON.parse(A))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,A,K)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:A,newValue:K}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,A){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(A)}_removeListener(_,A){this.listeners[_]&&(this.listeners[_].delete(A),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,A){var K=()=>super._set,ge=this;return(0,a.Z)(function*(){yield K().call(ge,_,A),ge.localCache[_]=JSON.stringify(A)})()}_get(_){var A=()=>super._get,K=this;return(0,a.Z)(function*(){const ge=yield A().call(K,_);return K.localCache[_]=JSON.stringify(ge),ge})()}_remove(_){var A=()=>super._remove,K=this;return(0,a.Z)(function*(){yield A().call(K,_),delete K.localCache[_]})()}}return w.type="LOCAL",w})(),xs=(()=>{class w extends Na{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,A){}_removeListener(_,A){}}return w.type="SESSION",w})();let jl=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const A=this.receivers.find(ge=>ge.isListeningto(_));if(A)return A;const K=new w(_);return this.receivers.push(K),K}isListeningto(_){return this.eventTarget===_}handleEvent(_){var A=this;return(0,a.Z)(function*(){const K=_,{eventId:ge,eventType:lt,data:Xt}=K.data,En=A.handlersMap[lt];if(!(null==En?void 0:En.size))return;K.ports[0].postMessage({status:"ack",eventId:ge,eventType:lt});const On=Array.from(En).map(function(){var yr=(0,a.Z)(function*(Ls){return Ls(K.origin,Xt)});return function(Ls){return yr.apply(this,arguments)}}()),xr=yield function Fa(w){return Promise.all(w.map(function(){var p=(0,a.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(A){return{fulfilled:!1,reason:A}}});return function(_){return p.apply(this,arguments)}}()))}(On);K.ports[0].postMessage({status:"done",eventId:ge,eventType:lt,response:xr})})()}_subscribe(_,A){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(A)}_unsubscribe(_,A){this.handlersMap[_]&&A&&this.handlersMap[_].delete(A),(!A||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function Ys(w="",p=10){let _="";for(let A=0;A<p;A++)_+=Math.floor(10*Math.random());return w+_}class Hl{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,_,A=50){var K=this;return(0,a.Z)(function*(){const ge="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!ge)throw new Error("connection_unavailable");let lt,Xt;return new Promise((En,On)=>{const xr=Ys("",20);ge.port1.start();const yr=setTimeout(()=>{On(new Error("unsupported_event"))},A);Xt={messageChannel:ge,onMessage(Ls){const qo=Ls;if(qo.data.eventId===xr)switch(qo.data.status){case"ack":clearTimeout(yr),lt=setTimeout(()=>{On(new Error("timeout"))},3e3);break;case"done":clearTimeout(lt),En(qo.data.response);break;default:clearTimeout(yr),clearTimeout(lt),On(new Error("invalid_response"))}}},K.handlers.add(Xt),ge.port1.addEventListener("message",Xt.onMessage),K.target.postMessage({eventType:p,eventId:xr,data:_},[ge.port2])}).finally(()=>{Xt&&K.removeMessageHandler(Xt)})})()}}function xi(){return window}function Fo(){return void 0!==xi().WorkerGlobalScope&&"function"==typeof xi().importScripts}function os(){return(os=(0,a.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(w){return null}})).apply(this,arguments)}const hl="firebaseLocalStorageDb",ln="firebaseLocalStorage",Pi="fbase_key";class io{constructor(p){this.request=p}toPromise(){return new Promise((p,_)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Cs(w,p){return w.transaction([ln],p?"readwrite":"readonly").objectStore(ln)}function ur(){const w=indexedDB.open(hl,1);return new Promise((p,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const A=w.result;try{A.createObjectStore(ln,{keyPath:Pi})}catch(K){_(K)}}),w.addEventListener("success",(0,a.Z)(function*(){const A=w.result;A.objectStoreNames.contains(ln)?p(A):(A.close(),yield function Kn(){const w=indexedDB.deleteDatabase(hl);return new io(w).toPromise()}(),p(yield ur()))}))})}function ha(w,p,_){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,a.Z)(function*(w,p,_){const A=Cs(w,!0).put({[Pi]:p,value:_});return new io(A).toPromise()})).apply(this,arguments)}function M(){return(M=(0,a.Z)(function*(w,p){const _=Cs(w,!1).get(p),A=yield new io(_).toPromise();return void 0===A?null:A.value})).apply(this,arguments)}function x(w,p){const _=Cs(w,!0).delete(p);return new io(_).toPromise()}const ue=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,a.Z)(function*(){return _.db||(_.db=yield ur()),_.db})()}_withRetries(_){var A=this;return(0,a.Z)(function*(){let K=0;for(;;)try{const ge=yield A._openDb();return yield _(ge)}catch(ge){if(K++>3)throw ge;A.db&&(A.db.close(),A.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,a.Z)(function*(){return Fo()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,a.Z)(function*(){_.receiver=jl._getInstance(function Go(){return Fo()?self:null}()),_.receiver._subscribe("keyChanged",function(){var A=(0,a.Z)(function*(K,ge){return{keyProcessed:(yield _._poll()).includes(ge.key)}});return function(K,ge){return A.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var A=(0,a.Z)(function*(K,ge){return["keyChanged"]});return function(K,ge){return A.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,a.Z)(function*(){var A,K;if(_.activeServiceWorker=yield function dl(){return os.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Hl(_.activeServiceWorker);const ge=yield _.sender._send("ping",{},800);!ge||(null===(A=ge[0])||void 0===A?void 0:A.fulfilled)&&(null===(K=ge[0])||void 0===K?void 0:K.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var A=this;return(0,a.Z)(function*(){if(A.sender&&A.activeServiceWorker&&function go(){var w;return(null===(w=null==navigator?void 0:navigator.serviceWorker)||void 0===w?void 0:w.controller)||null}()===A.activeServiceWorker)try{yield A.sender._send("keyChanged",{key:_},A.serviceWorkerReceiverAvailable?800:50)}catch(K){}})()}_isAvailable(){return(0,a.Z)(function*(){try{if(!indexedDB)return!1;const _=yield ur();return yield ha(_,ws,"1"),yield x(_,ws),!0}catch(_){}return!1})()}_withPendingWrite(_){var A=this;return(0,a.Z)(function*(){A.pendingWrites++;try{yield _()}finally{A.pendingWrites--}})()}_set(_,A){var K=this;return(0,a.Z)(function*(){return K._withPendingWrite((0,a.Z)(function*(){return yield K._withRetries(ge=>ha(ge,_,A)),K.localCache[_]=A,K.notifyServiceWorker(_)}))})()}_get(_){var A=this;return(0,a.Z)(function*(){const K=yield A._withRetries(ge=>function Vt(w,p){return M.apply(this,arguments)}(ge,_));return A.localCache[_]=K,K})()}_remove(_){var A=this;return(0,a.Z)(function*(){return A._withPendingWrite((0,a.Z)(function*(){return yield A._withRetries(K=>x(K,_)),delete A.localCache[_],A.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,a.Z)(function*(){const A=yield _._withRetries(lt=>{const Xt=Cs(lt,!1).getAll();return new io(Xt).toPromise()});if(!A)return[];if(0!==_.pendingWrites)return[];const K=[],ge=new Set;for(const{fbase_key:lt,value:Xt}of A)ge.add(lt),JSON.stringify(_.localCache[lt])!==JSON.stringify(Xt)&&(_.notifyListeners(lt,Xt),K.push(lt));for(const lt of Object.keys(_.localCache))_.localCache[lt]&&!ge.has(lt)&&(_.notifyListeners(lt,null),K.push(lt));return K})()}notifyListeners(_,A){this.localCache[_]=A;const K=this.listeners[_];if(K)for(const ge of Array.from(K))ge(A)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,a.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,A){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(A)}_removeListener(_,A){this.listeners[_]&&(this.listeners[_].delete(A),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function $e(w,p){return sn(w,"POST","/v2/accounts/mfaSignIn:start",Ct(w,p))}function $n(){return($n=(0,a.Z)(function*(w){return(yield sn(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Nn(w){return new Promise((p,_)=>{const A=document.createElement("script");A.setAttribute("src",w),A.onload=p,A.onerror=K=>{const ge=St("internal-error");ge.customData=K,_(ge)},A.type="text/javascript",A.charset="UTF-8",function Jr(){var w,p;return null!==(p=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==p?p:document}().appendChild(A)})}function li(w){return`__${w}${Math.floor(1e6*Math.random())}`}const Ks=1e12;class Jo{constructor(p){this.auth=p,this.counter=Ks,this._widgets=new Map}render(p,_){const A=this.counter;return this._widgets.set(A,new fs(p,this.auth.name,_||{})),this.counter++,A}reset(p){var _;const A=p||Ks;null===(_=this._widgets.get(A))||void 0===_||_.delete(),this._widgets.delete(A)}getResponse(p){var _;return(null===(_=this._widgets.get(p||Ks))||void 0===_?void 0:_.getResponse())||""}execute(p){var _=this;return(0,a.Z)(function*(){var A;return null===(A=_._widgets.get(p||Ks))||void 0===A||A.execute(),""})()}}class fs{constructor(p,_,A){this.params=A,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const K="string"==typeof p?document.getElementById(p):p;me(K,"argument-error",{appName:_}),this.container=K,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function lr(w){const p=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let A=0;A<w;A++)p.push(_.charAt(Math.floor(Math.random()*_.length)));return p.join("")}(50);const{callback:p,"expired-callback":_}=this.params;if(p)try{p(this.responseToken)}catch(A){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(A){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const zi=li("rcb"),Qa=new q(3e4,6e4);class Ou{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!xi().grecaptcha}load(p,_=""){return me(function mi(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(_),p,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(xi().grecaptcha):new Promise((A,K)=>{const ge=xi().setTimeout(()=>{K(St(p,"network-request-failed"))},Qa.get());xi()[zi]=()=>{xi().clearTimeout(ge),delete xi()[zi];const Xt=xi().grecaptcha;if(!Xt)return void K(St(p,"internal-error"));const En=Xt.render;Xt.render=(On,xr)=>{const yr=En(On,xr);return this.counter++,yr},this.hostLanguage=_,A(Xt)},Nn(`https://www.google.com/recaptcha/api.js??${(0,Z.xO)({onload:zi,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(ge),K(St(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){return!!xi().grecaptcha&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class uc{load(p){return(0,a.Z)(function*(){return new Jo(p)})()}clearedOneInstance(){}}const Ms="recaptcha",Gl={theme:"light",type:"image"};class zl{constructor(p,_=Object.assign({},Gl),A){this.parameters=_,this.type=Ms,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=wn(A),this.isInvisible="invisible"===this.parameters.size,me("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const K="string"==typeof p?document.getElementById(p):p;me(K,this.auth,"argument-error"),this.container=K,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new uc:new Ou,this.validateStartingState()}verify(){var p=this;return(0,a.Z)(function*(){p.assertNotDestroyed();const _=yield p.render(),A=p.getAssertedRecaptcha();return A.getResponse(_)||new Promise(ge=>{const lt=Xt=>{!Xt||(p.tokenChangeListeners.delete(lt),ge(Xt))};p.tokenChangeListeners.add(lt),p.isInvisible&&A.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){me(!this.parameters.sitekey,this.auth,"argument-error"),me(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),me("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return _=>{if(this.tokenChangeListeners.forEach(A=>A(_)),"function"==typeof p)p(_);else if("string"==typeof p){const A=xi()[p];"function"==typeof A&&A(_)}}}assertNotDestroyed(){me(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,a.Z)(function*(){if(yield p.init(),!p.widgetId){let _=p.container;if(!p.isInvisible){const A=document.createElement("div");_.appendChild(A),_=A}p.widgetId=p.getAssertedRecaptcha().render(_,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,a.Z)(function*(){me(Jt()&&!Fo(),p.auth,"internal-error"),yield function Vs(){let w=null;return new Promise(p=>{"complete"!==document.readyState?(w=()=>p(),window.addEventListener("load",w)):p()}).catch(p=>{throw w&&window.removeEventListener("load",w),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const _=yield function Qt(w){return $n.apply(this,arguments)}(p.auth);me(_,p.auth,"internal-error"),p.parameters.sitekey=_})()}getAssertedRecaptcha(){return me(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ps{constructor(p,_){this.verificationId=p,this.onConfirmation=_}confirm(p){const _=Ni._fromVerification(this.verificationId,p);return this.onConfirmation(_)}}function Hi(){return(Hi=(0,a.Z)(function*(w,p,_){const A=wn(w),K=yield Ia(A,p,(0,Z.m9)(_));return new ps(K,ge=>gr(A,ge))})).apply(this,arguments)}function Ja(){return(Ja=(0,a.Z)(function*(w,p,_){const A=(0,Z.m9)(w);yield $(!1,A,"phone");const K=yield Ia(A.auth,p,(0,Z.m9)(_));return new ps(K,ge=>dr(A,ge))})).apply(this,arguments)}function Rs(){return(Rs=(0,a.Z)(function*(w,p,_){const A=(0,Z.m9)(w),K=yield Ia(A.auth,p,(0,Z.m9)(_));return new ps(K,ge=>Fi(A,ge))})).apply(this,arguments)}function Ia(w,p,_){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,a.Z)(function*(w,p,_){var A;const K=yield _.verify();try{let ge;if(me("string"==typeof K,w,"argument-error"),me(_.type===Ms,w,"argument-error"),ge="string"==typeof p?{phoneNumber:p}:p,"session"in ge){const lt=ge.session;if("phoneNumber"in ge)return me("enroll"===lt.type,w,"internal-error"),(yield Xa(w,{idToken:lt.credential,phoneEnrollmentInfo:{phoneNumber:ge.phoneNumber,recaptchaToken:K}})).phoneSessionInfo.sessionInfo;{me("signin"===lt.type,w,"internal-error");const Xt=(null===(A=ge.multiFactorHint)||void 0===A?void 0:A.uid)||ge.multiFactorUid;return me(Xt,w,"missing-multi-factor-info"),(yield $e(w,{mfaPendingCredential:lt.credential,mfaEnrollmentId:Xt,phoneSignInInfo:{recaptchaToken:K}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:lt}=yield It(w,{phoneNumber:ge.phoneNumber,recaptchaToken:K});return lt}}finally{_._reset()}})).apply(this,arguments)}function na(){return(na=(0,a.Z)(function*(w,p){yield j((0,Z.m9)(w),p)})).apply(this,arguments)}let el=(()=>{class w{constructor(_){this.providerId=w.PROVIDER_ID,this.auth=wn(_)}verifyPhoneNumber(_,A){return Ia(this.auth,_,(0,Z.m9)(A))}static credential(_,A){return Ni._fromVerification(_,A)}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:A,temporaryProof:K}=_;return A&&K?Ni._fromTokenResponse(A,K):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function xn(w,p){return p?ye(p):(me(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class La extends bi{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return si(p,this._buildIdpRequest())}_linkToIdToken(p,_){return si(p,this._buildIdpRequest(_))}_getReauthenticationResolver(p){return si(p,this._buildIdpRequest())}_buildIdpRequest(p){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(_.idToken=p),_}}function ku(w){return zt(w.auth,new La(w),w.bypassAuthState)}function Ba(w){const{auth:p,user:_}=w;return me(_,p,"internal-error"),et(_,new La(w),w.bypassAuthState)}function Wi(w){return fa.apply(this,arguments)}function fa(){return(fa=(0,a.Z)(function*(w){const{auth:p,user:_}=w;return me(_,p,"internal-error"),j(_,new La(w),w.bypassAuthState)})).apply(this,arguments)}class So{constructor(p,_,A,K,ge=!1){this.auth=p,this.resolver=A,this.user=K,this.bypassAuthState=ge,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var p=this;return new Promise(function(){var _=(0,a.Z)(function*(A,K){p.pendingPromise={resolve:A,reject:K};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(ge){p.reject(ge)}});return function(A,K){return _.apply(this,arguments)}}())}onAuthEvent(p){var _=this;return(0,a.Z)(function*(){const{urlResponse:A,sessionId:K,postBody:ge,tenantId:lt,error:Xt,type:En}=p;if(Xt)return void _.reject(Xt);const On={auth:_.auth,requestUri:A,sessionId:K,tenantId:lt||void 0,postBody:ge||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(En)(On))}catch(xr){_.reject(xr)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return ku;case"linkViaPopup":case"linkViaRedirect":return Wi;case"reauthViaPopup":case"reauthViaRedirect":return Ba;default:dt(this.auth,"internal-error")}}resolve(p){Se(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Se(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const cc=new q(2e3,1e4);function pl(){return(pl=(0,a.Z)(function*(w,p,_){const A=wn(w);Xe(w,p,hi);const K=xn(A,_);return new gl(A,"signInViaPopup",p,K).executeNotNull()})).apply(this,arguments)}function Wl(){return(Wl=(0,a.Z)(function*(w,p,_){const A=(0,Z.m9)(w);Xe(A.auth,p,hi);const K=xn(A.auth,_);return new gl(A.auth,"reauthViaPopup",p,K,A).executeNotNull()})).apply(this,arguments)}function Va(){return(Va=(0,a.Z)(function*(w,p,_){const A=(0,Z.m9)(w);Xe(A.auth,p,hi);const K=xn(A.auth,_);return new gl(A.auth,"linkViaPopup",p,K,A).executeNotNull()})).apply(this,arguments)}let gl=(()=>{class w extends So{constructor(_,A,K,ge,lt){super(_,A,ge,lt),this.provider=K,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var _=this;return(0,a.Z)(function*(){const A=yield _.execute();return me(A,_.auth,"internal-error"),A})()}onExecution(){var _=this;return(0,a.Z)(function*(){Se(1===_.filter.length,"Popup operations only handle one event");const A=Ys();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],A),_.authWindow.associatedEvent=A,_.resolver._originValidation(_.auth).catch(K=>{_.reject(K)}),_.resolver._isIframeWebStorageSupported(_.auth,K=>{K||_.reject(St(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(St(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const _=()=>{var A,K;this.pollId=(null===(K=null===(A=this.authWindow)||void 0===A?void 0:A.window)||void 0===K?void 0:K.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(St(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,cc.get())};_()}}return w.currentPopupAction=null,w})();const ra=new Map;class V extends So{constructor(p,_,A=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,A),this.eventId=null}execute(){var p=()=>super.execute,_=this;return(0,a.Z)(function*(){let A=ra.get(_.auth._key());if(!A){try{const ge=(yield function z(w,p){return he.apply(this,arguments)}(_.resolver,_.auth))?yield p().call(_):null;A=()=>Promise.resolve(ge)}catch(K){A=()=>Promise.reject(K)}ra.set(_.auth._key(),A)}return _.bypassAuthState||ra.set(_.auth._key(),()=>Promise.resolve(null)),A()})()}onAuthEvent(p){var _=()=>super.onAuthEvent,A=this;return(0,a.Z)(function*(){if("signInViaRedirect"===p.type)return _().call(A,p);if("unknown"!==p.type){if(p.eventId){const K=yield A.auth._redirectUserForId(p.eventId);if(K)return A.user=K,_().call(A,p);A.resolve(null)}}else A.resolve(null)})()}onExecution(){return(0,a.Z)(function*(){})()}cleanUp(){}}function he(){return(he=(0,a.Z)(function*(w,p){const _=Fr(p),A=Cn(w);if(!(yield A._isAvailable()))return!1;const K="true"===(yield A._get(_));return yield A._remove(_),K})).apply(this,arguments)}function ze(w,p){return At.apply(this,arguments)}function At(){return(At=(0,a.Z)(function*(w,p){return Cn(w)._set(Fr(p),"true")})).apply(this,arguments)}function hn(w,p){ra.set(w._key(),p)}function Cn(w){return ye(w._redirectPersistence)}function Fr(w){return Sr("pendingRedirect",w.config.apiKey,w.name)}function Lr(){return(Lr=(0,a.Z)(function*(w,p,_){const A=wn(w);Xe(w,p,hi);const K=xn(A,_);return yield ze(K,A),K._openRedirect(A,p,"signInViaRedirect")})).apply(this,arguments)}function yl(){return(yl=(0,a.Z)(function*(w,p,_){const A=(0,Z.m9)(w);Xe(A.auth,p,hi);const K=xn(A.auth,_);yield ze(K,A.auth);const ge=yield vl(A);return K._openRedirect(A.auth,p,"reauthViaRedirect",ge)})).apply(this,arguments)}function Vi(){return(Vi=(0,a.Z)(function*(w,p,_){const A=(0,Z.m9)(w);Xe(A.auth,p,hi);const K=xn(A.auth,_);yield $(!1,A,p.providerId),yield ze(K,A.auth);const ge=yield vl(A);return K._openRedirect(A.auth,p,"linkViaRedirect",ge)})).apply(this,arguments)}function ls(){return(ls=(0,a.Z)(function*(w,p){return yield wn(w)._initializationPromise,Li(w,p,!1)})).apply(this,arguments)}function Li(w,p){return _l.apply(this,arguments)}function _l(){return(_l=(0,a.Z)(function*(w,p,_=!1){const A=wn(w),K=xn(A,p),lt=yield new V(A,K,_).execute();return lt&&!_&&(delete lt.user._redirectEventId,yield A._persistUserIfCurrent(lt.user),yield A._setRedirectUser(null,p)),lt})).apply(this,arguments)}function vl(w){return tl.apply(this,arguments)}function tl(){return(tl=(0,a.Z)(function*(w){const p=Ys(`${w.uid}:::`);return w._redirectEventId=p,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),p})).apply(this,arguments)}class nl{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let _=!1;return this.consumers.forEach(A=>{this.isEventForConsumer(p,A)&&(_=!0,this.sendToConsumer(p,A),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Fu(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pa(w);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=p,_=!0)),_}sendToConsumer(p,_){var A;if(p.error&&!pa(p)){const K=(null===(A=p.error.code)||void 0===A?void 0:A.split("auth/")[1])||"internal-error";_.onError(St(this.auth,K))}else _.onAuthEvent(p)}isEventForConsumer(p,_){const A=null===_.eventId||!!p.eventId&&p.eventId===_.eventId;return _.filter.includes(p.type)&&A}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Nu(p))}saveEventToCache(p){this.cachedEventUids.add(Nu(p)),this.lastProcessedEventTime=Date.now()}}function Nu(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(p=>p).join("-")}function pa({type:w,error:p}){return"unknown"===w&&"auth/no-auth-event"===(null==p?void 0:p.code)}function Ua(w){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,a.Z)(function*(w,p={}){return sn(w,"GET","/v1/projects",p)})).apply(this,arguments)}const El=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Fs=/^https?/;function Bu(){return(Bu=(0,a.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:p}=yield Ua(w);for(const _ of p)try{if(hc(_))return}catch(A){}dt(w,"unauthorized-domain")})).apply(this,arguments)}function hc(w){const p=Mt(),{protocol:_,hostname:A}=new URL(p);if(w.startsWith("chrome-extension://")){const lt=new URL(w);return""===lt.hostname&&""===A?"chrome-extension:"===_&&w.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===_&&lt.hostname===A}if(!Fs.test(_))return!1;if(El.test(w))return A===w;const K=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+K+"|"+K+")$","i").test(A)}const fc=new q(3e4,6e4);function Xc(){const w=xi().___jsl;if(null==w?void 0:w.H)for(const p of Object.keys(w.H))if(w.H[p].r=w.H[p].r||[],w.H[p].L=w.H[p].L||[],w.H[p].r=[...w.H[p].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let bl=null;function wh(w){return bl=bl||function bh(w){return new Promise((p,_)=>{var A,K,ge;function lt(){Xc(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Xc(),_(St(w,"network-request-failed"))},timeout:fc.get()})}if(null===(K=null===(A=xi().gapi)||void 0===A?void 0:A.iframes)||void 0===K?void 0:K.Iframe)p(gapi.iframes.getContext());else{if(!(null===(ge=xi().gapi)||void 0===ge?void 0:ge.load)){const Xt=li("iframefcb");return xi()[Xt]=()=>{gapi.load?lt():_(St(w,"network-request-failed"))},Nn(`https://apis.google.com/js/api.js?onload=${Xt}`).catch(En=>_(En))}lt()}}).catch(p=>{throw bl=null,p})}(w),bl}const Ca=new q(5e3,15e3),pc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Od=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rl(w){const p=w.config;me(p.authDomain,w,"auth-domain-config-required");const _=p.emulator?bt(p,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,A={apiKey:p.apiKey,appName:w.name,v:We.SDK_VERSION},K=Od.get(w.config.apiHost);K&&(A.eid=K);const ge=w._getFrameworks();return ge.length&&(A.fw=ge.join(",")),`${_}?${(0,Z.xO)(A).slice(1)}`}function $a(){return $a=(0,a.Z)(function*(w){const p=yield wh(w),_=xi().gapi;return me(_,w,"internal-error"),p.open({where:document.body,url:rl(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pc,dontclear:!0},A=>new Promise(function(){var K=(0,a.Z)(function*(ge,lt){yield A.restyle({setHideOnLeave:!1});const Xt=St(w,"network-request-failed"),En=xi().setTimeout(()=>{lt(Xt)},Ca.get());function On(){xi().clearTimeout(En),ge(A)}A.ping(On).then(On,()=>{lt(Xt)})});return function(ge,lt){return K.apply(this,arguments)}}()))}),$a.apply(this,arguments)}const Qc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Qs{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function Ta(w,p,_,A,K,ge){me(w.config.authDomain,w,"auth-domain-config-required"),me(w.config.apiKey,w,"invalid-api-key");const lt={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:A,v:We.SDK_VERSION,eventId:K};if(p instanceof hi){p.setDefaultLanguage(w.languageCode),lt.providerId=p.providerId||"",(0,Z.xb)(p.getCustomParameters())||(lt.customParameters=JSON.stringify(p.getCustomParameters()));for(const[En,On]of Object.entries(ge||{}))lt[En]=On}if(p instanceof Or){const En=p.getScopes().filter(On=>""!==On);En.length>0&&(lt.scopes=En.join(","))}w.tenantId&&(lt.tid=w.tenantId);const Xt=lt;for(const En of Object.keys(Xt))void 0===Xt[En]&&delete Xt[En];return`${function Jc({config:w}){return w.emulator?bt(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,Z.xO)(Xt).slice(1)}`}const Cl="webStorageSupport";class mc extends class Nd{constructor(p){this.factorId=p}_process(p,_,A){switch(_.type){case"enroll":return this._finalizeEnroll(p,_.credential,A);case"signin":return this._finalizeSignIn(p,_.credential);default:return Oe("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new mc(p)}_finalizeEnroll(p,_,A){return function Ko(w,p){return sn(w,"POST","/v2/accounts/mfaEnrollment:finalize",Ct(w,p))}(p,{idToken:_,displayName:A,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,_){return function it(w,p){return sn(w,"POST","/v2/accounts/mfaSignIn:finalize",Ct(w,p))}(p,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Yl=(()=>{class w{constructor(){}static assertion(_){return mc._fromCredential(_)}}return w.FACTOR_ID="phone",w})();var Uu="@firebase/auth";class Fd{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var _=this;return(0,a.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const _=this.auth.onIdTokenChanged(A=>{var K;p((null===(K=A)||void 0===K?void 0:K.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,_),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const _=this.internalListeners.get(p);!_||(this.internalListeners.delete(p),_(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function mo(){return window}function ga(){return(ga=(0,a.Z)(function*(w,p,_){var A;const{BuildInfo:K}=mo();Se(p.sessionId,"AuthEvent did not contain a session ID");const ge=yield Tl(p.sessionId),lt={};return Er()?lt.ibi=K.packageName:Kt()?lt.apn=K.packageName:dt(w,"operation-not-supported-in-this-environment"),K.displayName&&(lt.appDisplayName=K.displayName),lt.sessionId=ge,Ta(w,_,p.type,void 0,null!==(A=p.eventId)&&void 0!==A?A:void 0,lt)})).apply(this,arguments)}function Dl(){return(Dl=(0,a.Z)(function*(w){const{BuildInfo:p}=mo(),_={};Er()?_.iosBundleId=p.packageName:Kt()?_.androidPackageName=p.packageName:dt(w,"operation-not-supported-in-this-environment"),yield Ua(w,_)})).apply(this,arguments)}function $s(){return($s=(0,a.Z)(function*(w,p,_){const{cordova:A}=mo();let K=()=>{};try{yield new Promise((ge,lt)=>{let Xt=null;function En(){var yr;ge();const Ls=null===(yr=A.plugins.browsertab)||void 0===yr?void 0:yr.close;"function"==typeof Ls&&Ls(),"function"==typeof(null==_?void 0:_.close)&&_.close()}function On(){Xt||(Xt=window.setTimeout(()=>{lt(St(w,"redirect-cancelled-by-user"))},2e3))}function xr(){"visible"===(null==document?void 0:document.visibilityState)&&On()}p.addPassiveListener(En),document.addEventListener("resume",On,!1),Kt()&&document.addEventListener("visibilitychange",xr,!1),K=()=>{p.removePassiveListener(En),document.removeEventListener("resume",On,!1),document.removeEventListener("visibilitychange",xr,!1),Xt&&window.clearTimeout(Xt)}})}finally{K()}})).apply(this,arguments)}function Tl(w){return xo.apply(this,arguments)}function xo(){return(xo=(0,a.Z)(function*(w){const p=hu(w),_=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(_)).map(K=>K.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function hu(w){if(Se(/[0-9a-zA-Z]+/.test(w),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(w);const p=new ArrayBuffer(w.length),_=new Uint8Array(p);for(let A=0;A<w.length;A++)_[A]=w.charCodeAt(A);return _}!function Bo(w){(0,We._registerComponent)(new Ae.wA("auth",(p,{options:_})=>{const A=p.getProvider("app").getImmediate(),K=p.getProvider("heartbeat"),{apiKey:ge,authDomain:lt}=A.options;return((Xt,En)=>{me(ge&&!ge.includes(":"),"invalid-api-key",{appName:Xt.name}),me(!(null==lt?void 0:lt.includes(":")),"argument-error",{appName:Xt.name});const On={apiKey:ge,authDomain:lt,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Yr(w)},xr=new nn(Xt,En,On);return function Ze(w,p){const _=(null==p?void 0:p.persistence)||[],A=(Array.isArray(_)?_:[_]).map(ye);(null==p?void 0:p.errorMap)&&w._updateErrorMap(p.errorMap),w._initializeWithPersistence(A,null==p?void 0:p.popupRedirectResolver)}(xr,_),xr})(A,K)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,_,A)=>{p.getProvider("auth-internal").initialize()})),(0,We._registerComponent)(new Ae.wA("auth-internal",p=>{const _=wn(p.getProvider("auth").getImmediate());return new Fd(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,We.registerVersion)(Uu,"0.20.2",function ja(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,We.registerVersion)(Uu,"0.20.2","esm2017")}("Browser");class Ld extends nl{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(p)),super.onEvent(p)}initialized(){var p=this;return(0,a.Z)(function*(){yield p.initPromise})()}}function Sl(w){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,a.Z)(function*(w){const p=yield Sa()._get(pu(w));return p&&(yield Sa()._remove(pu(w))),p})).apply(this,arguments)}function _c(){const w=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<20;_++){const A=Math.floor(Math.random()*p.length);w.push(p.charAt(A))}return w.join("")}function Sa(){return ye(qs)}function pu(w){return Sr("authEvent",w.config.apiKey,w.name)}function Cr(w){if(!(null==w?void 0:w.includes("?")))return{};const[p,..._]=w.split("?");return(0,Z.zd)(_.join("?"))}function id(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:St("no-auth-event")}}function Zl(){var w;return(null===(w=null==self?void 0:self.location)||void 0===w?void 0:w.protocol)||null}function Gi(w=(0,Z.z$)()){return!("file:"!==Zl()&&"ionic:"!==Zl()&&"capacitor:"!==Zl()||!w.toLowerCase().match(/iphone|ipad|ipod|android/))}function sl(){try{const w=self.localStorage,p=Ys();if(w)return w.setItem(p,"1"),w.removeItem(p),!function Al(w=(0,Z.z$)()){return function gs(){return(0,Z.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Xl(w=(0,Z.z$)()){return/Edge\/\d+/.test(w)}(w)}()||(0,Z.hl)()}catch(w){return Js()&&(0,Z.hl)()}return!1}function Js(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function oa(){return(function Dh(){return"http:"===Zl()||"https:"===Zl()}()||(0,Z.ru)()||Gi())&&!function Ga(){return(0,Z.b$)()||(0,Z.UG)()}()&&sl()&&!Js()}function Wu(){return Gi()&&"undefined"!=typeof document}function qu(){return(qu=(0,a.Z)(function*(){return!!Wu()&&new Promise(w=>{const p=setTimeout(()=>{w(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),w(!0)})})})).apply(this,arguments)}const Mo={LOCAL:"local",NONE:"none",SESSION:"session"},xl=me,bc="persistence";function wc(w){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,a.Z)(function*(w){yield w._initializationPromise;const p=Ku(),_=Sr(bc,w.config.apiKey,w.name);p&&p.setItem(_,w._getPersistence())})).apply(this,arguments)}function Ku(){var w;try{return(null===(w=function Ec(){return"undefined"!=typeof window?window:null}())||void 0===w?void 0:w.sessionStorage)||null}catch(p){return null}}const od=me;class Vo{constructor(){this.browserResolver=ye(class ed{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xs,this._completeRedirectFn=Li,this._overrideRedirectResult=hn}_openPopup(p,_,A,K){var ge=this;return(0,a.Z)(function*(){var lt;Se(null===(lt=ge.eventManagers[p._key()])||void 0===lt?void 0:lt.manager,"_initialize() not called before _openPopup()");const Xt=Ta(p,_,A,Mt(),K);return function gc(w,p,_,A=500,K=600){const ge=Math.max((window.screen.availHeight-K)/2,0).toString(),lt=Math.max((window.screen.availWidth-A)/2,0).toString();let Xt="";const En=Object.assign(Object.assign({},Qc),{width:A.toString(),height:K.toString(),top:ge,left:lt}),On=(0,Z.z$)().toLowerCase();_&&(Xt=Re(On)?"_blank":_),Dt(On)&&(p=p||"http://localhost",En.scrollbars="yes");const xr=Object.entries(En).reduce((Ls,[qo,Zu])=>`${Ls}${qo}=${Zu},`,"");if(function di(w=(0,Z.z$)()){var p;return Er(w)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(On)&&"_self"!==Xt)return function cu(w,p){const _=document.createElement("a");_.href=w,_.target=p;const A=document.createEvent("MouseEvent");A.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(A)}(p||"",Xt),new Qs(null);const yr=window.open(p||"",Xt,xr);me(yr,w,"popup-blocked");try{yr.focus()}catch(Ls){}return new Qs(yr)}(p,Xt,Ys())})()}_openRedirect(p,_,A,K){var ge=this;return(0,a.Z)(function*(){return yield ge._originValidation(p),function To(w){xi().location.href=w}(Ta(p,_,A,Mt(),K)),new Promise(()=>{})})()}_initialize(p){const _=p._key();if(this.eventManagers[_]){const{manager:K,promise:ge}=this.eventManagers[_];return K?Promise.resolve(K):(Se(ge,"If manager is not set, promise should be"),ge)}const A=this.initAndGetManager(p);return this.eventManagers[_]={promise:A},A.catch(()=>{delete this.eventManagers[_]}),A}initAndGetManager(p){var _=this;return(0,a.Z)(function*(){const A=yield function Vu(w){return $a.apply(this,arguments)}(p),K=new nl(p);return A.register("authEvent",ge=>(me(null==ge?void 0:ge.authEvent,p,"invalid-auth-event"),{status:K.onEvent(ge.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[p._key()]={manager:K},_.iframes[p._key()]=A,K})()}_isIframeWebStorageSupported(p,_){this.iframes[p._key()].send(Cl,{type:Cl},K=>{var ge;const lt=null===(ge=null==K?void 0:K[0])||void 0===ge?void 0:ge[Cl];void 0!==lt&&_(!!lt),dt(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function dc(w){return Bu.apply(this,arguments)}(p)),this.originValidationPromises[_]}get _shouldInitProactively(){return Ei()||st()||Er()}}),this.cordovaResolver=ye(class Bd{constructor(){this._redirectPersistence=xs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Li,this._overrideRedirectResult=hn}_initialize(p){var _=this;return(0,a.Z)(function*(){const A=p._key();let K=_.eventManagers.get(A);return K||(K=new Ld(p),_.eventManagers.set(A,K),_.attachCallbackListeners(p,K)),K})()}_openPopup(p){dt(p,"operation-not-supported-in-this-environment")}_openRedirect(p,_,A,K){var ge=this;return(0,a.Z)(function*(){!function du(w){var p,_,A,K,ge,lt,Xt,En,On,xr;const yr=mo();me("function"==typeof(null===(p=null==yr?void 0:yr.universalLinks)||void 0===p?void 0:p.subscribe),w,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),me(void 0!==(null===(_=null==yr?void 0:yr.BuildInfo)||void 0===_?void 0:_.packageName),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),me("function"==typeof(null===(ge=null===(K=null===(A=null==yr?void 0:yr.cordova)||void 0===A?void 0:A.plugins)||void 0===K?void 0:K.browsertab)||void 0===ge?void 0:ge.openUrl),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),me("function"==typeof(null===(En=null===(Xt=null===(lt=null==yr?void 0:yr.cordova)||void 0===lt?void 0:lt.plugins)||void 0===Xt?void 0:Xt.browsertab)||void 0===En?void 0:En.isAvailable),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),me("function"==typeof(null===(xr=null===(On=null==yr?void 0:yr.cordova)||void 0===On?void 0:On.InAppBrowser)||void 0===xr?void 0:xr.open),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const lt=yield ge._initialize(p);yield lt.initialized(),lt.resetRedirect(),function Rt(){ra.clear()}(),yield ge._originValidation(p);const Xt=function rd(w,p,_=null){return{type:p,eventId:_,urlResponse:null,sessionId:_c(),postBody:null,tenantId:w.tenantId,error:St(w,"no-auth-event")}}(p,A,K);yield function ju(w,p){return Sa()._set(pu(w),p)}(p,Xt);const En=yield function yo(w,p,_){return ga.apply(this,arguments)}(p,Xt,_),On=yield function ia(w){const{cordova:p}=mo();return new Promise(_=>{p.plugins.browsertab.isAvailable(A=>{let K=null;A?p.plugins.browsertab.openUrl(w):K=p.InAppBrowser.open(w,function Wn(w=(0,Z.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}()?"_blank":"_system","location=yes"),_(K)})})}(En);return function Ih(w,p,_){return $s.apply(this,arguments)}(p,lt,On)})()}_isIframeWebStorageSupported(p,_){throw new Error("Method not implemented.")}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Kl(w){return Dl.apply(this,arguments)}(p)),this.originValidationPromises[_]}attachCallbackListeners(p,_){const{universalLinks:A,handleOpenURL:K,BuildInfo:ge}=mo(),lt=setTimeout((0,a.Z)(function*(){yield Sl(p),_.onEvent(id())}),500),Xt=function(){var xr=(0,a.Z)(function*(yr){clearTimeout(lt);const Ls=yield Sl(p);let qo=null;Ls&&(null==yr?void 0:yr.url)&&(qo=function fu(w,p){var _,A;const K=function Ps(w){const p=Cr(w),_=p.link?decodeURIComponent(p.link):void 0,A=Cr(_).link,K=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return Cr(K).link||K||A||_||w}(p);if(K.includes("/__/auth/callback")){const ge=Cr(K),lt=ge.firebaseError?function Gu(w){try{return JSON.parse(w)}catch(p){return null}}(decodeURIComponent(ge.firebaseError)):null,Xt=null===(A=null===(_=null==lt?void 0:lt.code)||void 0===_?void 0:_.split("auth/"))||void 0===A?void 0:A[1],En=Xt?St(Xt):null;return En?{type:w.type,eventId:w.eventId,tenantId:w.tenantId,error:En,urlResponse:null,sessionId:null,postBody:null}:{type:w.type,eventId:w.eventId,tenantId:w.tenantId,sessionId:w.sessionId,urlResponse:K,postBody:null}}return null}(Ls,yr.url)),_.onEvent(qo||id())});return function(Ls){return xr.apply(this,arguments)}}();void 0!==A&&"function"==typeof A.subscribe&&A.subscribe(null,Xt);const En=K,On=`${ge.packageName.toLowerCase()}://`;mo().handleOpenURL=function(){var xr=(0,a.Z)(function*(yr){if(yr.toLowerCase().startsWith(On)&&Xt({url:yr}),"function"==typeof En)try{En(yr)}catch(Ls){console.error(Ls)}});return function(yr){return xr.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=xs,this._completeRedirectFn=Li,this._overrideRedirectResult=hn}_initialize(p){var _=this;return(0,a.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,_,A,K){var ge=this;return(0,a.Z)(function*(){return yield ge.selectUnderlyingResolver(),ge.assertedUnderlyingResolver._openPopup(p,_,A,K)})()}_openRedirect(p,_,A,K){var ge=this;return(0,a.Z)(function*(){return yield ge.selectUnderlyingResolver(),ge.assertedUnderlyingResolver._openRedirect(p,_,A,K)})()}_isIframeWebStorageSupported(p,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,_)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return Wu()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return od(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,a.Z)(function*(){if(p.underlyingResolver)return;const _=yield function Vd(){return qu.apply(this,arguments)}();p.underlyingResolver=_?p.cordovaResolver:p.browserResolver})()}}function ma(w){return w.unwrap()}function Ml(w){return mu(w)}function mu(w){const{_tokenResponse:p}=w instanceof Z.ZR?w.customData:w;if(!p)return null;if(!(w instanceof Z.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return el.credentialFromResult(w);const _=p.providerId;if(!_||"password"===_)return null;let A;switch(_){case"google.com":A=Ss;break;case"facebook.com":A=_s;break;case"github.com":A=ro;break;case"twitter.com":A=Qi;break;default:const{oauthIdToken:K,oauthAccessToken:ge,oauthTokenSecret:lt,pendingToken:Xt,nonce:En}=p;return ge||lt||K||Xt?Xt?_.startsWith("saml.")?pr._create(_,Xt):nt._fromParams({providerId:_,signInMethod:_,pendingToken:Xt,idToken:K,accessToken:ge}):new Xi(_).credential({idToken:K,accessToken:ge,rawNonce:En}):null}return w instanceof Z.ZR?A.credentialFromError(w):A.credentialFromResult(w)}function us(w,p){return p.catch(_=>{throw _ instanceof Z.ZR&&function ya(w,p){var _;const A=null===(_=p.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===p.code)p.resolver=new ad(w,function hs(w,p){var _;const A=(0,Z.m9)(w),K=p;return me(p.customData.operationType,A,"argument-error"),me(null===(_=K.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,A,"argument-error"),Ho._fromError(A,K)}(w,p));else if(A){const K=mu(p),ge=p;K&&(ge.credential=K,ge.tenantId=A.tenantId||void 0,ge.email=A.email||void 0,ge.phoneNumber=A.phoneNumber||void 0)}}(w,_),_}).then(_=>{const K=_.user;return{operationType:_.operationType,credential:Ml(_),additionalUserInfo:Co(_),user:eo.getOrCreate(K)}})}function za(w,p){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,a.Z)(function*(w,p){const _=yield p;return{verificationId:_.verificationId,confirm:A=>us(w,_.confirm(A))}})).apply(this,arguments)}class ad{constructor(p,_){this.resolver=_,this.auth=function Ro(w){return w.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return us(ma(this.auth),this.resolver.resolveSignIn(p))}}class eo{constructor(p){this._delegate=p,this.multiFactor=function As(w){const p=(0,Z.m9)(w);return ka.has(p)||ka.set(p,Zo._fromUser(p)),ka.get(p)}(p)}static getOrCreate(p){return eo.USER_MAP.has(p)||eo.USER_MAP.set(p,new eo(p)),eo.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var _=this;return(0,a.Z)(function*(){return us(_.auth,dr(_._delegate,p))})()}linkWithPhoneNumber(p,_){var A=this;return(0,a.Z)(function*(){return za(A.auth,function fl(w,p,_){return Ja.apply(this,arguments)}(A._delegate,p,_))})()}linkWithPopup(p){var _=this;return(0,a.Z)(function*(){return us(_.auth,function ql(w,p,_){return Va.apply(this,arguments)}(_._delegate,p,Vo))})()}linkWithRedirect(p){var _=this;return(0,a.Z)(function*(){return yield wc(wn(_.auth)),function oo(w,p,_){return function zo(w,p,_){return Vi.apply(this,arguments)}(w,p,_)}(_._delegate,p,Vo)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var _=this;return(0,a.Z)(function*(){return us(_.auth,Fi(_._delegate,p))})()}reauthenticateWithPhoneNumber(p,_){return za(this.auth,function so(w,p,_){return Rs.apply(this,arguments)}(this._delegate,p,_))}reauthenticateWithPopup(p){return us(this.auth,function Ao(w,p,_){return Wl.apply(this,arguments)}(this._delegate,p,Vo))}reauthenticateWithRedirect(p){var _=this;return(0,a.Z)(function*(){return yield wc(wn(_.auth)),function Ti(w,p,_){return function Us(w,p,_){return yl.apply(this,arguments)}(w,p,_)}(_._delegate,p,Vo)})()}sendEmailVerification(p){return function fi(w,p){return Ws.apply(this,arguments)}(this._delegate,p)}unlink(p){var _=this;return(0,a.Z)(function*(){return yield function $o(w,p){return jr.apply(this,arguments)}(_._delegate,p),_})()}updateEmail(p){return function fo(w,p){return No((0,Z.m9)(w),p,null)}(this._delegate,p)}updatePassword(p){return function po(w,p){return No((0,Z.m9)(w),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function ta(w,p){return na.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function ho(w,p){return jo.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,_){return function pi(w,p,_){return rs.apply(this,arguments)}(this._delegate,p,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}eo.USER_MAP=new WeakMap;const yu=me;let Ud=(()=>{class w{constructor(_,A){if(this.app=_,A.isInitialized())return this._delegate=A.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:K}=_.options;yu(K,"invalid-api-key",{appName:_.name}),yu(K,"invalid-api-key",{appName:_.name});const ge="undefined"!=typeof window?Vo:void 0;this._delegate=A.initialize({options:{persistence:Cc(K,_.name),popupRedirectResolver:ge}}),this._delegate._updateErrorMap(Ve),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?eo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,A){!function ii(w,p,_){const A=wn(w);me(A._canInitEmulator,A,"emulator-config-failed"),me(/^https?:\/\//.test(p),A,"invalid-emulator-scheme");const K=!!(null==_?void 0:_.disableWarnings),ge=ni(p),{host:lt,port:Xt}=function Vr(w){const p=ni(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(p.length));if(!_)return{host:"",port:null};const A=_[2].split("@").pop()||"",K=/^(\[[^\]]+\])(:|$)/.exec(A);if(K){const ge=K[1];return{host:ge,port:yi(A.substr(ge.length+1))}}{const[ge,lt]=A.split(":");return{host:ge,port:yi(lt)}}}(p);A.config.emulator={url:`${ge}//${lt}${null===Xt?"":`:${Xt}`}/`},A.settings.appVerificationDisabledForTesting=!0,A.emulatorConfig=Object.freeze({host:lt,port:Xt,protocol:ge.replace(":",""),options:Object.freeze({disableWarnings:K})}),K||function Wr(){function w(){const p=document.createElement("p"),_=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}(this._delegate,_,A)}applyActionCode(_){return function k(w,p){return b.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return v(this._delegate,_)}confirmPasswordReset(_,A){return function Ut(w,p,_){return E.apply(this,arguments)}(this._delegate,_,A)}createUserWithEmailAndPassword(_,A){var K=this;return(0,a.Z)(function*(){return us(K._delegate,function Le(w,p,_){return vt.apply(this,arguments)}(K._delegate,_,A))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function Di(w,p){return Ai.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function or(w,p){const _=Pr.parseLink(p);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}(0,_)}getRedirectResult(){var _=this;return(0,a.Z)(function*(){yu(oa(),_._delegate,"operation-not-supported-in-this-environment");const A=yield function ao(w,p){return ls.apply(this,arguments)}(_._delegate,Vo);return A?us(_._delegate,Promise.resolve(A)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function sa(w,p){wn(w)._logFramework(p)}(this._delegate,_)}onAuthStateChanged(_,A,K){const{next:ge,error:lt,complete:Xt}=ld(_,A,K);return this._delegate.onAuthStateChanged(ge,lt,Xt)}onIdTokenChanged(_,A,K){const{next:ge,error:lt,complete:Xt}=ld(_,A,K);return this._delegate.onIdTokenChanged(ge,lt,Xt)}sendSignInLinkToEmail(_,A){return function In(w,p,_){return Wt.apply(this,arguments)}(this._delegate,_,A)}sendPasswordResetEmail(_,A){return function N(w,p,_){return re.apply(this,arguments)}(this._delegate,_,A||void 0)}setPersistence(_){var A=this;return(0,a.Z)(function*(){let K;switch(function gu(w,p){xl(Object.values(Mo).includes(p),w,"invalid-persistence-type"),(0,Z.b$)()?xl(p!==Mo.SESSION,w,"unsupported-persistence-type"):(0,Z.UG)()?xl(p===Mo.NONE,w,"unsupported-persistence-type"):Js()?xl(p===Mo.NONE||p===Mo.LOCAL&&(0,Z.hl)(),w,"unsupported-persistence-type"):xl(p===Mo.NONE||sl(),w,"unsupported-persistence-type")}(A._delegate,_),_){case Mo.SESSION:K=xs;break;case Mo.LOCAL:K=(yield ye(ue)._isAvailable())?ue:qs;break;case Mo.NONE:K=An;break;default:return dt("argument-error",{appName:A._delegate.name})}return A._delegate.setPersistence(K)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return us(this._delegate,function es(w){return as.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return us(this._delegate,gr(this._delegate,_))}signInWithCustomToken(_){return us(this._delegate,function ns(w,p){return Xn.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,A){return us(this._delegate,function Ht(w,p,_){return gr((0,Z.m9)(w),Ar.credential(p,_))}(this._delegate,_,A))}signInWithEmailLink(_,A){return us(this._delegate,function mr(w,p,_){return Dr.apply(this,arguments)}(this._delegate,_,A))}signInWithPhoneNumber(_,A){return za(this._delegate,function ea(w,p,_){return Hi.apply(this,arguments)}(this._delegate,_,A))}signInWithPopup(_){var A=this;return(0,a.Z)(function*(){return yu(oa(),A._delegate,"operation-not-supported-in-this-environment"),us(A._delegate,function Lo(w,p,_){return pl.apply(this,arguments)}(A._delegate,_,Vo))})()}signInWithRedirect(_){var A=this;return(0,a.Z)(function*(){return yu(oa(),A._delegate,"operation-not-supported-in-this-environment"),yield wc(A._delegate),function hr(w,p,_){return function ei(w,p,_){return Lr.apply(this,arguments)}(w,p,_)}(A._delegate,_,Vo)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function W(w,p){return pe.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return w.Persistence=Mo,w})();function ld(w,p,_){let A=w;"function"!=typeof w&&({next:A,error:p,complete:_}=w);const K=A;return{next:lt=>K(lt&&eo.getOrCreate(lt)),error:p,complete:_}}function Cc(w,p){const _=function Zs(w,p){const _=Ku();if(!_)return[];const A=Sr(bc,w,p);switch(_.getItem(A)){case Mo.NONE:return[An];case Mo.LOCAL:return[ue,xs];case Mo.SESSION:return[xs];default:return[]}}(w,p);if("undefined"!=typeof self&&!_.includes(ue)&&_.push(ue),"undefined"!=typeof window)for(const A of[qs,xs])_.includes(A)||_.push(A);return _.includes(An)||_.push(An),_}class Dc{constructor(){this.providerId="phone",this._delegate=new el(ma(J.Z.auth()))}static credential(p,_){return el.credential(p,_)}verifyPhoneNumber(p,_){return this._delegate.verifyPhoneNumber(p,_)}unwrap(){return this._delegate}}Dc.PHONE_SIGN_IN_METHOD=el.PHONE_SIGN_IN_METHOD,Dc.PROVIDER_ID=el.PROVIDER_ID;const Th=me;class $d{constructor(p,_,A=J.Z.app()){var K;Th(null===(K=A.options)||void 0===K?void 0:K.apiKey,"invalid-api-key",{appName:A.name}),this._delegate=new zl(p,_,A.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function aa(w){w.INTERNAL.registerComponent(new Ae.wA("auth-compat",p=>{const _=p.getProvider("app-compat").getImmediate(),A=p.getProvider("auth");return new Ud(_,A)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ar,FacebookAuthProvider:_s,GithubAuthProvider:ro,GoogleAuthProvider:Ss,OAuthProvider:Xi,SAMLAuthProvider:ds,PhoneAuthProvider:Dc,PhoneMultiFactorGenerator:Yl,RecaptchaVerifier:$d,TwitterAuthProvider:Qi,Auth:Ud,AuthCredential:bi,Error:Z.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),w.registerVersion("@firebase/auth-compat","0.2.15")}(J.Z)},591:(dn,ft,L)=>{"use strict";L.d(ft,{X:()=>Z});var a=L(8929),J=L(5279);class Z extends a.xQ{constructor(Ne){super(),this._value=Ne}get value(){return this.getValue()}_subscribe(Ne){const ae=super._subscribe(Ne);return ae&&!ae.closed&&Ne.next(this._value),ae}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new J.N;return this._value}next(Ne){super.next(this._value=Ne)}}},2916:(dn,ft,L)=>{"use strict";L.d(ft,{y:()=>ve});var a=L(3489),Z=L(7668),We=L(3292),ae=L(3821),Ae=L(5379);var oe=L(2830);let ve=(()=>{class ce{constructor(Ve){this._isScalar=!1,Ve&&(this._subscribe=Ve)}lift(Ve){const Ee=new ce;return Ee.source=this,Ee.operator=Ve,Ee}subscribe(Ve,Ee,Fe){const{operator:Be}=this,Et=function Ne(ce,Ke,Ve){if(ce){if(ce instanceof a.L)return ce;if(ce[Z.b])return ce[Z.b]()}return ce||Ke||Ve?new a.L(ce,Ke,Ve):new a.L(We.c)}(Ve,Ee,Fe);if(Et.add(Be?Be.call(Et,this.source):this.source||oe.v.useDeprecatedSynchronousErrorHandling&&!Et.syncErrorThrowable?this._subscribe(Et):this._trySubscribe(Et)),oe.v.useDeprecatedSynchronousErrorHandling&&Et.syncErrorThrowable&&(Et.syncErrorThrowable=!1,Et.syncErrorThrown))throw Et.syncErrorValue;return Et}_trySubscribe(Ve){try{return this._subscribe(Ve)}catch(Ee){oe.v.useDeprecatedSynchronousErrorHandling&&(Ve.syncErrorThrown=!0,Ve.syncErrorValue=Ee),function J(ce){for(;ce;){const{closed:Ke,destination:Ve,isStopped:Ee}=ce;if(Ke||Ee)return!1;ce=Ve&&Ve instanceof a.L?Ve:null}return!0}(Ve)?Ve.error(Ee):console.warn(Ee)}}forEach(Ve,Ee){return new(Ee=ne(Ee))((Fe,Be)=>{let Et;Et=this.subscribe(we=>{try{Ve(we)}catch(dt){Be(dt),Et&&Et.unsubscribe()}},Be,Fe)})}_subscribe(Ve){const{source:Ee}=this;return Ee&&Ee.subscribe(Ve)}[ae.L](){return this}pipe(...Ve){return 0===Ve.length?this:function Ie(ce){return 0===ce.length?Ae.y:1===ce.length?ce[0]:function(Ve){return ce.reduce((Ee,Fe)=>Fe(Ee),Ve)}}(Ve)(this)}toPromise(Ve){return new(Ve=ne(Ve))((Ee,Fe)=>{let Be;this.subscribe(Et=>Be=Et,Et=>Fe(Et),()=>Ee(Be))})}}return ce.create=Ke=>new ce(Ke),ce})();function ne(ce){if(ce||(ce=oe.v.Promise||Promise),!ce)throw new Error("no Promise impl found");return ce}},3292:(dn,ft,L)=>{"use strict";L.d(ft,{c:()=>Z});var a=L(2830),J=L(2782);const Z={closed:!0,next(We){},error(We){if(a.v.useDeprecatedSynchronousErrorHandling)throw We;(0,J.z)(We)},complete(){}}},826:(dn,ft,L)=>{"use strict";L.d(ft,{L:()=>J});var a=L(3489);class J extends a.L{notifyNext(We,Ne,ae,Ae,De){this.destination.next(Ne)}notifyError(We,Ne){this.destination.error(We)}notifyComplete(We){this.destination.complete()}}},8929:(dn,ft,L)=>{"use strict";L.d(ft,{Yc:()=>Ae,xQ:()=>De});var a=L(2916),J=L(3489),Z=L(2654),We=L(5279),Ne=L(5283),ae=L(7668);class Ae extends J.L{constructor(ve){super(ve),this.destination=ve}}let De=(()=>{class oe extends a.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[ae.b](){return new Ae(this)}lift(ne){const ce=new Ie(this,this);return ce.operator=ne,ce}next(ne){if(this.closed)throw new We.N;if(!this.isStopped){const{observers:ce}=this,Ke=ce.length,Ve=ce.slice();for(let Ee=0;Ee<Ke;Ee++)Ve[Ee].next(ne)}}error(ne){if(this.closed)throw new We.N;this.hasError=!0,this.thrownError=ne,this.isStopped=!0;const{observers:ce}=this,Ke=ce.length,Ve=ce.slice();for(let Ee=0;Ee<Ke;Ee++)Ve[Ee].error(ne);this.observers.length=0}complete(){if(this.closed)throw new We.N;this.isStopped=!0;const{observers:ne}=this,ce=ne.length,Ke=ne.slice();for(let Ve=0;Ve<ce;Ve++)Ke[Ve].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(ne){if(this.closed)throw new We.N;return super._trySubscribe(ne)}_subscribe(ne){if(this.closed)throw new We.N;return this.hasError?(ne.error(this.thrownError),Z.w.EMPTY):this.isStopped?(ne.complete(),Z.w.EMPTY):(this.observers.push(ne),new Ne.W(this,ne))}asObservable(){const ne=new a.y;return ne.source=this,ne}}return oe.create=(ve,ne)=>new Ie(ve,ne),oe})();class Ie extends De{constructor(ve,ne){super(),this.destination=ve,this.source=ne}next(ve){const{destination:ne}=this;ne&&ne.next&&ne.next(ve)}error(ve){const{destination:ne}=this;ne&&ne.error&&this.destination.error(ve)}complete(){const{destination:ve}=this;ve&&ve.complete&&this.destination.complete()}_subscribe(ve){const{source:ne}=this;return ne?this.source.subscribe(ve):Z.w.EMPTY}}},5283:(dn,ft,L)=>{"use strict";L.d(ft,{W:()=>J});var a=L(2654);class J extends a.w{constructor(We,Ne){super(),this.subject=We,this.subscriber=Ne,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const We=this.subject,Ne=We.observers;if(this.subject=null,!Ne||0===Ne.length||We.isStopped||We.closed)return;const ae=Ne.indexOf(this.subscriber);-1!==ae&&Ne.splice(ae,1)}}},3489:(dn,ft,L)=>{"use strict";L.d(ft,{L:()=>Ae});var a=L(7043),J=L(3292),Z=L(2654),We=L(7668),Ne=L(2830),ae=L(2782);class Ae extends Z.w{constructor(oe,ve,ne){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=J.c;break;case 1:if(!oe){this.destination=J.c;break}if("object"==typeof oe){oe instanceof Ae?(this.syncErrorThrowable=oe.syncErrorThrowable,this.destination=oe,oe.add(this)):(this.syncErrorThrowable=!0,this.destination=new De(this,oe));break}default:this.syncErrorThrowable=!0,this.destination=new De(this,oe,ve,ne)}}[We.b](){return this}static create(oe,ve,ne){const ce=new Ae(oe,ve,ne);return ce.syncErrorThrowable=!1,ce}next(oe){this.isStopped||this._next(oe)}error(oe){this.isStopped||(this.isStopped=!0,this._error(oe))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(oe){this.destination.next(oe)}_error(oe){this.destination.error(oe),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:oe}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=oe,this}}class De extends Ae{constructor(oe,ve,ne,ce){super(),this._parentSubscriber=oe;let Ke,Ve=this;(0,a.m)(ve)?Ke=ve:ve&&(Ke=ve.next,ne=ve.error,ce=ve.complete,ve!==J.c&&(Ve=Object.create(ve),(0,a.m)(Ve.unsubscribe)&&this.add(Ve.unsubscribe.bind(Ve)),Ve.unsubscribe=this.unsubscribe.bind(this))),this._context=Ve,this._next=Ke,this._error=ne,this._complete=ce}next(oe){if(!this.isStopped&&this._next){const{_parentSubscriber:ve}=this;Ne.v.useDeprecatedSynchronousErrorHandling&&ve.syncErrorThrowable?this.__tryOrSetError(ve,this._next,oe)&&this.unsubscribe():this.__tryOrUnsub(this._next,oe)}}error(oe){if(!this.isStopped){const{_parentSubscriber:ve}=this,{useDeprecatedSynchronousErrorHandling:ne}=Ne.v;if(this._error)ne&&ve.syncErrorThrowable?(this.__tryOrSetError(ve,this._error,oe),this.unsubscribe()):(this.__tryOrUnsub(this._error,oe),this.unsubscribe());else if(ve.syncErrorThrowable)ne?(ve.syncErrorValue=oe,ve.syncErrorThrown=!0):(0,ae.z)(oe),this.unsubscribe();else{if(this.unsubscribe(),ne)throw oe;(0,ae.z)(oe)}}}complete(){if(!this.isStopped){const{_parentSubscriber:oe}=this;if(this._complete){const ve=()=>this._complete.call(this._context);Ne.v.useDeprecatedSynchronousErrorHandling&&oe.syncErrorThrowable?(this.__tryOrSetError(oe,ve),this.unsubscribe()):(this.__tryOrUnsub(ve),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(oe,ve){try{oe.call(this._context,ve)}catch(ne){if(this.unsubscribe(),Ne.v.useDeprecatedSynchronousErrorHandling)throw ne;(0,ae.z)(ne)}}__tryOrSetError(oe,ve,ne){if(!Ne.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{ve.call(this._context,ne)}catch(ce){return Ne.v.useDeprecatedSynchronousErrorHandling?(oe.syncErrorValue=ce,oe.syncErrorThrown=!0,!0):((0,ae.z)(ce),!0)}return!1}_unsubscribe(){const{_parentSubscriber:oe}=this;this._context=null,this._parentSubscriber=null,oe.unsubscribe()}}},2654:(dn,ft,L)=>{"use strict";L.d(ft,{w:()=>ae});var a=L(6688),J=L(7830),Z=L(7043);const Ne=(()=>{function De(Ie){return Error.call(this),this.message=Ie?`${Ie.length} errors occurred during unsubscription:\n${Ie.map((oe,ve)=>`${ve+1}) ${oe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Ie,this}return De.prototype=Object.create(Error.prototype),De})();class ae{constructor(Ie){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,Ie&&(this._ctorUnsubscribe=!0,this._unsubscribe=Ie)}unsubscribe(){let Ie;if(this.closed)return;let{_parentOrParents:oe,_ctorUnsubscribe:ve,_unsubscribe:ne,_subscriptions:ce}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,oe instanceof ae)oe.remove(this);else if(null!==oe)for(let Ke=0;Ke<oe.length;++Ke)oe[Ke].remove(this);if((0,Z.m)(ne)){ve&&(this._unsubscribe=void 0);try{ne.call(this)}catch(Ke){Ie=Ke instanceof Ne?Ae(Ke.errors):[Ke]}}if((0,a.k)(ce)){let Ke=-1,Ve=ce.length;for(;++Ke<Ve;){const Ee=ce[Ke];if((0,J.K)(Ee))try{Ee.unsubscribe()}catch(Fe){Ie=Ie||[],Fe instanceof Ne?Ie=Ie.concat(Ae(Fe.errors)):Ie.push(Fe)}}}if(Ie)throw new Ne(Ie)}add(Ie){let oe=Ie;if(!Ie)return ae.EMPTY;switch(typeof Ie){case"function":oe=new ae(Ie);case"object":if(oe===this||oe.closed||"function"!=typeof oe.unsubscribe)return oe;if(this.closed)return oe.unsubscribe(),oe;if(!(oe instanceof ae)){const ce=oe;oe=new ae,oe._subscriptions=[ce]}break;default:throw new Error("unrecognized teardown "+Ie+" added to Subscription.")}let{_parentOrParents:ve}=oe;if(null===ve)oe._parentOrParents=this;else if(ve instanceof ae){if(ve===this)return oe;oe._parentOrParents=[ve,this]}else{if(-1!==ve.indexOf(this))return oe;ve.push(this)}const ne=this._subscriptions;return null===ne?this._subscriptions=[oe]:ne.push(oe),oe}remove(Ie){const oe=this._subscriptions;if(oe){const ve=oe.indexOf(Ie);-1!==ve&&oe.splice(ve,1)}}}var De;function Ae(De){return De.reduce((Ie,oe)=>Ie.concat(oe instanceof Ne?oe.errors:oe),[])}ae.EMPTY=((De=new ae).closed=!0,De)},2830:(dn,ft,L)=>{"use strict";L.d(ft,{v:()=>J});let a=!1;const J={Promise:void 0,set useDeprecatedSynchronousErrorHandling(Z){if(Z){const We=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+We.stack)}else a&&console.log("RxJS: Back to a better error behavior. Thank you. <3");a=Z},get useDeprecatedSynchronousErrorHandling(){return a}}},1177:(dn,ft,L)=>{"use strict";L.d(ft,{IY:()=>We,Ds:()=>ae,ft:()=>De});var a=L(3489),J=L(2916),Z=L(9249);class We extends a.L{constructor(oe){super(),this.parent=oe}_next(oe){this.parent.notifyNext(oe)}_error(oe){this.parent.notifyError(oe),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ae extends a.L{notifyNext(oe){this.destination.next(oe)}notifyError(oe){this.destination.error(oe)}notifyComplete(){this.destination.complete()}}function De(Ie,oe){if(oe.closed)return;if(Ie instanceof J.y)return Ie.subscribe(oe);let ve;try{ve=(0,Z.s)(Ie)(oe)}catch(ne){oe.error(ne)}return ve}},1762:(dn,ft,L)=>{"use strict";L.d(ft,{c:()=>Ne,N:()=>ae});var a=L(8929),J=L(2916),Z=L(2654),We=L(4327);class Ne extends J.y{constructor(ve,ne){super(),this.source=ve,this.subjectFactory=ne,this._refCount=0,this._isComplete=!1}_subscribe(ve){return this.getSubject().subscribe(ve)}getSubject(){const ve=this._subject;return(!ve||ve.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let ve=this._connection;return ve||(this._isComplete=!1,ve=this._connection=new Z.w,ve.add(this.source.subscribe(new Ae(this.getSubject(),this))),ve.closed&&(this._connection=null,ve=Z.w.EMPTY)),ve}refCount(){return(0,We.x)()(this)}}const ae=(()=>{const oe=Ne.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:oe._subscribe},_isComplete:{value:oe._isComplete,writable:!0},getSubject:{value:oe.getSubject},connect:{value:oe.connect},refCount:{value:oe.refCount}}})();class Ae extends a.Yc{constructor(ve,ne){super(ve),this.connectable=ne}_error(ve){this._unsubscribe(),super._error(ve)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const ve=this.connectable;if(ve){this.connectable=null;const ne=ve._connection;ve._refCount=0,ve._subject=null,ve._connection=null,ne&&ne.unsubscribe()}}}},1221:(dn,ft,L)=>{"use strict";L.d(ft,{z:()=>We});var a=L(1086),J=L(9146);function We(...Ne){return function Z(){return(0,J.J)(1)}()((0,a.of)(...Ne))}},8896:(dn,ft,L)=>{"use strict";L.d(ft,{E:()=>J,c:()=>Z});var a=L(2916);const J=new a.y(Ne=>Ne.complete());function Z(Ne){return Ne?function We(Ne){return new a.y(ae=>Ne.schedule(()=>ae.complete()))}(Ne):J}},5254:(dn,ft,L)=>{"use strict";L.d(ft,{D:()=>Ve});var a=L(2916),J=L(9249),Z=L(2654),We=L(3821),Ae=L(6454),De=L(5430),ve=L(8955),ne=L(8515);function Ve(Ee,Fe){return Fe?function Ke(Ee,Fe){if(null!=Ee){if(function oe(Ee){return Ee&&"function"==typeof Ee[We.L]}(Ee))return function Ne(Ee,Fe){return new a.y(Be=>{const Et=new Z.w;return Et.add(Fe.schedule(()=>{const we=Ee[We.L]();Et.add(we.subscribe({next(dt){Et.add(Fe.schedule(()=>Be.next(dt)))},error(dt){Et.add(Fe.schedule(()=>Be.error(dt)))},complete(){Et.add(Fe.schedule(()=>Be.complete()))}}))})),Et})}(Ee,Fe);if((0,ve.t)(Ee))return function ae(Ee,Fe){return new a.y(Be=>{const Et=new Z.w;return Et.add(Fe.schedule(()=>Ee.then(we=>{Et.add(Fe.schedule(()=>{Be.next(we),Et.add(Fe.schedule(()=>Be.complete()))}))},we=>{Et.add(Fe.schedule(()=>Be.error(we)))}))),Et})}(Ee,Fe);if((0,ne.z)(Ee))return(0,Ae.r)(Ee,Fe);if(function ce(Ee){return Ee&&"function"==typeof Ee[De.hZ]}(Ee)||"string"==typeof Ee)return function Ie(Ee,Fe){if(!Ee)throw new Error("Iterable cannot be null");return new a.y(Be=>{const Et=new Z.w;let we;return Et.add(()=>{we&&"function"==typeof we.return&&we.return()}),Et.add(Fe.schedule(()=>{we=Ee[De.hZ](),Et.add(Fe.schedule(function(){if(Be.closed)return;let dt,St;try{const Pt=we.next();dt=Pt.value,St=Pt.done}catch(Pt){return void Be.error(Pt)}St?Be.complete():(Be.next(dt),this.schedule())}))})),Et})}(Ee,Fe)}throw new TypeError((null!==Ee&&typeof Ee||Ee)+" is not observable")}(Ee,Fe):Ee instanceof a.y?Ee:new a.y((0,J.s)(Ee))}},3009:(dn,ft,L)=>{"use strict";L.d(ft,{n:()=>We});var a=L(2916),J=L(3650),Z=L(6454);function We(Ne,ae){return ae?(0,Z.r)(Ne,ae):new a.y((0,J.V)(Ne))}},6787:(dn,ft,L)=>{"use strict";L.d(ft,{T:()=>Ne});var a=L(2916),J=L(2866),Z=L(9146),We=L(3009);function Ne(...ae){let Ae=Number.POSITIVE_INFINITY,De=null,Ie=ae[ae.length-1];return(0,J.K)(Ie)?(De=ae.pop(),ae.length>1&&"number"==typeof ae[ae.length-1]&&(Ae=ae.pop())):"number"==typeof Ie&&(Ae=ae.pop()),null===De&&1===ae.length&&ae[0]instanceof a.y?ae[0]:(0,Z.J)(Ae)((0,We.n)(ae,De))}},1086:(dn,ft,L)=>{"use strict";L.d(ft,{of:()=>We});var a=L(2866),J=L(3009),Z=L(6454);function We(...Ne){let ae=Ne[Ne.length-1];return(0,a.K)(ae)?(Ne.pop(),(0,Z.r)(Ne,ae)):(0,J.n)(Ne)}},1737:(dn,ft,L)=>{"use strict";L.d(ft,{_:()=>J});var a=L(2916);function J(We,Ne){return new a.y(Ne?ae=>Ne.schedule(Z,0,{error:We,subscriber:ae}):ae=>ae.error(We))}function Z({error:We,subscriber:Ne}){Ne.error(We)}},1406:(dn,ft,L)=>{"use strict";L.d(ft,{b:()=>J});var a=L(1709);function J(Z,We){return(0,a.zg)(Z,We,1)}},7314:(dn,ft,L)=>{"use strict";L.d(ft,{d:()=>J});var a=L(3489);function J(Ne=null){return ae=>ae.lift(new Z(Ne))}class Z{constructor(ae){this.defaultValue=ae}call(ae,Ae){return Ae.subscribe(new We(ae,this.defaultValue))}}class We extends a.L{constructor(ae,Ae){super(ae),this.defaultValue=Ae,this.isEmpty=!0}_next(ae){this.isEmpty=!1,this.destination.next(ae)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},5778:(dn,ft,L)=>{"use strict";L.d(ft,{x:()=>J});var a=L(3489);function J(Ne,ae){return Ae=>Ae.lift(new Z(Ne,ae))}class Z{constructor(ae,Ae){this.compare=ae,this.keySelector=Ae}call(ae,Ae){return Ae.subscribe(new We(ae,this.compare,this.keySelector))}}class We extends a.L{constructor(ae,Ae,De){super(ae),this.keySelector=De,this.hasKey=!1,"function"==typeof Ae&&(this.compare=Ae)}compare(ae,Ae){return ae===Ae}_next(ae){let Ae;try{const{keySelector:Ie}=this;Ae=Ie?Ie(ae):ae}catch(Ie){return this.destination.error(Ie)}let De=!1;if(this.hasKey)try{const{compare:Ie}=this;De=Ie(this.key,Ae)}catch(Ie){return this.destination.error(Ie)}else this.hasKey=!0;De||(this.key=Ae,this.destination.next(ae))}}},2198:(dn,ft,L)=>{"use strict";L.d(ft,{h:()=>J});var a=L(3489);function J(Ne,ae){return function(De){return De.lift(new Z(Ne,ae))}}class Z{constructor(ae,Ae){this.predicate=ae,this.thisArg=Ae}call(ae,Ae){return Ae.subscribe(new We(ae,this.predicate,this.thisArg))}}class We extends a.L{constructor(ae,Ae,De){super(ae),this.predicate=Ae,this.thisArg=De,this.count=0}_next(ae){let Ae;try{Ae=this.predicate.call(this.thisArg,ae,this.count++)}catch(De){return void this.destination.error(De)}Ae&&this.destination.next(ae)}}},7224:(dn,ft,L)=>{"use strict";L.d(ft,{P:()=>Ae});var a=L(4450),J=L(2198),Z=L(2986),We=L(7314),Ne=L(4907),ae=L(5379);function Ae(De,Ie){const oe=arguments.length>=2;return ve=>ve.pipe(De?(0,J.h)((ne,ce)=>De(ne,ce,ve)):ae.y,(0,Z.q)(1),oe?(0,We.d)(Ie):(0,Ne.T)(()=>new a.K))}},4850:(dn,ft,L)=>{"use strict";L.d(ft,{U:()=>J});var a=L(3489);function J(Ne,ae){return function(De){if("function"!=typeof Ne)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return De.lift(new Z(Ne,ae))}}class Z{constructor(ae,Ae){this.project=ae,this.thisArg=Ae}call(ae,Ae){return Ae.subscribe(new We(ae,this.project,this.thisArg))}}class We extends a.L{constructor(ae,Ae,De){super(ae),this.project=Ae,this.count=0,this.thisArg=De||this}_next(ae){let Ae;try{Ae=this.project.call(this.thisArg,ae,this.count++)}catch(De){return void this.destination.error(De)}this.destination.next(Ae)}}},9146:(dn,ft,L)=>{"use strict";L.d(ft,{J:()=>Z});var a=L(1709),J=L(5379);function Z(We=Number.POSITIVE_INFINITY){return(0,a.zg)(J.y,We)}},1709:(dn,ft,L)=>{"use strict";L.d(ft,{zg:()=>We});var a=L(4850),J=L(5254),Z=L(1177);function We(De,Ie,oe=Number.POSITIVE_INFINITY){return"function"==typeof Ie?ve=>ve.pipe(We((ne,ce)=>(0,J.D)(De(ne,ce)).pipe((0,a.U)((Ke,Ve)=>Ie(ne,Ke,ce,Ve))),oe)):("number"==typeof Ie&&(oe=Ie),ve=>ve.lift(new Ne(De,oe)))}class Ne{constructor(Ie,oe=Number.POSITIVE_INFINITY){this.project=Ie,this.concurrent=oe}call(Ie,oe){return oe.subscribe(new ae(Ie,this.project,this.concurrent))}}class ae extends Z.Ds{constructor(Ie,oe,ve=Number.POSITIVE_INFINITY){super(Ie),this.project=oe,this.concurrent=ve,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(Ie){this.active<this.concurrent?this._tryNext(Ie):this.buffer.push(Ie)}_tryNext(Ie){let oe;const ve=this.index++;try{oe=this.project(Ie,ve)}catch(ne){return void this.destination.error(ne)}this.active++,this._innerSub(oe)}_innerSub(Ie){const oe=new Z.IY(this),ve=this.destination;ve.add(oe);const ne=(0,Z.ft)(Ie,oe);ne!==oe&&ve.add(ne)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(Ie){this.destination.next(Ie)}notifyComplete(){const Ie=this.buffer;this.active--,Ie.length>0?this._next(Ie.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},2102:(dn,ft,L)=>{"use strict";L.d(ft,{ht:()=>Ie,QV:()=>Ae});var a=L(3489),J=L(8896),Z=L(1086),We=L(1737);class ae{constructor(ne,ce,Ke){this.kind=ne,this.value=ce,this.error=Ke,this.hasValue="N"===ne}observe(ne){switch(this.kind){case"N":return ne.next&&ne.next(this.value);case"E":return ne.error&&ne.error(this.error);case"C":return ne.complete&&ne.complete()}}do(ne,ce,Ke){switch(this.kind){case"N":return ne&&ne(this.value);case"E":return ce&&ce(this.error);case"C":return Ke&&Ke()}}accept(ne,ce,Ke){return ne&&"function"==typeof ne.next?this.observe(ne):this.do(ne,ce,Ke)}toObservable(){switch(this.kind){case"N":return(0,Z.of)(this.value);case"E":return(0,We._)(this.error);case"C":return(0,J.c)()}throw new Error("unexpected notification kind value")}static createNext(ne){return void 0!==ne?new ae("N",ne):ae.undefinedValueNotification}static createError(ne){return new ae("E",void 0,ne)}static createComplete(){return ae.completeNotification}}function Ae(ve,ne=0){return function(Ke){return Ke.lift(new De(ve,ne))}}ae.completeNotification=new ae("C"),ae.undefinedValueNotification=new ae("N",void 0);class De{constructor(ne,ce=0){this.scheduler=ne,this.delay=ce}call(ne,ce){return ce.subscribe(new Ie(ne,this.scheduler,this.delay))}}class Ie extends a.L{constructor(ne,ce,Ke=0){super(ne),this.scheduler=ce,this.delay=Ke}static dispatch(ne){const{notification:ce,destination:Ke}=ne;ce.observe(Ke),this.unsubscribe()}scheduleMessage(ne){this.destination.add(this.scheduler.schedule(Ie.dispatch,this.delay,new oe(ne,this.destination)))}_next(ne){this.scheduleMessage(ae.createNext(ne))}_error(ne){this.scheduleMessage(ae.createError(ne)),this.unsubscribe()}_complete(){this.scheduleMessage(ae.createComplete()),this.unsubscribe()}}class oe{constructor(ne,ce){this.notification=ne,this.destination=ce}}},4327:(dn,ft,L)=>{"use strict";L.d(ft,{x:()=>J});var a=L(3489);function J(){return function(ae){return ae.lift(new Z(ae))}}class Z{constructor(ae){this.connectable=ae}call(ae,Ae){const{connectable:De}=this;De._refCount++;const Ie=new We(ae,De),oe=Ae.subscribe(Ie);return Ie.closed||(Ie.connection=De.connect()),oe}}class We extends a.L{constructor(ae,Ae){super(ae),this.connectable=Ae}_unsubscribe(){const{connectable:ae}=this;if(!ae)return void(this.connection=null);this.connectable=null;const Ae=ae._refCount;if(Ae<=0)return void(this.connection=null);if(ae._refCount=Ae-1,Ae>1)return void(this.connection=null);const{connection:De}=this,Ie=ae._connection;this.connection=null,Ie&&(!De||Ie===De)&&Ie.unsubscribe()}}},2014:(dn,ft,L)=>{"use strict";L.d(ft,{R:()=>J});var a=L(3489);function J(Ne,ae){let Ae=!1;return arguments.length>=2&&(Ae=!0),function(Ie){return Ie.lift(new Z(Ne,ae,Ae))}}class Z{constructor(ae,Ae,De=!1){this.accumulator=ae,this.seed=Ae,this.hasSeed=De}call(ae,Ae){return Ae.subscribe(new We(ae,this.accumulator,this.seed,this.hasSeed))}}class We extends a.L{constructor(ae,Ae,De,Ie){super(ae),this.accumulator=Ae,this._seed=De,this.hasSeed=Ie,this.index=0}get seed(){return this._seed}set seed(ae){this.hasSeed=!0,this._seed=ae}_next(ae){if(this.hasSeed)return this._tryNext(ae);this.seed=ae,this.destination.next(ae)}_tryNext(ae){const Ae=this.index++;let De;try{De=this.accumulator(this.seed,ae,Ae)}catch(Ie){this.destination.error(Ie)}this.seed=De,this.destination.next(De)}}},2474:(dn,ft,L)=>{"use strict";L.d(ft,{B:()=>Ae});var a=L(1762);class Z{constructor(Ie,oe){this.subjectFactory=Ie,this.selector=oe}call(Ie,oe){const{selector:ve}=this,ne=this.subjectFactory(),ce=ve(ne).subscribe(Ie);return ce.add(oe.subscribe(ne)),ce}}var We=L(4327),Ne=L(8929);function ae(){return new Ne.xQ}function Ae(){return De=>(0,We.x)()(function J(De,Ie){return function(ve){let ne;if(ne="function"==typeof De?De:function(){return De},"function"==typeof Ie)return ve.lift(new Z(ne,Ie));const ce=Object.create(ve,a.N);return ce.source=ve,ce.subjectFactory=ne,ce}}(ae)(De))}},1059:(dn,ft,L)=>{"use strict";L.d(ft,{O:()=>Z});var a=L(1221),J=L(2866);function Z(...We){const Ne=We[We.length-1];return(0,J.K)(Ne)?(We.pop(),ae=>(0,a.z)(We,ae,Ne)):ae=>(0,a.z)(We,ae)}},8915:(dn,ft,L)=>{"use strict";L.d(ft,{R:()=>Fe});var a=L(2916);let J=1;const Z=Promise.resolve(),We={};function Ne(Et){return Et in We&&(delete We[Et],!0)}const ae={setImmediate(Et){const we=J++;return We[we]=!0,Z.then(()=>Ne(we)&&Et()),we},clearImmediate(Et){Ne(Et)}};var De=L(6686),oe=L(2268);const ce=new class ve extends oe.v{flush(we){this.active=!0,this.scheduled=void 0;const{actions:dt}=this;let St,Pt=-1,Xe=dt.length;we=we||dt.shift();do{if(St=we.execute(we.state,we.delay))break}while(++Pt<Xe&&(we=dt.shift()));if(this.active=!1,St){for(;++Pt<Xe&&(we=dt.shift());)we.unsubscribe();throw St}}}(class Ie extends De.o{constructor(we,dt){super(we,dt),this.scheduler=we,this.work=dt}requestAsyncId(we,dt,St=0){return null!==St&&St>0?super.requestAsyncId(we,dt,St):(we.actions.push(this),we.scheduled||(we.scheduled=ae.setImmediate(we.flush.bind(we,null))))}recycleAsyncId(we,dt,St=0){if(null!==St&&St>0||null===St&&this.delay>0)return super.recycleAsyncId(we,dt,St);0===we.actions.length&&(ae.clearImmediate(dt),we.scheduled=void 0)}});var Ke=L(6688);class Ee extends a.y{constructor(we,dt=0,St=ce){super(),this.source=we,this.delayTime=dt,this.scheduler=St,(!function Ve(Et){return!(0,Ke.k)(Et)&&Et-parseFloat(Et)+1>=0}(dt)||dt<0)&&(this.delayTime=0),(!St||"function"!=typeof St.schedule)&&(this.scheduler=ce)}static create(we,dt=0,St=ce){return new Ee(we,dt,St)}static dispatch(we){const{source:dt,subscriber:St}=we;return this.add(dt.subscribe(St))}_subscribe(we){return this.scheduler.schedule(Ee.dispatch,this.delayTime,{source:this.source,subscriber:we})}}function Fe(Et,we=0){return function(St){return St.lift(new Be(Et,we))}}class Be{constructor(we,dt){this.scheduler=we,this.delay=dt}call(we,dt){return new Ee(dt,this.delay,this.scheduler).subscribe(we)}}},7545:(dn,ft,L)=>{"use strict";L.d(ft,{w:()=>We});var a=L(4850),J=L(5254),Z=L(1177);function We(Ae,De){return"function"==typeof De?Ie=>Ie.pipe(We((oe,ve)=>(0,J.D)(Ae(oe,ve)).pipe((0,a.U)((ne,ce)=>De(oe,ne,ve,ce))))):Ie=>Ie.lift(new Ne(Ae))}class Ne{constructor(De){this.project=De}call(De,Ie){return Ie.subscribe(new ae(De,this.project))}}class ae extends Z.Ds{constructor(De,Ie){super(De),this.project=Ie,this.index=0}_next(De){let Ie;const oe=this.index++;try{Ie=this.project(De,oe)}catch(ve){return void this.destination.error(ve)}this._innerSub(Ie)}_innerSub(De){const Ie=this.innerSubscription;Ie&&Ie.unsubscribe();const oe=new Z.IY(this),ve=this.destination;ve.add(oe),this.innerSubscription=(0,Z.ft)(De,oe),this.innerSubscription!==oe&&ve.add(this.innerSubscription)}_complete(){const{innerSubscription:De}=this;(!De||De.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(De){this.destination.next(De)}}},2986:(dn,ft,L)=>{"use strict";L.d(ft,{q:()=>We});var a=L(3489),J=L(4231),Z=L(8896);function We(Ae){return De=>0===Ae?(0,Z.c)():De.lift(new Ne(Ae))}class Ne{constructor(De){if(this.total=De,this.total<0)throw new J.W}call(De,Ie){return Ie.subscribe(new ae(De,this.total))}}class ae extends a.L{constructor(De,Ie){super(De),this.total=Ie,this.count=0}_next(De){const Ie=this.total,oe=++this.count;oe<=Ie&&(this.destination.next(De),oe===Ie&&(this.destination.complete(),this.unsubscribe()))}}},2868:(dn,ft,L)=>{"use strict";L.d(ft,{b:()=>We});var a=L(3489);function J(){}var Z=L(7043);function We(Ae,De,Ie){return function(ve){return ve.lift(new Ne(Ae,De,Ie))}}class Ne{constructor(De,Ie,oe){this.nextOrObserver=De,this.error=Ie,this.complete=oe}call(De,Ie){return Ie.subscribe(new ae(De,this.nextOrObserver,this.error,this.complete))}}class ae extends a.L{constructor(De,Ie,oe,ve){super(De),this._tapNext=J,this._tapError=J,this._tapComplete=J,this._tapError=oe||J,this._tapComplete=ve||J,(0,Z.m)(Ie)?(this._context=this,this._tapNext=Ie):Ie&&(this._context=Ie,this._tapNext=Ie.next||J,this._tapError=Ie.error||J,this._tapComplete=Ie.complete||J)}_next(De){try{this._tapNext.call(this._context,De)}catch(Ie){return void this.destination.error(Ie)}this.destination.next(De)}_error(De){try{this._tapError.call(this._context,De)}catch(Ie){return void this.destination.error(Ie)}this.destination.error(De)}_complete(){try{this._tapComplete.call(this._context)}catch(De){return void this.destination.error(De)}return this.destination.complete()}}},4907:(dn,ft,L)=>{"use strict";L.d(ft,{T:()=>Z});var a=L(4450),J=L(3489);function Z(Ae=ae){return De=>De.lift(new We(Ae))}class We{constructor(De){this.errorFactory=De}call(De,Ie){return Ie.subscribe(new Ne(De,this.errorFactory))}}class Ne extends J.L{constructor(De,Ie){super(De),this.errorFactory=Ie,this.hasValue=!1}_next(De){this.hasValue=!0,this.destination.next(De)}_complete(){if(this.hasValue)return this.destination.complete();{let De;try{De=this.errorFactory()}catch(Ie){De=Ie}this.destination.error(De)}}}function ae(){return new a.K}},6454:(dn,ft,L)=>{"use strict";L.d(ft,{r:()=>Z});var a=L(2916),J=L(2654);function Z(We,Ne){return new a.y(ae=>{const Ae=new J.w;let De=0;return Ae.add(Ne.schedule(function(){De!==We.length?(ae.next(We[De++]),ae.closed||Ae.add(this.schedule())):ae.complete()})),Ae})}},6686:(dn,ft,L)=>{"use strict";L.d(ft,{o:()=>Z});var a=L(2654);class J extends a.w{constructor(Ne,ae){super()}schedule(Ne,ae=0){return this}}class Z extends J{constructor(Ne,ae){super(Ne,ae),this.scheduler=Ne,this.work=ae,this.pending=!1}schedule(Ne,ae=0){if(this.closed)return this;this.state=Ne;const Ae=this.id,De=this.scheduler;return null!=Ae&&(this.id=this.recycleAsyncId(De,Ae,ae)),this.pending=!0,this.delay=ae,this.id=this.id||this.requestAsyncId(De,this.id,ae),this}requestAsyncId(Ne,ae,Ae=0){return setInterval(Ne.flush.bind(Ne,this),Ae)}recycleAsyncId(Ne,ae,Ae=0){if(null!==Ae&&this.delay===Ae&&!1===this.pending)return ae;clearInterval(ae)}execute(Ne,ae){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ae=this._execute(Ne,ae);if(Ae)return Ae;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ne,ae){let De,Ae=!1;try{this.work(Ne)}catch(Ie){Ae=!0,De=!!Ie&&Ie||new Error(Ie)}if(Ae)return this.unsubscribe(),De}_unsubscribe(){const Ne=this.id,ae=this.scheduler,Ae=ae.actions,De=Ae.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==De&&Ae.splice(De,1),null!=Ne&&(this.id=this.recycleAsyncId(ae,Ne,null)),this.delay=null}}},2268:(dn,ft,L)=>{"use strict";L.d(ft,{v:()=>J});let a=(()=>{class Z{constructor(Ne,ae=Z.now){this.SchedulerAction=Ne,this.now=ae}schedule(Ne,ae=0,Ae){return new this.SchedulerAction(this,Ne).schedule(Ae,ae)}}return Z.now=()=>Date.now(),Z})();class J extends a{constructor(We,Ne=a.now){super(We,()=>J.delegate&&J.delegate!==this?J.delegate.now():Ne()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(We,Ne=0,ae){return J.delegate&&J.delegate!==this?J.delegate.schedule(We,Ne,ae):super.schedule(We,Ne,ae)}flush(We){const{actions:Ne}=this;if(this.active)return void Ne.push(We);let ae;this.active=!0;do{if(ae=We.execute(We.state,We.delay))break}while(We=Ne.shift());if(this.active=!1,ae){for(;We=Ne.shift();)We.unsubscribe();throw ae}}}},353:(dn,ft,L)=>{"use strict";L.d(ft,{z:()=>Z,P:()=>We});var a=L(6686);const Z=new(L(2268).v)(a.o),We=Z},341:(dn,ft,L)=>{"use strict";L.d(ft,{c:()=>ae,N:()=>Ne});var a=L(6686),Z=L(2268);const Ne=new class We extends Z.v{}(class J extends a.o{constructor(De,Ie){super(De,Ie),this.scheduler=De,this.work=Ie}schedule(De,Ie=0){return Ie>0?super.schedule(De,Ie):(this.delay=Ie,this.state=De,this.scheduler.flush(this),this)}execute(De,Ie){return Ie>0||this.closed?super.execute(De,Ie):this._execute(De,Ie)}requestAsyncId(De,Ie,oe=0){return null!==oe&&oe>0||null===oe&&this.delay>0?super.requestAsyncId(De,Ie,oe):De.flush(this)}}),ae=Ne},5430:(dn,ft,L)=>{"use strict";L.d(ft,{hZ:()=>J});const J=function a(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3821:(dn,ft,L)=>{"use strict";L.d(ft,{L:()=>a});const a="function"==typeof Symbol&&Symbol.observable||"@@observable"},7668:(dn,ft,L)=>{"use strict";L.d(ft,{b:()=>a});const a="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},4231:(dn,ft,L)=>{"use strict";L.d(ft,{W:()=>J});const J=(()=>{function Z(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return Z.prototype=Object.create(Error.prototype),Z})()},4450:(dn,ft,L)=>{"use strict";L.d(ft,{K:()=>J});const J=(()=>{function Z(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return Z.prototype=Object.create(Error.prototype),Z})()},5279:(dn,ft,L)=>{"use strict";L.d(ft,{N:()=>J});const J=(()=>{function Z(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return Z.prototype=Object.create(Error.prototype),Z})()},2782:(dn,ft,L)=>{"use strict";function a(J){setTimeout(()=>{throw J},0)}L.d(ft,{z:()=>a})},5379:(dn,ft,L)=>{"use strict";function a(J){return J}L.d(ft,{y:()=>a})},6688:(dn,ft,L)=>{"use strict";L.d(ft,{k:()=>a});const a=Array.isArray||(J=>J&&"number"==typeof J.length)},8515:(dn,ft,L)=>{"use strict";L.d(ft,{z:()=>a});const a=J=>J&&"number"==typeof J.length&&"function"!=typeof J},7043:(dn,ft,L)=>{"use strict";function a(J){return"function"==typeof J}L.d(ft,{m:()=>a})},7830:(dn,ft,L)=>{"use strict";function a(J){return null!==J&&"object"==typeof J}L.d(ft,{K:()=>a})},8955:(dn,ft,L)=>{"use strict";function a(J){return!!J&&"function"!=typeof J.subscribe&&"function"==typeof J.then}L.d(ft,{t:()=>a})},2866:(dn,ft,L)=>{"use strict";function a(J){return J&&"function"==typeof J.schedule}L.d(ft,{K:()=>a})},9249:(dn,ft,L)=>{"use strict";L.d(ft,{s:()=>ve});var a=L(3650),J=L(2782),We=L(5430),ae=L(3821),De=L(8515),Ie=L(8955),oe=L(7830);const ve=ne=>{if(ne&&"function"==typeof ne[ae.L])return(ne=>ce=>{const Ke=ne[ae.L]();if("function"!=typeof Ke.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return Ke.subscribe(ce)})(ne);if((0,De.z)(ne))return(0,a.V)(ne);if((0,Ie.t)(ne))return(ne=>ce=>(ne.then(Ke=>{ce.closed||(ce.next(Ke),ce.complete())},Ke=>ce.error(Ke)).then(null,J.z),ce))(ne);if(ne&&"function"==typeof ne[We.hZ])return(ne=>ce=>{const Ke=ne[We.hZ]();for(;;){let Ve;try{Ve=Ke.next()}catch(Ee){return ce.error(Ee),ce}if(Ve.done){ce.complete();break}if(ce.next(Ve.value),ce.closed)break}return"function"==typeof Ke.return&&ce.add(()=>{Ke.return&&Ke.return()}),ce})(ne);{const Ke=`You provided ${(0,oe.K)(ne)?"an invalid object":`'${ne}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(Ke)}}},3650:(dn,ft,L)=>{"use strict";L.d(ft,{V:()=>a});const a=J=>Z=>{for(let We=0,Ne=J.length;We<Ne&&!Z.closed;We++)Z.next(J[We]);Z.complete()}},448:(dn,ft,L)=>{"use strict";L.d(ft,{D:()=>Ne});var a=L(3489);class J extends a.L{constructor(Ae,De,Ie){super(),this.parent=Ae,this.outerValue=De,this.outerIndex=Ie,this.index=0}_next(Ae){this.parent.notifyNext(this.outerValue,Ae,this.outerIndex,this.index++,this)}_error(Ae){this.parent.notifyError(Ae,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Z=L(9249),We=L(2916);function Ne(ae,Ae,De,Ie,oe=new J(ae,De,Ie)){if(!oe.closed)return Ae instanceof We.y?Ae.subscribe(oe):(0,Z.s)(Ae)(oe)}},863:(dn,ft,L)=>{var a={"./ion-accordion_2.entry.js":[9654,8592,9654],"./ion-action-sheet.entry.js":[3648,8592,3648],"./ion-alert.entry.js":[1118,8592,1118],"./ion-app_8.entry.js":[53,8592,53],"./ion-avatar_3.entry.js":[4753,8592,4753],"./ion-back-button.entry.js":[2073,8592,2073],"./ion-backdrop.entry.js":[8939,8939],"./ion-breadcrumb_2.entry.js":[7544,8592,7544],"./ion-button_2.entry.js":[5652,8592,5652],"./ion-card_5.entry.js":[388,8592,388],"./ion-checkbox.entry.js":[9922,8592,9922],"./ion-chip.entry.js":[657,8592,657],"./ion-col_3.entry.js":[9824,9824],"./ion-datetime_3.entry.js":[4959,8592,4959],"./ion-fab_3.entry.js":[5836,8592,5836],"./ion-img.entry.js":[1033,1033],"./ion-infinite-scroll_2.entry.js":[8034,8592,8034],"./ion-input.entry.js":[1217,8592,1217],"./ion-item-option_3.entry.js":[2933,8592,2933],"./ion-item_8.entry.js":[3024,8592,4711],"./ion-loading.entry.js":[9434,8592,9434],"./ion-menu_3.entry.js":[8136,8592,8136],"./ion-modal.entry.js":[2349,8592,2349],"./ion-nav_2.entry.js":[5349,8592,5349],"./ion-picker-column-internal.entry.js":[7602,8592,7602],"./ion-picker-internal.entry.js":[9016,9016],"./ion-popover.entry.js":[3804,8592,3804],"./ion-progress-bar.entry.js":[4174,8592,4174],"./ion-radio_2.entry.js":[4432,8592,4432],"./ion-range.entry.js":[3545,8592,1709],"./ion-refresher_2.entry.js":[3326,8592,3326],"./ion-reorder_2.entry.js":[3583,8592,3583],"./ion-ripple-effect.entry.js":[9958,9958],"./ion-route_4.entry.js":[4330,8592,4330],"./ion-searchbar.entry.js":[8628,8592,8628],"./ion-segment_2.entry.js":[9325,8592,9325],"./ion-select_3.entry.js":[2773,8592,2773],"./ion-slide_2.entry.js":[1650,1650],"./ion-spinner.entry.js":[4908,8592,4908],"./ion-split-pane.entry.js":[9536,9536],"./ion-tab-bar_2.entry.js":[438,8592,438],"./ion-tab_2.entry.js":[1536,8592,1536],"./ion-text.entry.js":[4376,8592,4376],"./ion-textarea.entry.js":[6560,8592,6560],"./ion-toast.entry.js":[6120,8592,6120],"./ion-toggle.entry.js":[5168,8592,5168],"./ion-virtual-scroll.entry.js":[2289,2289]};function J(Z){if(!L.o(a,Z))return Promise.resolve().then(()=>{var ae=new Error("Cannot find module '"+Z+"'");throw ae.code="MODULE_NOT_FOUND",ae});var We=a[Z],Ne=We[0];return Promise.all(We.slice(1).map(L.e)).then(()=>L(Ne))}J.keys=()=>Object.keys(a),J.id=863,dn.exports=J},655:(dn,ft,L)=>{"use strict";function We(Se,fe){var ye={};for(var je in Se)Object.prototype.hasOwnProperty.call(Se,je)&&fe.indexOf(je)<0&&(ye[je]=Se[je]);if(null!=Se&&"function"==typeof Object.getOwnPropertySymbols){var Ze=0;for(je=Object.getOwnPropertySymbols(Se);Ze<je.length;Ze++)fe.indexOf(je[Ze])<0&&Object.prototype.propertyIsEnumerable.call(Se,je[Ze])&&(ye[je[Ze]]=Se[je[Ze]])}return ye}function Ne(Se,fe,ye,je){var Jt,Ze=arguments.length,Mt=Ze<3?fe:null===je?je=Object.getOwnPropertyDescriptor(fe,ye):je;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Mt=Reflect.decorate(Se,fe,ye,je);else for(var mt=Se.length-1;mt>=0;mt--)(Jt=Se[mt])&&(Mt=(Ze<3?Jt(Mt):Ze>3?Jt(fe,ye,Mt):Jt(fe,ye))||Mt);return Ze>3&&Mt&&Object.defineProperty(fe,ye,Mt),Mt}function De(Se,fe,ye,je){return new(ye||(ye=Promise))(function(Mt,Jt){function mt(q){try{Ye(je.next(q))}catch(bt){Jt(bt)}}function wt(q){try{Ye(je.throw(q))}catch(bt){Jt(bt)}}function Ye(q){q.done?Mt(q.value):function Ze(Mt){return Mt instanceof ye?Mt:new ye(function(Jt){Jt(Mt)})}(q.value).then(mt,wt)}Ye((je=je.apply(Se,fe||[])).next())})}L.d(ft,{_T:()=>We,gn:()=>Ne,mG:()=>De})},9808:(dn,ft,L)=>{"use strict";L.d(ft,{mr:()=>Et,Ov:()=>It,ez:()=>ai,K0:()=>Ae,Do:()=>dt,V_:()=>oe,Ye:()=>St,S$:()=>Fe,sg:()=>oi,O5:()=>ee,tP:()=>er,b0:()=>we,lw:()=>De,EM:()=>as,JF:()=>jr,PM:()=>vs,w_:()=>ae,bD:()=>pr,q:()=>Z,Mx:()=>Zi,HT:()=>Ne});var a=L(5e3);let J=null;function Z(){return J}function Ne(j){J||(J=j)}class ae{}const Ae=new a.OlP("DocumentToken");let De=(()=>{class j{historyGo($){throw new Error("Not implemented")}}return j.\u0275fac=function($){return new($||j)},j.\u0275prov=a.Yz7({token:j,factory:function(){return function Ie(){return(0,a.LFG)(ve)}()},providedIn:"platform"}),j})();const oe=new a.OlP("Location Initialized");let ve=(()=>{class j extends De{constructor($){super(),this._doc=$,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Z().getBaseHref(this._doc)}onPopState($){const de=Z().getGlobalEventTarget(this._doc,"window");return de.addEventListener("popstate",$,!1),()=>de.removeEventListener("popstate",$)}onHashChange($){const de=Z().getGlobalEventTarget(this._doc,"window");return de.addEventListener("hashchange",$,!1),()=>de.removeEventListener("hashchange",$)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname($){this.location.pathname=$}pushState($,de,et){ne()?this._history.pushState($,de,et):this.location.hash=et}replaceState($,de,et){ne()?this._history.replaceState($,de,et):this.location.hash=et}forward(){this._history.forward()}back(){this._history.back()}historyGo($=0){this._history.go($)}getState(){return this._history.state}}return j.\u0275fac=function($){return new($||j)(a.LFG(Ae))},j.\u0275prov=a.Yz7({token:j,factory:function(){return function ce(){return new ve((0,a.LFG)(Ae))}()},providedIn:"platform"}),j})();function ne(){return!!window.history.pushState}function Ke(j,se){if(0==j.length)return se;if(0==se.length)return j;let $=0;return j.endsWith("/")&&$++,se.startsWith("/")&&$++,2==$?j+se.substring(1):1==$?j+se:j+"/"+se}function Ve(j){const se=j.match(/#|\?|$/),$=se&&se.index||j.length;return j.slice(0,$-("/"===j[$-1]?1:0))+j.slice($)}function Ee(j){return j&&"?"!==j[0]?"?"+j:j}let Fe=(()=>{class j{historyGo($){throw new Error("Not implemented")}}return j.\u0275fac=function($){return new($||j)},j.\u0275prov=a.Yz7({token:j,factory:function(){return function Be(j){const se=(0,a.LFG)(Ae).location;return new we((0,a.LFG)(De),se&&se.origin||"")}()},providedIn:"root"}),j})();const Et=new a.OlP("appBaseHref");let we=(()=>{class j extends Fe{constructor($,de){if(super(),this._platformLocation=$,this._removeListenerFns=[],null==de&&(de=this._platformLocation.getBaseHrefFromDOM()),null==de)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=de}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState($){this._removeListenerFns.push(this._platformLocation.onPopState($),this._platformLocation.onHashChange($))}getBaseHref(){return this._baseHref}prepareExternalUrl($){return Ke(this._baseHref,$)}path($=!1){const de=this._platformLocation.pathname+Ee(this._platformLocation.search),et=this._platformLocation.hash;return et&&$?`${de}${et}`:de}pushState($,de,et,ct){const zt=this.prepareExternalUrl(et+Ee(ct));this._platformLocation.pushState($,de,zt)}replaceState($,de,et,ct){const zt=this.prepareExternalUrl(et+Ee(ct));this._platformLocation.replaceState($,de,zt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo($=0){var de,et;null===(et=(de=this._platformLocation).historyGo)||void 0===et||et.call(de,$)}}return j.\u0275fac=function($){return new($||j)(a.LFG(De),a.LFG(Et,8))},j.\u0275prov=a.Yz7({token:j,factory:j.\u0275fac}),j})(),dt=(()=>{class j extends Fe{constructor($,de){super(),this._platformLocation=$,this._baseHref="",this._removeListenerFns=[],null!=de&&(this._baseHref=de)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState($){this._removeListenerFns.push(this._platformLocation.onPopState($),this._platformLocation.onHashChange($))}getBaseHref(){return this._baseHref}path($=!1){let de=this._platformLocation.hash;return null==de&&(de="#"),de.length>0?de.substring(1):de}prepareExternalUrl($){const de=Ke(this._baseHref,$);return de.length>0?"#"+de:de}pushState($,de,et,ct){let zt=this.prepareExternalUrl(et+Ee(ct));0==zt.length&&(zt=this._platformLocation.pathname),this._platformLocation.pushState($,de,zt)}replaceState($,de,et,ct){let zt=this.prepareExternalUrl(et+Ee(ct));0==zt.length&&(zt=this._platformLocation.pathname),this._platformLocation.replaceState($,de,zt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo($=0){var de,et;null===(et=(de=this._platformLocation).historyGo)||void 0===et||et.call(de,$)}}return j.\u0275fac=function($){return new($||j)(a.LFG(De),a.LFG(Et,8))},j.\u0275prov=a.Yz7({token:j,factory:j.\u0275fac}),j})(),St=(()=>{class j{constructor($,de){this._subject=new a.vpe,this._urlChangeListeners=[],this._platformStrategy=$;const et=this._platformStrategy.getBaseHref();this._platformLocation=de,this._baseHref=Ve(Tt(et)),this._platformStrategy.onPopState(ct=>{this._subject.emit({url:this.path(!0),pop:!0,state:ct.state,type:ct.type})})}path($=!1){return this.normalize(this._platformStrategy.path($))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo($,de=""){return this.path()==this.normalize($+Ee(de))}normalize($){return j.stripTrailingSlash(function Xe(j,se){return j&&se.startsWith(j)?se.substring(j.length):se}(this._baseHref,Tt($)))}prepareExternalUrl($){return $&&"/"!==$[0]&&($="/"+$),this._platformStrategy.prepareExternalUrl($)}go($,de="",et=null){this._platformStrategy.pushState(et,"",$,de),this._notifyUrlChangeListeners(this.prepareExternalUrl($+Ee(de)),et)}replaceState($,de="",et=null){this._platformStrategy.replaceState(et,"",$,de),this._notifyUrlChangeListeners(this.prepareExternalUrl($+Ee(de)),et)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo($=0){var de,et;null===(et=(de=this._platformStrategy).historyGo)||void 0===et||et.call(de,$)}onUrlChange($){this._urlChangeListeners.push($),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(de=>{this._notifyUrlChangeListeners(de.url,de.state)}))}_notifyUrlChangeListeners($="",de){this._urlChangeListeners.forEach(et=>et($,de))}subscribe($,de,et){return this._subject.subscribe({next:$,error:de,complete:et})}}return j.normalizeQueryParams=Ee,j.joinWithSlash=Ke,j.stripTrailingSlash=Ve,j.\u0275fac=function($){return new($||j)(a.LFG(Fe),a.LFG(De))},j.\u0275prov=a.Yz7({token:j,factory:function(){return function Pt(){return new St((0,a.LFG)(Fe),(0,a.LFG)(De))}()},providedIn:"root"}),j})();function Tt(j){return j.replace(/\/index.html$/,"")}function Zi(j,se){se=encodeURIComponent(se);for(const $ of j.split(";")){const de=$.indexOf("="),[et,ct]=-1==de?[$,""]:[$.slice(0,de),$.slice(de+1)];if(et.trim()===se)return decodeURIComponent(ct)}return null}class wi{constructor(se,$,de,et){this.$implicit=se,this.ngForOf=$,this.index=de,this.count=et}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let oi=(()=>{class j{constructor($,de,et){this._viewContainer=$,this._template=de,this._differs=et,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf($){this._ngForOf=$,this._ngForOfDirty=!0}set ngForTrackBy($){this._trackByFn=$}get ngForTrackBy(){return this._trackByFn}set ngForTemplate($){$&&(this._template=$)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const $=this._ngForOf;!this._differ&&$&&(this._differ=this._differs.find($).create(this.ngForTrackBy))}if(this._differ){const $=this._differ.diff(this._ngForOf);$&&this._applyChanges($)}}_applyChanges($){const de=this._viewContainer;$.forEachOperation((et,ct,zt)=>{if(null==et.previousIndex)de.createEmbeddedView(this._template,new wi(et.item,this._ngForOf,-1,-1),null===zt?void 0:zt);else if(null==zt)de.remove(null===ct?void 0:ct);else if(null!==ct){const Dn=de.get(ct);de.move(Dn,zt),ki(Dn,et)}});for(let et=0,ct=de.length;et<ct;et++){const Dn=de.get(et).context;Dn.index=et,Dn.count=ct,Dn.ngForOf=this._ngForOf}$.forEachIdentityChange(et=>{ki(de.get(et.currentIndex),et)})}static ngTemplateContextGuard($,de){return!0}}return j.\u0275fac=function($){return new($||j)(a.Y36(a.s_b),a.Y36(a.Rgc),a.Y36(a.ZZ4))},j.\u0275dir=a.lG2({type:j,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),j})();function ki(j,se){j.context.$implicit=se.item}let ee=(()=>{class j{constructor($,de){this._viewContainer=$,this._context=new _e,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=de}set ngIf($){this._context.$implicit=this._context.ngIf=$,this._updateView()}set ngIfThen($){Je("ngIfThen",$),this._thenTemplateRef=$,this._thenViewRef=null,this._updateView()}set ngIfElse($){Je("ngIfElse",$),this._elseTemplateRef=$,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard($,de){return!0}}return j.\u0275fac=function($){return new($||j)(a.Y36(a.s_b),a.Y36(a.Rgc))},j.\u0275dir=a.lG2({type:j,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),j})();class _e{constructor(){this.$implicit=null,this.ngIf=null}}function Je(j,se){if(se&&!se.createEmbeddedView)throw new Error(`${j} must be a TemplateRef, but received '${(0,a.AaK)(se)}'.`)}let er=(()=>{class j{constructor($){this._viewContainerRef=$,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges($){if($.ngTemplateOutlet){const de=this._viewContainerRef;this._viewRef&&de.remove(de.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?de.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&$.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return j.\u0275fac=function($){return new($||j)(a.Y36(a.s_b))},j.\u0275dir=a.lG2({type:j,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[a.TTD]}),j})();class si{createSubscription(se,$){return se.subscribe({next:$,error:de=>{throw de}})}dispose(se){se.unsubscribe()}onDestroy(se){se.unsubscribe()}}class _i{createSubscription(se,$){return se.then($,de=>{throw de})}dispose(se){}onDestroy(se){}}const ot=new _i,nt=new si;let It=(()=>{class j{constructor($){this._ref=$,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform($){return this._obj?$!==this._obj?(this._dispose(),this.transform($)):this._latestValue:($&&this._subscribe($),this._latestValue)}_subscribe($){this._obj=$,this._strategy=this._selectStrategy($),this._subscription=this._strategy.createSubscription($,de=>this._updateLatestValue($,de))}_selectStrategy($){if((0,a.QGY)($))return ot;if((0,a.F4k)($))return nt;throw function Tr(j,se){return new a.vHH(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue($,de){$===this._obj&&(this._latestValue=de,this._ref.markForCheck())}}return j.\u0275fac=function($){return new($||j)(a.Y36(a.sBO,16))},j.\u0275pipe=a.Yjl({name:"async",type:j,pure:!1}),j})(),ai=(()=>{class j{}return j.\u0275fac=function($){return new($||j)},j.\u0275mod=a.oAB({type:j}),j.\u0275inj=a.cJS({}),j})();const pr="browser";function vs(j){return"server"===j}let as=(()=>{class j{}return j.\u0275prov=(0,a.Yz7)({token:j,providedIn:"root",factory:()=>new Es((0,a.LFG)(Ae),window)}),j})();class Es{constructor(se,$){this.document=se,this.window=$,this.offset=()=>[0,0]}setOffset(se){this.offset=Array.isArray(se)?()=>se:se}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(se){this.supportsScrolling()&&this.window.scrollTo(se[0],se[1])}scrollToAnchor(se){if(!this.supportsScrolling())return;const $=function ts(j,se){const $=j.getElementById(se)||j.getElementsByName(se)[0];if($)return $;if("function"==typeof j.createTreeWalker&&j.body&&(j.body.createShadowRoot||j.body.attachShadow)){const de=j.createTreeWalker(j.body,NodeFilter.SHOW_ELEMENT);let et=de.currentNode;for(;et;){const ct=et.shadowRoot;if(ct){const zt=ct.getElementById(se)||ct.querySelector(`[name="${se}"]`);if(zt)return zt}et=de.nextNode()}}return null}(this.document,se);$&&(this.scrollToElement($),$.focus())}setHistoryScrollRestoration(se){if(this.supportScrollRestoration()){const $=this.window.history;$&&$.scrollRestoration&&($.scrollRestoration=se)}}scrollToElement(se){const $=se.getBoundingClientRect(),de=$.left+this.window.pageXOffset,et=$.top+this.window.pageYOffset,ct=this.offset();this.window.scrollTo(de-ct[0],et-ct[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const se=ji(this.window.history)||ji(Object.getPrototypeOf(this.window.history));return!(!se||!se.writable&&!se.set)}catch(se){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(se){return!1}}}function ji(j){return Object.getOwnPropertyDescriptor(j,"scrollRestoration")}class jr{}},520:(dn,ft,L)=>{"use strict";L.d(ft,{eN:()=>Ze,JF:()=>Bn});var a=L(9808),J=L(5e3),Z=L(1086),We=L(2916),Ne=L(1406),ae=L(2198),Ae=L(4850);class De{}class Ie{}class oe{constructor(He){this.normalizedNames=new Map,this.lazyUpdate=null,He?this.lazyInit="string"==typeof He?()=>{this.headers=new Map,He.split("\n").forEach(Te=>{const en=Te.indexOf(":");if(en>0){const kt=Te.slice(0,en),qt=kt.toLowerCase(),cn=Te.slice(en+1).trim();this.maybeSetNormalizedName(kt,qt),this.headers.has(qt)?this.headers.get(qt).push(cn):this.headers.set(qt,[cn])}})}:()=>{this.headers=new Map,Object.keys(He).forEach(Te=>{let en=He[Te];const kt=Te.toLowerCase();"string"==typeof en&&(en=[en]),en.length>0&&(this.headers.set(kt,en),this.maybeSetNormalizedName(Te,kt))})}:this.headers=new Map}has(He){return this.init(),this.headers.has(He.toLowerCase())}get(He){this.init();const Te=this.headers.get(He.toLowerCase());return Te&&Te.length>0?Te[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(He){return this.init(),this.headers.get(He.toLowerCase())||null}append(He,Te){return this.clone({name:He,value:Te,op:"a"})}set(He,Te){return this.clone({name:He,value:Te,op:"s"})}delete(He,Te){return this.clone({name:He,value:Te,op:"d"})}maybeSetNormalizedName(He,Te){this.normalizedNames.has(Te)||this.normalizedNames.set(Te,He)}init(){this.lazyInit&&(this.lazyInit instanceof oe?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(He=>this.applyUpdate(He)),this.lazyUpdate=null))}copyFrom(He){He.init(),Array.from(He.headers.keys()).forEach(Te=>{this.headers.set(Te,He.headers.get(Te)),this.normalizedNames.set(Te,He.normalizedNames.get(Te))})}clone(He){const Te=new oe;return Te.lazyInit=this.lazyInit&&this.lazyInit instanceof oe?this.lazyInit:this,Te.lazyUpdate=(this.lazyUpdate||[]).concat([He]),Te}applyUpdate(He){const Te=He.name.toLowerCase();switch(He.op){case"a":case"s":let en=He.value;if("string"==typeof en&&(en=[en]),0===en.length)return;this.maybeSetNormalizedName(He.name,Te);const kt=("a"===He.op?this.headers.get(Te):void 0)||[];kt.push(...en),this.headers.set(Te,kt);break;case"d":const qt=He.value;if(qt){let cn=this.headers.get(Te);if(!cn)return;cn=cn.filter(Zn=>-1===qt.indexOf(Zn)),0===cn.length?(this.headers.delete(Te),this.normalizedNames.delete(Te)):this.headers.set(Te,cn)}else this.headers.delete(Te),this.normalizedNames.delete(Te)}}forEach(He){this.init(),Array.from(this.normalizedNames.keys()).forEach(Te=>He(this.normalizedNames.get(Te),this.headers.get(Te)))}}class ve{encodeKey(He){return Ve(He)}encodeValue(He){return Ve(He)}decodeKey(He){return decodeURIComponent(He)}decodeValue(He){return decodeURIComponent(He)}}const ce=/%(\d[a-f0-9])/gi,Ke={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function Ve(_t){return encodeURIComponent(_t).replace(ce,(He,Te)=>{var en;return null!==(en=Ke[Te])&&void 0!==en?en:He})}function Ee(_t){return`${_t}`}class Fe{constructor(He={}){if(this.updates=null,this.cloneFrom=null,this.encoder=He.encoder||new ve,He.fromString){if(He.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function ne(_t,He){const Te=new Map;return _t.length>0&&_t.replace(/^\?/,"").split("&").forEach(kt=>{const qt=kt.indexOf("="),[cn,Zn]=-1==qt?[He.decodeKey(kt),""]:[He.decodeKey(kt.slice(0,qt)),He.decodeValue(kt.slice(qt+1))],Jn=Te.get(cn)||[];Jn.push(Zn),Te.set(cn,Jn)}),Te}(He.fromString,this.encoder)}else He.fromObject?(this.map=new Map,Object.keys(He.fromObject).forEach(Te=>{const en=He.fromObject[Te];this.map.set(Te,Array.isArray(en)?en:[en])})):this.map=null}has(He){return this.init(),this.map.has(He)}get(He){this.init();const Te=this.map.get(He);return Te?Te[0]:null}getAll(He){return this.init(),this.map.get(He)||null}keys(){return this.init(),Array.from(this.map.keys())}append(He,Te){return this.clone({param:He,value:Te,op:"a"})}appendAll(He){const Te=[];return Object.keys(He).forEach(en=>{const kt=He[en];Array.isArray(kt)?kt.forEach(qt=>{Te.push({param:en,value:qt,op:"a"})}):Te.push({param:en,value:kt,op:"a"})}),this.clone(Te)}set(He,Te){return this.clone({param:He,value:Te,op:"s"})}delete(He,Te){return this.clone({param:He,value:Te,op:"d"})}toString(){return this.init(),this.keys().map(He=>{const Te=this.encoder.encodeKey(He);return this.map.get(He).map(en=>Te+"="+this.encoder.encodeValue(en)).join("&")}).filter(He=>""!==He).join("&")}clone(He){const Te=new Fe({encoder:this.encoder});return Te.cloneFrom=this.cloneFrom||this,Te.updates=(this.updates||[]).concat(He),Te}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(He=>this.map.set(He,this.cloneFrom.map.get(He))),this.updates.forEach(He=>{switch(He.op){case"a":case"s":const Te=("a"===He.op?this.map.get(He.param):void 0)||[];Te.push(Ee(He.value)),this.map.set(He.param,Te);break;case"d":if(void 0===He.value){this.map.delete(He.param);break}{let en=this.map.get(He.param)||[];const kt=en.indexOf(Ee(He.value));-1!==kt&&en.splice(kt,1),en.length>0?this.map.set(He.param,en):this.map.delete(He.param)}}}),this.cloneFrom=this.updates=null)}}class Et{constructor(){this.map=new Map}set(He,Te){return this.map.set(He,Te),this}get(He){return this.map.has(He)||this.map.set(He,He.defaultValue()),this.map.get(He)}delete(He){return this.map.delete(He),this}has(He){return this.map.has(He)}keys(){return this.map.keys()}}function dt(_t){return"undefined"!=typeof ArrayBuffer&&_t instanceof ArrayBuffer}function St(_t){return"undefined"!=typeof Blob&&_t instanceof Blob}function Pt(_t){return"undefined"!=typeof FormData&&_t instanceof FormData}class Tt{constructor(He,Te,en,kt){let qt;if(this.url=Te,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=He.toUpperCase(),function we(_t){switch(_t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||kt?(this.body=void 0!==en?en:null,qt=kt):qt=en,qt&&(this.reportProgress=!!qt.reportProgress,this.withCredentials=!!qt.withCredentials,qt.responseType&&(this.responseType=qt.responseType),qt.headers&&(this.headers=qt.headers),qt.context&&(this.context=qt.context),qt.params&&(this.params=qt.params)),this.headers||(this.headers=new oe),this.context||(this.context=new Et),this.params){const cn=this.params.toString();if(0===cn.length)this.urlWithParams=Te;else{const Zn=Te.indexOf("?");this.urlWithParams=Te+(-1===Zn?"?":Zn<Te.length-1?"&":"")+cn}}else this.params=new Fe,this.urlWithParams=Te}serializeBody(){return null===this.body?null:dt(this.body)||St(this.body)||Pt(this.body)||function Xe(_t){return"undefined"!=typeof URLSearchParams&&_t instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Fe?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Pt(this.body)?null:St(this.body)?this.body.type||null:dt(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Fe?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(He={}){var Te;const en=He.method||this.method,kt=He.url||this.url,qt=He.responseType||this.responseType,cn=void 0!==He.body?He.body:this.body,Zn=void 0!==He.withCredentials?He.withCredentials:this.withCredentials,Jn=void 0!==He.reportProgress?He.reportProgress:this.reportProgress;let Mn=He.headers||this.headers,Fn=He.params||this.params;const vr=null!==(Te=He.context)&&void 0!==Te?Te:this.context;return void 0!==He.setHeaders&&(Mn=Object.keys(He.setHeaders).reduce((Hn,xe)=>Hn.set(xe,He.setHeaders[xe]),Mn)),He.setParams&&(Fn=Object.keys(He.setParams).reduce((Hn,xe)=>Hn.set(xe,He.setParams[xe]),Fn)),new Tt(en,kt,cn,{params:Fn,headers:Mn,context:vr,reportProgress:Jn,responseType:qt,withCredentials:Zn})}}var me=(()=>((me=me||{})[me.Sent=0]="Sent",me[me.UploadProgress=1]="UploadProgress",me[me.ResponseHeader=2]="ResponseHeader",me[me.DownloadProgress=3]="DownloadProgress",me[me.Response=4]="Response",me[me.User=5]="User",me))();class Oe{constructor(He,Te=200,en="OK"){this.headers=He.headers||new oe,this.status=void 0!==He.status?He.status:Te,this.statusText=He.statusText||en,this.url=He.url||null,this.ok=this.status>=200&&this.status<300}}class Se extends Oe{constructor(He={}){super(He),this.type=me.ResponseHeader}clone(He={}){return new Se({headers:He.headers||this.headers,status:void 0!==He.status?He.status:this.status,statusText:He.statusText||this.statusText,url:He.url||this.url||void 0})}}class fe extends Oe{constructor(He={}){super(He),this.type=me.Response,this.body=void 0!==He.body?He.body:null}clone(He={}){return new fe({body:void 0!==He.body?He.body:this.body,headers:He.headers||this.headers,status:void 0!==He.status?He.status:this.status,statusText:He.statusText||this.statusText,url:He.url||this.url||void 0})}}class ye extends Oe{constructor(He){super(He,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${He.url||"(unknown url)"}`:`Http failure response for ${He.url||"(unknown url)"}: ${He.status} ${He.statusText}`,this.error=He.error||null}}function je(_t,He){return{body:He,headers:_t.headers,context:_t.context,observe:_t.observe,params:_t.params,reportProgress:_t.reportProgress,responseType:_t.responseType,withCredentials:_t.withCredentials}}let Ze=(()=>{class _t{constructor(Te){this.handler=Te}request(Te,en,kt={}){let qt;if(Te instanceof Tt)qt=Te;else{let Jn,Mn;Jn=kt.headers instanceof oe?kt.headers:new oe(kt.headers),kt.params&&(Mn=kt.params instanceof Fe?kt.params:new Fe({fromObject:kt.params})),qt=new Tt(Te,en,void 0!==kt.body?kt.body:null,{headers:Jn,context:kt.context,params:Mn,reportProgress:kt.reportProgress,responseType:kt.responseType||"json",withCredentials:kt.withCredentials})}const cn=(0,Z.of)(qt).pipe((0,Ne.b)(Jn=>this.handler.handle(Jn)));if(Te instanceof Tt||"events"===kt.observe)return cn;const Zn=cn.pipe((0,ae.h)(Jn=>Jn instanceof fe));switch(kt.observe||"body"){case"body":switch(qt.responseType){case"arraybuffer":return Zn.pipe((0,Ae.U)(Jn=>{if(null!==Jn.body&&!(Jn.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Jn.body}));case"blob":return Zn.pipe((0,Ae.U)(Jn=>{if(null!==Jn.body&&!(Jn.body instanceof Blob))throw new Error("Response is not a Blob.");return Jn.body}));case"text":return Zn.pipe((0,Ae.U)(Jn=>{if(null!==Jn.body&&"string"!=typeof Jn.body)throw new Error("Response is not a string.");return Jn.body}));default:return Zn.pipe((0,Ae.U)(Jn=>Jn.body))}case"response":return Zn;default:throw new Error(`Unreachable: unhandled observe type ${kt.observe}}`)}}delete(Te,en={}){return this.request("DELETE",Te,en)}get(Te,en={}){return this.request("GET",Te,en)}head(Te,en={}){return this.request("HEAD",Te,en)}jsonp(Te,en){return this.request("JSONP",Te,{params:(new Fe).append(en,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(Te,en={}){return this.request("OPTIONS",Te,en)}patch(Te,en,kt={}){return this.request("PATCH",Te,je(kt,en))}post(Te,en,kt={}){return this.request("POST",Te,je(kt,en))}put(Te,en,kt={}){return this.request("PUT",Te,je(kt,en))}}return _t.\u0275fac=function(Te){return new(Te||_t)(J.LFG(De))},_t.\u0275prov=J.Yz7({token:_t,factory:_t.\u0275fac}),_t})();class Mt{constructor(He,Te){this.next=He,this.interceptor=Te}handle(He){return this.interceptor.intercept(He,this.next)}}const Jt=new J.OlP("HTTP_INTERCEPTORS");let mt=(()=>{class _t{intercept(Te,en){return en.handle(Te)}}return _t.\u0275fac=function(Te){return new(Te||_t)},_t.\u0275prov=J.Yz7({token:_t,factory:_t.\u0275fac}),_t})();const sn=/^\)\]\}',?\n/;let kn=(()=>{class _t{constructor(Te){this.xhrFactory=Te}handle(Te){if("JSONP"===Te.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new We.y(en=>{const kt=this.xhrFactory.build();if(kt.open(Te.method,Te.urlWithParams),Te.withCredentials&&(kt.withCredentials=!0),Te.headers.forEach((xe,qe)=>kt.setRequestHeader(xe,qe.join(","))),Te.headers.has("Accept")||kt.setRequestHeader("Accept","application/json, text/plain, */*"),!Te.headers.has("Content-Type")){const xe=Te.detectContentTypeHeader();null!==xe&&kt.setRequestHeader("Content-Type",xe)}if(Te.responseType){const xe=Te.responseType.toLowerCase();kt.responseType="json"!==xe?xe:"text"}const qt=Te.serializeBody();let cn=null;const Zn=()=>{if(null!==cn)return cn;const xe=kt.statusText||"OK",qe=new oe(kt.getAllResponseHeaders()),rt=function bn(_t){return"responseURL"in _t&&_t.responseURL?_t.responseURL:/^X-Request-URL:/m.test(_t.getAllResponseHeaders())?_t.getResponseHeader("X-Request-URL"):null}(kt)||Te.url;return cn=new Se({headers:qe,status:kt.status,statusText:xe,url:rt}),cn},Jn=()=>{let{headers:xe,status:qe,statusText:rt,url:Lt}=Zn(),Ge=null;204!==qe&&(Ge=void 0===kt.response?kt.responseText:kt.response),0===qe&&(qe=Ge?200:0);let ht=qe>=200&&qe<300;if("json"===Te.responseType&&"string"==typeof Ge){const tn=Ge;Ge=Ge.replace(sn,"");try{Ge=""!==Ge?JSON.parse(Ge):null}catch(un){Ge=tn,ht&&(ht=!1,Ge={error:un,text:Ge})}}ht?(en.next(new fe({body:Ge,headers:xe,status:qe,statusText:rt,url:Lt||void 0})),en.complete()):en.error(new ye({error:Ge,headers:xe,status:qe,statusText:rt,url:Lt||void 0}))},Mn=xe=>{const{url:qe}=Zn(),rt=new ye({error:xe,status:kt.status||0,statusText:kt.statusText||"Unknown Error",url:qe||void 0});en.error(rt)};let Fn=!1;const vr=xe=>{Fn||(en.next(Zn()),Fn=!0);let qe={type:me.DownloadProgress,loaded:xe.loaded};xe.lengthComputable&&(qe.total=xe.total),"text"===Te.responseType&&!!kt.responseText&&(qe.partialText=kt.responseText),en.next(qe)},Hn=xe=>{let qe={type:me.UploadProgress,loaded:xe.loaded};xe.lengthComputable&&(qe.total=xe.total),en.next(qe)};return kt.addEventListener("load",Jn),kt.addEventListener("error",Mn),kt.addEventListener("timeout",Mn),kt.addEventListener("abort",Mn),Te.reportProgress&&(kt.addEventListener("progress",vr),null!==qt&&kt.upload&&kt.upload.addEventListener("progress",Hn)),kt.send(qt),en.next({type:me.Sent}),()=>{kt.removeEventListener("error",Mn),kt.removeEventListener("abort",Mn),kt.removeEventListener("load",Jn),kt.removeEventListener("timeout",Mn),Te.reportProgress&&(kt.removeEventListener("progress",vr),null!==qt&&kt.upload&&kt.upload.removeEventListener("progress",Hn)),kt.readyState!==kt.DONE&&kt.abort()}})}}return _t.\u0275fac=function(Te){return new(Te||_t)(J.LFG(a.JF))},_t.\u0275prov=J.Yz7({token:_t,factory:_t.\u0275fac}),_t})();const _n=new J.OlP("XSRF_COOKIE_NAME"),gn=new J.OlP("XSRF_HEADER_NAME");class qn{}let Zr=(()=>{class _t{constructor(Te,en,kt){this.doc=Te,this.platform=en,this.cookieName=kt,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const Te=this.doc.cookie||"";return Te!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,a.Mx)(Te,this.cookieName),this.lastCookieString=Te),this.lastToken}}return _t.\u0275fac=function(Te){return new(Te||_t)(J.LFG(a.K0),J.LFG(J.Lbi),J.LFG(_n))},_t.\u0275prov=J.Yz7({token:_t,factory:_t.\u0275fac}),_t})(),Qn=(()=>{class _t{constructor(Te,en){this.tokenService=Te,this.headerName=en}intercept(Te,en){const kt=Te.url.toLowerCase();if("GET"===Te.method||"HEAD"===Te.method||kt.startsWith("http://")||kt.startsWith("https://"))return en.handle(Te);const qt=this.tokenService.getToken();return null!==qt&&!Te.headers.has(this.headerName)&&(Te=Te.clone({headers:Te.headers.set(this.headerName,qt)})),en.handle(Te)}}return _t.\u0275fac=function(Te){return new(Te||_t)(J.LFG(qn),J.LFG(gn))},_t.\u0275prov=J.Yz7({token:_t,factory:_t.\u0275fac}),_t})(),Yn=(()=>{class _t{constructor(Te,en){this.backend=Te,this.injector=en,this.chain=null}handle(Te){if(null===this.chain){const en=this.injector.get(Jt,[]);this.chain=en.reduceRight((kt,qt)=>new Mt(kt,qt),this.backend)}return this.chain.handle(Te)}}return _t.\u0275fac=function(Te){return new(Te||_t)(J.LFG(Ie),J.LFG(J.zs3))},_t.\u0275prov=J.Yz7({token:_t,factory:_t.\u0275fac}),_t})(),cr=(()=>{class _t{static disable(){return{ngModule:_t,providers:[{provide:Qn,useClass:mt}]}}static withOptions(Te={}){return{ngModule:_t,providers:[Te.cookieName?{provide:_n,useValue:Te.cookieName}:[],Te.headerName?{provide:gn,useValue:Te.headerName}:[]]}}}return _t.\u0275fac=function(Te){return new(Te||_t)},_t.\u0275mod=J.oAB({type:_t}),_t.\u0275inj=J.cJS({providers:[Qn,{provide:Jt,useExisting:Qn,multi:!0},{provide:qn,useClass:Zr},{provide:_n,useValue:"XSRF-TOKEN"},{provide:gn,useValue:"X-XSRF-TOKEN"}]}),_t})(),Bn=(()=>{class _t{}return _t.\u0275fac=function(Te){return new(Te||_t)},_t.\u0275mod=J.oAB({type:_t}),_t.\u0275inj=J.cJS({providers:[Ze,{provide:De,useClass:Yn},kn,{provide:Ie,useExisting:kn}],imports:[[cr.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),_t})()},5e3:(dn,ft,L)=>{"use strict";L.d(ft,{deG:()=>Qa,tb:()=>gE,AFp:()=>dE,ip1:()=>cE,CZH:()=>bv,hGG:()=>aI,z2F:()=>Av,sBO:()=>zw,Sil:()=>Dw,_Vd:()=>Wy,EJc:()=>Iw,SBq:()=>nm,qLn:()=>Ml,vpe:()=>Zc,tBr:()=>Li,XFs:()=>on,OlP:()=>zi,zs3:()=>ll,ZZ4:()=>kv,aQg:()=>Nv,soG:()=>Iv,YKP:()=>I0,h0i:()=>Tp,PXZ:()=>Lw,R0b:()=>ac,FiY:()=>_l,Lbi:()=>pE,g9A:()=>fE,Qsj:()=>Eb,FYo:()=>_0,JOm:()=>K,q3G:()=>Cr,tp0:()=>tl,Rgc:()=>om,dDg:()=>vE,q4F:()=>E0,GfV:()=>v0,s_b:()=>Ky,ifc:()=>kt,eFA:()=>wE,G48:()=>Gw,Gpc:()=>ve,X6Q:()=>Hw,_c5:()=>oI,VLi:()=>kw,c2e:()=>mE,zSh:()=>tg,wAp:()=>Hr,vHH:()=>Ve,EiD:()=>pu,mCW:()=>mo,qzn:()=>Ta,JVY:()=>Cl,pB0:()=>mc,eBb:()=>td,L6k:()=>ed,LAX:()=>Nd,cg1:()=>vp,kL8:()=>yh,yhl:()=>Jc,dqk:()=>Mn,sIi:()=>Xh,CqO:()=>kg,QGY:()=>Og,F4k:()=>ly,RDi:()=>ji,AaK:()=>De,z3N:()=>Wo,qOj:()=>Zh,TTD:()=>Xi,_Bn:()=>g0,xp6:()=>Lh,uIk:()=>ep,ekj:()=>xd,Suo:()=>H0,Xpm:()=>vn,lG2:()=>st,Yz7:()=>tt,cJS:()=>Ct,oAB:()=>Gr,Yjl:()=>Re,Y36:()=>sf,_UZ:()=>Rg,GkF:()=>Pg,BQk:()=>cp,ynx:()=>up,qZA:()=>lp,TgZ:()=>af,EpF:()=>S_,n5z:()=>Qt,LFG:()=>Ti,$8M:()=>Jr,$Z:()=>Hs,NdJ:()=>ru,CRH:()=>G0,oxw:()=>uy,ALo:()=>k0,lcZ:()=>N0,Hsn:()=>uf,F$t:()=>Fg,Q6J:()=>oy,s9C:()=>Lg,DdM:()=>S0,VKq:()=>A0,iGM:()=>$0,CHM:()=>v,LSH:()=>Ha,YNc:()=>np,_uU:()=>Gg,Oqu:()=>Mu,hij:()=>mp,Gf:()=>j0});var a=L(8929),J=L(2654),Z=L(2916),We=L(6787),Ne=L(2474);function ae(n){for(let r in n)if(n[r]===ae)return r;throw Error("Could not find renamed property on target object.")}function Ae(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function De(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(De).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function Ie(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const oe=ae({__forward_ref__:ae});function ve(n){return n.__forward_ref__=ve,n.toString=function(){return De(this())},n}function ne(n){return ce(n)?n():n}function ce(n){return"function"==typeof n&&n.hasOwnProperty(oe)&&n.__forward_ref__===ve}class Ve extends Error{constructor(r,s){super(function Ee(n,r){return`NG0${Math.abs(n)}${r?": "+r:""}`}(r,s)),this.code=r}}function Fe(n){return"string"==typeof n?n:null==n?"":String(n)}function Be(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Fe(n)}function St(n,r){const s=r?` in ${r}`:"";throw new Ve(-201,`No provider for ${Be(n)} found${s}`)}function wt(n,r){null==n&&function Ye(n,r,s,l){throw new Error(`ASSERTION ERROR: ${n}`+(null==l?"":` [Expected=> ${s} ${l} ${r} <=Actual]`))}(r,n,null,"!=")}function tt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ct(n){return{providers:n.providers||[],imports:n.imports||[]}}function sn(n){return bn(n,qn)||bn(n,Qn)}function bn(n,r){return n.hasOwnProperty(r)?n[r]:null}function gn(n){return n&&(n.hasOwnProperty(Zr)||n.hasOwnProperty(Yn))?n[Zr]:null}const qn=ae({\u0275prov:ae}),Zr=ae({\u0275inj:ae}),Qn=ae({ngInjectableDef:ae}),Yn=ae({ngInjectorDef:ae});var on=(()=>((on=on||{})[on.Default=0]="Default",on[on.Host=1]="Host",on[on.Self=2]="Self",on[on.SkipSelf=4]="SkipSelf",on[on.Optional=8]="Optional",on))();let Rr;function Bn(n){const r=Rr;return Rr=n,r}function nr(n,r,s){const l=sn(n);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:s&on.Optional?null:void 0!==r?r:void St(De(n),"Injector")}function _t(n){return{toString:n}.toString()}var He=(()=>((He=He||{})[He.OnPush=0]="OnPush",He[He.Default=1]="Default",He))(),kt=(()=>{return(n=kt||(kt={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",kt;var n})();const qt="undefined"!=typeof globalThis&&globalThis,cn="undefined"!=typeof window&&window,Zn="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Mn=qt||"undefined"!=typeof global&&global||cn||Zn,Hn={},xe=[],qe=ae({\u0275cmp:ae}),rt=ae({\u0275dir:ae}),Lt=ae({\u0275pipe:ae}),Ge=ae({\u0275mod:ae}),ht=ae({\u0275fac:ae}),tn=ae({__NG_ELEMENT_ID__:ae});let un=0;function vn(n){return _t(()=>{const s={},l={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:s,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===He.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||xe,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||kt.Emulated,id:"c",styles:n.styles||xe,_:null,setInput:null,schemas:n.schemas||null,tView:null},f=n.directives,y=n.features,T=n.pipes;return l.id+=un++,l.inputs=Dt(n.inputs,s),l.outputs=Dt(n.outputs),y&&y.forEach(R=>R(l)),l.directiveDefs=f?()=>("function"==typeof f?f():f).map(Gn):null,l.pipeDefs=T?()=>("function"==typeof T?T():T).map(An):null,l})}function Gn(n){return gt(n)||function Kt(n){return n[rt]||null}(n)}function An(n){return function Ln(n){return n[Lt]||null}(n)}const Sr={};function Gr(n){return _t(()=>{const r={type:n.type,bootstrap:n.bootstrap||xe,declarations:n.declarations||xe,imports:n.imports||xe,exports:n.exports||xe,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(Sr[n.id]=n.type),r})}function Dt(n,r){if(null==n)return Hn;const s={};for(const l in n)if(n.hasOwnProperty(l)){let f=n[l],y=f;Array.isArray(f)&&(y=f[1],f=f[0]),s[f]=l,r&&(r[f]=y)}return s}const st=vn;function Re(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function gt(n){return n[qe]||null}function zn(n,r){const s=n[Ge]||null;if(!s&&!0===r)throw new Error(`Type ${De(n)} does not have '\u0275mod' property.`);return s}function be(n){return Array.isArray(n)&&"object"==typeof n[1]}function ke(n){return Array.isArray(n)&&!0===n[1]}function yt(n){return 0!=(8&n.flags)}function jt(n){return 2==(2&n.flags)}function Nt(n){return 1==(1&n.flags)}function Ot(n){return null!==n.template}function Tn(n){return 0!=(512&n[2])}function hi(n,r){return n.hasOwnProperty(ht)?n[ht]:null}class Or{constructor(r,s,l){this.previousValue=r,this.currentValue=s,this.firstChange=l}isFirstChange(){return this.firstChange}}function Xi(){return _s}function _s(n){return n.type.prototype.ngOnChanges&&(n.setInput=ro),Ss}function Ss(){const n=pr(this),r=null==n?void 0:n.current;if(r){const s=n.previous;if(s===Hn)n.previous=r;else for(let l in r)s[l]=r[l];n.current=null,this.ngOnChanges(r)}}function ro(n,r,s,l){const f=pr(n)||function Ii(n,r){return n[ai]=r}(n,{previous:Hn,current:null}),y=f.current||(f.current={}),T=f.previous,R=this.declaredInputs[s],F=T[R];y[R]=new Or(F&&F.currentValue,r,T===Hn),n[l]=r}Xi.ngInherit=!0;const ai="__ngSimpleChanges__";function pr(n){return n[ai]||null}let Es;function ji(n){Es=n}function jr(n){return!!n.listen}const j={createRenderer:(n,r)=>function ts(){return void 0!==Es?Es:"undefined"!=typeof document?document:void 0}()};function $(n){for(;Array.isArray(n);)n=n[0];return n}function ct(n,r){return $(r[n])}function zt(n,r){return $(r[n.index])}function gr(n,r){return n.data[r]}function dr(n,r){const s=r[n];return be(s)?s:s[0]}function wr(n){return 4==(4&n[2])}function Fi(n){return 128==(128&n[2])}function vi(n,r){return null==r?null:n[r]}function bs(n){n[18]=0}function ns(n,r){n[5]+=r;let s=n,l=n[3];for(;null!==l&&(1===r&&1===s[5]||-1===r&&0===s[5]);)l[5]+=r,s=l,l=l[3]}const Xn={lFrame:Ma(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function re(){return Xn.bindingsEnabled}function k(){return Xn.lFrame.lView}function b(){return Xn.lFrame.tView}function v(n){return Xn.lFrame.contextLView=n,n[8]}function C(){let n=W();for(;null!==n&&64===n.type;)n=n.parent;return n}function W(){return Xn.lFrame.currentTNode}function Le(n,r){const s=Xn.lFrame;s.currentTNode=n,s.isParent=r}function vt(){return Xn.lFrame.isParent}function Ht(){Xn.lFrame.isParent=!1}function or(){return Xn.isInCheckNoChangesMode}function mr(n){Xn.isInCheckNoChangesMode=n}function Dr(){const n=Xn.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function Di(){return Xn.lFrame.bindingIndex++}function pi(n,r){const s=Xn.lFrame;s.bindingIndex=s.bindingRootIndex=n,is(r)}function is(n){Xn.lFrame.currentDirectiveIndex=n}function ho(){return Xn.lFrame.currentQueryIndex}function jo(n){Xn.lFrame.currentQueryIndex=n}function fo(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function po(n,r,s){if(s&on.SkipSelf){let f=r,y=n;for(;!(f=f.parent,null!==f||s&on.Host||(f=fo(y),null===f||(y=y[15],10&f.type))););if(null===f)return!1;r=f,n=y}const l=Xn.lFrame=ua();return l.currentTNode=r,l.lView=n,!0}function No(n){const r=ua(),s=n[1];Xn.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function ua(){const n=Xn.lFrame,r=null===n?null:n.child;return null===r?Ma(n):r}function Ma(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function Os(){const n=Xn.lFrame;return Xn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Ya=Os;function Yo(){const n=Os();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ks(){return Xn.lFrame.selectedIndex}function Co(n){Xn.lFrame.selectedIndex=n}function ss(){const n=Xn.lFrame;return gr(n.tView,n.selectedIndex)}function cl(n,r){for(let s=r.directiveStart,l=r.directiveEnd;s<l;s++){const y=n.data[s].type.prototype,{ngAfterContentInit:T,ngAfterContentChecked:R,ngAfterViewInit:F,ngAfterViewChecked:X,ngOnDestroy:ie}=y;T&&(n.contentHooks||(n.contentHooks=[])).push(-s,T),R&&((n.contentHooks||(n.contentHooks=[])).push(s,R),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,R)),F&&(n.viewHooks||(n.viewHooks=[])).push(-s,F),X&&((n.viewHooks||(n.viewHooks=[])).push(s,X),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,X)),null!=ie&&(n.destroyHooks||(n.destroyHooks=[])).push(s,ie)}}function Do(n,r,s){hs(n,r,3,s)}function Ns(n,r,s,l){(3&n[2])===s&&hs(n,r,s,l)}function Ho(n,r){let s=n[2];(3&s)===r&&(s&=2047,s+=1,n[2]=s)}function hs(n,r,s,l){const y=null!=l?l:-1,T=r.length-1;let R=0;for(let F=void 0!==l?65535&n[18]:0;F<T;F++)if("number"==typeof r[F+1]){if(R=r[F],null!=l&&R>=l)break}else r[F]<0&&(n[18]+=65536),(R<y||-1==y)&&(Xa(n,s,r,F),n[18]=(4294901760&n[18])+F+2),F++}function Xa(n,r,s,l){const f=s[l]<0,y=s[l+1],R=n[f?-s[l]:s[l]];if(f){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{y.call(R)}finally{}}}else try{y.call(R)}finally{}}class ca{constructor(r,s,l){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=l}}function Is(n,r,s){const l=jr(n);let f=0;for(;f<s.length;){const y=s[f];if("number"==typeof y){if(0!==y)break;f++;const T=s[f++],R=s[f++],F=s[f++];l?n.setAttribute(r,R,F,T):r.setAttributeNS(T,R,F)}else{const T=y,R=s[++f];da(T)?l&&n.setProperty(r,T,R):l?n.setAttribute(r,T,R):r.setAttribute(T,R),f++}}return f}function qs(n){return 3===n||4===n||6===n}function da(n){return 64===n.charCodeAt(0)}function xs(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let l=0;l<r.length;l++){const f=r[l];"number"==typeof f?s=f:0===s||Fa(n,s,f,null,-1===s||2===s?r[++l]:null)}}return n}function Fa(n,r,s,l,f){let y=0,T=n.length;if(-1===r)T=-1;else for(;y<n.length;){const R=n[y++];if("number"==typeof R){if(R===r){T=-1;break}if(R>r){T=y-1;break}}}for(;y<n.length;){const R=n[y];if("number"==typeof R)break;if(R===s){if(null===l)return void(null!==f&&(n[y+1]=f));if(l===n[y+1])return void(n[y+2]=f)}y++,null!==l&&y++,null!==f&&y++}-1!==T&&(n.splice(T,0,r),y=T+1),n.splice(y++,0,s),null!==l&&n.splice(y++,0,l),null!==f&&n.splice(y++,0,f)}function jl(n){return-1!==n}function Ys(n){return 32767&n}function xi(n,r){let s=function Hl(n){return n>>16}(n),l=r;for(;s>0;)l=l[15],s--;return l}let To=!0;function Fo(n){const r=To;return To=n,r}let Go=0;function gi(n,r){const s=Pi(n,r);if(-1!==s)return s;const l=r[1];l.firstCreatePass&&(n.injectorIndex=r.length,ln(l.data,n),ln(r,null),ln(l.blueprint,null));const f=io(n,r),y=n.injectorIndex;if(jl(f)){const T=Ys(f),R=xi(f,r),F=R[1].data;for(let X=0;X<8;X++)r[y+X]=R[T+X]|F[T+X]}return r[y+8]=f,y}function ln(n,r){n.push(0,0,0,0,0,0,0,0,r)}function Pi(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function io(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,l=null,f=r;for(;null!==f;){const y=f[1],T=y.type;if(l=2===T?y.declTNode:1===T?f[6]:null,null===l)return-1;if(s++,f=f[15],-1!==l.injectorIndex)return l.injectorIndex|s<<16}return-1}function Cs(n,r,s){!function hl(n,r,s){let l;"string"==typeof s?l=s.charCodeAt(0)||0:s.hasOwnProperty(tn)&&(l=s[tn]),null==l&&(l=s[tn]=Go++);const f=255&l;r.data[n+(f>>5)]|=1<<f}(n,r,s)}function ur(n,r,s){if(s&on.Optional)return n;St(r,"NodeInjector")}function ha(n,r,s,l){if(s&on.Optional&&void 0===l&&(l=null),0==(s&(on.Self|on.Host))){const f=n[9],y=Bn(void 0);try{return f?f.get(r,l,s&on.Optional):nr(r,l,s&on.Optional)}finally{Bn(y)}}return ur(l,r,s)}function Sn(n,r,s,l=on.Default,f){if(null!==n){const y=function Y(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(tn)?n[tn]:void 0;return"number"==typeof r?r>=0?255&r:M:r}(s);if("function"==typeof y){if(!po(r,n,l))return l&on.Host?ur(f,s,l):ha(r,s,l,f);try{const T=y(l);if(null!=T||l&on.Optional)return T;St(s)}finally{Ya()}}else if("number"==typeof y){let T=null,R=Pi(n,r),F=-1,X=l&on.Host?r[16][6]:null;for((-1===R||l&on.SkipSelf)&&(F=-1===R?io(n,r):r[R+8],-1!==F&&$e(l,!1)?(T=r[1],R=Ys(F),r=xi(F,r)):R=-1);-1!==R;){const ie=r[1];if(ue(y,R,ie.data)){const Pe=x(R,r,s,T,l,X);if(Pe!==Vt)return Pe}F=r[R+8],-1!==F&&$e(l,r[1].data[R+8]===X)&&ue(y,R,r)?(T=ie,R=Ys(F),r=xi(F,r)):R=-1}}}return ha(r,s,l,f)}const Vt={};function M(){return new it(C(),k())}function x(n,r,s,l,f,y){const T=r[1],R=T.data[n+8],ie=S(R,T,s,null==l?jt(R)&&To:l!=T&&0!=(3&R.type),f&on.Host&&y===R);return null!==ie?U(r,T,ie,R):Vt}function S(n,r,s,l,f){const y=n.providerIndexes,T=r.data,R=1048575&y,F=n.directiveStart,ie=y>>20,at=f?R+ie:n.directiveEnd;for(let xt=l?R:R+ie;xt<at;xt++){const rn=T[xt];if(xt<F&&s===rn||xt>=F&&rn.type===s)return xt}if(f){const xt=T[F];if(xt&&Ot(xt)&&xt.type===s)return F}return null}function U(n,r,s,l){let f=n[s];const y=r.data;if(function Zo(n){return n instanceof ca}(f)){const T=f;T.resolving&&function Et(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new Ve(-200,`Circular dependency in DI detected for ${n}${s}`)}(Be(y[s]));const R=Fo(T.canSeeViewProviders);T.resolving=!0;const F=T.injectImpl?Bn(T.injectImpl):null;po(n,l,on.Default);try{f=n[s]=T.factory(void 0,y,n,l),r.firstCreatePass&&s>=l.directiveStart&&function wa(n,r,s){const{ngOnChanges:l,ngOnInit:f,ngDoCheck:y}=r.type.prototype;if(l){const T=_s(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,T),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,T)}f&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,f),y&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,y),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,y))}(s,y[s],r)}finally{null!==F&&Bn(F),Fo(R),T.resolving=!1,Ya()}}return f}function ue(n,r,s){return!!(s[r+(n>>5)]&1<<n)}function $e(n,r){return!(n&on.Self||n&on.Host&&r)}class it{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,l){return Sn(this._tNode,this._lView,r,l,s)}}function Qt(n){return _t(()=>{const r=n.prototype.constructor,s=r[ht]||$n(r),l=Object.prototype;let f=Object.getPrototypeOf(n.prototype).constructor;for(;f&&f!==l;){const y=f[ht]||$n(f);if(y&&y!==s)return y;f=Object.getPrototypeOf(f)}return y=>new y})}function $n(n){return ce(n)?()=>{const r=$n(ne(n));return r&&r()}:hi(n)}function Jr(n){return function Kn(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const l=s.length;let f=0;for(;f<l;){const y=s[f];if(qs(y))break;if(0===y)f+=2;else if("number"==typeof y)for(f++;f<l&&"string"==typeof s[f];)f++;else{if(y===r)return s[f+1];f+=2}}}return null}(C(),n)}const li="__parameters__";function Jo(n,r,s){return _t(()=>{const l=function Ks(n){return function(...s){if(n){const l=n(...s);for(const f in l)this[f]=l[f]}}}(r);function f(...y){if(this instanceof f)return l.apply(this,y),this;const T=new f(...y);return R.annotation=T,R;function R(F,X,ie){const Pe=F.hasOwnProperty(li)?F[li]:Object.defineProperty(F,li,{value:[]})[li];for(;Pe.length<=ie;)Pe.push(null);return(Pe[ie]=Pe[ie]||[]).push(T),F}}return s&&(f.prototype=Object.create(s.prototype)),f.prototype.ngMetadataName=n,f.annotationCls=f,f})}class zi{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=tt({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Qa=new zi("AnalyzeForEntryComponents");function so(n,r){void 0===r&&(r=n);for(let s=0;s<n.length;s++){let l=n[s];Array.isArray(l)?(r===n&&(r=n.slice(0,s)),so(l,r)):r!==n&&r.push(l)}return r}function Rs(n,r){n.forEach(s=>Array.isArray(s)?Rs(s,r):r(s))}function Ia(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function Xs(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function ta(n,r){const s=[];for(let l=0;l<n;l++)s.push(r);return s}function Wi(n,r,s){let l=So(n,r);return l>=0?n[1|l]=s:(l=~l,function xn(n,r,s,l){let f=n.length;if(f==r)n.push(s,l);else if(1===f)n.push(l,n[0]),n[0]=s;else{for(f--,n.push(n[f-1],n[f]);f>r;)n[f]=n[f-2],f--;n[r]=s,n[r+1]=l}}(n,l,r,s)),l}function fa(n,r){const s=So(n,r);if(s>=0)return n[1|s]}function So(n,r){return function Lo(n,r,s){let l=0,f=n.length>>s;for(;f!==l;){const y=l+(f-l>>1),T=n[y<<s];if(r===T)return y<<s;T>r?f=y:l=y+1}return~(f<<s)}(n,r,1)}const z={},he="__NG_DI_FLAG__",ze="ngTempTokenPath",Rt=/\n/gm,Cn="__source",Fr=ae({provide:String,useValue:ae});let hr;function ei(n){const r=hr;return hr=n,r}function Lr(n,r=on.Default){if(void 0===hr)throw new Ve(203,"");return null===hr?nr(n,void 0,r):hr.get(n,r&on.Optional?null:void 0,r)}function Ti(n,r=on.Default){return(function cr(){return Rr}()||Lr)(ne(n),r)}const yl=Ti;function oo(n){const r=[];for(let s=0;s<n.length;s++){const l=ne(n[s]);if(Array.isArray(l)){if(0===l.length)throw new Ve(900,"");let f,y=on.Default;for(let T=0;T<l.length;T++){const R=l[T],F=Vi(R);"number"==typeof F?-1===F?f=R.token:y|=F:f=R}r.push(Ti(f,y))}else r.push(Ti(l))}return r}function zo(n,r){return n[he]=r,n.prototype[he]=r,n}function Vi(n){return n[he]}const Li=zo(Jo("Inject",n=>({token:n})),-1),_l=zo(Jo("Optional"),8),tl=zo(Jo("SkipSelf"),4);let Ca;function Il(n){var r;return(null===(r=function wl(){if(void 0===Ca&&(Ca=null,Mn.trustedTypes))try{Ca=Mn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Ca}())||void 0===r?void 0:r.createHTML(n))||n}class Da{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class il extends Da{getTypeName(){return"HTML"}}class Qs extends Da{getTypeName(){return"Style"}}class gc extends Da{getTypeName(){return"Script"}}class cu extends Da{getTypeName(){return"URL"}}class kd extends Da{getTypeName(){return"ResourceURL"}}function Wo(n){return n instanceof Da?n.changingThisBreaksApplicationSecurity:n}function Ta(n,r){const s=Jc(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}function Jc(n){return n instanceof Da&&n.getTypeName()||null}function Cl(n){return new il(n)}function ed(n){return new Qs(n)}function td(n){return new gc(n)}function Nd(n){return new cu(n)}function mc(n){return new kd(n)}class Uu{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const s=(new window.DOMParser).parseFromString(Il(r),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(r):(s.removeChild(s.firstChild),s)}catch(s){return null}}}class nd{constructor(r){if(this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const s=this.inertDocument.createElement("html");this.inertDocument.appendChild(s);const l=this.inertDocument.createElement("body");s.appendChild(l)}}getInertBodyElement(r){const s=this.inertDocument.createElement("template");if("content"in s)return s.innerHTML=Il(r),s;const l=this.inertDocument.createElement("body");return l.innerHTML=Il(r),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(l),l}stripCustomNsAttrs(r){const s=r.attributes;for(let f=s.length-1;0<f;f--){const T=s.item(f).name;("xmlns:ns1"===T||0===T.indexOf("ns1:"))&&r.removeAttribute(T)}let l=r.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const ja=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,$u=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function mo(n){return(n=String(n)).match(ja)||n.match($u)?n:"unsafe:"+n}function yo(n){const r={};for(const s of n.split(","))r[s]=!0;return r}function ga(...n){const r={};for(const s of n)for(const l in s)s.hasOwnProperty(l)&&(r[l]=!0);return r}const Kl=yo("area,br,col,hr,img,wbr"),Dl=yo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ia=yo("rp,rt"),Tl=ga(Kl,ga(Dl,yo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ga(ia,yo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ga(ia,Dl)),xo=yo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),hu=yo("srcset"),rd=ga(xo,hu,yo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),yo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ju=yo("script,style,template");class Sl{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(r){let s=r.firstChild,l=!0;for(;s;)if(s.nodeType===Node.ELEMENT_NODE?l=this.startElement(s):s.nodeType===Node.TEXT_NODE?this.chars(s.nodeValue):this.sanitizedSomething=!0,l&&s.firstChild)s=s.firstChild;else for(;s;){s.nodeType===Node.ELEMENT_NODE&&this.endElement(s);let f=this.checkClobberedElement(s,s.nextSibling);if(f){s=f;break}s=this.checkClobberedElement(s,s.parentNode)}return this.buf.join("")}startElement(r){const s=r.nodeName.toLowerCase();if(!Tl.hasOwnProperty(s))return this.sanitizedSomething=!0,!ju.hasOwnProperty(s);this.buf.push("<"),this.buf.push(s);const l=r.attributes;for(let f=0;f<l.length;f++){const y=l.item(f),T=y.name,R=T.toLowerCase();if(!rd.hasOwnProperty(R)){this.sanitizedSomething=!0;continue}let F=y.value;xo[R]&&(F=mo(F)),hu[R]&&(n=F,F=(n=String(n)).split(",").map(r=>mo(r.trim())).join(", ")),this.buf.push(" ",T,'="',_c(F),'"')}var n;return this.buf.push(">"),!0}endElement(r){const s=r.nodeName.toLowerCase();Tl.hasOwnProperty(s)&&!Kl.hasOwnProperty(s)&&(this.buf.push("</"),this.buf.push(s),this.buf.push(">"))}chars(r){this.buf.push(_c(r))}checkClobberedElement(r,s){if(s&&(r.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${r.outerHTML}`);return s}}const Hu=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,fu=/([^\#-~ |!])/g;function _c(n){return n.replace(/&/g,"&amp;").replace(Hu,function(r){return"&#"+(1024*(r.charCodeAt(0)-55296)+(r.charCodeAt(1)-56320)+65536)+";"}).replace(fu,function(r){return"&#"+r.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Sa;function pu(n,r){let s=null;try{Sa=Sa||function Yl(n){const r=new nd(n);return function Fd(){try{return!!(new window.DOMParser).parseFromString(Il(""),"text/html")}catch(n){return!1}}()?new Uu(r):r}(n);let l=r?String(r):"";s=Sa.getInertBodyElement(l);let f=5,y=l;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,l=y,y=s.innerHTML,s=Sa.getInertBodyElement(l)}while(l!==y);return Il((new Sl).sanitizeChildren(Gu(s)||s))}finally{if(s){const l=Gu(s)||s;for(;l.firstChild;)l.removeChild(l.firstChild)}}}function Gu(n){return"content"in n&&function Ps(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Cr=(()=>((Cr=Cr||{})[Cr.NONE=0]="NONE",Cr[Cr.HTML=1]="HTML",Cr[Cr.STYLE=2]="STYLE",Cr[Cr.SCRIPT=3]="SCRIPT",Cr[Cr.URL=4]="URL",Cr[Cr.RESOURCE_URL=5]="RESOURCE_URL",Cr))();function Ha(n){const r=function Ga(){const n=k();return n&&n[12]}();return r?r.sanitize(Cr.URL,n)||"":Ta(n,"URL")?Wo(n):mo(Fe(n))}const sl="__ngContext__";function Js(n,r){n[sl]=r}function Wu(n){const r=function oa(n){return n[sl]||null}(n);return r?Array.isArray(r)?r:r.lView:null}function Vo(n){return n.ngOriginalError}function Ro(n,...r){n.error(...r)}class Ml{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r),l=function ma(n){return n&&n.ngErrorLogger||Ro}(r);l(this._console,"ERROR",r),s&&l(this._console,"ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Vo(r);for(;s&&Vo(s);)s=Vo(s);return s||null}}const Cc=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Mn))();function aa(n){return n instanceof Function?n():n}var K=(()=>((K=K||{})[K.Important=1]="Important",K[K.DashCase=2]="DashCase",K))();function lt(n,r){return undefined(n,r)}function On(n){const r=n[3];return ke(r)?r[3]:r}function Ls(n){return Zu(n[13])}function qo(n){return Zu(n[4])}function Zu(n){for(;null!==n&&!ke(n);)n=n[4];return n}function Rl(n,r,s,l,f){if(null!=l){let y,T=!1;ke(l)?y=l:be(l)&&(T=!0,l=l[0]);const R=$(l);0===n&&null!==s?null==f?Aa(r,s,R):Pl(r,s,R,f||null,!0):1===n&&null!==s?Pl(r,s,R,f||null,!0):2===n?function Ph(n,r,s){const l=Ol(n,r);l&&function pd(n,r,s,l){jr(n)?n.removeChild(r,s,l):r.removeChild(s)}(n,l,r,s)}(r,R,T):3===n&&r.destroyNode(R),null!=y&&function Rc(n,r,s,l,f){const y=s[7];y!==$(s)&&Rl(r,n,l,y,f);for(let R=10;R<s.length;R++){const F=s[R];Mc(F[1],F,n,r,l,y)}}(r,n,y,s,f)}}function Sc(n,r,s){if(jr(n))return n.createElement(r,s);{const l=null!==s?function as(n){const r=n.toLowerCase();return"svg"===r?"http://www.w3.org/2000/svg":"math"===r?"http://www.w3.org/1998/MathML/":null}(s):null;return null===l?n.createElement(r):n.createElementNS(l,r)}}function bf(n,r){const s=n[9],l=s.indexOf(r),f=r[3];1024&r[2]&&(r[2]&=-1025,ns(f,-1)),s.splice(l,1)}function Gd(n,r){if(n.length<=10)return;const s=10+r,l=n[s];if(l){const f=l[17];null!==f&&f!==n&&bf(f,l),r>0&&(n[s-1][4]=l[4]);const y=Xs(n,10+r);!function jd(n,r){Mc(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(l[1],l);const T=y[19];null!==T&&T.detachView(y[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function wf(n,r){if(!(256&r[2])){const s=r[11];jr(s)&&s.destroyNode&&Mc(n,r,s,3,null,null),function Ah(n){let r=n[13];if(!r)return zd(n[1],n);for(;r;){let s=null;if(be(r))s=r[13];else{const l=r[10];l&&(s=l)}if(!s){for(;r&&!r[4]&&r!==n;)be(r)&&zd(r[1],r),r=r[3];null===r&&(r=n),be(r)&&zd(r[1],r),s=r&&r[4]}r=s}}(r)}}function zd(n,r){if(!(256&r[2])){r[2]&=-129,r[2]|=256,function If(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let l=0;l<s.length;l+=2){const f=r[s[l]];if(!(f instanceof ca)){const y=s[l+1];if(Array.isArray(y))for(let T=0;T<y.length;T+=2){const R=f[y[T]],F=y[T+1];try{F.call(R)}finally{}}else try{y.call(f)}finally{}}}}(n,r),function ol(n,r){const s=n.cleanup,l=r[7];let f=-1;if(null!==s)for(let y=0;y<s.length-1;y+=2)if("string"==typeof s[y]){const T=s[y+1],R="function"==typeof T?T(r):$(r[T]),F=l[f=s[y+2]],X=s[y+3];"boolean"==typeof X?R.removeEventListener(s[y],F,X):X>=0?l[f=X]():l[f=-X].unsubscribe(),y+=2}else{const T=l[f=s[y+1]];s[y].call(T)}if(null!==l){for(let y=f+1;y<l.length;y++)l[y]();r[7]=null}}(n,r),1===r[1].type&&jr(r[11])&&r[11].destroy();const s=r[17];if(null!==s&&ke(r[3])){s!==r[3]&&bf(s,r);const l=r[19];null!==l&&l.detachView(n)}}}function fd(n,r,s){return function Yt(n,r,s){let l=r;for(;null!==l&&40&l.type;)l=(r=l).parent;if(null===l)return s[0];if(2&l.flags){const f=n.data[l.directiveStart].encapsulation;if(f===kt.None||f===kt.Emulated)return null}return zt(l,s)}(n,r.parent,s)}function Pl(n,r,s,l,f){jr(n)?n.insertBefore(r,s,l,f):r.insertBefore(s,l,f)}function Aa(n,r,s){jr(n)?n.appendChild(r,s):r.appendChild(s)}function Cf(n,r,s,l,f){null!==l?Pl(n,r,s,l,f):Aa(n,r,s)}function Ol(n,r){return jr(n)?n.parentNode(r):r.parentNode}function Ql(n,r,s){return Wd(n,r,s)}let Wd=function Mh(n,r,s){return 40&n.type?zt(n,s):null};function Ac(n,r,s,l){const f=fd(n,l,r),y=r[11],R=Ql(l.parent||r[6],l,r);if(null!=f)if(Array.isArray(s))for(let F=0;F<s.length;F++)Cf(y,f,s[F],R,!1);else Cf(y,f,s,R,!1)}function xc(n,r){if(null!==r){const s=r.type;if(3&s)return zt(r,n);if(4&s)return kl(-1,n[r.index]);if(8&s){const l=r.child;if(null!==l)return xc(n,l);{const f=n[r.index];return ke(f)?kl(-1,f):$(f)}}if(32&s)return lt(r,n)()||$(n[r.index]);{const l=qd(n,r);return null!==l?Array.isArray(l)?l[0]:xc(On(n[16]),l):xc(n,r.next)}}return null}function qd(n,r){return null!==r?n[16][6].projection[r.projection]:null}function kl(n,r){const s=10+n+1;if(s<r.length){const l=r[s],f=l[1].firstChild;if(null!==f)return xc(l,f)}return r[7]}function Oh(n,r,s,l,f,y,T){for(;null!=s;){const R=l[s.index],F=s.type;if(T&&0===r&&(R&&Js($(R),l),s.flags|=4),64!=(64&s.flags))if(8&F)Oh(n,r,s.child,l,f,y,!1),Rl(r,n,f,R,y);else if(32&F){const X=lt(s,l);let ie;for(;ie=X();)Rl(r,n,f,ie,y);Rl(r,n,f,R,y)}else 16&F?vu(n,r,l,s,f,y):Rl(r,n,f,R,y);s=T?s.projectionNext:s.next}}function Mc(n,r,s,l,f,y){Oh(s,l,n.firstChild,r,f,y,!1)}function vu(n,r,s,l,f,y){const T=s[16],F=T[6].projection[l.projection];if(Array.isArray(F))for(let X=0;X<F.length;X++)Rl(r,n,f,F[X],y);else Oh(n,r,F,T[3],f,y,!0)}function Pc(n,r,s){jr(n)?n.setAttribute(r,"style",s):r.style.cssText=s}function Kd(n,r,s){jr(n)?""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s):r.className=s}function Zd(n,r,s){let l=n.length;for(;;){const f=n.indexOf(r,s);if(-1===f)return f;if(0===f||n.charCodeAt(f-1)<=32){const y=r.length;if(f+y===l||n.charCodeAt(f+y)<=32)return f}s=f+1}}const Nh="ng-template";function Mp(n,r,s){let l=0;for(;l<n.length;){let f=n[l++];if(s&&"class"===f){if(f=n[l],-1!==Zd(f.toLowerCase(),r,0))return!0}else if(1===f){for(;l<n.length&&"string"==typeof(f=n[l++]);)if(f.toLowerCase()===r)return!0;return!1}}return!1}function Fh(n){return 4===n.type&&n.value!==Nh}function Df(n,r,s){return r===(4!==n.type||s?n.value:Nh)}function Nl(n,r,s){let l=4;const f=n.attrs||[],y=function Rp(n){for(let r=0;r<n.length;r++)if(qs(n[r]))return r;return n.length}(f);let T=!1;for(let R=0;R<r.length;R++){const F=r[R];if("number"!=typeof F){if(!T)if(4&l){if(l=2|1&l,""!==F&&!Df(n,F,s)||""===F&&1===r.length){if(qi(l))return!1;T=!0}}else{const X=8&l?F:r[++R];if(8&l&&null!==n.attrs){if(!Mp(n.attrs,X,s)){if(qi(l))return!1;T=!0}continue}const Pe=vo(8&l?"class":F,f,Fh(n),s);if(-1===Pe){if(qi(l))return!1;T=!0;continue}if(""!==X){let at;at=Pe>y?"":f[Pe+1].toLowerCase();const xt=8&l?at:null;if(xt&&-1!==Zd(xt,X,0)||2&l&&X!==at){if(qi(l))return!1;T=!0}}}}else{if(!T&&!qi(l)&&!qi(F))return!1;if(T&&qi(F))continue;T=!1,l=F|1&l}}return qi(l)||T}function qi(n){return 0==(1&n)}function vo(n,r,s,l){if(null===r)return-1;let f=0;if(l||!s){let y=!1;for(;f<r.length;){const T=r[f];if(T===n)return f;if(3===T||6===T)y=!0;else{if(1===T||2===T){let R=r[++f];for(;"string"==typeof R;)R=r[++f];continue}if(4===T)break;if(0===T){f+=4;continue}}f+=y?1:2}return-1}return function Pp(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const l=n[s];if("number"==typeof l)return-1;if(l===r)return s;s++}return-1}(r,n)}function Oc(n,r,s=!1){for(let l=0;l<r.length;l++)if(Nl(n,r[l],s))return!0;return!1}function Op(n,r){e:for(let s=0;s<r.length;s++){const l=r[s];if(n.length===l.length){for(let f=0;f<n.length;f++)if(n[f]!==l[f])continue e;return!0}}return!1}function kc(n,r){return n?":not("+r.trim()+")":r}function Xu(n){let r=n[0],s=1,l=2,f="",y=!1;for(;s<n.length;){let T=n[s];if("string"==typeof T)if(2&l){const R=n[++s];f+="["+T+(R.length>0?'="'+R+'"':"")+"]"}else 8&l?f+="."+T:4&l&&(f+=" "+T);else""!==f&&!qi(T)&&(r+=kc(y,f),f=""),l=T,y=y||!qi(l);s++}return""!==f&&(r+=kc(y,f)),r}const ri={};function Lh(n){md(b(),k(),ks()+n,or())}function md(n,r,s,l){if(!l)if(3==(3&r[2])){const y=n.preOrderCheckHooks;null!==y&&Do(r,y,s)}else{const y=n.preOrderHooks;null!==y&&Ns(r,y,0,s)}Co(s)}function Eu(n,r){return n<<17|r<<2}function Wa(n){return n>>17&32767}function Fc(n){return 2|n}function al(n){return(131068&n)>>2}function Uo(n,r){return-131069&n|r<<2}function Lc(n){return 1|n}function fm(n,r){const s=n.contentQueries;if(null!==s)for(let l=0;l<s.length;l+=2){const f=s[l],y=s[l+1];if(-1!==y){const T=n.data[y];jo(f),T.contentQueries(2,r[y],y)}}}function _d(n,r,s,l,f,y,T,R,F,X){const ie=r.blueprint.slice();return ie[0]=f,ie[2]=140|l,bs(ie),ie[3]=ie[15]=n,ie[8]=s,ie[10]=T||n&&n[10],ie[11]=R||n&&n[11],ie[12]=F||n&&n[12]||null,ie[9]=X||n&&n[9]||null,ie[6]=y,ie[16]=2==r.type?n[16]:ie,ie}function tc(n,r,s,l,f){let y=n.data[r];if(null===y)y=function Of(n,r,s,l,f){const y=W(),T=vt(),F=n.data[r]=function n_(n,r,s,l,f,y){return{type:s,index:l,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:y,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,T?y:y&&y.parent,s,r,l,f);return null===n.firstChild&&(n.firstChild=F),null!==y&&(T?null==y.child&&null!==F.parent&&(y.child=F):null===y.next&&(y.next=F)),F}(n,r,s,l,f),function fi(){return Xn.lFrame.inI18n}()&&(y.flags|=64);else if(64&y.type){y.type=s,y.value=l,y.attrs=f;const T=function pe(){const n=Xn.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();y.injectorIndex=null===T?-1:T.injectorIndex}return Le(y,!0),y}function vd(n,r,s,l){if(0===s)return-1;const f=r.length;for(let y=0;y<s;y++)r.push(l),n.blueprint.push(l),n.data.push(null);return f}function th(n,r,s){No(r);try{const l=n.viewQuery;null!==l&&ih(1,l,s);const f=n.template;null!==f&&pm(n,r,f,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&fm(n,r),n.staticViewQueries&&ih(2,n.viewQuery,s);const y=n.components;null!==y&&function eh(n,r){for(let s=0;s<r.length;s++)Yp(n,r[s])}(r,y)}catch(l){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),l}finally{r[2]&=-5,Yo()}}function nh(n,r,s,l){const f=r[2];if(256==(256&f))return;No(r);const y=or();try{bs(r),function Ci(n){return Xn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&pm(n,r,s,2,l);const T=3==(3&f);if(!y)if(T){const X=n.preOrderCheckHooks;null!==X&&Do(r,X,null)}else{const X=n.preOrderHooks;null!==X&&Ns(r,X,0,null),Ho(r,0)}if(function Gh(n){for(let r=Ls(n);null!==r;r=qo(r)){if(!r[2])continue;const s=r[9];for(let l=0;l<s.length;l++){const f=s[l],y=f[3];0==(1024&f[2])&&ns(y,1),f[2]|=1024}}}(r),function $f(n){for(let r=Ls(n);null!==r;r=qo(r))for(let s=10;s<r.length;s++){const l=r[s],f=l[1];Fi(l)&&nh(f,l,f.template,l[8])}}(r),null!==n.contentQueries&&fm(n,r),!y)if(T){const X=n.contentCheckHooks;null!==X&&Do(r,X)}else{const X=n.contentHooks;null!==X&&Ns(r,X,1),Ho(r,1)}!function hm(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let l=0;l<s.length;l++){const f=s[l];if(f<0)Co(~f);else{const y=f,T=s[++l],R=s[++l];pi(T,y),R(2,r[y])}}}finally{Co(-1)}}(n,r);const R=n.components;null!==R&&function Jd(n,r){for(let s=0;s<r.length;s++)qp(n,r[s])}(r,R);const F=n.viewQuery;if(null!==F&&ih(2,F,l),!y)if(T){const X=n.viewCheckHooks;null!==X&&Do(r,X)}else{const X=n.viewHooks;null!==X&&Ns(r,X,2),Ho(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),y||(r[2]&=-73),1024&r[2]&&(r[2]&=-1025,ns(r[3],-1))}finally{Yo()}}function Lp(n,r,s,l){const f=r[10],y=!or(),T=wr(r);try{y&&!T&&f.begin&&f.begin(),T&&th(n,r,l),nh(n,r,s,l)}finally{y&&!T&&f.end&&f.end()}}function pm(n,r,s,l,f){const y=ks(),T=2&l;try{Co(-1),T&&r.length>20&&md(n,r,20,or()),s(l,f)}finally{Co(y)}}function kf(n,r,s){if(yt(r)){const f=r.directiveEnd;for(let y=r.directiveStart;y<f;y++){const T=n.data[y];T.contentQueries&&T.contentQueries(1,s[y],y)}}}function Bp(n,r,s){!re()||(function i_(n,r,s,l){const f=s.directiveStart,y=s.directiveEnd;n.firstCreatePass||gi(s,r),Js(l,r);const T=s.initialInputs;for(let R=f;R<y;R++){const F=n.data[R],X=Ot(F);X&&o_(r,s,F);const ie=U(r,n,R,s);Js(ie,r),null!==T&&jh(0,R-f,ie,F,0,T),X&&(dr(s.index,r)[8]=ie)}}(n,r,s,zt(s,r)),128==(128&s.flags)&&function s_(n,r,s){const l=s.directiveStart,f=s.directiveEnd,T=s.index,R=function rs(){return Xn.lFrame.currentDirectiveIndex}();try{Co(T);for(let F=l;F<f;F++){const X=n.data[F],ie=r[F];is(F),(null!==X.hostBindings||0!==X.hostVars||null!==X.hostAttrs)&&Hp(X,ie)}}finally{Co(-1),is(R)}}(n,r,s))}function Vp(n,r,s=zt){const l=r.localNames;if(null!==l){let f=r.index+1;for(let y=0;y<l.length;y+=2){const T=l[y+1],R=-1===T?s(r,n):n[T];n[f++]=R}}}function Nf(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=wo(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function wo(n,r,s,l,f,y,T,R,F,X){const ie=20+l,Pe=ie+f,at=function t_(n,r){const s=[];for(let l=0;l<r;l++)s.push(l<n?null:ri);return s}(ie,Pe),xt="function"==typeof X?X():X;return at[1]={type:n,blueprint:at,template:s,queries:null,viewQuery:R,declTNode:r,data:at.slice().fill(null,ie),bindingStartIndex:ie,expandoStartIndex:Pe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof y?y():y,pipeRegistry:"function"==typeof T?T():T,firstChild:null,schemas:F,consts:xt,incompleteFirstPass:!1}}function ym(n,r,s,l){const f=Ed(r);null===s?f.push(l):(f.push(s),n.firstCreatePass&&zf(n).push(l,f.length-1))}function Ff(n,r,s){for(let l in n)if(n.hasOwnProperty(l)){const f=n[l];(s=null===s?{}:s).hasOwnProperty(l)?s[l].push(r,f):s[l]=[r,f]}return s}function xa(n,r,s,l,f,y,T,R){const F=zt(r,s);let ie,X=r.inputs;!R&&null!=X&&(ie=X[l])?(Qp(n,s,ie,l,f),jt(r)&&function Lf(n,r){const s=dr(r,n);16&s[2]||(s[2]|=64)}(s,r.index)):3&r.type&&(l=function vm(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(l),f=null!=T?T(f,r.value||"",l):f,jr(y)?y.setProperty(F,l,f):da(l)||(F.setProperty?F.setProperty(l,f):F[l]=f))}function $p(n,r,s,l){let f=!1;if(re()){const y=function Vf(n,r,s){const l=n.directiveRegistry;let f=null;if(l)for(let y=0;y<l.length;y++){const T=l[y];Oc(s,T.selectors,!1)&&(f||(f=[]),Cs(gi(s,r),n,T.type),Ot(T)?(rh(n,s),f.unshift(T)):f.push(T))}return f}(n,r,s),T=null===l?null:{"":-1};if(null!==y){f=!0,Cm(s,n.data.length,y.length);for(let ie=0;ie<y.length;ie++){const Pe=y[ie];Pe.providersResolver&&Pe.providersResolver(Pe)}let R=!1,F=!1,X=vd(n,r,y.length,null);for(let ie=0;ie<y.length;ie++){const Pe=y[ie];s.mergedAttrs=xs(s.mergedAttrs,Pe.hostAttrs),Dm(n,s,r,X,Pe),Im(X,Pe,T),null!==Pe.contentQueries&&(s.flags|=8),(null!==Pe.hostBindings||null!==Pe.hostAttrs||0!==Pe.hostVars)&&(s.flags|=128);const at=Pe.type.prototype;!R&&(at.ngOnChanges||at.ngOnInit||at.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),R=!0),!F&&(at.ngOnChanges||at.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),F=!0),X++}!function _m(n,r){const l=r.directiveEnd,f=n.data,y=r.attrs,T=[];let R=null,F=null;for(let X=r.directiveStart;X<l;X++){const ie=f[X],Pe=ie.inputs,at=null===y||Fh(r)?null:Wp(Pe,y);T.push(at),R=Ff(Pe,X,R),F=Ff(ie.outputs,X,F)}null!==R&&(R.hasOwnProperty("class")&&(r.flags|=16),R.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=T,r.inputs=R,r.outputs=F}(n,s)}T&&function Gp(n,r,s){if(r){const l=n.localNames=[];for(let f=0;f<r.length;f+=2){const y=s[r[f+1]];if(null==y)throw new Ve(-301,!1);l.push(r[f],y)}}}(s,l,T)}return s.mergedAttrs=xs(s.mergedAttrs,s.attrs),f}function jp(n,r,s,l,f,y){const T=y.hostBindings;if(T){let R=n.hostBindingOpCodes;null===R&&(R=n.hostBindingOpCodes=[]);const F=~r.index;(function r_(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(R)!=F&&R.push(F),R.push(l,f,T)}}function Hp(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function rh(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function Im(n,r,s){if(s){if(r.exportAs)for(let l=0;l<r.exportAs.length;l++)s[r.exportAs[l]]=n;Ot(r)&&(s[""]=n)}}function Cm(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}function Dm(n,r,s,l,f){n.data[l]=f;const y=f.factory||(f.factory=hi(f.type)),T=new ca(y,Ot(f),null);n.blueprint[l]=T,s[l]=T,jp(n,r,0,l,vd(n,s,f.hostVars,ri),f)}function o_(n,r,s){const l=zt(r,n),f=Nf(s),y=n[10],T=eu(n,_d(n,f,null,s.onPush?64:16,l,r,y,y.createRenderer(l,s),null,null));n[r.index]=T}function Du(n,r,s,l,f,y){const T=zt(n,r);!function zp(n,r,s,l,f,y,T){if(null==y)jr(n)?n.removeAttribute(r,f,s):r.removeAttribute(f);else{const R=null==T?Fe(y):T(y,l||"",f);jr(n)?n.setAttribute(r,f,R,s):s?r.setAttributeNS(s,f,R):r.setAttribute(f,R)}}(r[11],T,y,n.value,s,l,f)}function jh(n,r,s,l,f,y){const T=y[r];if(null!==T){const R=l.setInput;for(let F=0;F<T.length;){const X=T[F++],ie=T[F++],Pe=T[F++];null!==R?l.setInput(s,Pe,X,ie):s[ie]=Pe}}}function Wp(n,r){let s=null,l=0;for(;l<r.length;){const f=r[l];if(0!==f)if(5!==f){if("number"==typeof f)break;n.hasOwnProperty(f)&&(null===s&&(s=[]),s.push(f,n[f],r[l+1])),l+=2}else l+=2;else l+=4}return s}function Uf(n,r,s,l){return new Array(n,!0,!1,r,null,0,l,s,null,null)}function qp(n,r){const s=dr(r,n);if(Fi(s)){const l=s[1];80&s[2]?nh(l,s,l.template,s[8]):s[5]>0&&jf(s)}}function jf(n){for(let l=Ls(n);null!==l;l=qo(l))for(let f=10;f<l.length;f++){const y=l[f];if(1024&y[2]){const T=y[1];nh(T,y,T.template,y[8])}else y[5]>0&&jf(y)}const s=n[1].components;if(null!==s)for(let l=0;l<s.length;l++){const f=dr(s[l],n);Fi(f)&&f[5]>0&&jf(f)}}function Yp(n,r){const s=dr(r,n),l=s[1];(function Kp(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(l,s),th(l,s,s[8])}function eu(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function Hf(n){for(;n;){n[2]|=64;const r=On(n);if(Tn(n)&&!r)return n;n=r}return null}function Zp(n,r,s){const l=r[10];l.begin&&l.begin();try{nh(n,r,n.template,s)}catch(f){throw xm(r,f),f}finally{l.end&&l.end()}}function Gf(n){!function zh(n){for(let r=0;r<n.components.length;r++){const s=n.components[r],l=Wu(s),f=l[1];Lp(f,l,f.template,s)}}(n[8])}function ih(n,r,s){jo(0),r(n,s)}const Sm=(()=>Promise.resolve(null))();function Ed(n){return n[7]||(n[7]=[])}function zf(n){return n.cleanup||(n.cleanup=[])}function xm(n,r){const s=n[9],l=s?s.get(Ml,null):null;l&&l.handleError(r)}function Qp(n,r,s,l,f){for(let y=0;y<s.length;){const T=s[y++],R=s[y++],F=r[T],X=n.data[T];null!==X.setInput?X.setInput(F,f,l,R):F[R]=f}}function Tu(n,r,s){const l=ct(r,n);!function ud(n,r,s){jr(n)?n.setValue(r,s):r.textContent=s}(n[11],l,s)}function Wf(n,r,s){let l=s?n.styles:null,f=s?n.classes:null,y=0;if(null!==r)for(let T=0;T<r.length;T++){const R=r[T];"number"==typeof R?y=R:1==y?f=Ie(f,R):2==y&&(l=Ie(l,R+": "+r[++T]+";"))}s?n.styles=l:n.stylesWithoutHost=l,s?n.classes=f:n.classesWithoutHost=f}const eg=new zi("INJECTOR",-1);class qf{get(r,s=z){if(s===z){const l=new Error(`NullInjectorError: No provider for ${De(r)}!`);throw l.name="NullInjectorError",l}return s}}const tg=new zi("Set Injector scope."),bd={},Rm={};let Wh;function Yf(){return void 0===Wh&&(Wh=new qf),Wh}function Kf(n,r=null,s=null,l){const f=wd(n,r,s,l);return f._resolveInjectorDefTypes(),f}function wd(n,r=null,s=null,l){return new Bc(n,s,r||Yf(),l)}class Bc{constructor(r,s,l,f=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const y=[];s&&Rs(s,R=>this.processProvider(R,r,s)),Rs([r],R=>this.processInjectorType(R,[],y)),this.records.set(eg,tu(void 0,this));const T=this.records.get(tg);this.scope=null!=T?T.value:null,this.source=f||("object"==typeof r?null:De(r))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(r=>r.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(r,s=z,l=on.Default){this.assertNotDestroyed();const f=ei(this),y=Bn(void 0);try{if(!(l&on.SkipSelf)){let R=this.records.get(r);if(void 0===R){const F=function h_(n){return"function"==typeof n||"object"==typeof n&&n instanceof zi}(r)&&sn(r);R=F&&this.injectableDefInScope(F)?tu(qh(r),bd):null,this.records.set(r,R)}if(null!=R)return this.hydrate(r,R)}return(l&on.Self?Yf():this.parent).get(r,s=l&on.Optional&&s===z?null:s)}catch(T){if("NullInjectorError"===T.name){if((T[ze]=T[ze]||[]).unshift(De(r)),f)throw T;return function ao(n,r,s,l){const f=n[ze];throw r[Cn]&&f.unshift(r[Cn]),n.message=function ls(n,r,s,l=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let f=De(r);if(Array.isArray(r))f=r.map(De).join(" -> ");else if("object"==typeof r){let y=[];for(let T in r)if(r.hasOwnProperty(T)){let R=r[T];y.push(T+":"+("string"==typeof R?JSON.stringify(R):De(R)))}f=`{${y.join(", ")}}`}return`${s}${l?"("+l+")":""}[${f}]: ${n.replace(Rt,"\n  ")}`}("\n"+n.message,f,s,l),n.ngTokenPath=f,n[ze]=null,n}(T,r,"R3InjectorError",this.source)}throw T}finally{Bn(y),ei(f)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(r=>this.get(r))}toString(){const r=[];return this.records.forEach((l,f)=>r.push(De(f))),`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ve(205,!1)}processInjectorType(r,s,l){if(!(r=ne(r)))return!1;let f=gn(r);const y=null==f&&r.ngModule||void 0,T=void 0===y?r:y,R=-1!==l.indexOf(T);if(void 0!==y&&(f=gn(y)),null==f)return!1;if(null!=f.imports&&!R){let ie;l.push(T);try{Rs(f.imports,Pe=>{this.processInjectorType(Pe,s,l)&&(void 0===ie&&(ie=[]),ie.push(Pe))})}finally{}if(void 0!==ie)for(let Pe=0;Pe<ie.length;Pe++){const{ngModule:at,providers:xt}=ie[Pe];Rs(xt,rn=>this.processProvider(rn,at,xt||xe))}}this.injectorDefTypes.add(T);const F=hi(T)||(()=>new T);this.records.set(T,tu(F,bd));const X=f.providers;if(null!=X&&!R){const ie=r;Rs(X,Pe=>this.processProvider(Pe,ie,X))}return void 0!==y&&void 0!==r.providers}processProvider(r,s,l){let f=Vc(r=ne(r))?r:ne(r&&r.provide);const y=function oh(n,r,s){return Pm(n)?tu(void 0,n.useValue):tu(ng(n),bd)}(r);if(Vc(r)||!0!==r.multi)this.records.get(f);else{let T=this.records.get(f);T||(T=tu(void 0,bd,!0),T.factory=()=>oo(T.multi),this.records.set(f,T)),f=r,T.multi.push(r)}this.records.set(f,y)}hydrate(r,s){return s.value===bd&&(s.value=Rm,s.value=s.factory()),"object"==typeof s.value&&s.value&&function d_(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this.onDestroy.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=ne(r.providedIn);return"string"==typeof s?"any"===s||s===this.scope:this.injectorDefTypes.has(s)}}function qh(n){const r=sn(n),s=null!==r?r.factory:hi(n);if(null!==s)return s;if(n instanceof zi)throw new Ve(204,!1);if(n instanceof Function)return function sh(n){const r=n.length;if(r>0)throw ta(r,"?"),new Ve(204,!1);const s=function kn(n){const r=n&&(n[qn]||n[Qn]);if(r){const s=function _n(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new Ve(204,!1)}function ng(n,r,s){let l;if(Vc(n)){const f=ne(n);return hi(f)||qh(f)}if(Pm(n))l=()=>ne(n.useValue);else if(function rg(n){return!(!n||!n.useFactory)}(n))l=()=>n.useFactory(...oo(n.deps||[]));else if(function c_(n){return!(!n||!n.useExisting)}(n))l=()=>Ti(ne(n.useExisting));else{const f=ne(n&&(n.useClass||n.provide));if(!function sg(n){return!!n.deps}(n))return hi(f)||qh(f);l=()=>new f(...oo(n.deps))}return l}function tu(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function Pm(n){return null!==n&&"object"==typeof n&&Fr in n}function Vc(n){return"function"==typeof n}let ll=(()=>{class n{static create(s,l){var f;if(Array.isArray(s))return Kf({name:""},l,s,"");{const y=null!==(f=s.name)&&void 0!==f?f:"";return Kf({name:y},s.parent,s.providers,y)}}}return n.THROW_IF_NOT_FOUND=z,n.NULL=new qf,n.\u0275prov=tt({token:n,providedIn:"any",factory:()=>Ti(eg)}),n.__NG_ELEMENT_ID__=-1,n})();function dg(n,r){cl(Wu(n)[1],C())}function Zh(n){let r=function Qf(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const l=[n];for(;r;){let f;if(Ot(n))f=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Ve(903,"");f=r.\u0275dir}if(f){if(s){l.push(f);const T=n;T.inputs=Uc(n.inputs),T.declaredInputs=Uc(n.declaredInputs),T.outputs=Uc(n.outputs);const R=f.hostBindings;R&&g_(n,R);const F=f.viewQuery,X=f.contentQueries;if(F&&zm(n,F),X&&fg(n,X),Ae(n.inputs,f.inputs),Ae(n.declaredInputs,f.declaredInputs),Ae(n.outputs,f.outputs),Ot(f)&&f.data.animation){const ie=n.data;ie.animation=(ie.animation||[]).concat(f.data.animation)}}const y=f.features;if(y)for(let T=0;T<y.length;T++){const R=y[T];R&&R.ngInherit&&R(n),R===Zh&&(s=!1)}}r=Object.getPrototypeOf(r)}!function hg(n){let r=0,s=null;for(let l=n.length-1;l>=0;l--){const f=n[l];f.hostVars=r+=f.hostVars,f.hostAttrs=xs(f.hostAttrs,s=xs(s,f.hostAttrs))}}(l)}function Uc(n){return n===Hn?{}:n===xe?[]:n}function zm(n,r){const s=n.viewQuery;n.viewQuery=s?(l,f)=>{r(l,f),s(l,f)}:r}function fg(n,r){const s=n.contentQueries;n.contentQueries=s?(l,f,y)=>{r(l,f,y),s(l,f,y)}:r}function g_(n,r){const s=n.hostBindings;n.hostBindings=s?(l,f)=>{r(l,f),s(l,f)}:r}let Jf=null;function $c(){if(!Jf){const n=Mn.Symbol;if(n&&n.iterator)Jf=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const l=r[s];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Jf=l)}}}return Jf}function Xh(n){return!!Qh(n)&&(Array.isArray(n)||!(n instanceof Map)&&$c()in n)}function Qh(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Su(n,r,s){return n[r]=s}function _a(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function ep(n,r,s,l){const f=k();return _a(f,Di(),r)&&(b(),Du(ss(),f,n,r,s,l)),ep}function lh(n,r,s,l){return _a(n,Di(),s)?r+Fe(s)+l:ri}function np(n,r,s,l,f,y,T,R){const F=k(),X=b(),ie=n+20,Pe=X.firstCreatePass?function Xm(n,r,s,l,f,y,T,R,F){const X=r.consts,ie=tc(r,n,4,T||null,vi(X,R));$p(r,s,ie,vi(X,F)),cl(r,ie);const Pe=ie.tViews=wo(2,ie,l,f,y,r.directiveRegistry,r.pipeRegistry,null,r.schemas,X);return null!==r.queries&&(r.queries.template(r,ie),Pe.queries=r.queries.embeddedTView(ie)),ie}(ie,X,F,r,s,l,f,y,T):X.data[ie];Le(Pe,!1);const at=F[11].createComment("");Ac(X,F,at,Pe),Js(at,F),eu(F,F[ie]=Uf(at,F,at,Pe)),Nt(Pe)&&Bp(X,F,Pe),null!=T&&Vp(F,Pe,R)}function sf(n,r=on.Default){const s=k();return null===s?Ti(n,r):Sn(C(),s,ne(n),r)}function Hs(){throw new Error("invalid")}function oy(n,r,s){const l=k();return _a(l,Di(),r)&&xa(b(),ss(),l,n,r,l[11],s,!1),oy}function ay(n,r,s,l,f){const T=f?"class":"style";Qp(n,s,r.inputs[T],T,l)}function af(n,r,s,l){const f=k(),y=b(),T=20+n,R=f[11],F=f[T]=Sc(R,r,function Oa(){return Xn.lFrame.currentNamespace}()),X=y.firstCreatePass?function Po(n,r,s,l,f,y,T){const R=r.consts,X=tc(r,n,2,f,vi(R,y));return $p(r,s,X,vi(R,T)),null!==X.attrs&&Wf(X,X.attrs,!1),null!==X.mergedAttrs&&Wf(X,X.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,X),X}(T,y,f,0,r,s,l):y.data[T];Le(X,!0);const ie=X.mergedAttrs;null!==ie&&Is(R,F,ie);const Pe=X.classes;null!==Pe&&Kd(R,F,Pe);const at=X.styles;return null!==at&&Pc(R,F,at),64!=(64&X.flags)&&Ac(y,f,F,X),0===function H(){return Xn.lFrame.elementDepthCount}()&&Js(F,f),function B(){Xn.lFrame.elementDepthCount++}(),Nt(X)&&(Bp(y,f,X),kf(y,X,f)),null!==l&&Vp(f,X),af}function lp(){let n=C();vt()?Ht():(n=n.parent,Le(n,!1));const r=n;!function N(){Xn.lFrame.elementDepthCount--}();const s=b();return s.firstCreatePass&&(cl(s,n),yt(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Na(n){return 0!=(16&n.flags)}(r)&&ay(s,r,k(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function Xo(n){return 0!=(32&n.flags)}(r)&&ay(s,r,k(),r.stylesWithoutHost,!1),lp}function Rg(n,r,s,l){return af(n,r,s,l),lp(),Rg}function up(n,r,s){const l=k(),f=b(),y=n+20,T=f.firstCreatePass?function T_(n,r,s,l,f){const y=r.consts,T=vi(y,l),R=tc(r,n,8,"ng-container",T);return null!==T&&Wf(R,T,!0),$p(r,s,R,vi(y,f)),null!==r.queries&&r.queries.elementStart(r,R),R}(y,f,l,r,s):f.data[y];Le(T,!0);const R=l[y]=l[11].createComment("");return Ac(f,l,R,T),Js(R,l),Nt(T)&&(Bp(f,l,T),kf(f,T,l)),null!=s&&Vp(l,T),up}function cp(){let n=C();const r=b();return vt()?Ht():(n=n.parent,Le(n,!1)),r.firstCreatePass&&(cl(r,n),yt(n)&&r.queries.elementEnd(n)),cp}function Pg(n,r,s){return up(n,r,s),cp(),Pg}function S_(){return k()}function Og(n){return!!n&&"function"==typeof n.then}function ly(n){return!!n&&"function"==typeof n.subscribe}const kg=ly;function ru(n,r,s,l){const f=k(),y=b(),T=C();return function Wc(n,r,s,l,f,y,T,R){const F=Nt(l),ie=n.firstCreatePass&&zf(n),Pe=r[8],at=Ed(r);let xt=!0;if(3&l.type||R){const jn=zt(l,r),fr=R?R(jn):jn,pn=at.length,qr=R?$i=>R($($i[l.index])):l.index;if(jr(s)){let $i=null;if(!R&&F&&($i=function Au(n,r,s,l){const f=n.cleanup;if(null!=f)for(let y=0;y<f.length-1;y+=2){const T=f[y];if(T===s&&f[y+1]===l){const R=r[7],F=f[y+2];return R.length>F?R[F]:null}"string"==typeof T&&(y+=2)}return null}(n,r,f,l.index)),null!==$i)($i.__ngLastListenerFn__||$i).__ngNextListenerFn__=y,$i.__ngLastListenerFn__=y,xt=!1;else{y=Ng(l,r,Pe,y,!1);const Ds=s.listen(fr,f,y);at.push(y,Ds),ie&&ie.push(f,qr,pn,pn+1)}}else y=Ng(l,r,Pe,y,!0),fr.addEventListener(f,y,T),at.push(y),ie&&ie.push(f,qr,pn,T)}else y=Ng(l,r,Pe,y,!1);const rn=l.outputs;let Rn;if(xt&&null!==rn&&(Rn=rn[f])){const jn=Rn.length;if(jn)for(let fr=0;fr<jn;fr+=2){const su=r[Rn[fr]][Rn[fr+1]].subscribe(y),vf=at.length;at.push(y,su),ie&&ie.push(f,l.index,vf,-(vf+1))}}}(y,f,f[11],T,n,r,!!s,l),ru}function lf(n,r,s,l){try{return!1!==s(l)}catch(f){return xm(n,f),!1}}function Ng(n,r,s,l,f){return function y(T){if(T===Function)return l;const R=2&n.flags?dr(n.index,r):r;0==(32&r[2])&&Hf(R);let F=lf(r,0,l,T),X=y.__ngNextListenerFn__;for(;X;)F=lf(r,0,X,T)&&F,X=X.__ngNextListenerFn__;return f&&!1===F&&(T.preventDefault(),T.returnValue=!1),F}}function uy(n=1){return function Ra(n){return(Xn.lFrame.contextLView=function Pa(n,r){for(;n>0;)r=r[15],n--;return r}(n,Xn.lFrame.contextLView))[8]}(n)}function cy(n,r){let s=null;const l=function Tf(n){const r=n.attrs;if(null!=r){const s=r.indexOf(5);if(0==(1&s))return r[s+1]}return null}(n);for(let f=0;f<r.length;f++){const y=r[f];if("*"!==y){if(null===l?Oc(n,y,!0):Op(l,y))return f}else s=f}return s}function Fg(n){const r=k()[16][6];if(!r.projection){const l=r.projection=ta(n?n.length:1,null),f=l.slice();let y=r.child;for(;null!==y;){const T=n?cy(y,n):0;null!==T&&(f[T]?f[T].projectionNext=y:l[T]=y,f[T]=y),y=y.next}}}function uf(n,r=0,s){const l=k(),f=b(),y=tc(f,20+n,16,null,s||null);null===y.projection&&(y.projection=r),Ht(),64!=(64&y.flags)&&function Yd(n,r,s){vu(r[11],0,r,s,fd(n,s,r),Ql(s.parent||r[6],s,r))}(f,l,y)}function Lg(n,r,s){return ic(n,"",r,"",s),Lg}function ic(n,r,s,l,f){const y=k(),T=lh(y,r,s,l);return T!==ri&&xa(b(),ss(),y,n,T,y[11],f,!1),ic}function Vg(n,r,s,l,f){const y=n[s+1],T=null===r;let R=l?Wa(y):al(y),F=!1;for(;0!==R&&(!1===F||T);){const ie=n[R+1];my(n[R],r)&&(F=!0,n[R+1]=l?Lc(ie):Fc(ie)),R=l?Wa(ie):al(ie)}F&&(n[s+1]=l?Fc(y):Lc(y))}function my(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&So(n,r)>=0}function xd(n,r){return function iu(n,r,s,l){const f=k(),y=b(),T=function Ai(n){const r=Xn.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}(2);y.firstUpdatePass&&function by(n,r,s,l){const f=n.data;if(null===f[s+1]){const y=f[ks()],T=function Ey(n,r){return r>=n.expandoStartIndex}(n,s);(function Sy(n,r){return 0!=(n.flags&(r?16:32))})(y,l)&&null===r&&!T&&(r=!1),r=function wy(n,r,s,l){const f=function co(n){const r=Xn.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let y=l?r.residualClasses:r.residualStyles;if(null===f)0===(l?r.classBindings:r.styleBindings)&&(s=hf(s=$g(null,n,r,s,l),r.attrs,l),y=null);else{const T=r.directiveStylingLast;if(-1===T||n[T]!==f)if(s=$g(f,n,r,s,l),null===y){let F=function O_(n,r,s){const l=s?r.classBindings:r.styleBindings;if(0!==al(l))return n[Wa(l)]}(n,r,l);void 0!==F&&Array.isArray(F)&&(F=$g(null,n,r,F[1],l),F=hf(F,r.attrs,l),function k_(n,r,s,l){n[Wa(s?r.classBindings:r.styleBindings)]=l}(n,r,l,F))}else y=function Iy(n,r,s){let l;const f=r.directiveEnd;for(let y=1+r.directiveStylingLast;y<f;y++)l=hf(l,n[y].hostAttrs,s);return hf(l,r.attrs,s)}(n,r,l)}return void 0!==y&&(l?r.residualClasses=y:r.residualStyles=y),s}(f,y,r,l),function gy(n,r,s,l,f,y){let T=y?r.classBindings:r.styleBindings,R=Wa(T),F=al(T);n[l]=s;let ie,X=!1;if(Array.isArray(s)){const Pe=s;ie=Pe[1],(null===ie||So(Pe,ie)>0)&&(X=!0)}else ie=s;if(f)if(0!==F){const at=Wa(n[R+1]);n[l+1]=Eu(at,R),0!==at&&(n[at+1]=Uo(n[at+1],l)),n[R+1]=function Xd(n,r){return 131071&n|r<<17}(n[R+1],l)}else n[l+1]=Eu(R,0),0!==R&&(n[R+1]=Uo(n[R+1],l)),R=l;else n[l+1]=Eu(F,0),0===R?R=l:n[F+1]=Uo(n[F+1],l),F=l;X&&(n[l+1]=Fc(n[l+1])),Vg(n,ie,l,!0),Vg(n,ie,l,!1),function Sd(n,r,s,l,f){const y=f?n.residualClasses:n.residualStyles;null!=y&&"string"==typeof r&&So(y,r)>=0&&(s[l+1]=Lc(s[l+1]))}(r,ie,n,l,y),T=Eu(R,F),y?r.classBindings=T:r.styleBindings=T}(f,y,r,s,T,l)}}(y,n,T,l),r!==ri&&_a(f,T,r)&&function Hg(n,r,s,l,f,y,T,R){if(!(3&r.type))return;const F=n.data,X=F[R+1];ph(function Qd(n){return 1==(1&n)}(X)?Ty(F,r,s,f,al(X),T):void 0)||(ph(y)||function Ju(n){return 2==(2&n)}(X)&&(y=Ty(F,null,s,f,R,T)),function gd(n,r,s,l,f){const y=jr(n);if(r)f?y?n.addClass(s,l):s.classList.add(l):y?n.removeClass(s,l):s.classList.remove(l);else{let T=-1===l.indexOf("-")?void 0:K.DashCase;if(null==f)y?n.removeStyle(s,l,T):s.style.removeProperty(l);else{const R="string"==typeof f&&f.endsWith("!important");R&&(f=f.slice(0,-10),T|=K.Important),y?n.setStyle(s,l,f,T):s.style.setProperty(l,f,R?"important":"")}}}(l,T,ct(ks(),s),f,y))}(y,y.data[ks()],f,f[11],n,f[T+1]=function gp(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=De(Wo(n)))),n}(r,s),l,T)}(n,r,null,!0),xd}function $g(n,r,s,l,f){let y=null;const T=s.directiveEnd;let R=s.directiveStylingLast;for(-1===R?R=s.directiveStart:R++;R<T&&(y=r[R],l=hf(l,y.hostAttrs,f),y!==n);)R++;return null!==n&&(s.directiveStylingLast=R),l}function hf(n,r,s){const l=s?1:2;let f=-1;if(null!==r)for(let y=0;y<r.length;y++){const T=r[y];"number"==typeof T?f=T:f===l&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Wi(n,T,!!s||r[++y]))}return void 0===n?null:n}function Ty(n,r,s,l,f,y){const T=null===r;let R;for(;f>0;){const F=n[f],X=Array.isArray(F),ie=X?F[1]:F,Pe=null===ie;let at=s[f+1];at===ri&&(at=Pe?xe:void 0);let xt=Pe?fa(at,l):ie===l?at:void 0;if(X&&!ph(xt)&&(xt=fa(F,l)),ph(xt)&&(R=xt,T))return R;const rn=n[f+1];f=T?Wa(rn):al(rn)}if(null!==r){let F=y?r.residualClasses:r.residualStyles;null!=F&&(R=fa(F,l))}return R}function ph(n){return void 0!==n}function Gg(n,r=""){const s=k(),l=b(),f=n+20,y=l.firstCreatePass?tc(l,f,1,r,null):l.data[f],T=s[f]=function Tc(n,r){return jr(n)?n.createText(r):n.createTextNode(r)}(s[11],r);Ac(l,s,T,y),Le(y,!1)}function Mu(n){return mp("",n,""),Mu}function mp(n,r,s){const l=k(),f=lh(l,n,r,s);return f!==ri&&Tu(l,ks(),f),mp}const Kc=void 0;var $l=["en",[["a","p"],["AM","PM"],Kc],[["AM","PM"],Kc,Kc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Kc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Kc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Kc,"{1} 'at' {0}",Kc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Md(n){const s=Math.floor(Math.abs(n)),l=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===l?1:5}];let Oo={};function vp(n){const r=function _h(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=Ea(r);if(s)return s;const l=r.split("-")[0];if(s=Ea(l),s)return s;if("en"===l)return $l;throw new Error(`Missing locale data for the locale "${n}".`)}function yh(n){return vp(n)[Hr.PluralCase]}function Ea(n){return n in Oo||(Oo[n]=Mn.ng&&Mn.ng.common&&Mn.ng.common.locales&&Mn.ng.common.locales[n]),Oo[n]}var Hr=(()=>((Hr=Hr||{})[Hr.LocaleId=0]="LocaleId",Hr[Hr.DayPeriodsFormat=1]="DayPeriodsFormat",Hr[Hr.DayPeriodsStandalone=2]="DayPeriodsStandalone",Hr[Hr.DaysFormat=3]="DaysFormat",Hr[Hr.DaysStandalone=4]="DaysStandalone",Hr[Hr.MonthsFormat=5]="MonthsFormat",Hr[Hr.MonthsStandalone=6]="MonthsStandalone",Hr[Hr.Eras=7]="Eras",Hr[Hr.FirstDayOfWeek=8]="FirstDayOfWeek",Hr[Hr.WeekendRange=9]="WeekendRange",Hr[Hr.DateFormat=10]="DateFormat",Hr[Hr.TimeFormat=11]="TimeFormat",Hr[Hr.DateTimeFormat=12]="DateTimeFormat",Hr[Hr.NumberSymbols=13]="NumberSymbols",Hr[Hr.NumberFormats=14]="NumberFormats",Hr[Hr.CurrencyCode=15]="CurrencyCode",Hr[Hr.CurrencySymbol=16]="CurrencySymbol",Hr[Hr.CurrencyName=17]="CurrencyName",Hr[Hr.Currencies=18]="Currencies",Hr[Hr.Directionality=19]="Directionality",Hr[Hr.PluralCase=20]="PluralCase",Hr[Hr.ExtraData=21]="ExtraData",Hr))();const Ru="en-US";let By=Ru;function tv(n,r,s,l,f){if(n=ne(n),Array.isArray(n))for(let y=0;y<n.length;y++)tv(n[y],r,s,l,f);else{const y=b(),T=k();let R=Vc(n)?n:ne(n.provide),F=ng(n);const X=C(),ie=1048575&X.providerIndexes,Pe=X.directiveStart,at=X.providerIndexes>>20;if(Vc(n)||!n.multi){const xt=new ca(F,f,sf),rn=rv(R,r,f?ie:ie+at,Pe);-1===rn?(Cs(gi(X,T),y,R),nv(y,n,r.length),r.push(R),X.directiveStart++,X.directiveEnd++,f&&(X.providerIndexes+=1048576),s.push(xt),T.push(xt)):(s[rn]=xt,T[rn]=xt)}else{const xt=rv(R,r,ie+at,Pe),rn=rv(R,r,ie,ie+at),Rn=xt>=0&&s[xt],jn=rn>=0&&s[rn];if(f&&!jn||!f&&!Rn){Cs(gi(X,T),y,R);const fr=function pb(n,r,s,l,f){const y=new ca(n,s,sf);return y.multi=[],y.index=r,y.componentProviders=0,p0(y,f,l&&!s),y}(f?fb:hb,s.length,f,l,F);!f&&jn&&(s[rn].providerFactory=fr),nv(y,n,r.length,0),r.push(R),X.directiveStart++,X.directiveEnd++,f&&(X.providerIndexes+=1048576),s.push(fr),T.push(fr)}else nv(y,n,xt>-1?xt:rn,p0(s[f?rn:xt],F,!f&&l));!f&&l&&jn&&s[rn].componentProviders++}}}function nv(n,r,s,l){const f=Vc(r),y=function ig(n){return!!n.useClass}(r);if(f||y){const F=(y?ne(r.useClass):r).prototype.ngOnDestroy;if(F){const X=n.destroyHooks||(n.destroyHooks=[]);if(!f&&r.multi){const ie=X.indexOf(s);-1===ie?X.push(s,[l,F]):X[ie+1].push(l,F)}else X.push(s,F)}}}function p0(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function rv(n,r,s,l){for(let f=s;f<l;f++)if(r[f]===n)return f;return-1}function hb(n,r,s,l){return iv(this.multi,[])}function fb(n,r,s,l){const f=this.multi;let y;if(this.providerFactory){const T=this.providerFactory.componentProviders,R=U(s,s[1],this.providerFactory.index,l);y=R.slice(0,T),iv(f,y);for(let F=T;F<R.length;F++)y.push(R[F])}else y=[],iv(f,y);return y}function iv(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function g0(n,r=[]){return s=>{s.providersResolver=(l,f)=>function db(n,r,s){const l=b();if(l.firstCreatePass){const f=Ot(n);tv(s,l.data,l.blueprint,f,!0),tv(r,l.data,l.blueprint,f,!1)}}(l,f?f(n):n,r)}}class m0{}class yb{resolveComponentFactory(r){throw function mb(n){const r=Error(`No component factory found for ${De(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let Wy=(()=>{class n{}return n.NULL=new yb,n})();function _b(){return Dp(C(),k())}function Dp(n,r){return new nm(zt(n,r))}let nm=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=_b,n})();function vb(n){return n instanceof nm?n.nativeElement:n}class _0{}let Eb=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function wb(){const n=k(),s=dr(C().index,n);return function bb(n){return n[11]}(be(s)?s:n)}(),n})(),Ib=(()=>{class n{}return n.\u0275prov=tt({token:n,providedIn:"root",factory:()=>null}),n})();class v0{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const E0=new v0("13.2.7"),sv={};function qy(n,r,s,l,f=!1){for(;null!==s;){const y=r[s.index];if(null!==y&&l.push($(y)),ke(y))for(let R=10;R<y.length;R++){const F=y[R],X=F[1].firstChild;null!==X&&qy(F[1],F,X,l)}const T=s.type;if(8&T)qy(n,r,s.child,l);else if(32&T){const R=lt(s,r);let F;for(;F=R();)l.push(F)}else if(16&T){const R=qd(r,s);if(Array.isArray(R))l.push(...R);else{const F=On(r[16]);qy(F[1],F,R,l,!0)}}s=f?s.projectionNext:s.next}return l}class rm{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return qy(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(ke(r)){const s=r[8],l=s?s.indexOf(this):-1;l>-1&&(Gd(r,l),Xs(s,l))}this._attachedToViewContainer=!1}wf(this._lView[1],this._lView)}onDestroy(r){ym(this._lView[1],this._lView,null,r)}markForCheck(){Hf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Zp(this._lView[1],this._lView,this.context)}checkNoChanges(){!function l_(n,r,s){mr(!0);try{Zp(n,r,s)}finally{mr(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Ve(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Hd(n,r){Mc(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Ve(902,"");this._appRef=r}}class Cb extends rm{constructor(r){super(r),this._view=r}detectChanges(){Gf(this._view)}checkNoChanges(){!function Xp(n){mr(!0);try{Gf(n)}finally{mr(!1)}}(this._view)}get context(){return null}}class b0 extends Wy{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=gt(r);return new ov(s,this.ngModule)}}function w0(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class ov extends m0{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function Qu(n){return n.map(Xu).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return w0(this.componentDef.inputs)}get outputs(){return w0(this.componentDef.outputs)}create(r,s,l,f){const y=(f=f||this.ngModule)?function Tb(n,r){return{get:(s,l,f)=>{const y=n.get(s,sv,f);return y!==sv||l===sv?y:r.get(s,l,f)}}}(r,f.injector):r,T=y.get(_0,j),R=y.get(Ib,null),F=T.createRenderer(null,this.componentDef),X=this.componentDef.selectors[0][0]||"div",ie=l?function mm(n,r,s){if(jr(n))return n.selectRootElement(r,s===kt.ShadowDom);let l="string"==typeof r?n.querySelector(r):r;return l.textContent="",l}(F,l,this.componentDef.encapsulation):Sc(T.createRenderer(null,this.componentDef),X,function Db(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(X)),Pe=this.componentDef.onPush?576:528,at=function Gm(n,r){return{components:[],scheduler:n||Cc,clean:Sm,playerHandler:r||null,flags:0}}(),xt=wo(0,null,null,1,0,null,null,null,null,null),rn=_d(null,xt,at,Pe,null,null,T,F,R,y);let Rn,jn;No(rn);try{const fr=function Hm(n,r,s,l,f,y){const T=s[1];s[20]=n;const F=tc(T,20,2,"#host",null),X=F.mergedAttrs=r.hostAttrs;null!==X&&(Wf(F,X,!0),null!==n&&(Is(f,n,X),null!==F.classes&&Kd(f,n,F.classes),null!==F.styles&&Pc(f,n,F.styles)));const ie=l.createRenderer(n,r),Pe=_d(s,Nf(r),null,r.onPush?64:16,s[20],F,l,ie,y||null,null);return T.firstCreatePass&&(Cs(gi(F,s),T,r.type),rh(T,F),Cm(F,s.length,1)),eu(s,Pe),s[20]=Pe}(ie,this.componentDef,rn,T,F);if(ie)if(l)Is(F,ie,["ng-version",E0.full]);else{const{attrs:pn,classes:qr}=function Sf(n){const r=[],s=[];let l=1,f=2;for(;l<n.length;){let y=n[l];if("string"==typeof y)2===f?""!==y&&r.push(y,n[++l]):8===f&&s.push(y);else{if(!qi(f))break;f=y}l++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);pn&&Is(F,ie,pn),qr&&qr.length>0&&Kd(F,ie,qr.join(" "))}if(jn=gr(xt,20),void 0!==s){const pn=jn.projection=[];for(let qr=0;qr<this.ngContentSelectors.length;qr++){const $i=s[qr];pn.push(null!=$i?Array.from($i):null)}}Rn=function Xf(n,r,s,l,f){const y=s[1],T=function wm(n,r,s){const l=C();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),Dm(n,l,r,vd(n,r,1,null),s));const f=U(r,n,l.directiveStart,l);Js(f,r);const y=zt(l,r);return y&&Js(y,r),f}(y,s,r);if(l.components.push(T),n[8]=T,f&&f.forEach(F=>F(T,r)),r.contentQueries){const F=C();r.contentQueries(1,T,F.directiveStart)}const R=C();return!y.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(Co(R.index),jp(s[1],R,0,R.directiveStart,R.directiveEnd,r),Hp(r,T)),T}(fr,this.componentDef,rn,at,[dg]),th(xt,rn,null)}finally{Yo()}return new Ab(this.componentType,Rn,Dp(jn,rn),rn,jn)}}class Ab extends class gb{}{constructor(r,s,l,f,y){super(),this.location=l,this._rootLView=f,this._tNode=y,this.instance=s,this.hostView=this.changeDetectorRef=new Cb(f),this.componentType=r}get injector(){return new it(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}class Tp{}class I0{}const Sp=new Map;class T0 extends Tp{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new b0(this);const l=zn(r);this._bootstrapComponents=aa(l.bootstrap),this._r3Injector=wd(r,s,[{provide:Tp,useValue:this},{provide:Wy,useValue:this.componentFactoryResolver}],De(r)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(r)}get(r,s=ll.THROW_IF_NOT_FOUND,l=on.Default){return r===ll||r===Tp||r===eg?this:this._r3Injector.get(r,s,l)}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class av extends I0{constructor(r){super(),this.moduleType=r,null!==zn(r)&&function Mb(n){const r=new Set;!function s(l){const f=zn(l,!0),y=f.id;null!==y&&(function C0(n,r,s){if(r&&r!==s)throw new Error(`Duplicate module registered for ${n} - ${De(r)} vs ${De(r.name)}`)}(y,Sp.get(y),l),Sp.set(y,l));const T=aa(f.imports);for(const R of T)r.has(R)||(r.add(R),s(R))}(n)}(r)}create(r){return new T0(this.moduleType,r)}}function S0(n,r,s){const l=Dr()+n,f=k();return f[l]===ri?Su(f,l,s?r.call(s):r()):function Id(n,r){return n[r]}(f,l)}function A0(n,r,s,l){return x0(k(),Dr(),n,r,s,l)}function x0(n,r,s,l,f,y){const T=r+s;return _a(n,T,f)?Su(n,T+1,y?l.call(y,f):l(f)):function im(n,r){const s=n[r];return s===ri?void 0:s}(n,T+1)}function k0(n,r){const s=b();let l;const f=n+20;s.firstCreatePass?(l=function Vb(n,r){if(r)for(let s=r.length-1;s>=0;s--){const l=r[s];if(n===l.name)return l}}(r,s.pipeRegistry),s.data[f]=l,l.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(f,l.onDestroy)):l=s.data[f];const y=l.factory||(l.factory=hi(l.type)),T=Bn(sf);try{const R=Fo(!1),F=y();return Fo(R),function Qm(n,r,s,l){s>=n.data.length&&(n.data[s]=null,n.blueprint[s]=null),r[s]=l}(s,k(),f,F),F}finally{Bn(T)}}function N0(n,r,s){const l=n+20,f=k(),y=function br(n,r){return n[r]}(f,l);return function sm(n,r){return n[1].data[r].pure}(f,l)?x0(f,Dr(),r,y.transform,s,y):y.transform(s)}function lv(n){return r=>{setTimeout(n,void 0,r)}}const Zc=class Gb extends a.xQ{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,l){var f,y,T;let R=r,F=s||(()=>null),X=l;if(r&&"object"==typeof r){const Pe=r;R=null===(f=Pe.next)||void 0===f?void 0:f.bind(Pe),F=null===(y=Pe.error)||void 0===y?void 0:y.bind(Pe),X=null===(T=Pe.complete)||void 0===T?void 0:T.bind(Pe)}this.__isAsync&&(F=lv(F),R&&(R=lv(R)),X&&(X=lv(X)));const ie=super.subscribe({next:R,error:F,complete:X});return r instanceof J.w&&r.add(ie),ie}};function zb(){return this._results[$c()]()}class uv{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=$c(),l=uv.prototype;l[s]||(l[s]=zb)}get changes(){return this._changes||(this._changes=new Zc)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const l=this;l.dirty=!1;const f=so(r);(this._changesDetected=!function Ja(n,r,s){if(n.length!==r.length)return!1;for(let l=0;l<n.length;l++){let f=n[l],y=r[l];if(s&&(f=s(f),y=s(y)),y!==f)return!1}return!0}(l._results,f,s))&&(l._results=f,l.length=f.length,l.last=f[this.length-1],l.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let om=(()=>{class n{}return n.__NG_ELEMENT_ID__=Yb,n})();const Wb=om,qb=class extends Wb{constructor(r,s,l){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=l}createEmbeddedView(r){const s=this._declarationTContainer.tViews,l=_d(this._declarationLView,s,r,16,null,s.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(l[19]=y.createEmbeddedView(s)),th(s,l,r),new rm(l)}};function Yb(){return Yy(C(),k())}function Yy(n,r){return 4&n.type?new qb(r,n,Dp(n,r)):null}let Ky=(()=>{class n{}return n.__NG_ELEMENT_ID__=Kb,n})();function Kb(){return B0(C(),k())}const Zb=Ky,F0=class extends Zb{constructor(r,s,l){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=l}get element(){return Dp(this._hostTNode,this._hostLView)}get injector(){return new it(this._hostTNode,this._hostLView)}get parentInjector(){const r=io(this._hostTNode,this._hostLView);if(jl(r)){const s=xi(r,this._hostLView),l=Ys(r);return new it(s[1].data[l+8],s)}return new it(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=L0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,l){const f=r.createEmbeddedView(s||{});return this.insert(f,l),f}createComponent(r,s,l,f,y){const T=r&&!function Hi(n){return"function"==typeof n}(r);let R;if(T)R=s;else{const Pe=s||{};R=Pe.index,l=Pe.injector,f=Pe.projectableNodes,y=Pe.ngModuleRef}const F=T?r:new ov(gt(r)),X=l||this.parentInjector;if(!y&&null==F.ngModule){const at=(T?X:this.parentInjector).get(Tp,null);at&&(y=at)}const ie=F.create(X,f,void 0,y);return this.insert(ie.hostView,R),ie}insert(r,s){const l=r._lView,f=l[1];if(function Nr(n){return ke(n[3])}(l)){const ie=this.indexOf(r);if(-1!==ie)this.detach(ie);else{const Pe=l[3],at=new F0(Pe,Pe[6],Pe[3]);at.detach(at.indexOf(r))}}const y=this._adjustIndex(s),T=this._lContainer;!function hd(n,r,s,l){const f=10+l,y=s.length;l>0&&(s[f-1][4]=r),l<y-10?(r[4]=s[f],Ia(s,10+l,r)):(s.push(r),r[4]=null),r[3]=s;const T=r[17];null!==T&&s!==T&&function xh(n,r){const s=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===s?n[9]=[r]:s.push(r)}(T,r);const R=r[19];null!==R&&R.insertView(n),r[2]|=128}(f,l,T,y);const R=kl(y,T),F=l[11],X=Ol(F,T[7]);return null!==X&&function dd(n,r,s,l,f,y){l[0]=f,l[6]=r,Mc(n,l,s,1,f,y)}(f,T[6],F,l,X,R),r.attachToViewContainerRef(),Ia(cv(T),y,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=L0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),l=Gd(this._lContainer,s);l&&(Xs(cv(this._lContainer),s),wf(l[1],l))}detach(r){const s=this._adjustIndex(r,-1),l=Gd(this._lContainer,s);return l&&null!=Xs(cv(this._lContainer),s)?new rm(l):null}_adjustIndex(r,s=0){return null==r?this.length+s:r}};function L0(n){return n[8]}function cv(n){return n[8]||(n[8]=[])}function B0(n,r){let s;const l=r[n.index];if(ke(l))s=l;else{let f;if(8&n.type)f=$(l);else{const y=r[11];f=y.createComment("");const T=zt(n,r);Pl(y,Ol(y,T),f,function xp(n,r){return jr(n)?n.nextSibling(r):r.nextSibling}(y,T),!1)}r[n.index]=s=Uf(l,r,f,n),eu(r,s)}return new F0(s,n,r)}class dv{constructor(r){this.queryList=r,this.matches=null}clone(){return new dv(this.queryList)}setDirty(){this.queryList.setDirty()}}class hv{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const l=null!==r.contentQueries?r.contentQueries[0]:s.length,f=[];for(let y=0;y<l;y++){const T=s.getByIndex(y);f.push(this.queries[T.indexInDeclarationView].clone())}return new hv(f)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==q0(r,s).matches&&this.queries[s].setDirty()}}class V0{constructor(r,s,l=null){this.predicate=r,this.flags=s,this.read=l}}class fv{constructor(r=[]){this.queries=r}elementStart(r,s){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let l=0;l<this.length;l++){const f=null!==s?s.length:0,y=this.getByIndex(l).embeddedTView(r,f);y&&(y.indexInDeclarationView=l,null!==s?s.push(y):s=[y])}return null!==s?new fv(s):null}template(r,s){for(let l=0;l<this.queries.length;l++)this.queries[l].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class pv{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new pv(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let l=r.parent;for(;null!==l&&8&l.type&&l.index!==s;)l=l.parent;return s===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const l=this.metadata.predicate;if(Array.isArray(l))for(let f=0;f<l.length;f++){const y=l[f];this.matchTNodeWithReadOption(r,s,Jb(s,y)),this.matchTNodeWithReadOption(r,s,S(s,r,y,!1,!1))}else l===om?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,S(s,r,l,!1,!1))}matchTNodeWithReadOption(r,s,l){if(null!==l){const f=this.metadata.read;if(null!==f)if(f===nm||f===Ky||f===om&&4&s.type)this.addMatch(s.index,-2);else{const y=S(s,r,f,!1,!1);null!==y&&this.addMatch(s.index,y)}else this.addMatch(s.index,l)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function Jb(n,r){const s=n.localNames;if(null!==s)for(let l=0;l<s.length;l+=2)if(s[l]===r)return s[l+1];return null}function tw(n,r,s,l){return-1===s?function ew(n,r){return 11&n.type?Dp(n,r):4&n.type?Yy(n,r):null}(r,n):-2===s?function nw(n,r,s){return s===nm?Dp(r,n):s===om?Yy(r,n):s===Ky?B0(r,n):void 0}(n,r,l):U(n,n[1],s,r)}function U0(n,r,s,l){const f=r[19].queries[l];if(null===f.matches){const y=n.data,T=s.matches,R=[];for(let F=0;F<T.length;F+=2){const X=T[F];R.push(X<0?null:tw(r,y[X],T[F+1],s.metadata.read))}f.matches=R}return f.matches}function gv(n,r,s,l){const f=n.queries.getByIndex(s),y=f.matches;if(null!==y){const T=U0(n,r,f,s);for(let R=0;R<y.length;R+=2){const F=y[R];if(F>0)l.push(T[R/2]);else{const X=y[R+1],ie=r[-F];for(let Pe=10;Pe<ie.length;Pe++){const at=ie[Pe];at[17]===at[3]&&gv(at[1],at,X,l)}if(null!==ie[9]){const Pe=ie[9];for(let at=0;at<Pe.length;at++){const xt=Pe[at];gv(xt[1],xt,X,l)}}}}}return l}function $0(n){const r=k(),s=b(),l=ho();jo(l+1);const f=q0(s,l);if(n.dirty&&wr(r)===(2==(2&f.metadata.flags))){if(null===f.matches)n.reset([]);else{const y=f.crossesNgTemplate?gv(s,r,l,[]):U0(s,r,f,l);n.reset(y,vb),n.notifyOnChanges()}return!0}return!1}function j0(n,r,s){const l=b();l.firstCreatePass&&(W0(l,new V0(n,r,s),-1),2==(2&r)&&(l.staticViewQueries=!0)),z0(l,k(),r)}function H0(n,r,s,l){const f=b();if(f.firstCreatePass){const y=C();W0(f,new V0(r,s,l),y.index),function iw(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(f,n),2==(2&s)&&(f.staticContentQueries=!0)}z0(f,k(),s)}function G0(){return function rw(n,r){return n[19].queries[r].queryList}(k(),ho())}function z0(n,r,s){const l=new uv(4==(4&s));ym(n,r,l,l.destroy),null===r[19]&&(r[19]=new hv),r[19].queries.push(new dv(l))}function W0(n,r,s){null===n.queries&&(n.queries=new fv),n.queries.track(new pv(r,s))}function q0(n,r){return n.queries.getByIndex(r)}function Qy(...n){}const cE=new zi("Application Initializer");let bv=(()=>{class n{constructor(s){this.appInits=s,this.resolve=Qy,this.reject=Qy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,f)=>{this.resolve=l,this.reject=f})}runInitializers(){if(this.initialized)return;const s=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const y=this.appInits[f]();if(Og(y))s.push(y);else if(kg(y)){const T=new Promise((R,F)=>{y.subscribe({complete:R,error:F})});s.push(T)}}Promise.all(s).then(()=>{l()}).catch(f=>{this.reject(f)}),0===s.length&&l(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(Ti(cE,8))},n.\u0275prov=tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const dE=new zi("AppId",{providedIn:"root",factory:function hE(){return`${wv()}${wv()}${wv()}`}});function wv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const fE=new zi("Platform Initializer"),pE=new zi("Platform ID"),gE=new zi("appBootstrapListener");let mE=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})();const Iv=new zi("LocaleId",{providedIn:"root",factory:()=>yl(Iv,on.Optional|on.SkipSelf)||function ww(){return"undefined"!=typeof $localize&&$localize.locale||Ru}()}),Iw=new zi("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Cw{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let Dw=(()=>{class n{compileModuleSync(s){return new av(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const l=this.compileModuleSync(s),y=aa(zn(s).declarations).reduce((T,R)=>{const F=gt(R);return F&&T.push(new ov(F)),T},[]);return new Cw(l,y)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Sw=(()=>Promise.resolve(0))();function Cv(n){"undefined"==typeof Zone?Sw.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class ac{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Zc(!1),this.onMicrotaskEmpty=new Zc(!1),this.onStable=new Zc(!1),this.onError=new Zc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!l&&s,f.shouldCoalesceRunChangeDetection=l,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function Aw(){let n=Mn.requestAnimationFrame,r=Mn.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const l=r[Zone.__symbol__("OriginalDelegate")];l&&(r=l)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function Rw(n){const r=()=>{!function Mw(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Mn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Tv(n),n.isCheckStableRunning=!0,Dv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Tv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,l,f,y,T,R)=>{try{return yE(n),s.invokeTask(f,y,T,R)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===y.type||n.shouldCoalesceRunChangeDetection)&&r(),_E(n)}},onInvoke:(s,l,f,y,T,R,F)=>{try{return yE(n),s.invoke(f,y,T,R,F)}finally{n.shouldCoalesceRunChangeDetection&&r(),_E(n)}},onHasTask:(s,l,f,y)=>{s.hasTask(f,y),l===f&&("microTask"==y.change?(n._hasPendingMicrotasks=y.microTask,Tv(n),Dv(n)):"macroTask"==y.change&&(n.hasPendingMacrotasks=y.macroTask))},onHandleError:(s,l,f,y)=>(s.handleError(f,y),n.runOutsideAngular(()=>n.onError.emit(y)),!1)})}(f)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ac.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ac.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(r,s,l){return this._inner.run(r,s,l)}runTask(r,s,l,f){const y=this._inner,T=y.scheduleEventTask("NgZoneEvent: "+f,r,xw,Qy,Qy);try{return y.runTask(T,s,l)}finally{y.cancelTask(T)}}runGuarded(r,s,l){return this._inner.runGuarded(r,s,l)}runOutsideAngular(r){return this._outer.run(r)}}const xw={};function Dv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Tv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function yE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function _E(n){n._nesting--,Dv(n)}class Pw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Zc,this.onMicrotaskEmpty=new Zc,this.onStable=new Zc,this.onError=new Zc}run(r,s,l){return r.apply(s,l)}runGuarded(r,s,l){return r.apply(s,l)}runOutsideAngular(r){return r()}runTask(r,s,l,f){return r.apply(s,l)}}let vE=(()=>{class n{constructor(s){this._ngZone=s,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ac.assertNotInAngularZone(),Cv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Cv(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(s)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,l,f){let y=-1;l&&l>0&&(y=setTimeout(()=>{this._callbacks=this._callbacks.filter(T=>T.timeoutId!==y),s(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:s,timeoutId:y,updateCb:f})}whenStable(s,l,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,l,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(s,l,f){return[]}}return n.\u0275fac=function(s){return new(s||n)(Ti(ac))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})(),EE=(()=>{class n{constructor(){this._applications=new Map,Sv.addToWindow(this)}registerApplication(s,l){this._applications.set(s,l)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,l=!0){return Sv.findTestabilityInTree(this,s,l)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})();class Ow{addToWindow(r){}findTestabilityInTree(r,s,l){return null}}function kw(n){Sv=n}let lc,Sv=new Ow;const bE=new zi("AllowMultipleToken");class Lw{constructor(r,s){this.name=r,this.token=s}}function wE(n,r,s=[]){const l=`Platform: ${r}`,f=new zi(l);return(y=[])=>{let T=IE();if(!T||T.injector.get(bE,!1))if(n)n(s.concat(y).concat({provide:f,useValue:!0}));else{const R=s.concat(y).concat({provide:f,useValue:!0},{provide:tg,useValue:"platform"});!function Bw(n){if(lc&&!lc.destroyed&&!lc.injector.get(bE,!1))throw new Ve(400,"");lc=n.get(CE);const r=n.get(fE,null);r&&r.forEach(s=>s())}(ll.create({providers:R,name:l}))}return function Vw(n){const r=IE();if(!r)throw new Ve(401,"");return r}()}}function IE(){return lc&&!lc.destroyed?lc:null}let CE=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,l){const R=function Uw(n,r){let s;return s="noop"===n?new Pw:("zone.js"===n?void 0:n)||new ac({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)}),s}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),F=[{provide:ac,useValue:R}];return R.run(()=>{const X=ll.create({providers:F,parent:this.injector,name:s.moduleType.name}),ie=s.create(X),Pe=ie.injector.get(Ml,null);if(!Pe)throw new Ve(402,"");return R.runOutsideAngular(()=>{const at=R.onError.subscribe({next:xt=>{Pe.handleError(xt)}});ie.onDestroy(()=>{xv(this._modules,ie),at.unsubscribe()})}),function $w(n,r,s){try{const l=s();return Og(l)?l.catch(f=>{throw r.runOutsideAngular(()=>n.handleError(f)),f}):l}catch(l){throw r.runOutsideAngular(()=>n.handleError(l)),l}}(Pe,R,()=>{const at=ie.injector.get(bv);return at.runInitializers(),at.donePromise.then(()=>(function K_(n){wt(n,"Expected localeId to be defined"),"string"==typeof n&&(By=n.toLowerCase().replace(/_/g,"-"))}(ie.injector.get(Iv,Ru)||Ru),this._moduleDoBootstrap(ie),ie))})})}bootstrapModule(s,l=[]){const f=DE({},l);return function Nw(n,r,s){const l=new av(s);return Promise.resolve(l)}(0,0,s).then(y=>this.bootstrapModuleFactory(y,f))}_moduleDoBootstrap(s){const l=s.injector.get(Av);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(f=>l.bootstrap(f));else{if(!s.instance.ngDoBootstrap)throw new Ve(403,"");s.instance.ngDoBootstrap(l)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ve(404,"");this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(Ti(ll))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})();function DE(n,r){return Array.isArray(r)?r.reduce(DE,n):Object.assign(Object.assign({},n),r)}let Av=(()=>{class n{constructor(s,l,f,y,T){this._zone=s,this._injector=l,this._exceptionHandler=f,this._componentFactoryResolver=y,this._initStatus=T,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const R=new Z.y(X=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{X.next(this._stable),X.complete()})}),F=new Z.y(X=>{let ie;this._zone.runOutsideAngular(()=>{ie=this._zone.onStable.subscribe(()=>{ac.assertNotInAngularZone(),Cv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,X.next(!0))})})});const Pe=this._zone.onUnstable.subscribe(()=>{ac.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{X.next(!1)}))});return()=>{ie.unsubscribe(),Pe.unsubscribe()}});this.isStable=(0,We.T)(R,F.pipe((0,Ne.B)()))}bootstrap(s,l){if(!this._initStatus.done)throw new Ve(405,"");let f;f=s instanceof m0?s:this._componentFactoryResolver.resolveComponentFactory(s),this.componentTypes.push(f.componentType);const y=function Fw(n){return n.isBoundToModule}(f)?void 0:this._injector.get(Tp),R=f.create(ll.NULL,[],l||f.selector,y),F=R.location.nativeElement,X=R.injector.get(vE,null),ie=X&&R.injector.get(EE);return X&&ie&&ie.registerApplication(F,X),R.onDestroy(()=>{this.detachView(R.hostView),xv(this.components,R),ie&&ie.unregisterApplication(F)}),this._loadComponent(R),R}tick(){if(this._runningTick)throw new Ve(101,"");try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const l=s;this._views.push(l),l.attachToAppRef(this)}detachView(s){const l=s;xv(this._views,l),l.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(gE,[]).concat(this._bootstrapListeners).forEach(f=>f(s))}ngOnDestroy(){this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(s){return new(s||n)(Ti(ac),Ti(ll),Ti(Ml),Ti(Wy),Ti(bv))},n.\u0275prov=tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function xv(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}let SE=!0,AE=!1;function Hw(){return AE=!0,SE}function Gw(){if(AE)throw new Error("Cannot enable prod mode after platform setup.");SE=!1}let zw=(()=>{class n{}return n.__NG_ELEMENT_ID__=Ww,n})();function Ww(n){return function qw(n,r,s){if(jt(n)&&!s){const l=dr(n.index,r);return new rm(l,l)}return 47&n.type?new rm(r[16],r):null}(C(),k(),16==(16&n))}class PE{constructor(){}supports(r){return Xh(r)}create(r){return new Jw(r)}}const Qw=(n,r)=>r;class Jw{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||Qw}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,l=this._removalsHead,f=0,y=null;for(;s||l;){const T=!l||s&&s.currentIndex<kE(l,f,y)?s:l,R=kE(T,f,y),F=T.currentIndex;if(T===l)f--,l=l._nextRemoved;else if(s=s._next,null==T.previousIndex)f++;else{y||(y=[]);const X=R-f,ie=F-f;if(X!=ie){for(let at=0;at<X;at++){const xt=at<y.length?y[at]:y[at]=0,rn=xt+at;ie<=rn&&rn<X&&(y[at]=xt+1)}y[T.previousIndex]=ie-X}}R!==F&&r(T,R,F)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!Xh(r))throw new Ve(900,"");return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let f,y,T,s=this._itHead,l=!1;if(Array.isArray(r)){this.length=r.length;for(let R=0;R<this.length;R++)y=r[R],T=this._trackByFn(R,y),null!==s&&Object.is(s.trackById,T)?(l&&(s=this._verifyReinsertion(s,y,T,R)),Object.is(s.item,y)||this._addIdentityChange(s,y)):(s=this._mismatch(s,y,T,R),l=!0),s=s._next}else f=0,function y_(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[$c()]();let l;for(;!(l=s.next()).done;)r(l.value)}}(r,R=>{T=this._trackByFn(f,R),null!==s&&Object.is(s.trackById,T)?(l&&(s=this._verifyReinsertion(s,R,T,f)),Object.is(s.item,R)||this._addIdentityChange(s,R)):(s=this._mismatch(s,R,T,f),l=!0),s=s._next,f++}),this.length=f;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,l,f){let y;return null===r?y=this._itTail:(y=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,y,f)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(l,f))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,y,f)):r=this._addAfter(new eI(s,l),y,f),r}_verifyReinsertion(r,s,l,f){let y=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==y?r=this._reinsertAfter(y,r._prev,f):r.currentIndex!=f&&(r.currentIndex=f,this._addToMoves(r,f)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const f=r._prevRemoved,y=r._nextRemoved;return null===f?this._removalsHead=y:f._nextRemoved=y,null===y?this._removalsTail=f:y._prevRemoved=f,this._insertAfter(r,s,l),this._addToMoves(r,l),r}_moveAfter(r,s,l){return this._unlink(r),this._insertAfter(r,s,l),this._addToMoves(r,l),r}_addAfter(r,s,l){return this._insertAfter(r,s,l),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,l){const f=null===s?this._itHead:s._next;return r._next=f,r._prev=s,null===f?this._itTail=r:f._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new OE),this._linkedRecords.put(r),r.currentIndex=l,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,l=r._next;return null===s?this._itHead=l:s._next=l,null===l?this._itTail=s:l._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new OE),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class eI{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class tI{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===s||s<=l.currentIndex)&&Object.is(l.trackById,r))return l;return null}remove(r){const s=r._prevDup,l=r._nextDup;return null===s?this._head=l:s._nextDup=l,null===l?this._tail=s:l._prevDup=s,null===this._head}}class OE{constructor(){this.map=new Map}put(r){const s=r.trackById;let l=this.map.get(s);l||(l=new tI,this.map.set(s,l)),l.add(r)}get(r,s){const f=this.map.get(r);return f?f.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function kE(n,r,s){const l=n.previousIndex;if(null===l)return l;let f=0;return s&&l<s.length&&(f=s[l]),l+r+f}class NE{constructor(){}supports(r){return r instanceof Map||Qh(r)}create(){return new nI}}class nI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||Qh(r)))throw new Ve(900,"")}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(l,f)=>{if(s&&s.key===f)this._maybeAddToChanges(s,l),this._appendAfter=s,s=s._next;else{const y=this._getOrCreateRecordForKey(f,l);s=this._insertBeforeOrAppend(s,y)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let l=s;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const l=r._prev;return s._next=r,s._prev=l,r._prev=s,l&&(l._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const f=this._records.get(r);this._maybeAddToChanges(f,s);const y=f._prev,T=f._next;return y&&(y._next=T),T&&(T._prev=y),f._next=null,f._prev=null,f}const l=new rI(r);return this._records.set(r,l),l.currentValue=s,this._addToAdditions(l),l}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(l=>s(r[l],l))}}class rI{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function FE(){return new kv([new PE])}let kv=(()=>{class n{constructor(s){this.factories=s}static create(s,l){if(null!=l){const f=l.factories.slice();s=s.concat(f)}return new n(s)}static extend(s){return{provide:n,useFactory:l=>n.create(s,l||FE()),deps:[[n,new tl,new _l]]}}find(s){const l=this.factories.find(f=>f.supports(s));if(null!=l)return l;throw new Ve(901,"")}}return n.\u0275prov=tt({token:n,providedIn:"root",factory:FE}),n})();function LE(){return new Nv([new NE])}let Nv=(()=>{class n{constructor(s){this.factories=s}static create(s,l){if(l){const f=l.factories.slice();s=s.concat(f)}return new n(s)}static extend(s){return{provide:n,useFactory:l=>n.create(s,l||LE()),deps:[[n,new tl,new _l]]}}find(s){const l=this.factories.find(y=>y.supports(s));if(l)return l;throw new Ve(901,"")}}return n.\u0275prov=tt({token:n,providedIn:"root",factory:LE}),n})();const oI=wE(null,"core",[{provide:pE,useValue:"unknown"},{provide:CE,deps:[ll]},{provide:EE,deps:[]},{provide:mE,deps:[]}]);let aI=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(Ti(Av))},n.\u0275mod=Gr({type:n}),n.\u0275inj=Ct({}),n})()},4182:(dn,ft,L)=>{"use strict";L.d(ft,{qu:()=>Xn,NI:()=>wi,u5:()=>vi,JU:()=>ne,a5:()=>Yn,JJ:()=>nr,JL:()=>_r,On:()=>er,UX:()=>bs,kI:()=>Xe,_Y:()=>rr});var a=L(5e3),J=L(9808),Z=L(2916),We=L(6688),Ne=L(4850),ae=L(7830),Ae=L(5254);function Ie(H,B){return new Z.y(N=>{const re=H.length;if(0===re)return void N.complete();const Ut=new Array(re);let E=0,k=0;for(let b=0;b<re;b++){const v=(0,Ae.D)(H[b]);let C=!1;N.add(v.subscribe({next:W=>{C||(C=!0,k++),Ut[b]=W},error:W=>N.error(W),complete:()=>{E++,(E===re||!C)&&(k===re&&N.next(B?B.reduce((W,pe,Le)=>(W[pe]=Ut[Le],W),{}):Ut),N.complete())}}))}})}let oe=(()=>{class H{constructor(N,re){this._renderer=N,this._elementRef=re,this.onChange=Ut=>{},this.onTouched=()=>{}}setProperty(N,re){this._renderer.setProperty(this._elementRef.nativeElement,N,re)}registerOnTouched(N){this.onTouched=N}registerOnChange(N){this.onChange=N}setDisabledState(N){this.setProperty("disabled",N)}}return H.\u0275fac=function(N){return new(N||H)(a.Y36(a.Qsj),a.Y36(a.SBq))},H.\u0275dir=a.lG2({type:H}),H})(),ve=(()=>{class H extends oe{}return H.\u0275fac=function(){let B;return function(re){return(B||(B=a.n5z(H)))(re||H)}}(),H.\u0275dir=a.lG2({type:H,features:[a.qOj]}),H})();const ne=new a.OlP("NgValueAccessor"),Ve={provide:ne,useExisting:(0,a.Gpc)(()=>Be),multi:!0},Fe=new a.OlP("CompositionEventMode");let Be=(()=>{class H extends oe{constructor(N,re,Ut){super(N,re),this._compositionMode=Ut,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ee(){const H=(0,J.q)()?(0,J.q)().getUserAgent():"";return/android (\d+)/.test(H.toLowerCase())}())}writeValue(N){this.setProperty("value",null==N?"":N)}_handleInput(N){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(N)}_compositionStart(){this._composing=!0}_compositionEnd(N){this._composing=!1,this._compositionMode&&this.onChange(N)}}return H.\u0275fac=function(N){return new(N||H)(a.Y36(a.Qsj),a.Y36(a.SBq),a.Y36(Fe,8))},H.\u0275dir=a.lG2({type:H,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(N,re){1&N&&a.NdJ("input",function(E){return re._handleInput(E.target.value)})("blur",function(){return re.onTouched()})("compositionstart",function(){return re._compositionStart()})("compositionend",function(E){return re._compositionEnd(E.target.value)})},features:[a._Bn([Ve]),a.qOj]}),H})();function Et(H){return null==H||0===H.length}function we(H){return null!=H&&"number"==typeof H.length}const dt=new a.OlP("NgValidators"),St=new a.OlP("NgAsyncValidators"),Pt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Xe{static min(B){return function Tt(H){return B=>{if(Et(B.value)||Et(H))return null;const N=parseFloat(B.value);return!isNaN(N)&&N<H?{min:{min:H,actual:B.value}}:null}}(B)}static max(B){return function me(H){return B=>{if(Et(B.value)||Et(H))return null;const N=parseFloat(B.value);return!isNaN(N)&&N>H?{max:{max:H,actual:B.value}}:null}}(B)}static required(B){return function Oe(H){return Et(H.value)?{required:!0}:null}(B)}static requiredTrue(B){return function Se(H){return!0===H.value?null:{required:!0}}(B)}static email(B){return function fe(H){return Et(H.value)||Pt.test(H.value)?null:{email:!0}}(B)}static minLength(B){return function ye(H){return B=>Et(B.value)||!we(B.value)?null:B.value.length<H?{minlength:{requiredLength:H,actualLength:B.value.length}}:null}(B)}static maxLength(B){return function je(H){return B=>we(B.value)&&B.value.length>H?{maxlength:{requiredLength:H,actualLength:B.value.length}}:null}(B)}static pattern(B){return function Ze(H){if(!H)return Mt;let B,N;return"string"==typeof H?(N="","^"!==H.charAt(0)&&(N+="^"),N+=H,"$"!==H.charAt(H.length-1)&&(N+="$"),B=new RegExp(N)):(N=H.toString(),B=H),re=>{if(Et(re.value))return null;const Ut=re.value;return B.test(Ut)?null:{pattern:{requiredPattern:N,actualValue:Ut}}}}(B)}static nullValidator(B){return null}static compose(B){return Ce(B)}static composeAsync(B){return Gt(B)}}function Mt(H){return null}function Jt(H){return null!=H}function mt(H){const B=(0,a.QGY)(H)?(0,Ae.D)(H):H;return(0,a.CqO)(B),B}function wt(H){let B={};return H.forEach(N=>{B=null!=N?Object.assign(Object.assign({},B),N):B}),0===Object.keys(B).length?null:B}function Ye(H,B){return B.map(N=>N(H))}function bt(H){return H.map(B=>function q(H){return!H.validate}(B)?B:N=>B.validate(N))}function Ce(H){if(!H)return null;const B=H.filter(Jt);return 0==B.length?null:function(N){return wt(Ye(N,B))}}function tt(H){return null!=H?Ce(bt(H)):null}function Gt(H){if(!H)return null;const B=H.filter(Jt);return 0==B.length?null:function(N){return function De(...H){if(1===H.length){const B=H[0];if((0,We.k)(B))return Ie(B,null);if((0,ae.K)(B)&&Object.getPrototypeOf(B)===Object.prototype){const N=Object.keys(B);return Ie(N.map(re=>B[re]),N)}}if("function"==typeof H[H.length-1]){const B=H.pop();return Ie(H=1===H.length&&(0,We.k)(H[0])?H[0]:H,null).pipe((0,Ne.U)(N=>B(...N)))}return Ie(H,null)}(Ye(N,B).map(mt)).pipe((0,Ne.U)(wt))}}function Ct(H){return null!=H?Gt(bt(H)):null}function sn(H,B){return null===H?[B]:Array.isArray(H)?[...H,B]:[H,B]}function _n(H){return H?Array.isArray(H)?H:[H]:[]}function gn(H,B){return Array.isArray(H)?H.includes(B):H===B}function qn(H,B){const N=_n(B);return _n(H).forEach(Ut=>{gn(N,Ut)||N.push(Ut)}),N}function Zr(H,B){return _n(B).filter(N=>!gn(H,N))}class Qn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(B){this._rawValidators=B||[],this._composedValidatorFn=tt(this._rawValidators)}_setAsyncValidators(B){this._rawAsyncValidators=B||[],this._composedAsyncValidatorFn=Ct(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(B){this._onDestroyCallbacks.push(B)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(B=>B()),this._onDestroyCallbacks=[]}reset(B){this.control&&this.control.reset(B)}hasError(B,N){return!!this.control&&this.control.hasError(B,N)}getError(B,N){return this.control?this.control.getError(B,N):null}}class Yn extends Qn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class on extends Qn{get formDirective(){return null}get path(){return null}}class Rr{constructor(B){this._cd=B}is(B){var N,re,Ut;return"submitted"===B?!!(null===(N=this._cd)||void 0===N?void 0:N.submitted):!!(null===(Ut=null===(re=this._cd)||void 0===re?void 0:re.control)||void 0===Ut?void 0:Ut[B])}}let nr=(()=>{class H extends Rr{constructor(N){super(N)}}return H.\u0275fac=function(N){return new(N||H)(a.Y36(Yn,2))},H.\u0275dir=a.lG2({type:H,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(N,re){2&N&&a.ekj("ng-untouched",re.is("untouched"))("ng-touched",re.is("touched"))("ng-pristine",re.is("pristine"))("ng-dirty",re.is("dirty"))("ng-valid",re.is("valid"))("ng-invalid",re.is("invalid"))("ng-pending",re.is("pending"))},features:[a.qOj]}),H})(),_r=(()=>{class H extends Rr{constructor(N){super(N)}}return H.\u0275fac=function(N){return new(N||H)(a.Y36(on,10))},H.\u0275dir=a.lG2({type:H,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(N,re){2&N&&a.ekj("ng-untouched",re.is("untouched"))("ng-touched",re.is("touched"))("ng-pristine",re.is("pristine"))("ng-dirty",re.is("dirty"))("ng-valid",re.is("valid"))("ng-invalid",re.is("invalid"))("ng-pending",re.is("pending"))("ng-submitted",re.is("submitted"))},features:[a.qOj]}),H})();function Ge(H,B){(function vn(H,B){const N=function bn(H){return H._rawValidators}(H);null!==B.validator?H.setValidators(sn(N,B.validator)):"function"==typeof N&&H.setValidators([N]);const re=function kn(H){return H._rawAsyncValidators}(H);null!==B.asyncValidator?H.setAsyncValidators(sn(re,B.asyncValidator)):"function"==typeof re&&H.setAsyncValidators([re]);const Ut=()=>H.updateValueAndValidity();tn(B._rawValidators,Ut),tn(B._rawAsyncValidators,Ut)})(H,B),B.valueAccessor.writeValue(H.value),function Gn(H,B){B.valueAccessor.registerOnChange(N=>{H._pendingValue=N,H._pendingChange=!0,H._pendingDirty=!0,"change"===H.updateOn&&Sr(H,B)})}(H,B),function Gr(H,B){const N=(re,Ut)=>{B.valueAccessor.writeValue(re),Ut&&B.viewToModelUpdate(re)};H.registerOnChange(N),B._registerOnDestroy(()=>{H._unregisterOnChange(N)})}(H,B),function An(H,B){B.valueAccessor.registerOnTouched(()=>{H._pendingTouched=!0,"blur"===H.updateOn&&H._pendingChange&&Sr(H,B),"submit"!==H.updateOn&&H.markAsTouched()})}(H,B),function un(H,B){if(B.valueAccessor.setDisabledState){const N=re=>{B.valueAccessor.setDisabledState(re)};H.registerOnDisabledChange(N),B._registerOnDestroy(()=>{H._unregisterOnDisabledChange(N)})}}(H,B)}function tn(H,B){H.forEach(N=>{N.registerOnValidatorChange&&N.registerOnValidatorChange(B)})}function Sr(H,B){H._pendingDirty&&H.markAsDirty(),H.setValue(H._pendingValue,{emitModelToViewChange:!1}),B.viewToModelUpdate(H._pendingValue),H._pendingChange=!1}function di(H,B){const N=H.indexOf(B);N>-1&&H.splice(N,1)}const Br="VALID",Yr="INVALID",Kr="PENDING",nn="DISABLED";function ir(H){return(yi(H)?H.validators:H)||null}function ii(H){return Array.isArray(H)?tt(H):H||null}function ni(H,B){return(yi(B)?B.asyncValidators:H)||null}function Vr(H){return Array.isArray(H)?Ct(H):H||null}function yi(H){return null!=H&&!Array.isArray(H)&&"object"==typeof H}const Wr=H=>H instanceof wi,bi=H=>H instanceof oi,Xr=H=>H instanceof ki;function sr(H){return Wr(H)?H.value:H.getRawValue()}function Zi(H,B){const N=bi(H),re=H.controls;if(!(N?Object.keys(re):re).length)throw new a.vHH(1e3,"");if(!re[B])throw new a.vHH(1001,"")}function Oi(H,B){bi(H),H._forEachChild((re,Ut)=>{if(void 0===B[Ut])throw new a.vHH(1002,"")})}class Mi{constructor(B,N){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=B,this._rawAsyncValidators=N,this._composedValidatorFn=ii(this._rawValidators),this._composedAsyncValidatorFn=Vr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(B){this._rawValidators=this._composedValidatorFn=B}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(B){this._rawAsyncValidators=this._composedAsyncValidatorFn=B}get parent(){return this._parent}get valid(){return this.status===Br}get invalid(){return this.status===Yr}get pending(){return this.status==Kr}get disabled(){return this.status===nn}get enabled(){return this.status!==nn}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(B){this._rawValidators=B,this._composedValidatorFn=ii(B)}setAsyncValidators(B){this._rawAsyncValidators=B,this._composedAsyncValidatorFn=Vr(B)}addValidators(B){this.setValidators(qn(B,this._rawValidators))}addAsyncValidators(B){this.setAsyncValidators(qn(B,this._rawAsyncValidators))}removeValidators(B){this.setValidators(Zr(B,this._rawValidators))}removeAsyncValidators(B){this.setAsyncValidators(Zr(B,this._rawAsyncValidators))}hasValidator(B){return gn(this._rawValidators,B)}hasAsyncValidator(B){return gn(this._rawAsyncValidators,B)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(B={}){this.touched=!0,this._parent&&!B.onlySelf&&this._parent.markAsTouched(B)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(B=>B.markAllAsTouched())}markAsUntouched(B={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(N=>{N.markAsUntouched({onlySelf:!0})}),this._parent&&!B.onlySelf&&this._parent._updateTouched(B)}markAsDirty(B={}){this.pristine=!1,this._parent&&!B.onlySelf&&this._parent.markAsDirty(B)}markAsPristine(B={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(N=>{N.markAsPristine({onlySelf:!0})}),this._parent&&!B.onlySelf&&this._parent._updatePristine(B)}markAsPending(B={}){this.status=Kr,!1!==B.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!B.onlySelf&&this._parent.markAsPending(B)}disable(B={}){const N=this._parentMarkedDirty(B.onlySelf);this.status=nn,this.errors=null,this._forEachChild(re=>{re.disable(Object.assign(Object.assign({},B),{onlySelf:!0}))}),this._updateValue(),!1!==B.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},B),{skipPristineCheck:N})),this._onDisabledChange.forEach(re=>re(!0))}enable(B={}){const N=this._parentMarkedDirty(B.onlySelf);this.status=Br,this._forEachChild(re=>{re.enable(Object.assign(Object.assign({},B),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:B.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},B),{skipPristineCheck:N})),this._onDisabledChange.forEach(re=>re(!1))}_updateAncestors(B){this._parent&&!B.onlySelf&&(this._parent.updateValueAndValidity(B),B.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(B){this._parent=B}updateValueAndValidity(B={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Br||this.status===Kr)&&this._runAsyncValidator(B.emitEvent)),!1!==B.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!B.onlySelf&&this._parent.updateValueAndValidity(B)}_updateTreeValidity(B={emitEvent:!0}){this._forEachChild(N=>N._updateTreeValidity(B)),this.updateValueAndValidity({onlySelf:!0,emitEvent:B.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?nn:Br}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(B){if(this.asyncValidator){this.status=Kr,this._hasOwnPendingAsyncValidator=!0;const N=mt(this.asyncValidator(this));this._asyncValidationSubscription=N.subscribe(re=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(re,{emitEvent:B})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(B,N={}){this.errors=B,this._updateControlsErrors(!1!==N.emitEvent)}get(B){return function wn(H,B,N){if(null==B||(Array.isArray(B)||(B=B.split(N)),Array.isArray(B)&&0===B.length))return null;let re=H;return B.forEach(Ut=>{re=bi(re)?re.controls.hasOwnProperty(Ut)?re.controls[Ut]:null:Xr(re)&&re.at(Ut)||null}),re}(this,B,".")}getError(B,N){const re=N?this.get(N):this;return re&&re.errors?re.errors[B]:null}hasError(B,N){return!!this.getError(B,N)}get root(){let B=this;for(;B._parent;)B=B._parent;return B}_updateControlsErrors(B){this.status=this._calculateStatus(),B&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(B)}_initObservables(){this.valueChanges=new a.vpe,this.statusChanges=new a.vpe}_calculateStatus(){return this._allControlsDisabled()?nn:this.errors?Yr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Kr)?Kr:this._anyControlsHaveStatus(Yr)?Yr:Br}_anyControlsHaveStatus(B){return this._anyControls(N=>N.status===B)}_anyControlsDirty(){return this._anyControls(B=>B.dirty)}_anyControlsTouched(){return this._anyControls(B=>B.touched)}_updatePristine(B={}){this.pristine=!this._anyControlsDirty(),this._parent&&!B.onlySelf&&this._parent._updatePristine(B)}_updateTouched(B={}){this.touched=this._anyControlsTouched(),this._parent&&!B.onlySelf&&this._parent._updateTouched(B)}_isBoxedValue(B){return"object"==typeof B&&null!==B&&2===Object.keys(B).length&&"value"in B&&"disabled"in B}_registerOnCollectionChange(B){this._onCollectionChange=B}_setUpdateStrategy(B){yi(B)&&null!=B.updateOn&&(this._updateOn=B.updateOn)}_parentMarkedDirty(B){return!B&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class wi extends Mi{constructor(B=null,N,re){super(ir(N),ni(re,N)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(B),this._setUpdateStrategy(N),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),yi(N)&&N.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(B)?B.value:B)}setValue(B,N={}){this.value=this._pendingValue=B,this._onChange.length&&!1!==N.emitModelToViewChange&&this._onChange.forEach(re=>re(this.value,!1!==N.emitViewToModelChange)),this.updateValueAndValidity(N)}patchValue(B,N={}){this.setValue(B,N)}reset(B=this.defaultValue,N={}){this._applyFormState(B),this.markAsPristine(N),this.markAsUntouched(N),this.setValue(this.value,N),this._pendingChange=!1}_updateValue(){}_anyControls(B){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(B){this._onChange.push(B)}_unregisterOnChange(B){di(this._onChange,B)}registerOnDisabledChange(B){this._onDisabledChange.push(B)}_unregisterOnDisabledChange(B){di(this._onDisabledChange,B)}_forEachChild(B){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(B){this._isBoxedValue(B)?(this.value=this._pendingValue=B.value,B.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=B}}class oi extends Mi{constructor(B,N,re){super(ir(N),ni(re,N)),this.controls=B,this._initObservables(),this._setUpdateStrategy(N),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(B,N){return this.controls[B]?this.controls[B]:(this.controls[B]=N,N.setParent(this),N._registerOnCollectionChange(this._onCollectionChange),N)}addControl(B,N,re={}){this.registerControl(B,N),this.updateValueAndValidity({emitEvent:re.emitEvent}),this._onCollectionChange()}removeControl(B,N={}){this.controls[B]&&this.controls[B]._registerOnCollectionChange(()=>{}),delete this.controls[B],this.updateValueAndValidity({emitEvent:N.emitEvent}),this._onCollectionChange()}setControl(B,N,re={}){this.controls[B]&&this.controls[B]._registerOnCollectionChange(()=>{}),delete this.controls[B],N&&this.registerControl(B,N),this.updateValueAndValidity({emitEvent:re.emitEvent}),this._onCollectionChange()}contains(B){return this.controls.hasOwnProperty(B)&&this.controls[B].enabled}setValue(B,N={}){Oi(this,B),Object.keys(B).forEach(re=>{Zi(this,re),this.controls[re].setValue(B[re],{onlySelf:!0,emitEvent:N.emitEvent})}),this.updateValueAndValidity(N)}patchValue(B,N={}){null!=B&&(Object.keys(B).forEach(re=>{this.controls[re]&&this.controls[re].patchValue(B[re],{onlySelf:!0,emitEvent:N.emitEvent})}),this.updateValueAndValidity(N))}reset(B={},N={}){this._forEachChild((re,Ut)=>{re.reset(B[Ut],{onlySelf:!0,emitEvent:N.emitEvent})}),this._updatePristine(N),this._updateTouched(N),this.updateValueAndValidity(N)}getRawValue(){return this._reduceChildren({},(B,N,re)=>(B[re]=sr(N),B))}_syncPendingControls(){let B=this._reduceChildren(!1,(N,re)=>!!re._syncPendingControls()||N);return B&&this.updateValueAndValidity({onlySelf:!0}),B}_forEachChild(B){Object.keys(this.controls).forEach(N=>{const re=this.controls[N];re&&B(re,N)})}_setUpControls(){this._forEachChild(B=>{B.setParent(this),B._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(B){for(const N of Object.keys(this.controls)){const re=this.controls[N];if(this.contains(N)&&B(re))return!0}return!1}_reduceValue(){return this._reduceChildren({},(B,N,re)=>((N.enabled||this.disabled)&&(B[re]=N.value),B))}_reduceChildren(B,N){let re=B;return this._forEachChild((Ut,E)=>{re=N(re,Ut,E)}),re}_allControlsDisabled(){for(const B of Object.keys(this.controls))if(this.controls[B].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class ki extends Mi{constructor(B,N,re){super(ir(N),ni(re,N)),this.controls=B,this._initObservables(),this._setUpdateStrategy(N),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(B){return this.controls[B]}push(B,N={}){this.controls.push(B),this._registerControl(B),this.updateValueAndValidity({emitEvent:N.emitEvent}),this._onCollectionChange()}insert(B,N,re={}){this.controls.splice(B,0,N),this._registerControl(N),this.updateValueAndValidity({emitEvent:re.emitEvent})}removeAt(B,N={}){this.controls[B]&&this.controls[B]._registerOnCollectionChange(()=>{}),this.controls.splice(B,1),this.updateValueAndValidity({emitEvent:N.emitEvent})}setControl(B,N,re={}){this.controls[B]&&this.controls[B]._registerOnCollectionChange(()=>{}),this.controls.splice(B,1),N&&(this.controls.splice(B,0,N),this._registerControl(N)),this.updateValueAndValidity({emitEvent:re.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(B,N={}){Oi(this,B),B.forEach((re,Ut)=>{Zi(this,Ut),this.at(Ut).setValue(re,{onlySelf:!0,emitEvent:N.emitEvent})}),this.updateValueAndValidity(N)}patchValue(B,N={}){null!=B&&(B.forEach((re,Ut)=>{this.at(Ut)&&this.at(Ut).patchValue(re,{onlySelf:!0,emitEvent:N.emitEvent})}),this.updateValueAndValidity(N))}reset(B=[],N={}){this._forEachChild((re,Ut)=>{re.reset(B[Ut],{onlySelf:!0,emitEvent:N.emitEvent})}),this._updatePristine(N),this._updateTouched(N),this.updateValueAndValidity(N)}getRawValue(){return this.controls.map(B=>sr(B))}clear(B={}){this.controls.length<1||(this._forEachChild(N=>N._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:B.emitEvent}))}_syncPendingControls(){let B=this.controls.reduce((N,re)=>!!re._syncPendingControls()||N,!1);return B&&this.updateValueAndValidity({onlySelf:!0}),B}_forEachChild(B){this.controls.forEach((N,re)=>{B(N,re)})}_updateValue(){this.value=this.controls.filter(B=>B.enabled||this.disabled).map(B=>B.value)}_anyControls(B){return this.controls.some(N=>N.enabled&&B(N))}_setUpControls(){this._forEachChild(B=>this._registerControl(B))}_allControlsDisabled(){for(const B of this.controls)if(B.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(B){B.setParent(this),B._registerOnCollectionChange(this._onCollectionChange)}}const Ot={provide:Yn,useExisting:(0,a.Gpc)(()=>er)},Tn=(()=>Promise.resolve(null))();let er=(()=>{class H extends Yn{constructor(N,re,Ut,E,k){super(),this._changeDetectorRef=k,this.control=new wi,this._registered=!1,this.update=new a.vpe,this._parent=N,this._setValidators(re),this._setAsyncValidators(Ut),this.valueAccessor=function Wn(H,B){if(!B)return null;let N,re,Ut;return Array.isArray(B),B.forEach(E=>{E.constructor===Be?N=E:function zn(H){return Object.getPrototypeOf(H.constructor)===ve}(E)?re=E:Ut=E}),Ut||re||N||null}(0,E)}ngOnChanges(N){if(this._checkForErrors(),!this._registered||"name"in N){if(this._registered&&(this._checkName(),this.formDirective)){const re=N.name.previousValue;this.formDirective.removeControl({name:re,path:this._getPath(re)})}this._setUpControl()}"isDisabled"in N&&this._updateDisabled(N),function Ln(H,B){if(!H.hasOwnProperty("model"))return!1;const N=H.model;return!!N.isFirstChange()||!Object.is(B,N.currentValue)}(N,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(N){this.viewModel=N,this.update.emit(N)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ge(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(N){Tn.then(()=>{var re;this.control.setValue(N,{emitViewToModelChange:!1}),null===(re=this._changeDetectorRef)||void 0===re||re.markForCheck()})}_updateDisabled(N){const re=N.isDisabled.currentValue,Ut=""===re||re&&"false"!==re;Tn.then(()=>{var E;Ut&&!this.control.disabled?this.control.disable():!Ut&&this.control.disabled&&this.control.enable(),null===(E=this._changeDetectorRef)||void 0===E||E.markForCheck()})}_getPath(N){return this._parent?function Lt(H,B){return[...B.path,H]}(N,this._parent):[N]}}return H.\u0275fac=function(N){return new(N||H)(a.Y36(on,9),a.Y36(dt,10),a.Y36(St,10),a.Y36(ne,10),a.Y36(a.sBO,8))},H.\u0275dir=a.lG2({type:H,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[a._Bn([Ot]),a.qOj,a.TTD]}),H})(),rr=(()=>{class H{}return H.\u0275fac=function(N){return new(N||H)},H.\u0275dir=a.lG2({type:H,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),H})(),nt=(()=>{class H{}return H.\u0275fac=function(N){return new(N||H)},H.\u0275mod=a.oAB({type:H}),H.\u0275inj=a.cJS({}),H})();const Qr=new a.OlP("NgModelWithFormControlWarning");let Nr=(()=>{class H{}return H.\u0275fac=function(N){return new(N||H)},H.\u0275mod=a.oAB({type:H}),H.\u0275inj=a.cJS({imports:[[nt]]}),H})(),vi=(()=>{class H{}return H.\u0275fac=function(N){return new(N||H)},H.\u0275mod=a.oAB({type:H}),H.\u0275inj=a.cJS({imports:[Nr]}),H})(),bs=(()=>{class H{static withConfig(N){return{ngModule:H,providers:[{provide:Qr,useValue:N.warnOnNgModelWithFormControl}]}}}return H.\u0275fac=function(N){return new(N||H)},H.\u0275mod=a.oAB({type:H}),H.\u0275inj=a.cJS({imports:[Nr]}),H})(),Xn=(()=>{class H{group(N,re=null){const Ut=this._reduceControls(N);let b,E=null,k=null;return null!=re&&(function ns(H){return void 0!==H.asyncValidators||void 0!==H.validators||void 0!==H.updateOn}(re)?(E=null!=re.validators?re.validators:null,k=null!=re.asyncValidators?re.asyncValidators:null,b=null!=re.updateOn?re.updateOn:void 0):(E=null!=re.validator?re.validator:null,k=null!=re.asyncValidator?re.asyncValidator:null)),new oi(Ut,{asyncValidators:k,updateOn:b,validators:E})}control(N,re,Ut){return new wi(N,re,Ut)}array(N,re,Ut){const E=N.map(k=>this._createControl(k));return new ki(E,re,Ut)}_reduceControls(N){const re={};return Object.keys(N).forEach(Ut=>{re[Ut]=this._createControl(N[Ut])}),re}_createControl(N){return Wr(N)||bi(N)||Xr(N)?N:Array.isArray(N)?this.control(N[0],N.length>1?N[1]:null,N.length>2?N[2]:null):this.control(N)}}return H.\u0275fac=function(N){return new(N||H)},H.\u0275prov=a.Yz7({token:H,factory:H.\u0275fac,providedIn:bs}),H})()},2313:(dn,ft,L)=>{"use strict";L.d(ft,{b2:()=>Qn,H7:()=>An,q6:()=>qn});var a=L(9808),J=L(5e3);class Z extends a.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class We extends Z{static makeCurrent(){(0,a.HT)(new We)}onAndCancel(st,Re,gt){return st.addEventListener(Re,gt,!1),()=>{st.removeEventListener(Re,gt,!1)}}dispatchEvent(st,Re){st.dispatchEvent(Re)}remove(st){st.parentNode&&st.parentNode.removeChild(st)}createElement(st,Re){return(Re=Re||this.getDefaultDocument()).createElement(st)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(st){return st.nodeType===Node.ELEMENT_NODE}isShadowRoot(st){return st instanceof DocumentFragment}getGlobalEventTarget(st,Re){return"window"===Re?window:"document"===Re?st:"body"===Re?st.body:null}getBaseHref(st){const Re=function ae(){return Ne=Ne||document.querySelector("base"),Ne?Ne.getAttribute("href"):null}();return null==Re?null:function De(Dt){Ae=Ae||document.createElement("a"),Ae.setAttribute("href",Dt);const st=Ae.pathname;return"/"===st.charAt(0)?st:`/${st}`}(Re)}resetBaseElement(){Ne=null}getUserAgent(){return window.navigator.userAgent}getCookie(st){return(0,a.Mx)(document.cookie,st)}}let Ae,Ne=null;const Ie=new J.OlP("TRANSITION_ID"),ve=[{provide:J.ip1,useFactory:function oe(Dt,st,Re){return()=>{Re.get(J.CZH).donePromise.then(()=>{const gt=(0,a.q)(),Kt=st.querySelectorAll(`style[ng-transition="${Dt}"]`);for(let Ln=0;Ln<Kt.length;Ln++)gt.remove(Kt[Ln])})}},deps:[Ie,a.K0,J.zs3],multi:!0}];class ne{static init(){(0,J.VLi)(new ne)}addToWindow(st){J.dqk.getAngularTestability=(gt,Kt=!0)=>{const Ln=st.findTestabilityInTree(gt,Kt);if(null==Ln)throw new Error("Could not find testability for element.");return Ln},J.dqk.getAllAngularTestabilities=()=>st.getAllTestabilities(),J.dqk.getAllAngularRootElements=()=>st.getAllRootElements(),J.dqk.frameworkStabilizers||(J.dqk.frameworkStabilizers=[]),J.dqk.frameworkStabilizers.push(gt=>{const Kt=J.dqk.getAllAngularTestabilities();let Ln=Kt.length,zn=!1;const Er=function(Wn){zn=zn||Wn,Ln--,0==Ln&&gt(zn)};Kt.forEach(function(Wn){Wn.whenStable(Er)})})}findTestabilityInTree(st,Re,gt){if(null==Re)return null;const Kt=st.getTestability(Re);return null!=Kt?Kt:gt?(0,a.q)().isShadowRoot(Re)?this.findTestabilityInTree(st,Re.host,!0):this.findTestabilityInTree(st,Re.parentElement,!0):null}}let ce=(()=>{class Dt{build(){return new XMLHttpRequest}}return Dt.\u0275fac=function(Re){return new(Re||Dt)},Dt.\u0275prov=J.Yz7({token:Dt,factory:Dt.\u0275fac}),Dt})();const Ke=new J.OlP("EventManagerPlugins");let Ve=(()=>{class Dt{constructor(Re,gt){this._zone=gt,this._eventNameToPlugin=new Map,Re.forEach(Kt=>Kt.manager=this),this._plugins=Re.slice().reverse()}addEventListener(Re,gt,Kt){return this._findPluginFor(gt).addEventListener(Re,gt,Kt)}addGlobalEventListener(Re,gt,Kt){return this._findPluginFor(gt).addGlobalEventListener(Re,gt,Kt)}getZone(){return this._zone}_findPluginFor(Re){const gt=this._eventNameToPlugin.get(Re);if(gt)return gt;const Kt=this._plugins;for(let Ln=0;Ln<Kt.length;Ln++){const zn=Kt[Ln];if(zn.supports(Re))return this._eventNameToPlugin.set(Re,zn),zn}throw new Error(`No event manager plugin found for event ${Re}`)}}return Dt.\u0275fac=function(Re){return new(Re||Dt)(J.LFG(Ke),J.LFG(J.R0b))},Dt.\u0275prov=J.Yz7({token:Dt,factory:Dt.\u0275fac}),Dt})();class Ee{constructor(st){this._doc=st}addGlobalEventListener(st,Re,gt){const Kt=(0,a.q)().getGlobalEventTarget(this._doc,st);if(!Kt)throw new Error(`Unsupported event target ${Kt} for event ${Re}`);return this.addEventListener(Kt,Re,gt)}}let Fe=(()=>{class Dt{constructor(){this._stylesSet=new Set}addStyles(Re){const gt=new Set;Re.forEach(Kt=>{this._stylesSet.has(Kt)||(this._stylesSet.add(Kt),gt.add(Kt))}),this.onStylesAdded(gt)}onStylesAdded(Re){}getAllStyles(){return Array.from(this._stylesSet)}}return Dt.\u0275fac=function(Re){return new(Re||Dt)},Dt.\u0275prov=J.Yz7({token:Dt,factory:Dt.\u0275fac}),Dt})(),Be=(()=>{class Dt extends Fe{constructor(Re){super(),this._doc=Re,this._hostNodes=new Map,this._hostNodes.set(Re.head,[])}_addStylesToHost(Re,gt,Kt){Re.forEach(Ln=>{const zn=this._doc.createElement("style");zn.textContent=Ln,Kt.push(gt.appendChild(zn))})}addHost(Re){const gt=[];this._addStylesToHost(this._stylesSet,Re,gt),this._hostNodes.set(Re,gt)}removeHost(Re){const gt=this._hostNodes.get(Re);gt&&gt.forEach(Et),this._hostNodes.delete(Re)}onStylesAdded(Re){this._hostNodes.forEach((gt,Kt)=>{this._addStylesToHost(Re,Kt,gt)})}ngOnDestroy(){this._hostNodes.forEach(Re=>Re.forEach(Et))}}return Dt.\u0275fac=function(Re){return new(Re||Dt)(J.LFG(a.K0))},Dt.\u0275prov=J.Yz7({token:Dt,factory:Dt.\u0275fac}),Dt})();function Et(Dt){(0,a.q)().remove(Dt)}const we={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},dt=/%COMP%/g;function Se(Dt,st,Re){for(let gt=0;gt<st.length;gt++){let Kt=st[gt];Array.isArray(Kt)?Se(Dt,Kt,Re):(Kt=Kt.replace(dt,Dt),Re.push(Kt))}return Re}function fe(Dt){return st=>{if("__ngUnwrap__"===st)return Dt;!1===Dt(st)&&(st.preventDefault(),st.returnValue=!1)}}let je=(()=>{class Dt{constructor(Re,gt,Kt){this.eventManager=Re,this.sharedStylesHost=gt,this.appId=Kt,this.rendererByCompId=new Map,this.defaultRenderer=new Ze(Re)}createRenderer(Re,gt){if(!Re||!gt)return this.defaultRenderer;switch(gt.encapsulation){case J.ifc.Emulated:{let Kt=this.rendererByCompId.get(gt.id);return Kt||(Kt=new mt(this.eventManager,this.sharedStylesHost,gt,this.appId),this.rendererByCompId.set(gt.id,Kt)),Kt.applyToHost(Re),Kt}case 1:case J.ifc.ShadowDom:return new wt(this.eventManager,this.sharedStylesHost,Re,gt);default:if(!this.rendererByCompId.has(gt.id)){const Kt=Se(gt.id,gt.styles,[]);this.sharedStylesHost.addStyles(Kt),this.rendererByCompId.set(gt.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return Dt.\u0275fac=function(Re){return new(Re||Dt)(J.LFG(Ve),J.LFG(Be),J.LFG(J.AFp))},Dt.\u0275prov=J.Yz7({token:Dt,factory:Dt.\u0275fac}),Dt})();class Ze{constructor(st){this.eventManager=st,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(st,Re){return Re?document.createElementNS(we[Re]||Re,st):document.createElement(st)}createComment(st){return document.createComment(st)}createText(st){return document.createTextNode(st)}appendChild(st,Re){st.appendChild(Re)}insertBefore(st,Re,gt){st&&st.insertBefore(Re,gt)}removeChild(st,Re){st&&st.removeChild(Re)}selectRootElement(st,Re){let gt="string"==typeof st?document.querySelector(st):st;if(!gt)throw new Error(`The selector "${st}" did not match any elements`);return Re||(gt.textContent=""),gt}parentNode(st){return st.parentNode}nextSibling(st){return st.nextSibling}setAttribute(st,Re,gt,Kt){if(Kt){Re=Kt+":"+Re;const Ln=we[Kt];Ln?st.setAttributeNS(Ln,Re,gt):st.setAttribute(Re,gt)}else st.setAttribute(Re,gt)}removeAttribute(st,Re,gt){if(gt){const Kt=we[gt];Kt?st.removeAttributeNS(Kt,Re):st.removeAttribute(`${gt}:${Re}`)}else st.removeAttribute(Re)}addClass(st,Re){st.classList.add(Re)}removeClass(st,Re){st.classList.remove(Re)}setStyle(st,Re,gt,Kt){Kt&(J.JOm.DashCase|J.JOm.Important)?st.style.setProperty(Re,gt,Kt&J.JOm.Important?"important":""):st.style[Re]=gt}removeStyle(st,Re,gt){gt&J.JOm.DashCase?st.style.removeProperty(Re):st.style[Re]=""}setProperty(st,Re,gt){st[Re]=gt}setValue(st,Re){st.nodeValue=Re}listen(st,Re,gt){return"string"==typeof st?this.eventManager.addGlobalEventListener(st,Re,fe(gt)):this.eventManager.addEventListener(st,Re,fe(gt))}}class mt extends Ze{constructor(st,Re,gt,Kt){super(st),this.component=gt;const Ln=Se(Kt+"-"+gt.id,gt.styles,[]);Re.addStyles(Ln),this.contentAttr=function me(Dt){return"_ngcontent-%COMP%".replace(dt,Dt)}(Kt+"-"+gt.id),this.hostAttr=function Oe(Dt){return"_nghost-%COMP%".replace(dt,Dt)}(Kt+"-"+gt.id)}applyToHost(st){super.setAttribute(st,this.hostAttr,"")}createElement(st,Re){const gt=super.createElement(st,Re);return super.setAttribute(gt,this.contentAttr,""),gt}}class wt extends Ze{constructor(st,Re,gt,Kt){super(st),this.sharedStylesHost=Re,this.hostEl=gt,this.shadowRoot=gt.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Ln=Se(Kt.id,Kt.styles,[]);for(let zn=0;zn<Ln.length;zn++){const Er=document.createElement("style");Er.textContent=Ln[zn],this.shadowRoot.appendChild(Er)}}nodeOrShadowRoot(st){return st===this.hostEl?this.shadowRoot:st}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(st,Re){return super.appendChild(this.nodeOrShadowRoot(st),Re)}insertBefore(st,Re,gt){return super.insertBefore(this.nodeOrShadowRoot(st),Re,gt)}removeChild(st,Re){return super.removeChild(this.nodeOrShadowRoot(st),Re)}parentNode(st){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(st)))}}let Ye=(()=>{class Dt extends Ee{constructor(Re){super(Re)}supports(Re){return!0}addEventListener(Re,gt,Kt){return Re.addEventListener(gt,Kt,!1),()=>this.removeEventListener(Re,gt,Kt)}removeEventListener(Re,gt,Kt){return Re.removeEventListener(gt,Kt)}}return Dt.\u0275fac=function(Re){return new(Re||Dt)(J.LFG(a.K0))},Dt.\u0275prov=J.Yz7({token:Dt,factory:Dt.\u0275fac}),Dt})();const q=["alt","control","meta","shift"],Ce={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},tt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Gt={alt:Dt=>Dt.altKey,control:Dt=>Dt.ctrlKey,meta:Dt=>Dt.metaKey,shift:Dt=>Dt.shiftKey};let Ct=(()=>{class Dt extends Ee{constructor(Re){super(Re)}supports(Re){return null!=Dt.parseEventName(Re)}addEventListener(Re,gt,Kt){const Ln=Dt.parseEventName(gt),zn=Dt.eventCallback(Ln.fullKey,Kt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,a.q)().onAndCancel(Re,Ln.domEventName,zn))}static parseEventName(Re){const gt=Re.toLowerCase().split("."),Kt=gt.shift();if(0===gt.length||"keydown"!==Kt&&"keyup"!==Kt)return null;const Ln=Dt._normalizeKey(gt.pop());let zn="";if(q.forEach(Wn=>{const di=gt.indexOf(Wn);di>-1&&(gt.splice(di,1),zn+=Wn+".")}),zn+=Ln,0!=gt.length||0===Ln.length)return null;const Er={};return Er.domEventName=Kt,Er.fullKey=zn,Er}static getEventFullKey(Re){let gt="",Kt=function sn(Dt){let st=Dt.key;if(null==st){if(st=Dt.keyIdentifier,null==st)return"Unidentified";st.startsWith("U+")&&(st=String.fromCharCode(parseInt(st.substring(2),16)),3===Dt.location&&tt.hasOwnProperty(st)&&(st=tt[st]))}return Ce[st]||st}(Re);return Kt=Kt.toLowerCase()," "===Kt?Kt="space":"."===Kt&&(Kt="dot"),q.forEach(Ln=>{Ln!=Kt&&Gt[Ln](Re)&&(gt+=Ln+".")}),gt+=Kt,gt}static eventCallback(Re,gt,Kt){return Ln=>{Dt.getEventFullKey(Ln)===Re&&Kt.runGuarded(()=>gt(Ln))}}static _normalizeKey(Re){return"esc"===Re?"escape":Re}}return Dt.\u0275fac=function(Re){return new(Re||Dt)(J.LFG(a.K0))},Dt.\u0275prov=J.Yz7({token:Dt,factory:Dt.\u0275fac}),Dt})();const qn=(0,J.eFA)(J._c5,"browser",[{provide:J.Lbi,useValue:a.bD},{provide:J.g9A,useValue:function bn(){We.makeCurrent(),ne.init()},multi:!0},{provide:a.K0,useFactory:function _n(){return(0,J.RDi)(document),document},deps:[]}]),Zr=[{provide:J.zSh,useValue:"root"},{provide:J.qLn,useFactory:function kn(){return new J.qLn},deps:[]},{provide:Ke,useClass:Ye,multi:!0,deps:[a.K0,J.R0b,J.Lbi]},{provide:Ke,useClass:Ct,multi:!0,deps:[a.K0]},{provide:je,useClass:je,deps:[Ve,Be,J.AFp]},{provide:J.FYo,useExisting:je},{provide:Fe,useExisting:Be},{provide:Be,useClass:Be,deps:[a.K0]},{provide:J.dDg,useClass:J.dDg,deps:[J.R0b]},{provide:Ve,useClass:Ve,deps:[Ke,J.R0b]},{provide:a.JF,useClass:ce,deps:[]}];let Qn=(()=>{class Dt{constructor(Re){if(Re)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(Re){return{ngModule:Dt,providers:[{provide:J.AFp,useValue:Re.appId},{provide:Ie,useExisting:J.AFp},ve]}}}return Dt.\u0275fac=function(Re){return new(Re||Dt)(J.LFG(Dt,12))},Dt.\u0275mod=J.oAB({type:Dt}),Dt.\u0275inj=J.cJS({providers:Zr,imports:[a.ez,J.hGG]}),Dt})();"undefined"!=typeof window&&window;let An=(()=>{class Dt{}return Dt.\u0275fac=function(Re){return new(Re||Dt)},Dt.\u0275prov=J.Yz7({token:Dt,factory:function(Re){let gt=null;return gt=Re?new(Re||Dt):J.LFG(Gr),gt},providedIn:"root"}),Dt})(),Gr=(()=>{class Dt extends An{constructor(Re){super(),this._doc=Re}sanitize(Re,gt){if(null==gt)return null;switch(Re){case J.q3G.NONE:return gt;case J.q3G.HTML:return(0,J.qzn)(gt,"HTML")?(0,J.z3N)(gt):(0,J.EiD)(this._doc,String(gt)).toString();case J.q3G.STYLE:return(0,J.qzn)(gt,"Style")?(0,J.z3N)(gt):gt;case J.q3G.SCRIPT:if((0,J.qzn)(gt,"Script"))return(0,J.z3N)(gt);throw new Error("unsafe value used in a script context");case J.q3G.URL:return(0,J.yhl)(gt),(0,J.qzn)(gt,"URL")?(0,J.z3N)(gt):(0,J.mCW)(String(gt));case J.q3G.RESOURCE_URL:if((0,J.qzn)(gt,"ResourceURL"))return(0,J.z3N)(gt);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${Re} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(Re){return(0,J.JVY)(Re)}bypassSecurityTrustStyle(Re){return(0,J.L6k)(Re)}bypassSecurityTrustScript(Re){return(0,J.eBb)(Re)}bypassSecurityTrustUrl(Re){return(0,J.LAX)(Re)}bypassSecurityTrustResourceUrl(Re){return(0,J.pB0)(Re)}}return Dt.\u0275fac=function(Re){return new(Re||Dt)(J.LFG(a.K0))},Dt.\u0275prov=J.Yz7({token:Dt,factory:function(Re){let gt=null;return gt=Re?new Re:function Sr(Dt){return new Gr(Dt.get(a.K0))}(J.LFG(J.zs3)),gt},providedIn:"root"}),Dt})()},3442:(dn,ft,L)=>{"use strict";L.d(ft,{gz:()=>Ot,y6:()=>jr,OD:()=>on,eC:()=>Fn,wm:()=>xs,wN:()=>Oa,F0:()=>As,rH:()=>Xo,yS:()=>Bs,Bz:()=>os,Hx:()=>Yr});var a=L(5e3),J=L(2866),Z=L(6688),We=L(826),Ne=L(448),ae=L(3009);const Ae={};class Ie{constructor(x){this.resultSelector=x}call(x,S){return S.subscribe(new oe(x,this.resultSelector))}}class oe extends We.L{constructor(x,S){super(x),this.resultSelector=S,this.active=0,this.values=[],this.observables=[]}_next(x){this.values.push(Ae),this.observables.push(x)}_complete(){const x=this.observables,S=x.length;if(0===S)this.destination.complete();else{this.active=S,this.toRespond=S;for(let U=0;U<S;U++)this.add((0,Ne.D)(this,x[U],void 0,U))}}notifyComplete(x){0==(this.active-=1)&&this.destination.complete()}notifyNext(x,S,U){const Y=this.values,$e=this.toRespond?Y[U]===Ae?--this.toRespond:this.toRespond:0;Y[U]=S,0===$e&&(this.resultSelector?this._tryResultSelector(Y):this.destination.next(Y.slice()))}_tryResultSelector(x){let S;try{S=this.resultSelector.apply(this,x)}catch(U){return void this.destination.error(U)}this.destination.next(S)}}var ve=L(2916),ne=L(5254),ce=L(8896);function Ke(M){return new ve.y(x=>{let S;try{S=M()}catch(Y){return void x.error(Y)}return(S?(0,ne.D)(S):(0,ce.c)()).subscribe(x)})}var Ve=L(1086),Ee=L(591),Fe=L(1737),Be=L(4450),Et=L(1221),we=L(1762),dt=L(8929),St=L(1177);function Pt(M){return function(S){const U=new Xe(M),Y=S.lift(U);return U.caught=Y}}class Xe{constructor(x){this.selector=x}call(x,S){return S.subscribe(new Tt(x,this.selector,this.caught))}}class Tt extends St.Ds{constructor(x,S,U){super(x),this.selector=S,this.caught=U}error(x){if(!this.isStopped){let S;try{S=this.selector(x,this.caught)}catch(ue){return void super.error(ue)}this._unsubscribeAndRecycle();const U=new St.IY(this);this.add(U);const Y=(0,St.ft)(S,U);Y!==U&&this.add(Y)}}}var me=L(2198),Oe=L(3489),Se=L(4231);function fe(M){return function(S){return 0===M?(0,ce.c)():S.lift(new ye(M))}}class ye{constructor(x){if(this.total=x,this.total<0)throw new Se.W}call(x,S){return S.subscribe(new je(x,this.total))}}class je extends Oe.L{constructor(x,S){super(x),this.total=S,this.ring=new Array,this.count=0}_next(x){const S=this.ring,U=this.total,Y=this.count++;S.length<U?S.push(x):S[Y%U]=x}_complete(){const x=this.destination;let S=this.count;if(S>0){const U=this.count>=this.total?this.total:this.count,Y=this.ring;for(let ue=0;ue<U;ue++){const $e=S++%U;x.next(Y[$e])}}x.complete()}}var Ze=L(4907),Mt=L(7314),Jt=L(5379),wt=L(2654);class q{constructor(x){this.callback=x}call(x,S){return S.subscribe(new bt(x,this.callback))}}class bt extends Oe.L{constructor(x,S){super(x),this.add(new wt.w(S))}}var Ce=L(4850),tt=L(7545),Gt=L(2986),Ct=L(1059),sn=L(2014),bn=L(1406),kn=L(7224),_n=L(1709),gn=L(2868),qn=L(4327),Zr=L(9146),Qn=L(9808);class Yn{constructor(x,S){this.id=x,this.url=S}}class on extends Yn{constructor(x,S,U="imperative",Y=null){super(x,S),this.navigationTrigger=U,this.restoredState=Y}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Rr extends Yn{constructor(x,S,U){super(x,S),this.urlAfterRedirects=U}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class cr extends Yn{constructor(x,S,U){super(x,S),this.reason=U}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Bn extends Yn{constructor(x,S,U){super(x,S),this.error=U}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class nr extends Yn{constructor(x,S,U,Y){super(x,S),this.urlAfterRedirects=U,this.state=Y}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _r extends Yn{constructor(x,S,U,Y){super(x,S),this.urlAfterRedirects=U,this.state=Y}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _t extends Yn{constructor(x,S,U,Y,ue){super(x,S),this.urlAfterRedirects=U,this.state=Y,this.shouldActivate=ue}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class He extends Yn{constructor(x,S,U,Y){super(x,S),this.urlAfterRedirects=U,this.state=Y}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Te extends Yn{constructor(x,S,U,Y){super(x,S),this.urlAfterRedirects=U,this.state=Y}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class en{constructor(x){this.route=x}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class kt{constructor(x){this.route=x}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class qt{constructor(x){this.snapshot=x}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cn{constructor(x){this.snapshot=x}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zn{constructor(x){this.snapshot=x}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jn{constructor(x){this.snapshot=x}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mn{constructor(x,S,U){this.routerEvent=x,this.position=S,this.anchor=U}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Fn="primary";class vr{constructor(x){this.params=x||{}}has(x){return Object.prototype.hasOwnProperty.call(this.params,x)}get(x){if(this.has(x)){const S=this.params[x];return Array.isArray(S)?S[0]:S}return null}getAll(x){if(this.has(x)){const S=this.params[x];return Array.isArray(S)?S:[S]}return[]}get keys(){return Object.keys(this.params)}}function Hn(M){return new vr(M)}const xe="ngNavigationCancelingError";function qe(M){const x=Error("NavigationCancelingError: "+M);return x[xe]=!0,x}function Lt(M,x,S){const U=S.path.split("/");if(U.length>M.length||"full"===S.pathMatch&&(x.hasChildren()||U.length<M.length))return null;const Y={};for(let ue=0;ue<U.length;ue++){const $e=U[ue],it=M[ue];if($e.startsWith(":"))Y[$e.substring(1)]=it;else if($e!==it.path)return null}return{consumed:M.slice(0,U.length),posParams:Y}}function ht(M,x){const S=M?Object.keys(M):void 0,U=x?Object.keys(x):void 0;if(!S||!U||S.length!=U.length)return!1;let Y;for(let ue=0;ue<S.length;ue++)if(Y=S[ue],!tn(M[Y],x[Y]))return!1;return!0}function tn(M,x){if(Array.isArray(M)&&Array.isArray(x)){if(M.length!==x.length)return!1;const S=[...M].sort(),U=[...x].sort();return S.every((Y,ue)=>U[ue]===Y)}return M===x}function un(M){return Array.prototype.concat.apply([],M)}function vn(M){return M.length>0?M[M.length-1]:null}function Gn(M,x){for(const S in M)M.hasOwnProperty(S)&&x(M[S],S)}function An(M){return(0,a.CqO)(M)?M:(0,a.QGY)(M)?(0,ne.D)(Promise.resolve(M)):(0,Ve.of)(M)}const Gr={exact:function Re(M,x,S){if(!Ei(M.segments,x.segments)||!zn(M.segments,x.segments,S)||M.numberOfChildren!==x.numberOfChildren)return!1;for(const U in x.children)if(!M.children[U]||!Re(M.children[U],x.children[U],S))return!1;return!0},subset:Kt},zr={exact:function st(M,x){return ht(M,x)},subset:function gt(M,x){return Object.keys(x).length<=Object.keys(M).length&&Object.keys(x).every(S=>tn(M[S],x[S]))},ignored:()=>!0};function Dt(M,x,S){return Gr[S.paths](M.root,x.root,S.matrixParams)&&zr[S.queryParams](M.queryParams,x.queryParams)&&!("exact"===S.fragment&&M.fragment!==x.fragment)}function Kt(M,x,S){return Ln(M,x,x.segments,S)}function Ln(M,x,S,U){if(M.segments.length>S.length){const Y=M.segments.slice(0,S.length);return!(!Ei(Y,S)||x.hasChildren()||!zn(Y,S,U))}if(M.segments.length===S.length){if(!Ei(M.segments,S)||!zn(M.segments,S,U))return!1;for(const Y in x.children)if(!M.children[Y]||!Kt(M.children[Y],x.children[Y],U))return!1;return!0}{const Y=S.slice(0,M.segments.length),ue=S.slice(M.segments.length);return!!(Ei(M.segments,Y)&&zn(M.segments,Y,U)&&M.children[Fn])&&Ln(M.children[Fn],x,ue,U)}}function zn(M,x,S){return x.every((U,Y)=>zr[S](M[Y].parameters,U.parameters))}class Er{constructor(x,S,U){this.root=x,this.queryParams=S,this.fragment=U}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hn(this.queryParams)),this._queryParamMap}toString(){return nn.serialize(this)}}class Wn{constructor(x,S){this.segments=x,this.children=S,this.parent=null,Gn(S,(U,Y)=>U.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return wn(this)}}class di{constructor(x,S){this.path=x,this.parameters=S}get parameterMap(){return this._parameterMap||(this._parameterMap=Hn(this.parameters)),this._parameterMap}toString(){return Xr(this)}}function Ei(M,x){return M.length===x.length&&M.every((S,U)=>S.path===x[U].path)}class Yr{}class Kr{parse(x){const S=new ee(x);return new Er(S.parseRootSegment(),S.parseQueryParams(),S.parseFragment())}serialize(x){const S=`/${ir(x.root,!0)}`,U=function Zi(M){const x=Object.keys(M).map(S=>{const U=M[S];return Array.isArray(U)?U.map(Y=>`${ni(S)}=${ni(Y)}`).join("&"):`${ni(S)}=${ni(U)}`}).filter(S=>!!S);return x.length?`?${x.join("&")}`:""}(x.queryParams);return`${S}${U}${"string"==typeof x.fragment?`#${function Vr(M){return encodeURI(M)}(x.fragment)}`:""}`}}const nn=new Kr;function wn(M){return M.segments.map(x=>Xr(x)).join("/")}function ir(M,x){if(!M.hasChildren())return wn(M);if(x){const S=M.children[Fn]?ir(M.children[Fn],!1):"",U=[];return Gn(M.children,(Y,ue)=>{ue!==Fn&&U.push(`${ue}:${ir(Y,!1)}`)}),U.length>0?`${S}(${U.join("//")})`:S}{const S=function Br(M,x){let S=[];return Gn(M.children,(U,Y)=>{Y===Fn&&(S=S.concat(x(U,Y)))}),Gn(M.children,(U,Y)=>{Y!==Fn&&(S=S.concat(x(U,Y)))}),S}(M,(U,Y)=>Y===Fn?[ir(M.children[Fn],!1)]:[`${Y}:${ir(U,!1)}`]);return 1===Object.keys(M.children).length&&null!=M.children[Fn]?`${wn(M)}/${S[0]}`:`${wn(M)}/(${S.join("//")})`}}function ii(M){return encodeURIComponent(M).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ni(M){return ii(M).replace(/%3B/gi,";")}function yi(M){return ii(M).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Wr(M){return decodeURIComponent(M)}function bi(M){return Wr(M.replace(/\+/g,"%20"))}function Xr(M){return`${yi(M.path)}${function sr(M){return Object.keys(M).map(x=>`;${yi(x)}=${yi(M[x])}`).join("")}(M.parameters)}`}const Oi=/^[^\/()?;=#]+/;function Mi(M){const x=M.match(Oi);return x?x[0]:""}const wi=/^[^=?&#]+/,ki=/^[^&#]+/;class ee{constructor(x){this.url=x,this.remaining=x}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Wn([],{}):new Wn([],this.parseChildren())}parseQueryParams(){const x={};if(this.consumeOptional("?"))do{this.parseQueryParam(x)}while(this.consumeOptional("&"));return x}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const x=[];for(this.peekStartsWith("(")||x.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),x.push(this.parseSegment());let S={};this.peekStartsWith("/(")&&(this.capture("/"),S=this.parseParens(!0));let U={};return this.peekStartsWith("(")&&(U=this.parseParens(!1)),(x.length>0||Object.keys(S).length>0)&&(U[Fn]=new Wn(x,S)),U}parseSegment(){const x=Mi(this.remaining);if(""===x&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(x),new di(Wr(x),this.parseMatrixParams())}parseMatrixParams(){const x={};for(;this.consumeOptional(";");)this.parseParam(x);return x}parseParam(x){const S=Mi(this.remaining);if(!S)return;this.capture(S);let U="";if(this.consumeOptional("=")){const Y=Mi(this.remaining);Y&&(U=Y,this.capture(U))}x[Wr(S)]=Wr(U)}parseQueryParam(x){const S=function oi(M){const x=M.match(wi);return x?x[0]:""}(this.remaining);if(!S)return;this.capture(S);let U="";if(this.consumeOptional("=")){const $e=function Si(M){const x=M.match(ki);return x?x[0]:""}(this.remaining);$e&&(U=$e,this.capture(U))}const Y=bi(S),ue=bi(U);if(x.hasOwnProperty(Y)){let $e=x[Y];Array.isArray($e)||($e=[$e],x[Y]=$e),$e.push(ue)}else x[Y]=ue}parseParens(x){const S={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const U=Mi(this.remaining),Y=this.remaining[U.length];if("/"!==Y&&")"!==Y&&";"!==Y)throw new Error(`Cannot parse url '${this.url}'`);let ue;U.indexOf(":")>-1?(ue=U.substr(0,U.indexOf(":")),this.capture(ue),this.capture(":")):x&&(ue=Fn);const $e=this.parseChildren();S[ue]=1===Object.keys($e).length?$e[Fn]:new Wn([],$e),this.consumeOptional("//")}return S}peekStartsWith(x){return this.remaining.startsWith(x)}consumeOptional(x){return!!this.peekStartsWith(x)&&(this.remaining=this.remaining.substring(x.length),!0)}capture(x){if(!this.consumeOptional(x))throw new Error(`Expected "${x}".`)}}class _e{constructor(x){this._root=x}get root(){return this._root.value}parent(x){const S=this.pathFromRoot(x);return S.length>1?S[S.length-2]:null}children(x){const S=Je(x,this._root);return S?S.children.map(U=>U.value):[]}firstChild(x){const S=Je(x,this._root);return S&&S.children.length>0?S.children[0].value:null}siblings(x){const S=pt(x,this._root);return S.length<2?[]:S[S.length-2].children.map(Y=>Y.value).filter(Y=>Y!==x)}pathFromRoot(x){return pt(x,this._root).map(S=>S.value)}}function Je(M,x){if(M===x.value)return x;for(const S of x.children){const U=Je(M,S);if(U)return U}return null}function pt(M,x){if(M===x.value)return[x];for(const S of x.children){const U=pt(M,S);if(U.length)return U.unshift(x),U}return[]}class be{constructor(x,S){this.value=x,this.children=S}toString(){return`TreeNode(${this.value})`}}function ke(M){const x={};return M&&M.children.forEach(S=>x[S.value.outlet]=S),x}class yt extends _e{constructor(x,S){super(x),this.snapshot=S,si(this,x)}toString(){return this.snapshot.toString()}}function jt(M,x){const S=function Nt(M,x){const $e=new rr([],{},{},"",{},Fn,x,null,M.root,-1,{});return new Tr("",new be($e,[]))}(M,x),U=new Ee.X([new di("",{})]),Y=new Ee.X({}),ue=new Ee.X({}),$e=new Ee.X({}),it=new Ee.X(""),Qt=new Ot(U,Y,$e,it,ue,Fn,x,S.root);return Qt.snapshot=S.root,new yt(new be(Qt,[]),S)}class Ot{constructor(x,S,U,Y,ue,$e,it,Qt){this.url=x,this.params=S,this.queryParams=U,this.fragment=Y,this.data=ue,this.outlet=$e,this.component=it,this._futureSnapshot=Qt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ce.U)(x=>Hn(x)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ce.U)(x=>Hn(x)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Tn(M,x="emptyOnly"){const S=M.pathFromRoot;let U=0;if("always"!==x)for(U=S.length-1;U>=1;){const Y=S[U],ue=S[U-1];if(Y.routeConfig&&""===Y.routeConfig.path)U--;else{if(ue.component)break;U--}}return function er(M){return M.reduce((x,S)=>({params:Object.assign(Object.assign({},x.params),S.params),data:Object.assign(Object.assign({},x.data),S.data),resolve:Object.assign(Object.assign({},x.resolve),S._resolvedData)}),{params:{},data:{},resolve:{}})}(S.slice(U))}class rr{constructor(x,S,U,Y,ue,$e,it,Qt,$n,Jr,Nn){this.url=x,this.params=S,this.queryParams=U,this.fragment=Y,this.data=ue,this.outlet=$e,this.component=it,this.routeConfig=Qt,this._urlSegment=$n,this._lastPathIndex=Jr,this._resolve=Nn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Hn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(U=>U.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Tr extends _e{constructor(x,S){super(S),this.url=x,si(this,S)}toString(){return _i(this._root)}}function si(M,x){x.value._routerState=M,x.children.forEach(S=>si(M,S))}function _i(M){const x=M.children.length>0?` { ${M.children.map(_i).join(", ")} } `:"";return`${M.value}${x}`}function ot(M){if(M.snapshot){const x=M.snapshot,S=M._futureSnapshot;M.snapshot=S,ht(x.queryParams,S.queryParams)||M.queryParams.next(S.queryParams),x.fragment!==S.fragment&&M.fragment.next(S.fragment),ht(x.params,S.params)||M.params.next(S.params),function Ge(M,x){if(M.length!==x.length)return!1;for(let S=0;S<M.length;++S)if(!ht(M[S],x[S]))return!1;return!0}(x.url,S.url)||M.url.next(S.url),ht(x.data,S.data)||M.data.next(S.data)}else M.snapshot=M._futureSnapshot,M.data.next(M._futureSnapshot.data)}function nt(M,x){const S=ht(M.params,x.params)&&function Ki(M,x){return Ei(M,x)&&M.every((S,U)=>ht(S.parameters,x[U].parameters))}(M.url,x.url);return S&&!(!M.parent!=!x.parent)&&(!M.parent||nt(M.parent,x.parent))}function Zt(M,x,S){if(S&&M.shouldReuseRoute(x.value,S.value.snapshot)){const U=S.value;U._futureSnapshot=x.value;const Y=function yn(M,x,S){return x.children.map(U=>{for(const Y of S.children)if(M.shouldReuseRoute(U.value,Y.value.snapshot))return Zt(M,U,Y);return Zt(M,U)})}(M,x,S);return new be(U,Y)}{if(M.shouldAttach(x.value)){const ue=M.retrieve(x.value);if(null!==ue){const $e=ue.route;return $e.value._futureSnapshot=x.value,$e.children=x.children.map(it=>Zt(M,it)),$e}}const U=function Pn(M){return new Ot(new Ee.X(M.url),new Ee.X(M.params),new Ee.X(M.queryParams),new Ee.X(M.fragment),new Ee.X(M.data),M.outlet,M.component,M)}(x.value),Y=x.children.map(ue=>Zt(M,ue));return new be(U,Y)}}function ui(M){return"object"==typeof M&&null!=M&&!M.outlets&&!M.segmentPath}function Ur(M){return"object"==typeof M&&null!=M&&M.outlets}function ys(M,x,S,U,Y){let ue={};if(U&&Gn(U,(it,Qt)=>{ue[Qt]=Array.isArray(it)?it.map($n=>`${$n}`):`${it}`}),M===x)return new Er(S,ue,Y);const $e=cs(M,x,S);return new Er($e,ue,Y)}function cs(M,x,S){const U={};return Gn(M.children,(Y,ue)=>{U[ue]=Y===x?S:cs(Y,x,S)}),new Wn(M.segments,U)}class Ni{constructor(x,S,U){if(this.isAbsolute=x,this.numberOfDoubleDots=S,this.commands=U,x&&U.length>0&&ui(U[0]))throw new Error("Root segment cannot have matrix parameters");const Y=U.find(Ur);if(Y&&Y!==vn(U))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ts{constructor(x,S,U){this.segmentGroup=x,this.processChildren=S,this.index=U}}function hi(M,x,S){if(M||(M=new Wn([],{})),0===M.segments.length&&M.hasChildren())return Or(M,x,S);const U=function Xi(M,x,S){let U=0,Y=x;const ue={match:!1,pathIndex:0,commandIndex:0};for(;Y<M.segments.length;){if(U>=S.length)return ue;const $e=M.segments[Y],it=S[U];if(Ur(it))break;const Qt=`${it}`,$n=U<S.length-1?S[U+1]:null;if(Y>0&&void 0===Qt)break;if(Qt&&$n&&"object"==typeof $n&&void 0===$n.outlets){if(!ai(Qt,$n,$e))return ue;U+=2}else{if(!ai(Qt,{},$e))return ue;U++}Y++}return{match:!0,pathIndex:Y,commandIndex:U}}(M,x,S),Y=S.slice(U.commandIndex);if(U.match&&U.pathIndex<M.segments.length){const ue=new Wn(M.segments.slice(0,U.pathIndex),{});return ue.children[Fn]=new Wn(M.segments.slice(U.pathIndex),M.children),Or(ue,0,Y)}return U.match&&0===Y.length?new Wn(M.segments,{}):U.match&&!M.hasChildren()?_s(M,x,S):U.match?Or(M,0,Y):_s(M,x,S)}function Or(M,x,S){if(0===S.length)return new Wn(M.segments,{});{const U=function Ar(M){return Ur(M[0])?M[0].outlets:{[Fn]:M}}(S),Y={};return Gn(U,(ue,$e)=>{"string"==typeof ue&&(ue=[ue]),null!==ue&&(Y[$e]=hi(M.children[$e],x,ue))}),Gn(M.children,(ue,$e)=>{void 0===U[$e]&&(Y[$e]=ue)}),new Wn(M.segments,Y)}}function _s(M,x,S){const U=M.segments.slice(0,x);let Y=0;for(;Y<S.length;){const ue=S[Y];if(Ur(ue)){const Qt=Ss(ue.outlets);return new Wn(U,Qt)}if(0===Y&&ui(S[0])){U.push(new di(M.segments[x].path,ro(S[0]))),Y++;continue}const $e=Ur(ue)?ue.outlets[Fn]:`${ue}`,it=Y<S.length-1?S[Y+1]:null;$e&&it&&ui(it)?(U.push(new di($e,ro(it))),Y+=2):(U.push(new di($e,{})),Y++)}return new Wn(U,{})}function Ss(M){const x={};return Gn(M,(S,U)=>{"string"==typeof S&&(S=[S]),null!==S&&(x[U]=_s(new Wn([],{}),0,S))}),x}function ro(M){const x={};return Gn(M,(S,U)=>x[U]=`${S}`),x}function ai(M,x,S){return M==S.path&&ht(x,S.parameters)}class Ii{constructor(x,S,U,Y){this.routeReuseStrategy=x,this.futureState=S,this.currState=U,this.forwardEvent=Y}activate(x){const S=this.futureState._root,U=this.currState?this.currState._root:null;this.deactivateChildRoutes(S,U,x),ot(this.futureState.root),this.activateChildRoutes(S,U,x)}deactivateChildRoutes(x,S,U){const Y=ke(S);x.children.forEach(ue=>{const $e=ue.value.outlet;this.deactivateRoutes(ue,Y[$e],U),delete Y[$e]}),Gn(Y,(ue,$e)=>{this.deactivateRouteAndItsChildren(ue,U)})}deactivateRoutes(x,S,U){const Y=x.value,ue=S?S.value:null;if(Y===ue)if(Y.component){const $e=U.getContext(Y.outlet);$e&&this.deactivateChildRoutes(x,S,$e.children)}else this.deactivateChildRoutes(x,S,U);else ue&&this.deactivateRouteAndItsChildren(S,U)}deactivateRouteAndItsChildren(x,S){x.value.component&&this.routeReuseStrategy.shouldDetach(x.value.snapshot)?this.detachAndStoreRouteSubtree(x,S):this.deactivateRouteAndOutlet(x,S)}detachAndStoreRouteSubtree(x,S){const U=S.getContext(x.value.outlet),Y=U&&x.value.component?U.children:S,ue=ke(x);for(const $e of Object.keys(ue))this.deactivateRouteAndItsChildren(ue[$e],Y);if(U&&U.outlet){const $e=U.outlet.detach(),it=U.children.onOutletDeactivated();this.routeReuseStrategy.store(x.value.snapshot,{componentRef:$e,route:x,contexts:it})}}deactivateRouteAndOutlet(x,S){const U=S.getContext(x.value.outlet),Y=U&&x.value.component?U.children:S,ue=ke(x);for(const $e of Object.keys(ue))this.deactivateRouteAndItsChildren(ue[$e],Y);U&&U.outlet&&(U.outlet.deactivate(),U.children.onOutletDeactivated(),U.attachRef=null,U.resolver=null,U.route=null)}activateChildRoutes(x,S,U){const Y=ke(S);x.children.forEach(ue=>{this.activateRoutes(ue,Y[ue.value.outlet],U),this.forwardEvent(new Jn(ue.value.snapshot))}),x.children.length&&this.forwardEvent(new cn(x.value.snapshot))}activateRoutes(x,S,U){const Y=x.value,ue=S?S.value:null;if(ot(Y),Y===ue)if(Y.component){const $e=U.getOrCreateContext(Y.outlet);this.activateChildRoutes(x,S,$e.children)}else this.activateChildRoutes(x,S,U);else if(Y.component){const $e=U.getOrCreateContext(Y.outlet);if(this.routeReuseStrategy.shouldAttach(Y.snapshot)){const it=this.routeReuseStrategy.retrieve(Y.snapshot);this.routeReuseStrategy.store(Y.snapshot,null),$e.children.onOutletReAttached(it.contexts),$e.attachRef=it.componentRef,$e.route=it.route.value,$e.outlet&&$e.outlet.attach(it.componentRef,it.route.value),ot(it.route.value),this.activateChildRoutes(x,null,$e.children)}else{const it=function ds(M){for(let x=M.parent;x;x=x.parent){const S=x.routeConfig;if(S&&S._loadedConfig)return S._loadedConfig;if(S&&S.component)return null}return null}(Y.snapshot),Qt=it?it.module.componentFactoryResolver:null;$e.attachRef=null,$e.route=Y,$e.resolver=Qt,$e.outlet&&$e.outlet.activateWith(Y,Qt),this.activateChildRoutes(x,null,$e.children)}}else this.activateChildRoutes(x,null,U)}}class Qi{constructor(x,S){this.routes=x,this.module=S}}function kr(M){return"function"==typeof M}function Ri(M){return M instanceof Er}const ji=Symbol("INITIAL_VALUE");function ts(){return(0,tt.w)(M=>function De(...M){let x,S;return(0,J.K)(M[M.length-1])&&(S=M.pop()),"function"==typeof M[M.length-1]&&(x=M.pop()),1===M.length&&(0,Z.k)(M[0])&&(M=M[0]),(0,ae.n)(M,S).lift(new Ie(x))}(M.map(x=>x.pipe((0,Gt.q)(1),(0,Ct.O)(ji)))).pipe((0,sn.R)((x,S)=>{let U=!1;return S.reduce((Y,ue,$e)=>Y!==ji?Y:(ue===ji&&(U=!0),U||!1!==ue&&$e!==S.length-1&&!Ri(ue)?Y:ue),x)},ji),(0,me.h)(x=>x!==ji),(0,Ce.U)(x=>Ri(x)?x:!0===x),(0,Gt.q)(1)))}class $o{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new jr,this.attachRef=null}}class jr{constructor(){this.contexts=new Map}onChildOutletCreated(x,S){const U=this.getOrCreateContext(x);U.outlet=S,this.contexts.set(x,U)}onChildOutletDestroyed(x){const S=this.getContext(x);S&&(S.outlet=null,S.attachRef=null)}onOutletDeactivated(){const x=this.contexts;return this.contexts=new Map,x}onOutletReAttached(x){this.contexts=x}getOrCreateContext(x){let S=this.getContext(x);return S||(S=new $o,this.contexts.set(x,S)),S}getContext(x){return this.contexts.get(x)||null}}let j=(()=>{class M{constructor(S,U,Y,ue,$e){this.parentContexts=S,this.location=U,this.resolver=Y,this.changeDetector=$e,this.activated=null,this._activatedRoute=null,this.activateEvents=new a.vpe,this.deactivateEvents=new a.vpe,this.attachEvents=new a.vpe,this.detachEvents=new a.vpe,this.name=ue||Fn,S.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const S=this.parentContexts.getContext(this.name);S&&S.route&&(S.attachRef?this.attach(S.attachRef,S.route):this.activateWith(S.route,S.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const S=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(S.instance),S}attach(S,U){this.activated=S,this._activatedRoute=U,this.location.insert(S.hostView),this.attachEvents.emit(S.instance)}deactivate(){if(this.activated){const S=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(S)}}activateWith(S,U){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=S;const $e=(U=U||this.resolver).resolveComponentFactory(S._futureSnapshot.routeConfig.component),it=this.parentContexts.getOrCreateContext(this.name).children,Qt=new se(S,it,this.location.injector);this.activated=this.location.createComponent($e,this.location.length,Qt),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return M.\u0275fac=function(S){return new(S||M)(a.Y36(jr),a.Y36(a.s_b),a.Y36(a._Vd),a.$8M("name"),a.Y36(a.sBO))},M.\u0275dir=a.lG2({type:M,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),M})();class se{constructor(x,S,U){this.route=x,this.childContexts=S,this.parent=U}get(x,S){return x===Ot?this.route:x===jr?this.childContexts:this.parent.get(x,S)}}let $=(()=>{class M{}return M.\u0275fac=function(S){return new(S||M)},M.\u0275cmp=a.Xpm({type:M,selectors:[["ng-component"]],decls:1,vars:0,template:function(S,U){1&S&&a._UZ(0,"router-outlet")},directives:[j],encapsulation:2}),M})();function de(M,x=""){for(let S=0;S<M.length;S++){const U=M[S];et(U,ct(x,U))}}function et(M,x){M.children&&de(M.children,x)}function ct(M,x){return x?M||x.path?M&&!x.path?`${M}/`:!M&&x.path?x.path:`${M}/${x.path}`:"":M}function zt(M){const x=M.children&&M.children.map(zt),S=x?Object.assign(Object.assign({},M),{children:x}):Object.assign({},M);return!S.component&&(x||S.loadChildren)&&S.outlet&&S.outlet!==Fn&&(S.component=$),S}function Dn(M){return M.outlet||Fn}function gr(M,x){const S=M.filter(U=>Dn(U)===x);return S.push(...M.filter(U=>Dn(U)!==x)),S}const br={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function dr(M,x,S){var U;if(""===x.path)return"full"===x.pathMatch&&(M.hasChildren()||S.length>0)?Object.assign({},br):{matched:!0,consumedSegments:[],remainingSegments:S,parameters:{},positionalParamSegments:{}};const ue=(x.matcher||Lt)(S,M,x);if(!ue)return Object.assign({},br);const $e={};Gn(ue.posParams,(Qt,$n)=>{$e[$n]=Qt.path});const it=ue.consumed.length>0?Object.assign(Object.assign({},$e),ue.consumed[ue.consumed.length-1].parameters):$e;return{matched:!0,consumedSegments:ue.consumed,remainingSegments:S.slice(ue.consumed.length),parameters:it,positionalParamSegments:null!==(U=ue.posParams)&&void 0!==U?U:{}}}function wr(M,x,S,U,Y="corrected"){if(S.length>0&&function vi(M,x,S){return S.some(U=>ns(M,x,U)&&Dn(U)!==Fn)}(M,S,U)){const $e=new Wn(x,function Nr(M,x,S,U){const Y={};Y[Fn]=U,U._sourceSegment=M,U._segmentIndexShift=x.length;for(const ue of S)if(""===ue.path&&Dn(ue)!==Fn){const $e=new Wn([],{});$e._sourceSegment=M,$e._segmentIndexShift=x.length,Y[Dn(ue)]=$e}return Y}(M,x,U,new Wn(S,M.children)));return $e._sourceSegment=M,$e._segmentIndexShift=x.length,{segmentGroup:$e,slicedSegments:[]}}if(0===S.length&&function bs(M,x,S){return S.some(U=>ns(M,x,U))}(M,S,U)){const $e=new Wn(M.segments,function Fi(M,x,S,U,Y,ue){const $e={};for(const it of U)if(ns(M,S,it)&&!Y[Dn(it)]){const Qt=new Wn([],{});Qt._sourceSegment=M,Qt._segmentIndexShift="legacy"===ue?M.segments.length:x.length,$e[Dn(it)]=Qt}return Object.assign(Object.assign({},Y),$e)}(M,x,S,U,M.children,Y));return $e._sourceSegment=M,$e._segmentIndexShift=x.length,{segmentGroup:$e,slicedSegments:S}}const ue=new Wn(M.segments,M.children);return ue._sourceSegment=M,ue._segmentIndexShift=x.length,{segmentGroup:ue,slicedSegments:S}}function ns(M,x,S){return(!(M.hasChildren()||x.length>0)||"full"!==S.pathMatch)&&""===S.path}function Xn(M,x,S,U){return!!(Dn(M)===U||U!==Fn&&ns(x,S,M))&&("**"===M.path||dr(x,M,S).matched)}function Bi(M,x,S){return 0===x.length&&!M.children[S]}class H{constructor(x){this.segmentGroup=x||null}}class B{constructor(x){this.urlTree=x}}function N(M){return(0,Fe._)(new H(M))}function re(M){return(0,Fe._)(new B(M))}class b{constructor(x,S,U,Y,ue){this.configLoader=S,this.urlSerializer=U,this.urlTree=Y,this.config=ue,this.allowRedirects=!0,this.ngModule=x.get(a.h0i)}apply(){const x=wr(this.urlTree.root,[],[],this.config).segmentGroup,S=new Wn(x.segments,x.children);return this.expandSegmentGroup(this.ngModule,this.config,S,Fn).pipe((0,Ce.U)(ue=>this.createUrlTree(C(ue),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Pt(ue=>{if(ue instanceof B)return this.allowRedirects=!1,this.match(ue.urlTree);throw ue instanceof H?this.noMatchError(ue):ue}))}match(x){return this.expandSegmentGroup(this.ngModule,this.config,x.root,Fn).pipe((0,Ce.U)(Y=>this.createUrlTree(C(Y),x.queryParams,x.fragment))).pipe(Pt(Y=>{throw Y instanceof H?this.noMatchError(Y):Y}))}noMatchError(x){return new Error(`Cannot match any routes. URL Segment: '${x.segmentGroup}'`)}createUrlTree(x,S,U){const Y=x.segments.length>0?new Wn([],{[Fn]:x}):x;return new Er(Y,S,U)}expandSegmentGroup(x,S,U,Y){return 0===U.segments.length&&U.hasChildren()?this.expandChildren(x,S,U).pipe((0,Ce.U)(ue=>new Wn([],ue))):this.expandSegment(x,U,S,U.segments,Y,!0)}expandChildren(x,S,U){const Y=[];for(const ue of Object.keys(U.children))"primary"===ue?Y.unshift(ue):Y.push(ue);return(0,ne.D)(Y).pipe((0,bn.b)(ue=>{const $e=U.children[ue],it=gr(S,ue);return this.expandSegmentGroup(x,it,$e,ue).pipe((0,Ce.U)(Qt=>({segment:Qt,outlet:ue})))}),(0,sn.R)((ue,$e)=>(ue[$e.outlet]=$e.segment,ue),{}),function mt(M,x){const S=arguments.length>=2;return U=>U.pipe(M?(0,me.h)((Y,ue)=>M(Y,ue,U)):Jt.y,fe(1),S?(0,Mt.d)(x):(0,Ze.T)(()=>new Be.K))}())}expandSegment(x,S,U,Y,ue,$e){return(0,ne.D)(U).pipe((0,bn.b)(it=>this.expandSegmentAgainstRoute(x,S,U,it,Y,ue,$e).pipe(Pt($n=>{if($n instanceof H)return(0,Ve.of)(null);throw $n}))),(0,kn.P)(it=>!!it),Pt((it,Qt)=>{if(it instanceof Be.K||"EmptyError"===it.name)return Bi(S,Y,ue)?(0,Ve.of)(new Wn([],{})):N(S);throw it}))}expandSegmentAgainstRoute(x,S,U,Y,ue,$e,it){return Xn(Y,S,ue,$e)?void 0===Y.redirectTo?this.matchSegmentAgainstRoute(x,S,Y,ue,$e):it&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(x,S,U,Y,ue,$e):N(S):N(S)}expandSegmentAgainstRouteUsingRedirect(x,S,U,Y,ue,$e){return"**"===Y.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(x,U,Y,$e):this.expandRegularSegmentAgainstRouteUsingRedirect(x,S,U,Y,ue,$e)}expandWildCardWithParamsAgainstRouteUsingRedirect(x,S,U,Y){const ue=this.applyRedirectCommands([],U.redirectTo,{});return U.redirectTo.startsWith("/")?re(ue):this.lineralizeSegments(U,ue).pipe((0,_n.zg)($e=>{const it=new Wn($e,{});return this.expandSegment(x,it,S,$e,Y,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(x,S,U,Y,ue,$e){const{matched:it,consumedSegments:Qt,remainingSegments:$n,positionalParamSegments:Jr}=dr(S,Y,ue);if(!it)return N(S);const Nn=this.applyRedirectCommands(Qt,Y.redirectTo,Jr);return Y.redirectTo.startsWith("/")?re(Nn):this.lineralizeSegments(Y,Nn).pipe((0,_n.zg)(li=>this.expandSegment(x,S,U,li.concat($n),$e,!1)))}matchSegmentAgainstRoute(x,S,U,Y,ue){if("**"===U.path)return U.loadChildren?(U._loadedConfig?(0,Ve.of)(U._loadedConfig):this.configLoader.load(x.injector,U)).pipe((0,Ce.U)(Nn=>(U._loadedConfig=Nn,new Wn(Y,{})))):(0,Ve.of)(new Wn(Y,{}));const{matched:$e,consumedSegments:it,remainingSegments:Qt}=dr(S,U,Y);return $e?this.getChildConfig(x,U,Y).pipe((0,_n.zg)(Jr=>{const Nn=Jr.module,li=Jr.routes,{segmentGroup:ci,slicedSegments:Ir}=wr(S,it,Qt,li),Ks=new Wn(ci.segments,ci.children);if(0===Ir.length&&Ks.hasChildren())return this.expandChildren(Nn,li,Ks).pipe((0,Ce.U)(zi=>new Wn(it,zi)));if(0===li.length&&0===Ir.length)return(0,Ve.of)(new Wn(it,{}));const Jo=Dn(U)===ue;return this.expandSegment(Nn,Ks,li,Ir,Jo?Fn:ue,!0).pipe((0,Ce.U)(lr=>new Wn(it.concat(lr.segments),lr.children)))})):N(S)}getChildConfig(x,S,U){return S.children?(0,Ve.of)(new Qi(S.children,x)):S.loadChildren?void 0!==S._loadedConfig?(0,Ve.of)(S._loadedConfig):this.runCanLoadGuards(x.injector,S,U).pipe((0,_n.zg)(Y=>Y?this.configLoader.load(x.injector,S).pipe((0,Ce.U)(ue=>(S._loadedConfig=ue,ue))):function E(M){return(0,Fe._)(qe(`Cannot load children because the guard of the route "path: '${M.path}'" returned false`))}(S))):(0,Ve.of)(new Qi([],x))}runCanLoadGuards(x,S,U){const Y=S.canLoad;if(!Y||0===Y.length)return(0,Ve.of)(!0);const ue=Y.map($e=>{const it=x.get($e);let Qt;if(function uo(M){return M&&kr(M.canLoad)}(it))Qt=it.canLoad(S,U);else{if(!kr(it))throw new Error("Invalid CanLoad guard");Qt=it(S,U)}return An(Qt)});return(0,Ve.of)(ue).pipe(ts(),(0,gn.b)($e=>{if(!Ri($e))return;const it=qe(`Redirecting to "${this.urlSerializer.serialize($e)}"`);throw it.url=$e,it}),(0,Ce.U)($e=>!0===$e))}lineralizeSegments(x,S){let U=[],Y=S.root;for(;;){if(U=U.concat(Y.segments),0===Y.numberOfChildren)return(0,Ve.of)(U);if(Y.numberOfChildren>1||!Y.children[Fn])return(0,Fe._)(new Error(`Only absolute redirects can have named outlets. redirectTo: '${x.redirectTo}'`));Y=Y.children[Fn]}}applyRedirectCommands(x,S,U){return this.applyRedirectCreatreUrlTree(S,this.urlSerializer.parse(S),x,U)}applyRedirectCreatreUrlTree(x,S,U,Y){const ue=this.createSegmentGroup(x,S.root,U,Y);return new Er(ue,this.createQueryParams(S.queryParams,this.urlTree.queryParams),S.fragment)}createQueryParams(x,S){const U={};return Gn(x,(Y,ue)=>{if("string"==typeof Y&&Y.startsWith(":")){const it=Y.substring(1);U[ue]=S[it]}else U[ue]=Y}),U}createSegmentGroup(x,S,U,Y){const ue=this.createSegments(x,S.segments,U,Y);let $e={};return Gn(S.children,(it,Qt)=>{$e[Qt]=this.createSegmentGroup(x,it,U,Y)}),new Wn(ue,$e)}createSegments(x,S,U,Y){return S.map(ue=>ue.path.startsWith(":")?this.findPosParam(x,ue,Y):this.findOrReturn(ue,U))}findPosParam(x,S,U){const Y=U[S.path.substring(1)];if(!Y)throw new Error(`Cannot redirect to '${x}'. Cannot find '${S.path}'.`);return Y}findOrReturn(x,S){let U=0;for(const Y of S){if(Y.path===x.path)return S.splice(U),Y;U++}return x}}function C(M){const x={};for(const U of Object.keys(M.children)){const ue=C(M.children[U]);(ue.segments.length>0||ue.hasChildren())&&(x[U]=ue)}return function v(M){if(1===M.numberOfChildren&&M.children[Fn]){const x=M.children[Fn];return new Wn(M.segments.concat(x.segments),x.children)}return M}(new Wn(M.segments,x))}class pe{constructor(x){this.path=x,this.route=this.path[this.path.length-1]}}class Le{constructor(x,S){this.component=x,this.route=S}}function vt(M,x,S){const U=M._root;return or(U,x?x._root:null,S,[U.value])}function In(M,x,S){const U=function Wt(M){if(!M)return null;for(let x=M.parent;x;x=x.parent){const S=x.routeConfig;if(S&&S._loadedConfig)return S._loadedConfig}return null}(x);return(U?U.module.injector:S).get(M)}function or(M,x,S,U,Y={canDeactivateChecks:[],canActivateChecks:[]}){const ue=ke(x);return M.children.forEach($e=>{(function mr(M,x,S,U,Y={canDeactivateChecks:[],canActivateChecks:[]}){const ue=M.value,$e=x?x.value:null,it=S?S.getContext(M.value.outlet):null;if($e&&ue.routeConfig===$e.routeConfig){const Qt=function Dr(M,x,S){if("function"==typeof S)return S(M,x);switch(S){case"pathParamsChange":return!Ei(M.url,x.url);case"pathParamsOrQueryParamsChange":return!Ei(M.url,x.url)||!ht(M.queryParams,x.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!nt(M,x)||!ht(M.queryParams,x.queryParams);default:return!nt(M,x)}}($e,ue,ue.routeConfig.runGuardsAndResolvers);Qt?Y.canActivateChecks.push(new pe(U)):(ue.data=$e.data,ue._resolvedData=$e._resolvedData),or(M,x,ue.component?it?it.children:null:S,U,Y),Qt&&it&&it.outlet&&it.outlet.isActivated&&Y.canDeactivateChecks.push(new Le(it.outlet.component,$e))}else $e&&Un(x,it,Y),Y.canActivateChecks.push(new pe(U)),or(M,null,ue.component?it?it.children:null:S,U,Y)})($e,ue[$e.value.outlet],S,U.concat([$e.value]),Y),delete ue[$e.value.outlet]}),Gn(ue,($e,it)=>Un($e,S.getContext(it),Y)),Y}function Un(M,x,S){const U=ke(M),Y=M.value;Gn(U,(ue,$e)=>{Un(ue,Y.component?x?x.children.getContext($e):null:x,S)}),S.canDeactivateChecks.push(new Le(Y.component&&x&&x.outlet&&x.outlet.isActivated?x.outlet.component:null,Y))}class co{}function ho(M){return new ve.y(x=>x.error(M))}class fo{constructor(x,S,U,Y,ue,$e){this.rootComponentType=x,this.config=S,this.urlTree=U,this.url=Y,this.paramsInheritanceStrategy=ue,this.relativeLinkResolution=$e}recognize(){const x=wr(this.urlTree.root,[],[],this.config.filter($e=>void 0===$e.redirectTo),this.relativeLinkResolution).segmentGroup,S=this.processSegmentGroup(this.config,x,Fn);if(null===S)return null;const U=new rr([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Fn,this.rootComponentType,null,this.urlTree.root,-1,{}),Y=new be(U,S),ue=new Tr(this.url,Y);return this.inheritParamsAndData(ue._root),ue}inheritParamsAndData(x){const S=x.value,U=Tn(S,this.paramsInheritanceStrategy);S.params=Object.freeze(U.params),S.data=Object.freeze(U.data),x.children.forEach(Y=>this.inheritParamsAndData(Y))}processSegmentGroup(x,S,U){return 0===S.segments.length&&S.hasChildren()?this.processChildren(x,S):this.processSegment(x,S,S.segments,U)}processChildren(x,S){const U=[];for(const ue of Object.keys(S.children)){const $e=S.children[ue],it=gr(x,ue),Qt=this.processSegmentGroup(it,$e,ue);if(null===Qt)return null;U.push(...Qt)}const Y=Ma(U);return function po(M){M.sort((x,S)=>x.value.outlet===Fn?-1:S.value.outlet===Fn?1:x.value.outlet.localeCompare(S.value.outlet))}(Y),Y}processSegment(x,S,U,Y){for(const ue of x){const $e=this.processSegmentAgainstRoute(ue,S,U,Y);if(null!==$e)return $e}return Bi(S,U,Y)?[]:null}processSegmentAgainstRoute(x,S,U,Y){if(x.redirectTo||!Xn(x,S,U,Y))return null;let ue,$e=[],it=[];if("**"===x.path){const ci=U.length>0?vn(U).parameters:{};ue=new rr(U,ci,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ra(x),Dn(x),x.component,x,Ya(S),Yo(S)+U.length,Pa(x))}else{const ci=dr(S,x,U);if(!ci.matched)return null;$e=ci.consumedSegments,it=ci.remainingSegments,ue=new rr($e,ci.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ra(x),Dn(x),x.component,x,Ya(S),Yo(S)+$e.length,Pa(x))}const Qt=function No(M){return M.children?M.children:M.loadChildren?M._loadedConfig.routes:[]}(x),{segmentGroup:$n,slicedSegments:Jr}=wr(S,$e,it,Qt.filter(ci=>void 0===ci.redirectTo),this.relativeLinkResolution);if(0===Jr.length&&$n.hasChildren()){const ci=this.processChildren(Qt,$n);return null===ci?null:[new be(ue,ci)]}if(0===Qt.length&&0===Jr.length)return[new be(ue,[])];const Nn=Dn(x)===Y,li=this.processSegment(Qt,$n,Jr,Nn?Fn:Y);return null===li?null:[new be(ue,li)]}}function ua(M){const x=M.value.routeConfig;return x&&""===x.path&&void 0===x.redirectTo}function Ma(M){const x=[],S=new Set;for(const U of M){if(!ua(U)){x.push(U);continue}const Y=x.find(ue=>U.value.routeConfig===ue.value.routeConfig);void 0!==Y?(Y.children.push(...U.children),S.add(Y)):x.push(U)}for(const U of S){const Y=Ma(U.children);x.push(new be(U.value,Y))}return x.filter(U=>!S.has(U))}function Ya(M){let x=M;for(;x._sourceSegment;)x=x._sourceSegment;return x}function Yo(M){let x=M,S=x._segmentIndexShift?x._segmentIndexShift:0;for(;x._sourceSegment;)x=x._sourceSegment,S+=x._segmentIndexShift?x._segmentIndexShift:0;return S-1}function Ra(M){return M.data||{}}function Pa(M){return M.resolve||{}}function Ka(M){return[...Object.keys(M),...Object.getOwnPropertySymbols(M)]}function au(M){return(0,tt.w)(x=>{const S=M(x);return S?(0,ne.D)(S).pipe((0,Ce.U)(()=>x)):(0,Ve.of)(x)})}class Oa{}class cl extends class wa{shouldDetach(x){return!1}store(x,S){}shouldAttach(x){return!1}retrieve(x){return null}shouldReuseRoute(x,S){return x.routeConfig===S.routeConfig}}{}const Do=new a.OlP("ROUTES");class Ns{constructor(x,S,U,Y){this.injector=x,this.compiler=S,this.onLoadStartListener=U,this.onLoadEndListener=Y}load(x,S){if(S._loader$)return S._loader$;this.onLoadStartListener&&this.onLoadStartListener(S);const Y=this.loadModuleFactory(S.loadChildren).pipe((0,Ce.U)(ue=>{this.onLoadEndListener&&this.onLoadEndListener(S);const $e=ue.create(x);return new Qi(un($e.injector.get(Do,void 0,a.XFs.Self|a.XFs.Optional)).map(zt),$e)}),Pt(ue=>{throw S._loader$=void 0,ue}));return S._loader$=new we.c(Y,()=>new dt.xQ).pipe((0,qn.x)()),S._loader$}loadModuleFactory(x){return An(x()).pipe((0,_n.zg)(S=>S instanceof a.YKP?(0,Ve.of)(S):(0,ne.D)(this.compiler.compileModuleAsync(S))))}}class hs{shouldProcessUrl(x){return!0}extract(x){return x}merge(x,S){return x}}function Xa(M){throw M}function Ko(M,x,S){return x.parse("/")}function ca(M,x){return(0,Ve.of)(null)}const Zo={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ka={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let As=(()=>{class M{constructor(S,U,Y,ue,$e,it,Qt){this.rootComponentType=S,this.urlSerializer=U,this.rootContexts=Y,this.location=ue,this.config=Qt,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new dt.xQ,this.errorHandler=Xa,this.malformedUriErrorHandler=Ko,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ca,afterPreactivation:ca},this.urlHandlingStrategy=new hs,this.routeReuseStrategy=new cl,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=$e.get(a.h0i),this.console=$e.get(a.c2e);const Nn=$e.get(a.R0b);this.isNgZoneEnabled=Nn instanceof a.R0b&&a.R0b.isInAngularZone(),this.resetConfig(Qt),this.currentUrlTree=function Sr(){return new Er(new Wn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Ns($e,it,li=>this.triggerEvent(new en(li)),li=>this.triggerEvent(new kt(li))),this.routerState=jt(this.currentUrlTree,this.rootComponentType),this.transitions=new Ee.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var S;return null===(S=this.location.getState())||void 0===S?void 0:S.\u0275routerPageId}setupNavigations(S){const U=this.events;return S.pipe((0,me.h)(Y=>0!==Y.id),(0,Ce.U)(Y=>Object.assign(Object.assign({},Y),{extractedUrl:this.urlHandlingStrategy.extract(Y.rawUrl)})),(0,tt.w)(Y=>{let ue=!1,$e=!1;return(0,Ve.of)(Y).pipe((0,gn.b)(it=>{this.currentNavigation={id:it.id,initialUrl:it.currentRawUrl,extractedUrl:it.extractedUrl,trigger:it.source,extras:it.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,tt.w)(it=>{const Qt=this.browserUrlTree.toString(),$n=!this.navigated||it.extractedUrl.toString()!==Qt||Qt!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||$n)&&this.urlHandlingStrategy.shouldProcessUrl(it.rawUrl))return Na(it.source)&&(this.browserUrlTree=it.extractedUrl),(0,Ve.of)(it).pipe((0,tt.w)(Nn=>{const li=this.transitions.getValue();return U.next(new on(Nn.id,this.serializeUrl(Nn.extractedUrl),Nn.source,Nn.restoredState)),li!==this.transitions.getValue()?ce.E:Promise.resolve(Nn)}),function W(M,x,S,U){return(0,tt.w)(Y=>function k(M,x,S,U,Y){return new b(M,x,S,U,Y).apply()}(M,x,S,Y.extractedUrl,U).pipe((0,Ce.U)(ue=>Object.assign(Object.assign({},Y),{urlAfterRedirects:ue}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,gn.b)(Nn=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Nn.urlAfterRedirects})}),function ks(M,x,S,U,Y){return(0,_n.zg)(ue=>function jo(M,x,S,U,Y="emptyOnly",ue="legacy"){try{const $e=new fo(M,x,S,U,Y,ue).recognize();return null===$e?ho(new co):(0,Ve.of)($e)}catch($e){return ho($e)}}(M,x,ue.urlAfterRedirects,S(ue.urlAfterRedirects),U,Y).pipe((0,Ce.U)($e=>Object.assign(Object.assign({},ue),{targetSnapshot:$e}))))}(this.rootComponentType,this.config,Nn=>this.serializeUrl(Nn),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,gn.b)(Nn=>{if("eager"===this.urlUpdateStrategy){if(!Nn.extras.skipLocationChange){const ci=this.urlHandlingStrategy.merge(Nn.urlAfterRedirects,Nn.rawUrl);this.setBrowserUrl(ci,Nn)}this.browserUrlTree=Nn.urlAfterRedirects}const li=new nr(Nn.id,this.serializeUrl(Nn.extractedUrl),this.serializeUrl(Nn.urlAfterRedirects),Nn.targetSnapshot);U.next(li)}));if($n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:li,extractedUrl:ci,source:Ir,restoredState:Ks,extras:Jo}=it,fs=new on(li,this.serializeUrl(ci),Ir,Ks);U.next(fs);const lr=jt(ci,this.rootComponentType).snapshot;return(0,Ve.of)(Object.assign(Object.assign({},it),{targetSnapshot:lr,urlAfterRedirects:ci,extras:Object.assign(Object.assign({},Jo),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=it.rawUrl,it.resolve(null),ce.E}),au(it=>{const{targetSnapshot:Qt,id:$n,extractedUrl:Jr,rawUrl:Nn,extras:{skipLocationChange:li,replaceUrl:ci}}=it;return this.hooks.beforePreactivation(Qt,{navigationId:$n,appliedUrlTree:Jr,rawUrlTree:Nn,skipLocationChange:!!li,replaceUrl:!!ci})}),(0,gn.b)(it=>{const Qt=new _r(it.id,this.serializeUrl(it.extractedUrl),this.serializeUrl(it.urlAfterRedirects),it.targetSnapshot);this.triggerEvent(Qt)}),(0,Ce.U)(it=>Object.assign(Object.assign({},it),{guards:vt(it.targetSnapshot,it.currentSnapshot,this.rootContexts)})),function Ci(M,x){return(0,_n.zg)(S=>{const{targetSnapshot:U,currentSnapshot:Y,guards:{canActivateChecks:ue,canDeactivateChecks:$e}}=S;return 0===$e.length&&0===ue.length?(0,Ve.of)(Object.assign(Object.assign({},S),{guardsResult:!0})):function Di(M,x,S,U){return(0,ne.D)(M).pipe((0,_n.zg)(Y=>function is(M,x,S,U,Y){const ue=x&&x.routeConfig?x.routeConfig.canDeactivate:null;if(!ue||0===ue.length)return(0,Ve.of)(!0);const $e=ue.map(it=>{const Qt=In(it,x,Y);let $n;if(function Es(M){return M&&kr(M.canDeactivate)}(Qt))$n=An(Qt.canDeactivate(M,x,S,U));else{if(!kr(Qt))throw new Error("Invalid CanDeactivate guard");$n=An(Qt(M,x,S,U))}return $n.pipe((0,kn.P)())});return(0,Ve.of)($e).pipe(ts())}(Y.component,Y.route,S,x,U)),(0,kn.P)(Y=>!0!==Y,!0))}($e,U,Y,M).pipe((0,_n.zg)(it=>it&&function vs(M){return"boolean"==typeof M}(it)?function Ai(M,x,S,U){return(0,ne.D)(x).pipe((0,bn.b)(Y=>(0,Et.z)(function Ws(M,x){return null!==M&&x&&x(new qt(M)),(0,Ve.of)(!0)}(Y.route.parent,U),function fi(M,x){return null!==M&&x&&x(new Zn(M)),(0,Ve.of)(!0)}(Y.route,U),function rs(M,x,S){const U=x[x.length-1],ue=x.slice(0,x.length-1).reverse().map($e=>function Ht(M){const x=M.routeConfig?M.routeConfig.canActivateChild:null;return x&&0!==x.length?{node:M,guards:x}:null}($e)).filter($e=>null!==$e).map($e=>Ke(()=>{const it=$e.guards.map(Qt=>{const $n=In(Qt,$e.node,S);let Jr;if(function as(M){return M&&kr(M.canActivateChild)}($n))Jr=An($n.canActivateChild(U,M));else{if(!kr($n))throw new Error("Invalid CanActivateChild guard");Jr=An($n(U,M))}return Jr.pipe((0,kn.P)())});return(0,Ve.of)(it).pipe(ts())}));return(0,Ve.of)(ue).pipe(ts())}(M,Y.path,S),function pi(M,x,S){const U=x.routeConfig?x.routeConfig.canActivate:null;if(!U||0===U.length)return(0,Ve.of)(!0);const Y=U.map(ue=>Ke(()=>{const $e=In(ue,x,S);let it;if(function es(M){return M&&kr(M.canActivate)}($e))it=An($e.canActivate(x,M));else{if(!kr($e))throw new Error("Invalid CanActivate guard");it=An($e(x,M))}return it.pipe((0,kn.P)())}));return(0,Ve.of)(Y).pipe(ts())}(M,Y.route,S))),(0,kn.P)(Y=>!0!==Y,!0))}(U,ue,M,x):(0,Ve.of)(it)),(0,Ce.U)(it=>Object.assign(Object.assign({},S),{guardsResult:it})))})}(this.ngModule.injector,it=>this.triggerEvent(it)),(0,gn.b)(it=>{if(Ri(it.guardsResult)){const $n=qe(`Redirecting to "${this.serializeUrl(it.guardsResult)}"`);throw $n.url=it.guardsResult,$n}const Qt=new _t(it.id,this.serializeUrl(it.extractedUrl),this.serializeUrl(it.urlAfterRedirects),it.targetSnapshot,!!it.guardsResult);this.triggerEvent(Qt)}),(0,me.h)(it=>!!it.guardsResult||(this.restoreHistory(it),this.cancelNavigationTransition(it,""),!1)),au(it=>{if(it.guards.canActivateChecks.length)return(0,Ve.of)(it).pipe((0,gn.b)(Qt=>{const $n=new He(Qt.id,this.serializeUrl(Qt.extractedUrl),this.serializeUrl(Qt.urlAfterRedirects),Qt.targetSnapshot);this.triggerEvent($n)}),(0,tt.w)(Qt=>{let $n=!1;return(0,Ve.of)(Qt).pipe(function Co(M,x){return(0,_n.zg)(S=>{const{targetSnapshot:U,guards:{canActivateChecks:Y}}=S;if(!Y.length)return(0,Ve.of)(S);let ue=0;return(0,ne.D)(Y).pipe((0,bn.b)($e=>function ss(M,x,S,U){return function ou(M,x,S,U){const Y=Ka(M);if(0===Y.length)return(0,Ve.of)({});const ue={};return(0,ne.D)(Y).pipe((0,_n.zg)($e=>function Za(M,x,S,U){const Y=In(M,x,U);return An(Y.resolve?Y.resolve(x,S):Y(x,S))}(M[$e],x,S,U).pipe((0,gn.b)(it=>{ue[$e]=it}))),fe(1),(0,_n.zg)(()=>Ka(ue).length===Y.length?(0,Ve.of)(ue):ce.E))}(M._resolve,M,x,U).pipe((0,Ce.U)(ue=>(M._resolvedData=ue,M.data=Object.assign(Object.assign({},M.data),Tn(M,S).resolve),null)))}($e.route,U,M,x)),(0,gn.b)(()=>ue++),fe(1),(0,_n.zg)($e=>ue===Y.length?(0,Ve.of)(S):ce.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,gn.b)({next:()=>$n=!0,complete:()=>{$n||(this.restoreHistory(Qt),this.cancelNavigationTransition(Qt,"At least one route resolver didn't emit any value."))}}))}),(0,gn.b)(Qt=>{const $n=new Te(Qt.id,this.serializeUrl(Qt.extractedUrl),this.serializeUrl(Qt.urlAfterRedirects),Qt.targetSnapshot);this.triggerEvent($n)}))}),au(it=>{const{targetSnapshot:Qt,id:$n,extractedUrl:Jr,rawUrl:Nn,extras:{skipLocationChange:li,replaceUrl:ci}}=it;return this.hooks.afterPreactivation(Qt,{navigationId:$n,appliedUrlTree:Jr,rawUrlTree:Nn,skipLocationChange:!!li,replaceUrl:!!ci})}),(0,Ce.U)(it=>{const Qt=function It(M,x,S){const U=Zt(M,x._root,S?S._root:void 0);return new yt(U,x)}(this.routeReuseStrategy,it.targetSnapshot,it.currentRouterState);return Object.assign(Object.assign({},it),{targetRouterState:Qt})}),(0,gn.b)(it=>{this.currentUrlTree=it.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(it.urlAfterRedirects,it.rawUrl),this.routerState=it.targetRouterState,"deferred"===this.urlUpdateStrategy&&(it.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,it),this.browserUrlTree=it.urlAfterRedirects)}),((M,x,S)=>(0,Ce.U)(U=>(new Ii(x,U.targetRouterState,U.currentRouterState,S).activate(M),U)))(this.rootContexts,this.routeReuseStrategy,it=>this.triggerEvent(it)),(0,gn.b)({next(){ue=!0},complete(){ue=!0}}),function Ye(M){return x=>x.lift(new q(M))}(()=>{var it;ue||$e||this.cancelNavigationTransition(Y,`Navigation ID ${Y.id} is not equal to the current navigation id ${this.navigationId}`),(null===(it=this.currentNavigation)||void 0===it?void 0:it.id)===Y.id&&(this.currentNavigation=null)}),Pt(it=>{if($e=!0,function rt(M){return M&&M[xe]}(it)){const Qt=Ri(it.url);Qt||(this.navigated=!0,this.restoreHistory(Y,!0));const $n=new cr(Y.id,this.serializeUrl(Y.extractedUrl),it.message);U.next($n),Qt?setTimeout(()=>{const Jr=this.urlHandlingStrategy.merge(it.url,this.rawUrlTree),Nn={skipLocationChange:Y.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Na(Y.source)};this.scheduleNavigation(Jr,"imperative",null,Nn,{resolve:Y.resolve,reject:Y.reject,promise:Y.promise})},0):Y.resolve(!1)}else{this.restoreHistory(Y,!0);const Qt=new Bn(Y.id,this.serializeUrl(Y.extractedUrl),it);U.next(Qt);try{Y.resolve(this.errorHandler(it))}catch($n){Y.reject($n)}}return ce.E}))}))}resetRootComponentType(S){this.rootComponentType=S,this.routerState.root.component=this.rootComponentType}setTransition(S){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),S))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(S=>{const U="popstate"===S.type?"popstate":"hashchange";"popstate"===U&&setTimeout(()=>{var Y;const ue={replaceUrl:!0},$e=(null===(Y=S.state)||void 0===Y?void 0:Y.navigationId)?S.state:null;if($e){const Qt=Object.assign({},$e);delete Qt.navigationId,delete Qt.\u0275routerPageId,0!==Object.keys(Qt).length&&(ue.state=Qt)}const it=this.parseUrl(S.url);this.scheduleNavigation(it,U,$e,ue)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(S){this.events.next(S)}resetConfig(S){de(S),this.config=S.map(zt),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(S,U={}){const{relativeTo:Y,queryParams:ue,fragment:$e,queryParamsHandling:it,preserveFragment:Qt}=U,$n=Y||this.routerState.root,Jr=Qt?this.currentUrlTree.fragment:$e;let Nn=null;switch(it){case"merge":Nn=Object.assign(Object.assign({},this.currentUrlTree.queryParams),ue);break;case"preserve":Nn=this.currentUrlTree.queryParams;break;default:Nn=ue||null}return null!==Nn&&(Nn=this.removeEmptyProps(Nn)),function Qr(M,x,S,U,Y){if(0===S.length)return ys(x.root,x.root,x.root,U,Y);const ue=function no(M){if("string"==typeof M[0]&&1===M.length&&"/"===M[0])return new Ni(!0,0,M);let x=0,S=!1;const U=M.reduce((Y,ue,$e)=>{if("object"==typeof ue&&null!=ue){if(ue.outlets){const it={};return Gn(ue.outlets,(Qt,$n)=>{it[$n]="string"==typeof Qt?Qt.split("/"):Qt}),[...Y,{outlets:it}]}if(ue.segmentPath)return[...Y,ue.segmentPath]}return"string"!=typeof ue?[...Y,ue]:0===$e?(ue.split("/").forEach((it,Qt)=>{0==Qt&&"."===it||(0==Qt&&""===it?S=!0:".."===it?x++:""!=it&&Y.push(it))}),Y):[...Y,ue]},[]);return new Ni(S,x,U)}(S);if(ue.toRoot())return ys(x.root,x.root,new Wn([],{}),U,Y);const $e=function Pr(M,x,S){if(M.isAbsolute)return new Ts(x.root,!0,0);if(-1===S.snapshot._lastPathIndex){const ue=S.snapshot._urlSegment;return new Ts(ue,ue===x.root,0)}const U=ui(M.commands[0])?0:1;return function $r(M,x,S){let U=M,Y=x,ue=S;for(;ue>Y;){if(ue-=Y,U=U.parent,!U)throw new Error("Invalid number of '../'");Y=U.segments.length}return new Ts(U,!1,Y-ue)}(S.snapshot._urlSegment,S.snapshot._lastPathIndex+U,M.numberOfDoubleDots)}(ue,x,M),it=$e.processChildren?Or($e.segmentGroup,$e.index,ue.commands):hi($e.segmentGroup,$e.index,ue.commands);return ys(x.root,$e.segmentGroup,it,U,Y)}($n,this.currentUrlTree,S,Nn,null!=Jr?Jr:null)}navigateByUrl(S,U={skipLocationChange:!1}){const Y=Ri(S)?S:this.parseUrl(S),ue=this.urlHandlingStrategy.merge(Y,this.rawUrlTree);return this.scheduleNavigation(ue,"imperative",null,U)}navigate(S,U={skipLocationChange:!1}){return function ws(M){for(let x=0;x<M.length;x++){const S=M[x];if(null==S)throw new Error(`The requested path contains ${S} segment at index ${x}`)}}(S),this.navigateByUrl(this.createUrlTree(S,U),U)}serializeUrl(S){return this.urlSerializer.serialize(S)}parseUrl(S){let U;try{U=this.urlSerializer.parse(S)}catch(Y){U=this.malformedUriErrorHandler(Y,this.urlSerializer,S)}return U}isActive(S,U){let Y;if(Y=!0===U?Object.assign({},Zo):!1===U?Object.assign({},ka):U,Ri(S))return Dt(this.currentUrlTree,S,Y);const ue=this.parseUrl(S);return Dt(this.currentUrlTree,ue,Y)}removeEmptyProps(S){return Object.keys(S).reduce((U,Y)=>{const ue=S[Y];return null!=ue&&(U[Y]=ue),U},{})}processNavigations(){this.navigations.subscribe(S=>{this.navigated=!0,this.lastSuccessfulId=S.id,this.currentPageId=S.targetPageId,this.events.next(new Rr(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,S.resolve(!0)},S=>{this.console.warn(`Unhandled Navigation Error: ${S}`)})}scheduleNavigation(S,U,Y,ue,$e){var it,Qt;if(this.disposed)return Promise.resolve(!1);let $n,Jr,Nn;$e?($n=$e.resolve,Jr=$e.reject,Nn=$e.promise):Nn=new Promise((Ir,Ks)=>{$n=Ir,Jr=Ks});const li=++this.navigationId;let ci;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(Y=this.location.getState()),ci=Y&&Y.\u0275routerPageId?Y.\u0275routerPageId:ue.replaceUrl||ue.skipLocationChange?null!==(it=this.browserPageId)&&void 0!==it?it:0:(null!==(Qt=this.browserPageId)&&void 0!==Qt?Qt:0)+1):ci=0,this.setTransition({id:li,targetPageId:ci,source:U,restoredState:Y,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:S,extras:ue,resolve:$n,reject:Jr,promise:Nn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Nn.catch(Ir=>Promise.reject(Ir))}setBrowserUrl(S,U){const Y=this.urlSerializer.serialize(S),ue=Object.assign(Object.assign({},U.extras.state),this.generateNgRouterState(U.id,U.targetPageId));this.location.isCurrentPathEqualTo(Y)||U.extras.replaceUrl?this.location.replaceState(Y,"",ue):this.location.go(Y,"",ue)}restoreHistory(S,U=!1){var Y,ue;if("computed"===this.canceledNavigationResolution){const $e=this.currentPageId-S.targetPageId;"popstate"!==S.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(Y=this.currentNavigation)||void 0===Y?void 0:Y.finalUrl)||0===$e?this.currentUrlTree===(null===(ue=this.currentNavigation)||void 0===ue?void 0:ue.finalUrl)&&0===$e&&(this.resetState(S),this.browserUrlTree=S.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo($e)}else"replace"===this.canceledNavigationResolution&&(U&&this.resetState(S),this.resetUrlToCurrentUrlTree())}resetState(S){this.routerState=S.currentRouterState,this.currentUrlTree=S.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,S.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(S,U){const Y=new cr(S.id,this.serializeUrl(S.extractedUrl),U);this.triggerEvent(Y),S.resolve(!1)}generateNgRouterState(S,U){return"computed"===this.canceledNavigationResolution?{navigationId:S,\u0275routerPageId:U}:{navigationId:S}}}return M.\u0275fac=function(S){a.$Z()},M.\u0275prov=a.Yz7({token:M,factory:M.\u0275fac}),M})();function Na(M){return"imperative"!==M}let Xo=(()=>{class M{constructor(S,U,Y,ue,$e){this.router=S,this.route=U,this.tabIndexAttribute=Y,this.renderer=ue,this.el=$e,this.commands=null,this.onChanges=new dt.xQ,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(S){if(null!=this.tabIndexAttribute)return;const U=this.renderer,Y=this.el.nativeElement;null!==S?U.setAttribute(Y,"tabindex",S):U.removeAttribute(Y,"tabindex")}ngOnChanges(S){this.onChanges.next(this)}set routerLink(S){null!=S?(this.commands=Array.isArray(S)?S:[S],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const S={skipLocationChange:Qo(this.skipLocationChange),replaceUrl:Qo(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,S),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Qo(this.preserveFragment)})}}return M.\u0275fac=function(S){return new(S||M)(a.Y36(As),a.Y36(Ot),a.$8M("tabindex"),a.Y36(a.Qsj),a.Y36(a.SBq))},M.\u0275dir=a.lG2({type:M,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(S,U){1&S&&a.NdJ("click",function(){return U.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[a.TTD]}),M})(),Bs=(()=>{class M{constructor(S,U,Y){this.router=S,this.route=U,this.locationStrategy=Y,this.commands=null,this.href=null,this.onChanges=new dt.xQ,this.subscription=S.events.subscribe(ue=>{ue instanceof Rr&&this.updateTargetUrlAndHref()})}set routerLink(S){this.commands=null!=S?Array.isArray(S)?S:[S]:null}ngOnChanges(S){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(S,U,Y,ue,$e){if(0!==S||U||Y||ue||$e||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const it={skipLocationChange:Qo(this.skipLocationChange),replaceUrl:Qo(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,it),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Qo(this.preserveFragment)})}}return M.\u0275fac=function(S){return new(S||M)(a.Y36(As),a.Y36(Ot),a.Y36(Qn.S$))},M.\u0275dir=a.lG2({type:M,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(S,U){1&S&&a.NdJ("click",function(ue){return U.onClick(ue.button,ue.ctrlKey,ue.shiftKey,ue.altKey,ue.metaKey)}),2&S&&a.uIk("target",U.target)("href",U.href,a.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[a.TTD]}),M})();function Qo(M){return""===M||!!M}class da{}class xs{preload(x,S){return S().pipe(Pt(()=>(0,Ve.of)(null)))}}class Fa{preload(x,S){return(0,Ve.of)(null)}}let jl=(()=>{class M{constructor(S,U,Y,ue){this.router=S,this.injector=Y,this.preloadingStrategy=ue,this.loader=new Ns(Y,U,Qt=>S.triggerEvent(new en(Qt)),Qt=>S.triggerEvent(new kt(Qt)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,me.h)(S=>S instanceof Rr),(0,bn.b)(()=>this.preload())).subscribe(()=>{})}preload(){const S=this.injector.get(a.h0i);return this.processRoutes(S,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(S,U){const Y=[];for(const ue of U)if(ue.loadChildren&&!ue.canLoad&&ue._loadedConfig){const $e=ue._loadedConfig;Y.push(this.processRoutes($e.module,$e.routes))}else ue.loadChildren&&!ue.canLoad?Y.push(this.preloadConfig(S,ue)):ue.children&&Y.push(this.processRoutes(S,ue.children));return(0,ne.D)(Y).pipe((0,Zr.J)(),(0,Ce.U)(ue=>{}))}preloadConfig(S,U){return this.preloadingStrategy.preload(U,()=>(U._loadedConfig?(0,Ve.of)(U._loadedConfig):this.loader.load(S.injector,U)).pipe((0,_n.zg)(ue=>(U._loadedConfig=ue,this.processRoutes(ue.module,ue.routes)))))}}return M.\u0275fac=function(S){return new(S||M)(a.LFG(As),a.LFG(a.Sil),a.LFG(a.zs3),a.LFG(da))},M.\u0275prov=a.Yz7({token:M,factory:M.\u0275fac}),M})(),Ys=(()=>{class M{constructor(S,U,Y={}){this.router=S,this.viewportScroller=U,this.options=Y,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},Y.scrollPositionRestoration=Y.scrollPositionRestoration||"disabled",Y.anchorScrolling=Y.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(S=>{S instanceof on?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=S.navigationTrigger,this.restoredId=S.restoredState?S.restoredState.navigationId:0):S instanceof Rr&&(this.lastId=S.id,this.scheduleScrollEvent(S,this.router.parseUrl(S.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(S=>{S instanceof Mn&&(S.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(S.position):S.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(S.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(S,U){this.router.triggerEvent(new Mn(S,"popstate"===this.lastSource?this.store[this.restoredId]:null,U))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return M.\u0275fac=function(S){a.$Z()},M.\u0275prov=a.Yz7({token:M,factory:M.\u0275fac}),M})();const xi=new a.OlP("ROUTER_CONFIGURATION"),To=new a.OlP("ROUTER_FORROOT_GUARD"),Fo=[Qn.Ye,{provide:Yr,useClass:Kr},{provide:As,useFactory:function ln(M,x,S,U,Y,ue,$e={},it,Qt){const $n=new As(null,M,x,S,U,Y,un(ue));return it&&($n.urlHandlingStrategy=it),Qt&&($n.routeReuseStrategy=Qt),function Pi(M,x){M.errorHandler&&(x.errorHandler=M.errorHandler),M.malformedUriErrorHandler&&(x.malformedUriErrorHandler=M.malformedUriErrorHandler),M.onSameUrlNavigation&&(x.onSameUrlNavigation=M.onSameUrlNavigation),M.paramsInheritanceStrategy&&(x.paramsInheritanceStrategy=M.paramsInheritanceStrategy),M.relativeLinkResolution&&(x.relativeLinkResolution=M.relativeLinkResolution),M.urlUpdateStrategy&&(x.urlUpdateStrategy=M.urlUpdateStrategy),M.canceledNavigationResolution&&(x.canceledNavigationResolution=M.canceledNavigationResolution)}($e,$n),$e.enableTracing&&$n.events.subscribe(Jr=>{var Nn,li;null===(Nn=console.group)||void 0===Nn||Nn.call(console,`Router Event: ${Jr.constructor.name}`),console.log(Jr.toString()),console.log(Jr),null===(li=console.groupEnd)||void 0===li||li.call(console)}),$n},deps:[Yr,jr,Qn.Ye,a.zs3,a.Sil,Do,xi,[class Ho{},new a.FiY],[Oa,new a.FiY]]},jr,{provide:Ot,useFactory:function io(M){return M.routerState.root},deps:[As]},jl,Fa,xs,{provide:xi,useValue:{enableTracing:!1}}];function dl(){return new a.PXZ("Router",As)}let os=(()=>{class M{constructor(S,U){}static forRoot(S,U){return{ngModule:M,providers:[Fo,gi(S),{provide:To,useFactory:hl,deps:[[As,new a.FiY,new a.tp0]]},{provide:xi,useValue:U||{}},{provide:Qn.S$,useFactory:Go,deps:[Qn.lw,[new a.tBr(Qn.mr),new a.FiY],xi]},{provide:Ys,useFactory:go,deps:[As,Qn.EM,xi]},{provide:da,useExisting:U&&U.preloadingStrategy?U.preloadingStrategy:Fa},{provide:a.PXZ,multi:!0,useFactory:dl},[Cs,{provide:a.ip1,multi:!0,useFactory:Kn,deps:[Cs]},{provide:ha,useFactory:ur,deps:[Cs]},{provide:a.tb,multi:!0,useExisting:ha}]]}}static forChild(S){return{ngModule:M,providers:[gi(S)]}}}return M.\u0275fac=function(S){return new(S||M)(a.LFG(To,8),a.LFG(As,8))},M.\u0275mod=a.oAB({type:M}),M.\u0275inj=a.cJS({}),M})();function go(M,x,S){return S.scrollOffset&&x.setOffset(S.scrollOffset),new Ys(M,x,S)}function Go(M,x,S={}){return S.useHash?new Qn.Do(M,x):new Qn.b0(M,x)}function hl(M){return"guarded"}function gi(M){return[{provide:a.deG,multi:!0,useValue:M},{provide:Do,multi:!0,useValue:M}]}let Cs=(()=>{class M{constructor(S){this.injector=S,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new dt.xQ}appInitializer(){return this.injector.get(Qn.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let U=null;const Y=new Promise(it=>U=it),ue=this.injector.get(As),$e=this.injector.get(xi);return"disabled"===$e.initialNavigation?(ue.setUpLocationChangeListener(),U(!0)):"enabled"===$e.initialNavigation||"enabledBlocking"===$e.initialNavigation?(ue.hooks.afterPreactivation=()=>this.initNavigation?(0,Ve.of)(null):(this.initNavigation=!0,U(!0),this.resultOfPreactivationDone),ue.initialNavigation()):U(!0),Y})}bootstrapListener(S){const U=this.injector.get(xi),Y=this.injector.get(jl),ue=this.injector.get(Ys),$e=this.injector.get(As),it=this.injector.get(a.z2F);S===it.components[0]&&(("enabledNonBlocking"===U.initialNavigation||void 0===U.initialNavigation)&&$e.initialNavigation(),Y.setUpPreloading(),ue.init(),$e.resetRootComponentType(it.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return M.\u0275fac=function(S){return new(S||M)(a.LFG(a.zs3))},M.\u0275prov=a.Yz7({token:M,factory:M.\u0275fac}),M})();function Kn(M){return M.appInitializer.bind(M)}function ur(M){return M.bootstrapListener.bind(M)}const ha=new a.OlP("Router Initializer")},3942:(dn,ft,L)=>{"use strict";L.d(ft,{Z:()=>Ve});var a=L(2090),J=L(4859),Z=L(9681),We=L(1877);class Ne{constructor(Fe,Be){this._delegate=Fe,this.firebase=Be,(0,Z._addComponent)(Fe,new J.wA("app-compat",()=>this,"PUBLIC")),this.container=Fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Fe){this._delegate.automaticDataCollectionEnabled=Fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Fe=>{this._delegate.checkDestroyed(),Fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Z.deleteApp)(this._delegate)))}_getService(Fe,Be=Z._DEFAULT_ENTRY_NAME){var Et;this._delegate.checkDestroyed();const we=this._delegate.container.getProvider(Fe);return!we.isInitialized()&&"EXPLICIT"===(null===(Et=we.getComponent())||void 0===Et?void 0:Et.instantiationMode)&&we.initialize(),we.getImmediate({identifier:Be})}_removeServiceInstance(Fe,Be=Z._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Fe).clearInstance(Be)}_addComponent(Fe){(0,Z._addComponent)(this._delegate,Fe)}_addOrOverwriteComponent(Fe){(0,Z._addOrOverwriteComponent)(this._delegate,Fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ae=new a.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),oe=function Ie(){const Ee=function De(Ee){const Fe={},Be={__esModule:!0,initializeApp:function dt(Tt,me={}){const Oe=Z.initializeApp(Tt,me);if((0,a.r3)(Fe,Oe.name))return Fe[Oe.name];const Se=new Ee(Oe,Be);return Fe[Oe.name]=Se,Se},app:we,registerVersion:Z.registerVersion,setLogLevel:Z.setLogLevel,onLog:Z.onLog,apps:null,SDK_VERSION:Z.SDK_VERSION,INTERNAL:{registerComponent:function Pt(Tt){const me=Tt.name,Oe=me.replace("-compat","");if(Z._registerComponent(Tt)&&"PUBLIC"===Tt.type){const Se=(fe=we())=>{if("function"!=typeof fe[Oe])throw Ae.create("invalid-app-argument",{appName:me});return fe[Oe]()};void 0!==Tt.serviceProps&&(0,a.ZB)(Se,Tt.serviceProps),Be[Oe]=Se,Ee.prototype[Oe]=function(...fe){return this._getService.bind(this,me).apply(this,Tt.multipleInstances?fe:[])}}return"PUBLIC"===Tt.type?Be[Oe]:null},removeApp:function Et(Tt){delete Fe[Tt]},useAsService:function Xe(Tt,me){return"serverAuth"===me?null:me},modularAPIs:Z}};function we(Tt){if(!(0,a.r3)(Fe,Tt=Tt||Z._DEFAULT_ENTRY_NAME))throw Ae.create("no-app",{appName:Tt});return Fe[Tt]}return Be.default=Be,Object.defineProperty(Be,"apps",{get:function St(){return Object.keys(Fe).map(Tt=>Fe[Tt])}}),we.App=Ee,Be}(Ne);return Ee.INTERNAL=Object.assign(Object.assign({},Ee.INTERNAL),{createFirebaseNamespace:Ie,extendNamespace:function Fe(Be){(0,a.ZB)(Ee,Be)},createSubscribe:a.ne,ErrorFactory:a.LL,deepExtend:a.ZB}),Ee}(),ve=new We.Yd("@firebase/app-compat");if((0,a.jU)()&&void 0!==self.firebase){ve.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ee=self.firebase.SDK_VERSION;Ee&&Ee.indexOf("LITE")>=0&&ve.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ve=oe;!function Ke(Ee){(0,Z.registerVersion)("@firebase/app-compat","0.1.26",Ee)}()},9681:(dn,ft,L)=>{"use strict";L.r(ft),L.d(ft,{FirebaseError:()=>We.ZR,SDK_VERSION:()=>qn,_DEFAULT_ENTRY_NAME:()=>wt,_addComponent:()=>Ce,_addOrOverwriteComponent:()=>tt,_apps:()=>q,_clearComponents:()=>bn,_components:()=>bt,_getProvider:()=>Ct,_registerComponent:()=>Gt,_removeServiceInstance:()=>sn,deleteApp:()=>on,getApp:()=>Qn,getApps:()=>Yn,initializeApp:()=>Zr,onLog:()=>Bn,registerVersion:()=>cr,setLogLevel:()=>nr});var a=L(5861),J=L(4859),Z=L(1877),We=L(2090),Ne=L(8766);class ae{constructor(ht){this.container=ht}getPlatformInfoString(){return this.container.getProviders().map(tn=>{if(function Ae(Ge){const ht=Ge.getComponent();return"VERSION"===(null==ht?void 0:ht.type)}(tn)){const un=tn.getImmediate();return`${un.library}/${un.version}`}return null}).filter(tn=>tn).join(" ")}}const De="@firebase/app",oe=new Z.Yd("@firebase/app"),wt="[DEFAULT]",Ye={[De]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},q=new Map,bt=new Map;function Ce(Ge,ht){try{Ge.container.addComponent(ht)}catch(tn){oe.debug(`Component ${ht.name} failed to register with FirebaseApp ${Ge.name}`,tn)}}function tt(Ge,ht){Ge.container.addOrOverwriteComponent(ht)}function Gt(Ge){const ht=Ge.name;if(bt.has(ht))return oe.debug(`There were multiple attempts to register component ${ht}.`),!1;bt.set(ht,Ge);for(const tn of q.values())Ce(tn,Ge);return!0}function Ct(Ge,ht){const tn=Ge.container.getProvider("heartbeat").getImmediate({optional:!0});return tn&&tn.triggerHeartbeat(),Ge.container.getProvider(ht)}function sn(Ge,ht,tn=wt){Ct(Ge,ht).clearInstance(tn)}function bn(){bt.clear()}const _n=new We.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class gn{constructor(ht,tn,un){this._isDeleted=!1,this._options=Object.assign({},ht),this._config=Object.assign({},tn),this._name=tn.name,this._automaticDataCollectionEnabled=tn.automaticDataCollectionEnabled,this._container=un,this.container.addComponent(new J.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ht){this.checkDestroyed(),this._automaticDataCollectionEnabled=ht}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ht){this._isDeleted=ht}checkDestroyed(){if(this.isDeleted)throw _n.create("app-deleted",{appName:this._name})}}const qn="9.8.2";function Zr(Ge,ht={}){"object"!=typeof ht&&(ht={name:ht});const tn=Object.assign({name:wt,automaticDataCollectionEnabled:!1},ht),un=tn.name;if("string"!=typeof un||!un)throw _n.create("bad-app-name",{appName:String(un)});const vn=q.get(un);if(vn){if((0,We.vZ)(Ge,vn.options)&&(0,We.vZ)(tn,vn.config))return vn;throw _n.create("duplicate-app",{appName:un})}const Vn=new J.H0(un);for(const An of bt.values())Vn.addComponent(An);const Gn=new gn(Ge,tn,Vn);return q.set(un,Gn),Gn}function Qn(Ge=wt){const ht=q.get(Ge);if(!ht)throw _n.create("no-app",{appName:Ge});return ht}function Yn(){return Array.from(q.values())}function on(Ge){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,a.Z)(function*(Ge){const ht=Ge.name;q.has(ht)&&(q.delete(ht),yield Promise.all(Ge.container.getProviders().map(tn=>tn.delete())),Ge.isDeleted=!0)})).apply(this,arguments)}function cr(Ge,ht,tn){var un;let vn=null!==(un=Ye[Ge])&&void 0!==un?un:Ge;tn&&(vn+=`-${tn}`);const Vn=vn.match(/\s|\//),Gn=ht.match(/\s|\//);if(Vn||Gn){const An=[`Unable to register library "${vn}" with version "${ht}":`];return Vn&&An.push(`library name "${vn}" contains illegal characters (whitespace or "/")`),Vn&&Gn&&An.push("and"),Gn&&An.push(`version name "${ht}" contains illegal characters (whitespace or "/")`),void oe.warn(An.join(" "))}Gt(new J.wA(`${vn}-version`,()=>({library:vn,version:ht}),"VERSION"))}function Bn(Ge,ht){if(null!==Ge&&"function"!=typeof Ge)throw _n.create("invalid-log-argument");(0,Z.Am)(Ge,ht)}function nr(Ge){(0,Z.Ub)(Ge)}const He="firebase-heartbeat-store";let Te=null;function en(){return Te||(Te=(0,Ne.X3)("firebase-heartbeat-database",1,{upgrade:(Ge,ht)=>{0===ht&&Ge.createObjectStore(He)}}).catch(Ge=>{throw _n.create("storage-open",{originalErrorMessage:Ge.message})})),Te}function qt(){return(qt=(0,a.Z)(function*(Ge){try{return(yield en()).transaction(He).objectStore(He).get(Jn(Ge))}catch(ht){throw _n.create("storage-get",{originalErrorMessage:ht.message})}})).apply(this,arguments)}function cn(Ge,ht){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,a.Z)(function*(Ge,ht){try{const un=(yield en()).transaction(He,"readwrite");return yield un.objectStore(He).put(ht,Jn(Ge)),un.done}catch(tn){throw _n.create("storage-set",{originalErrorMessage:tn.message})}})).apply(this,arguments)}function Jn(Ge){return`${Ge.name}!${Ge.options.appId}`}class vr{constructor(ht){this.container=ht,this._heartbeatsCache=null;const tn=this.container.getProvider("app").getImmediate();this._storage=new qe(tn),this._heartbeatsCachePromise=this._storage.read().then(un=>(this._heartbeatsCache=un,un))}triggerHeartbeat(){var ht=this;return(0,a.Z)(function*(){const un=ht.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),vn=Hn();if(null===ht._heartbeatsCache&&(ht._heartbeatsCache=yield ht._heartbeatsCachePromise),ht._heartbeatsCache.lastSentHeartbeatDate!==vn&&!ht._heartbeatsCache.heartbeats.some(Vn=>Vn.date===vn))return ht._heartbeatsCache.heartbeats.push({date:vn,agent:un}),ht._heartbeatsCache.heartbeats=ht._heartbeatsCache.heartbeats.filter(Vn=>{const Gn=new Date(Vn.date).valueOf();return Date.now()-Gn<=2592e6}),ht._storage.overwrite(ht._heartbeatsCache)})()}getHeartbeatsHeader(){var ht=this;return(0,a.Z)(function*(){if(null===ht._heartbeatsCache&&(yield ht._heartbeatsCachePromise),null===ht._heartbeatsCache||0===ht._heartbeatsCache.heartbeats.length)return"";const tn=Hn(),{heartbeatsToSend:un,unsentEntries:vn}=function xe(Ge,ht=1024){const tn=[];let un=Ge.slice();for(const vn of Ge){const Vn=tn.find(Gn=>Gn.agent===vn.agent);if(Vn){if(Vn.dates.push(vn.date),rt(tn)>ht){Vn.dates.pop();break}}else if(tn.push({agent:vn.agent,dates:[vn.date]}),rt(tn)>ht){tn.pop();break}un=un.slice(1)}return{heartbeatsToSend:tn,unsentEntries:un}}(ht._heartbeatsCache.heartbeats),Vn=(0,We.L)(JSON.stringify({version:2,heartbeats:un}));return ht._heartbeatsCache.lastSentHeartbeatDate=tn,vn.length>0?(ht._heartbeatsCache.heartbeats=vn,yield ht._storage.overwrite(ht._heartbeatsCache)):(ht._heartbeatsCache.heartbeats=[],ht._storage.overwrite(ht._heartbeatsCache)),Vn})()}}function Hn(){return(new Date).toISOString().substring(0,10)}class qe{constructor(ht){this.app=ht,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,a.Z)(function*(){return!!(0,We.hl)()&&(0,We.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ht=this;return(0,a.Z)(function*(){return(yield ht._canUseIndexedDBPromise)&&(yield function kt(Ge){return qt.apply(this,arguments)}(ht.app))||{heartbeats:[]}})()}overwrite(ht){var tn=this;return(0,a.Z)(function*(){var un;if(yield tn._canUseIndexedDBPromise){const Vn=yield tn.read();return cn(tn.app,{lastSentHeartbeatDate:null!==(un=ht.lastSentHeartbeatDate)&&void 0!==un?un:Vn.lastSentHeartbeatDate,heartbeats:ht.heartbeats})}})()}add(ht){var tn=this;return(0,a.Z)(function*(){var un;if(yield tn._canUseIndexedDBPromise){const Vn=yield tn.read();return cn(tn.app,{lastSentHeartbeatDate:null!==(un=ht.lastSentHeartbeatDate)&&void 0!==un?un:Vn.lastSentHeartbeatDate,heartbeats:[...Vn.heartbeats,...ht.heartbeats]})}})()}}function rt(Ge){return(0,We.L)(JSON.stringify({version:2,heartbeats:Ge})).length}!function Lt(Ge){Gt(new J.wA("platform-logger",ht=>new ae(ht),"PRIVATE")),Gt(new J.wA("heartbeat",ht=>new vr(ht),"PRIVATE")),cr(De,"0.7.25",Ge),cr(De,"0.7.25","esm2017"),cr("fire-js","")}("")},4859:(dn,ft,L)=>{"use strict";L.d(ft,{wA:()=>Z,H0:()=>De,zt:()=>Ne});var a=L(5861),J=L(2090);class Z{constructor(oe,ve,ne){this.name=oe,this.instanceFactory=ve,this.type=ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(oe){return this.instantiationMode=oe,this}setMultipleInstances(oe){return this.multipleInstances=oe,this}setServiceProps(oe){return this.serviceProps=oe,this}setInstanceCreatedCallback(oe){return this.onInstanceCreated=oe,this}}const We="[DEFAULT]";class Ne{constructor(oe,ve){this.name=oe,this.container=ve,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(oe){const ve=this.normalizeInstanceIdentifier(oe);if(!this.instancesDeferred.has(ve)){const ne=new J.BH;if(this.instancesDeferred.set(ve,ne),this.isInitialized(ve)||this.shouldAutoInitialize())try{const ce=this.getOrInitializeService({instanceIdentifier:ve});ce&&ne.resolve(ce)}catch(ce){}}return this.instancesDeferred.get(ve).promise}getImmediate(oe){var ve;const ne=this.normalizeInstanceIdentifier(null==oe?void 0:oe.identifier),ce=null!==(ve=null==oe?void 0:oe.optional)&&void 0!==ve&&ve;if(!this.isInitialized(ne)&&!this.shouldAutoInitialize()){if(ce)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ne})}catch(Ke){if(ce)return null;throw Ke}}getComponent(){return this.component}setComponent(oe){if(oe.name!==this.name)throw Error(`Mismatching Component ${oe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=oe,this.shouldAutoInitialize()){if(function Ae(Ie){return"EAGER"===Ie.instantiationMode}(oe))try{this.getOrInitializeService({instanceIdentifier:We})}catch(ve){}for(const[ve,ne]of this.instancesDeferred.entries()){const ce=this.normalizeInstanceIdentifier(ve);try{const Ke=this.getOrInitializeService({instanceIdentifier:ce});ne.resolve(Ke)}catch(Ke){}}}}clearInstance(oe=We){this.instancesDeferred.delete(oe),this.instancesOptions.delete(oe),this.instances.delete(oe)}delete(){var oe=this;return(0,a.Z)(function*(){const ve=Array.from(oe.instances.values());yield Promise.all([...ve.filter(ne=>"INTERNAL"in ne).map(ne=>ne.INTERNAL.delete()),...ve.filter(ne=>"_delete"in ne).map(ne=>ne._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(oe=We){return this.instances.has(oe)}getOptions(oe=We){return this.instancesOptions.get(oe)||{}}initialize(oe={}){const{options:ve={}}=oe,ne=this.normalizeInstanceIdentifier(oe.instanceIdentifier);if(this.isInitialized(ne))throw Error(`${this.name}(${ne}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ce=this.getOrInitializeService({instanceIdentifier:ne,options:ve});for(const[Ke,Ve]of this.instancesDeferred.entries())ne===this.normalizeInstanceIdentifier(Ke)&&Ve.resolve(ce);return ce}onInit(oe,ve){var ne;const ce=this.normalizeInstanceIdentifier(ve),Ke=null!==(ne=this.onInitCallbacks.get(ce))&&void 0!==ne?ne:new Set;Ke.add(oe),this.onInitCallbacks.set(ce,Ke);const Ve=this.instances.get(ce);return Ve&&oe(Ve,ce),()=>{Ke.delete(oe)}}invokeOnInitCallbacks(oe,ve){const ne=this.onInitCallbacks.get(ve);if(ne)for(const ce of ne)try{ce(oe,ve)}catch(Ke){}}getOrInitializeService({instanceIdentifier:oe,options:ve={}}){let ne=this.instances.get(oe);if(!ne&&this.component&&(ne=this.component.instanceFactory(this.container,{instanceIdentifier:(Ie=oe,Ie===We?void 0:Ie),options:ve}),this.instances.set(oe,ne),this.instancesOptions.set(oe,ve),this.invokeOnInitCallbacks(ne,oe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,oe,ne)}catch(ce){}var Ie;return ne||null}normalizeInstanceIdentifier(oe=We){return this.component?this.component.multipleInstances?oe:We:oe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class De{constructor(oe){this.name=oe,this.providers=new Map}addComponent(oe){const ve=this.getProvider(oe.name);if(ve.isComponentSet())throw new Error(`Component ${oe.name} has already been registered with ${this.name}`);ve.setComponent(oe)}addOrOverwriteComponent(oe){this.getProvider(oe.name).isComponentSet()&&this.providers.delete(oe.name),this.addComponent(oe)}getProvider(oe){if(this.providers.has(oe))return this.providers.get(oe);const ve=new Ne(oe,this);return this.providers.set(oe,ve),ve}getProviders(){return Array.from(this.providers.values())}}},1877:(dn,ft,L)=>{"use strict";L.d(ft,{in:()=>J,Yd:()=>Ae,Ub:()=>De,Am:()=>Ie});const a=[];var J=(()=>{return(oe=J||(J={}))[oe.DEBUG=0]="DEBUG",oe[oe.VERBOSE=1]="VERBOSE",oe[oe.INFO=2]="INFO",oe[oe.WARN=3]="WARN",oe[oe.ERROR=4]="ERROR",oe[oe.SILENT=5]="SILENT",J;var oe})();const Z={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},We=J.INFO,Ne={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},ae=(oe,ve,...ne)=>{if(ve<oe.logLevel)return;const ce=(new Date).toISOString(),Ke=Ne[ve];if(!Ke)throw new Error(`Attempted to log a message with an invalid logType (value: ${ve})`);console[Ke](`[${ce}]  ${oe.name}:`,...ne)};class Ae{constructor(ve){this.name=ve,this._logLevel=We,this._logHandler=ae,this._userLogHandler=null,a.push(this)}get logLevel(){return this._logLevel}set logLevel(ve){if(!(ve in J))throw new TypeError(`Invalid value "${ve}" assigned to \`logLevel\``);this._logLevel=ve}setLogLevel(ve){this._logLevel="string"==typeof ve?Z[ve]:ve}get logHandler(){return this._logHandler}set logHandler(ve){if("function"!=typeof ve)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ve}get userLogHandler(){return this._userLogHandler}set userLogHandler(ve){this._userLogHandler=ve}debug(...ve){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...ve),this._logHandler(this,J.DEBUG,...ve)}log(...ve){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...ve),this._logHandler(this,J.VERBOSE,...ve)}info(...ve){this._userLogHandler&&this._userLogHandler(this,J.INFO,...ve),this._logHandler(this,J.INFO,...ve)}warn(...ve){this._userLogHandler&&this._userLogHandler(this,J.WARN,...ve),this._logHandler(this,J.WARN,...ve)}error(...ve){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...ve),this._logHandler(this,J.ERROR,...ve)}}function De(oe){a.forEach(ve=>{ve.setLogLevel(oe)})}function Ie(oe,ve){for(const ne of a){let ce=null;ve&&ve.level&&(ce=Z[ve.level]),ne.userLogHandler=null===oe?null:(Ke,Ve,...Ee)=>{const Fe=Ee.map(Be=>{if(null==Be)return null;if("string"==typeof Be)return Be;if("number"==typeof Be||"boolean"==typeof Be)return Be.toString();if(Be instanceof Error)return Be.message;try{return JSON.stringify(Be)}catch(Et){return null}}).filter(Be=>Be).join(" ");Ve>=(null!=ce?ce:Ke.logLevel)&&oe({level:J[Ve].toLowerCase(),message:Fe,args:Ee,type:Ke.name})}}}},8766:(dn,ft,L)=>{"use strict";L.d(ft,{Lj:()=>dt,X3:()=>we});var a=L(5861);let Z,We;const Ae=new WeakMap,De=new WeakMap,Ie=new WeakMap,oe=new WeakMap,ve=new WeakMap;let Ke={get(me,Oe,Se){if(me instanceof IDBTransaction){if("done"===Oe)return De.get(me);if("objectStoreNames"===Oe)return me.objectStoreNames||Ie.get(me);if("store"===Oe)return Se.objectStoreNames[1]?void 0:Se.objectStore(Se.objectStoreNames[0])}return Be(me[Oe])},set:(me,Oe,Se)=>(me[Oe]=Se,!0),has:(me,Oe)=>me instanceof IDBTransaction&&("done"===Oe||"store"===Oe)||Oe in me};function Fe(me){return"function"==typeof me?function Ee(me){return me!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ae(){return We||(We=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(me)?function(...Oe){return me.apply(Et(this),Oe),Be(Ae.get(this))}:function(...Oe){return Be(me.apply(Et(this),Oe))}:function(Oe,...Se){const fe=me.call(Et(this),Oe,...Se);return Ie.set(fe,Oe.sort?Oe.sort():[Oe]),Be(fe)}}(me):(me instanceof IDBTransaction&&function ce(me){if(De.has(me))return;const Oe=new Promise((Se,fe)=>{const ye=()=>{me.removeEventListener("complete",je),me.removeEventListener("error",Ze),me.removeEventListener("abort",Ze)},je=()=>{Se(),ye()},Ze=()=>{fe(me.error||new DOMException("AbortError","AbortError")),ye()};me.addEventListener("complete",je),me.addEventListener("error",Ze),me.addEventListener("abort",Ze)});De.set(me,Oe)}(me),((me,Oe)=>Oe.some(Se=>me instanceof Se))(me,function Ne(){return Z||(Z=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(me,Ke):me)}function Be(me){if(me instanceof IDBRequest)return function ne(me){const Oe=new Promise((Se,fe)=>{const ye=()=>{me.removeEventListener("success",je),me.removeEventListener("error",Ze)},je=()=>{Se(Be(me.result)),ye()},Ze=()=>{fe(me.error),ye()};me.addEventListener("success",je),me.addEventListener("error",Ze)});return Oe.then(Se=>{Se instanceof IDBCursor&&Ae.set(Se,me)}).catch(()=>{}),ve.set(Oe,me),Oe}(me);if(oe.has(me))return oe.get(me);const Oe=Fe(me);return Oe!==me&&(oe.set(me,Oe),ve.set(Oe,me)),Oe}const Et=me=>ve.get(me);function we(me,Oe,{blocked:Se,upgrade:fe,blocking:ye,terminated:je}={}){const Ze=indexedDB.open(me,Oe),Mt=Be(Ze);return fe&&Ze.addEventListener("upgradeneeded",Jt=>{fe(Be(Ze.result),Jt.oldVersion,Jt.newVersion,Be(Ze.transaction))}),Se&&Ze.addEventListener("blocked",()=>Se()),Mt.then(Jt=>{je&&Jt.addEventListener("close",()=>je()),ye&&Jt.addEventListener("versionchange",()=>ye())}).catch(()=>{}),Mt}function dt(me,{blocked:Oe}={}){const Se=indexedDB.deleteDatabase(me);return Oe&&Se.addEventListener("blocked",()=>Oe()),Be(Se).then(()=>{})}const St=["get","getKey","getAll","getAllKeys","count"],Pt=["put","add","delete","clear"],Xe=new Map;function Tt(me,Oe){if(!(me instanceof IDBDatabase)||Oe in me||"string"!=typeof Oe)return;if(Xe.get(Oe))return Xe.get(Oe);const Se=Oe.replace(/FromIndex$/,""),fe=Oe!==Se,ye=Pt.includes(Se);if(!(Se in(fe?IDBIndex:IDBObjectStore).prototype)||!ye&&!St.includes(Se))return;const je=function(){var Ze=(0,a.Z)(function*(Mt,...Jt){const mt=this.transaction(Mt,ye?"readwrite":"readonly");let wt=mt.store;return fe&&(wt=wt.index(Jt.shift())),(yield Promise.all([wt[Se](...Jt),ye&&mt.done]))[0]});return function(Jt){return Ze.apply(this,arguments)}}();return Xe.set(Oe,je),je}!function Ve(me){Ke=me(Ke)}(me=>$E(UE({},me),{get:(Oe,Se,fe)=>Tt(Oe,Se)||me.get(Oe,Se,fe),has:(Oe,Se)=>!!Tt(Oe,Se)||me.has(Oe,Se)}))},5861:(dn,ft,L)=>{"use strict";function a(Z,We,Ne,ae,Ae,De,Ie){try{var oe=Z[De](Ie),ve=oe.value}catch(ne){return void Ne(ne)}oe.done?We(ve):Promise.resolve(ve).then(ae,Ae)}function J(Z){return function(){var We=this,Ne=arguments;return new Promise(function(ae,Ae){var De=Z.apply(We,Ne);function Ie(ve){a(De,ae,Ae,Ie,oe,"next",ve)}function oe(ve){a(De,ae,Ae,Ie,oe,"throw",ve)}Ie(void 0)})}}L.d(ft,{Z:()=>J})}},dn=>{dn(dn.s=2734)}]);